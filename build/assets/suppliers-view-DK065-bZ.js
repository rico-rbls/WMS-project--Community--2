import{J as Ls,i as $s,r as i,M as Us,l as Ks,al as Ms,b9 as Xe,x as c,ba as Vs,bb as Rs,bc as qs,j as e,C as O,o as J,p as X,U as we,q as L,S as Qe,P as ke,d as D,w as T,v as zs,D as ie,$ as Ze,B as u,y as ne,z as ce,A as de,E as oe,L as o,I as x,F as Fe,O as Hs,a2 as Ws,a1 as Gs,n as Ys,a9 as es,aV as ss,aW as ts,bd as _s,be as Js,bf as Xs}from"./index-CsF_XFvG.js";import{S as Q,a as Z,b as ee,c as se,d as V,T as as,e as rs,f as me,g as R,h as P,i as ls,j as f}from"./sortable-table-head-BRezoDOc.js";import{u as Qs,a as Zs,F as et,B as st,T as tt,E as at,S as rt,P as lt}from"./select-all-banner-DyQZa2KC.js";import{S as it,F as nt}from"./favorite-button-D-mGlmBM.js";import{u as ct}from"./useTableSort-W4dVjRO4.js";import{c as dt}from"./permissions-DeuZZz56.js";import{E as Ae}from"./editable-cell-CtARi4MN.js";import{C as is}from"./circle-check-big-DcLcNTkq.js";import{P as ot}from"./plus-CT0Qz5u4.js";import{A as q,a as ns,D as cs}from"./dollar-sign-DtpNKV41.js";import{T as ue}from"./trash-2-CeMnZtX9.js";import{C as mt}from"./circle-alert-DltoHFeR.js";import{B as De}from"./building-2-Dz-N4qS8.js";import{H as ut}from"./hash-DtttChja.js";import{T as xt}from"./tag-BJgqBZRk.js";import{M as ht}from"./map-pin-QNl4Kao2.js";import{T as ds}from"./trending-up-B0EKwGzs.js";import{S as pt}from"./square-pen-DubH-M6f.js";import"./skeleton-DjnjA-wd.js";import"./circle-check-COKBsGI2.js";const Pe=["Active","Inactive"],Ie=["Electronics","Furniture","Clothing","Food & Beverages","Other"];function Lt({initialOpenDialog:Te,onDialogOpened:Be,initialSupplierId:te,onSupplierDialogOpened:Ee}){const{isFavorite:Oe,getFavoritesByType:Le}=Ls(),{user:ae}=$s(),b=ae?dt(ae.role):!1,xe=ae?.role==="Admin"||ae?.role==="Owner",[$,$e]=i.useState(""),[S,re]=i.useState("all"),[U,Ue]=i.useState(!1),[p,Ke]=i.useState(!1),[z,v]=i.useState(null),[H,os]=i.useState([]),[he,ms]=i.useState([]),[us,Me]=i.useState(!0),[W,G]=i.useState(!1),[pe,B]=i.useState(null),[ge,Y]=i.useState(null),[a,d]=i.useState({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active",country:"",city:"",address:"",purchases:0,payments:0}),je=Us($,300);i.useEffect(()=>{(async()=>{Me(!0);const[s,r,t]=await Promise.all([getSuppliers(),Ks(),Ms()]);v(s),os(r),ms(t),Me(!1)})()},[]),i.useEffect(()=>{Te&&!W&&(G(!0),Be?.())},[Te,Be,W]),i.useEffect(()=>{te&&z&&z.find(r=>r.id===te)&&(Y(te),Ee?.())},[te,z,Ee]);const y=i.useMemo(()=>z??[],[z]),j=i.useMemo(()=>{const s=y.length,r=y.filter(m=>m.status==="Active").length,t=y.filter(m=>m.status==="Inactive").length,l=new Set(y.map(m=>m.category)).size,n=H.length,M=H.reduce((m,h)=>(m[h.supplierId]=(m[h.supplierId]||0)+1,m),{});let _=null;if(Object.keys(M).length>0){const m=Object.entries(M).sort((E,Ce)=>Ce[1]-E[1])[0],h=y.find(E=>E.id===m[0]);h&&(_={id:h.id,name:h.name,count:m[1]})}const _e=H.reduce((m,h)=>(m[h.supplierId]=(m[h.supplierId]||0)+h.totalAmount,m),{});let Je=null;if(Object.keys(_e).length>0){const m=Object.entries(_e).sort((E,Ce)=>Ce[1]-E[1])[0],h=y.find(E=>E.id===m[0]);h&&(Je={id:h.id,name:h.name,value:m[1]})}const Es=he.reduce((m,h)=>(h.supplierId&&(m[h.supplierId]=(m[h.supplierId]||0)+1),m),{}),Os=Object.keys(Es).length;return{totalSuppliers:s,activeSuppliers:r,inactiveSuppliers:t,uniqueCategories:l,totalPurchaseOrders:n,topSupplierByPO:_,topSupplierByValue:Je,suppliersWithProducts:Os}},[y,H,he]),fe=i.useMemo(()=>y.filter(s=>{if(s.archived===!0!==p||U&&!Oe("suppliers",s.id)||S!=="all"&&s.status!==S)return!1;if(je){const t=je.toLowerCase();if(!(s.name.toLowerCase().includes(t)||s.id.toLowerCase().includes(t)||s.category.toLowerCase().includes(t)||s.contact.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)))return!1}return!0}),[y,je,S,U,Oe,p]);function xs(){$e(""),re("all"),Ue(!1),Ke(!1)}async function hs(s){try{const r=await Xs(s);v(t=>(t??[]).map(l=>l.id===s?r:l)),B(null),c.success("Supplier archived successfully")}catch(r){c.error(r?.message||"Failed to archive supplier")}}async function ps(s){try{const r=await _s(s);v(t=>(t??[]).map(l=>l.id===s?r:l)),B(null),c.success("Supplier restored successfully")}catch(r){c.error(r?.message||"Failed to restore supplier")}}async function gs(s){try{await Js(s),v(r=>(r??[]).filter(t=>t.id!==s)),B(null),c.success("Supplier permanently deleted")}catch(r){c.error(r?.message||"Failed to permanently delete supplier")}}const K=s=>{switch(s){case"Active":return"✓";case"Inactive":return"○";default:return"○"}},ve=s=>{switch(s){case"Active":return"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-200";case"Inactive":return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200";default:return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200"}},{sortedData:Ve,sortConfig:C,requestSort:w,getSortDirection:k}=ct(fe),{currentPage:Re,totalPages:js,paginatedData:qe,goToPage:fs,totalItems:vs,itemsPerPage:ys}=Qs(Ve,25),{selectedIds:N,selectedItems:ze,selectionCount:ye,isAllSelected:Ns,isAllPageSelected:bs,isAllPagesSelected:Ss,isPartiallySelected:Cs,hasSelection:Ne,toggleItem:ws,toggleAll:be,selectAllPages:ks,deselectAll:g,isSelected:Fs,totalItemCount:He,pageItemCount:We}=Zs(qe,Ve),[F,I]=i.useState(!1),[As,Ge]=i.useState(!1),[Ds,A]=i.useState(!1);i.useEffect(()=>{g()},[Re,g]),i.useEffect(()=>{const s=r=>{(r.metaKey||r.ctrlKey)&&r.key==="a"&&!W&&!pe&&(r.preventDefault(),be()),r.key==="Escape"&&Ne&&g()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[be,g,Ne,W,pe]);const Se=i.useCallback(async(s,r,t)=>{try{const l={[r]:t},n=await Xe({id:s,...l});v(M=>(M??[]).map(_=>_.id===s?n:_)),c.success(`${r.charAt(0).toUpperCase()+r.slice(1)} updated`)}catch(l){throw c.error(l?.message||"Failed to update"),l}},[v]);i.useCallback(async()=>{I(!0);try{const s=Array.from(N),r=await bulkDeleteSuppliers(s);v(t=>t?.filter(l=>!s.includes(l.id))??[]),r.failedCount>0?c.warning(`Deleted ${r.successCount} suppliers. ${r.failedCount} failed.`):c.success(`Successfully deleted ${r.successCount} supplier${r.successCount!==1?"s":""}`),g()}catch(s){c.error(s?.message||"Failed to delete suppliers")}finally{I(!1),A(!1)}},[N,g]);const Ps=i.useCallback(async()=>{I(!0);try{const s=Array.from(N),r=await Vs(s);v(t=>t&&t.map(l=>s.includes(l.id)?{...l,archived:!0,archivedAt:new Date().toISOString()}:l)),r.failedCount>0?c.warning(`Archived ${r.successCount} suppliers. ${r.failedCount} failed.`):c.success(`Successfully archived ${r.successCount} supplier${r.successCount!==1?"s":""}`),g()}catch(s){c.error(s?.message||"Failed to archive suppliers")}finally{I(!1),A(!1)}},[N,g]),Is=i.useCallback(async()=>{I(!0);try{const s=Array.from(N),r=await Rs(s);v(t=>t&&t.map(l=>s.includes(l.id)?{...l,archived:!1,archivedAt:void 0}:l)),r.failedCount>0?c.warning(`Restored ${r.successCount} suppliers. ${r.failedCount} failed.`):c.success(`Successfully restored ${r.successCount} supplier${r.successCount!==1?"s":""}`),g()}catch(s){c.error(s?.message||"Failed to restore suppliers")}finally{I(!1),A(!1)}},[N,g]),Ye=i.useCallback(async()=>{I(!0);try{const s=Array.from(N),r=await qs(s);v(t=>t?.filter(l=>!s.includes(l.id))??[]),r.failedCount>0?c.warning(`Permanently deleted ${r.successCount} suppliers. ${r.failedCount} failed.`):c.success(`Permanently deleted ${r.successCount} supplier${r.successCount!==1?"s":""}`),g()}catch(s){c.error(s?.message||"Failed to permanently delete suppliers")}finally{I(!1),A(!1)}},[N,g]),Ts=i.useCallback(async s=>{Ge(!0);try{const r=Array.from(N),t=await bulkUpdateSupplierStatus(r,s);v(l=>l&&l.map(n=>r.includes(n.id)?{...n,status:s}:n)),t.failedCount>0?c.warning(`Updated ${t.successCount} suppliers. ${t.failedCount} failed.`):c.success(`Successfully updated ${t.successCount} supplier${t.successCount!==1?"s":""}`),g()}catch(r){c.error(r?.message||"Failed to update suppliers")}finally{Ge(!1)}},[N,g]),Bs=i.useCallback(s=>{d({id:s.id,name:s.name,contact:s.contact,email:s.email,phone:s.phone,category:s.category,status:s.status,country:s.country||"",city:s.city||"",address:s.address||"",purchases:s.purchases||0,payments:s.payments||0}),B(s.id)},[]),le=i.useMemo(()=>ze.map(s=>s.name),[ze]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"WMS Suppliers"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage supplier profiles, contact information, and purchasing relationships"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(O,{className:"relative overflow-hidden",children:[e.jsxs(J,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(X,{className:"text-sm font-medium text-muted-foreground",children:"Total Suppliers"}),e.jsx(we,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:j.totalSuppliers}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[j.activeSuppliers," active, ",j.inactiveSuppliers," inactive"]})]})]}),e.jsxs(O,{className:"relative overflow-hidden",children:[e.jsxs(J,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(X,{className:"text-sm font-medium text-muted-foreground",children:"Active Suppliers"}),e.jsx(is,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:j.activeSuppliers}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j.totalSuppliers>0?`${Math.round(j.activeSuppliers/j.totalSuppliers*100)}% of total`:"No suppliers yet"})]})]}),e.jsxs(O,{className:"relative overflow-hidden",children:[e.jsxs(J,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(X,{className:"text-sm font-medium text-muted-foreground",children:"Total Purchase Orders"}),e.jsx(Qe,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:j.totalPurchaseOrders}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:j.topSupplierByPO?`Top: ${j.topSupplierByPO.name} (${j.topSupplierByPO.count})`:"No orders yet"})]})]}),e.jsxs(O,{className:"relative overflow-hidden",children:[e.jsxs(J,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(X,{className:"text-sm font-medium text-muted-foreground",children:"Categories"}),e.jsx(ke,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:j.uniqueCategories}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[j.suppliersWithProducts," suppliers with products"]})]})]})]}),e.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2",children:[e.jsx(O,{className:D("cursor-pointer transition-all hover:shadow-md border-l-4",S==="Active"?"ring-2 ring-primary":"","border-l-emerald-400"),onClick:()=>re(S==="Active"?"all":"Active"),children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Active"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:j.activeSuppliers})]}),e.jsx(T,{variant:"outline",className:ve("Active"),children:K("Active")})]})})}),e.jsx(O,{className:D("cursor-pointer transition-all hover:shadow-md border-l-4",S==="Inactive"?"ring-2 ring-primary":"","border-l-slate-400"),onClick:()=>re(S==="Inactive"?"all":"Inactive"),children:e.jsx(L,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Inactive"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:j.inactiveSuppliers})]}),e.jsx(T,{variant:"outline",className:ve("Inactive"),children:K("Inactive")})]})})})]}),e.jsxs(O,{children:[e.jsx(J,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(X,{className:"text-xl",children:"WMS Supplier Management"}),e.jsx(zs,{className:"mt-1",children:"Manage your supplier relationships and contacts"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(ie,{open:W,onOpenChange:s=>{G(s),s||d({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active",country:"",city:"",address:"",purchases:0,payments:0})},children:[e.jsx(Ze,{asChild:!0,children:e.jsxs(u,{onClick:()=>d({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active",country:"",city:"",address:"",purchases:0,payments:0}),disabled:!b,title:b?void 0:"You don't have permission to add suppliers",children:[e.jsx(ot,{className:"h-4 w-4 mr-2"}),"Add Supplier"]})}),e.jsxs(ne,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Create New Supplier"}),e.jsx(oe,{children:"Enter the details for the new supplier."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"supplier-name",children:"Company Name *"}),e.jsx(x,{id:"supplier-name",placeholder:"Enter company name",value:a.name,onChange:s=>d({...a,name:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"supplier-status",children:"Status"}),e.jsxs(Q,{value:a.status,onValueChange:s=>d({...a,status:s}),children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select status"})}),e.jsx(se,{children:Pe.map(s=>e.jsx(V,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:K(s)}),s]})},s))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"contact-name",children:"Contact Person *"}),e.jsx(x,{id:"contact-name",placeholder:"Enter contact name",value:a.contact,onChange:s=>d({...a,contact:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"email",children:"Email *"}),e.jsx(x,{id:"email",type:"email",placeholder:"email@example.com",value:a.email,onChange:s=>d({...a,email:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"phone",children:"Phone *"}),e.jsx(x,{id:"phone",placeholder:"+1 (555) 000-0000",value:a.phone,onChange:s=>d({...a,phone:s.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"category",children:"Category *"}),e.jsxs(Q,{value:a.category,onValueChange:s=>d({...a,category:s}),children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select category"})}),e.jsx(se,{children:Ie.map(s=>e.jsx(V,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground mb-3 block",children:"Location Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"country",children:"Country"}),e.jsx(x,{id:"country",placeholder:"e.g., United States",value:a.country,onChange:s=>d({...a,country:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"city",children:"City"}),e.jsx(x,{id:"city",placeholder:"e.g., San Francisco",value:a.city,onChange:s=>d({...a,city:s.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2 mt-4",children:[e.jsx(o,{htmlFor:"address",children:"Address"}),e.jsx(x,{id:"address",placeholder:"Full street address",value:a.address,onChange:s=>d({...a,address:s.target.value})})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground mb-3 block",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"purchases",children:"Total Purchases (₱)"}),e.jsx(x,{id:"purchases",type:"number",min:"0",step:"0.01",placeholder:"0.00",value:a.purchases,onChange:s=>d({...a,purchases:parseFloat(s.target.value)||0})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"payments",children:"Total Payments (₱)"}),e.jsx(x,{id:"payments",type:"number",min:"0",step:"0.01",placeholder:"0.00",value:a.payments,onChange:s=>d({...a,payments:parseFloat(s.target.value)||0})})]})]})]})]}),e.jsxs(Fe,{children:[e.jsx(u,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),e.jsx(u,{onClick:async()=>{if(!a.name.trim()||!a.contact.trim()||!a.email.trim()||!a.phone.trim()||!a.category.trim()){c.error("Please fill all required fields");return}try{const s=await Hs({name:a.name,contact:a.contact,email:a.email,phone:a.phone,category:a.category,status:a.status,country:a.country,city:a.city,address:a.address,purchases:a.purchases,payments:a.payments});v(r=>[s,...r??[]]),G(!1),c.success("Supplier added successfully"),d({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active",country:"",city:"",address:"",purchases:0,payments:0})}catch(s){c.error(s?.message||"Failed to add supplier")}},children:"Create Supplier"})]})]})]})})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(x,{placeholder:"Search suppliers by name, contact, email...",value:$,onChange:s=>$e(s.target.value),className:"pl-9"})]}),e.jsxs(Q,{value:S,onValueChange:re,children:[e.jsxs(Z,{className:"w-full sm:w-[180px]",children:[e.jsx(et,{className:"h-4 w-4 mr-2"}),e.jsx(ee,{placeholder:"Filter by status"})]}),e.jsxs(se,{children:[e.jsx(V,{value:"all",children:"All Statuses"}),Pe.map(s=>e.jsx(V,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:K(s)}),s]})},s))]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs(u,{variant:U?"default":"outline",size:"sm",onClick:()=>Ue(!U),className:"gap-1",children:[e.jsx(it,{className:D("h-4 w-4",U&&"fill-current")}),"Favorites",Le("suppliers").length>0&&e.jsx(T,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:Le("suppliers").length})]}),e.jsxs(u,{variant:p?"default":"outline",size:"sm",onClick:()=>Ke(!p),className:p?"bg-orange-500 hover:bg-orange-600 text-white":"",children:[e.jsx(q,{className:"h-4 w-4 mr-1"}),p?"Viewing Archived":"View Archived"]}),($||S!=="all"||U||p)&&e.jsxs(u,{variant:"ghost",size:"sm",onClick:xs,className:"gap-1 text-muted-foreground hover:text-foreground",children:[e.jsx(Gs,{className:"h-4 w-4"}),"Clear All Filters"]})]})]}),Ne&&b&&e.jsx(st,{selectionCount:ye,onClearSelection:g,isLoading:F||As,actions:p?[{id:"restore",label:"Restore",icon:e.jsx(ns,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:Is},...xe?[{id:"permanent-delete",label:"Permanently Delete",icon:e.jsx(ue,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>A(!0)}]:[]]:[{id:"archive",label:"Archive",icon:e.jsx(q,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:()=>A(!0)}],actionGroups:p?[]:[{id:"status-update",label:"Update Status",icon:e.jsx(Ys,{className:"h-4 w-4 mr-1"}),options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}],onSelect:s=>Ts(s)}],className:"mb-4"}),e.jsx(ie,{open:Ds,onOpenChange:A,children:e.jsxs(ne,{className:"max-w-md",children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"h-5 w-5 text-destructive"}),"Delete ",ye," Supplier",ye!==1?"s":""]}),e.jsx(oe,{children:p?"These suppliers are already archived. This action will permanently remove them from the system.":"Choose how you want to delete the selected suppliers:"})]}),le.length>0&&e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-md p-2 bg-muted/50",children:e.jsxs("ul",{className:"text-sm space-y-1",children:[le.slice(0,10).map((s,r)=>e.jsxs("li",{className:"truncate",children:["• ",s]},r)),le.length>10&&e.jsxs("li",{className:"text-muted-foreground",children:["...and ",le.length-10," more"]})]})}),p?e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ue,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This cannot be undone. All data will be permanently removed."})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(u,{variant:"outline",onClick:()=>A(!1),disabled:F,children:"Cancel"}),e.jsx(u,{variant:"destructive",onClick:Ye,disabled:F,children:F?"Deleting...":"Permanently Delete All"})]})]}):e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border rounded-md hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(q,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Archive"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Move to archive. Suppliers can be restored later."})]}),e.jsx(u,{variant:"secondary",size:"sm",onClick:Ps,disabled:F,children:F?"...":"Archive"})]})}),xe&&e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ue,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Delete Permanently"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be undone. Data will be permanently removed."})]}),e.jsx(u,{variant:"destructive",size:"sm",onClick:Ye,disabled:F,children:F?"...":"Delete"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(u,{variant:"outline",onClick:()=>A(!1),disabled:F,children:"Cancel"})})]})]})}),us?e.jsx(tt,{rows:8}):fe.length===0?e.jsx(at,{icon:p?q:we,title:p?"No archived suppliers":"No suppliers found",description:p?"Archived suppliers will appear here":$?"Try adjusting your search criteria":"Get started by adding your first supplier",actionLabel:!p&&!$?"Add Supplier":void 0,onAction:!p&&!$?()=>G(!0):void 0}):e.jsxs("div",{className:"rounded-md border overflow-hidden",children:[e.jsx(rt,{pageItemCount:We,totalItemCount:He,isAllPagesSelected:Ss,show:bs&&He>We,onSelectAllPages:ks,onClearSelection:g,itemLabel:"suppliers"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(as,{children:[e.jsx(rs,{children:e.jsxs(me,{children:[e.jsx(R,{className:"w-12",children:e.jsx(es,{checked:Ns,ref:s=>{s&&(s.indeterminate=Cs)},onCheckedChange:be,"aria-label":"Select all suppliers"})}),e.jsx(P,{sortKey:"id",currentSortKey:C.key,sortDirection:k("id"),onSort:s=>w(s),children:"Supplier ID"}),e.jsx(P,{sortKey:"name",currentSortKey:C.key,sortDirection:k("name"),onSort:s=>w(s),children:"Company Name"}),e.jsx(P,{sortKey:"contact",currentSortKey:C.key,sortDirection:k("contact"),onSort:s=>w(s),children:"Contact"}),e.jsx(P,{sortKey:"category",currentSortKey:C.key,sortDirection:k("category"),onSort:s=>w(s),children:"Category"}),e.jsx(P,{sortKey:"status",currentSortKey:C.key,sortDirection:k("status"),onSort:s=>w(s),children:"Status"}),e.jsx(P,{sortKey:"country",currentSortKey:C.key,sortDirection:k("country"),onSort:s=>w(s),children:"Location"}),e.jsx(P,{sortKey:"purchases",currentSortKey:C.key,sortDirection:k("purchases"),onSort:s=>w(s),children:"Purchases"}),e.jsx(P,{sortKey:"payments",currentSortKey:C.key,sortDirection:k("payments"),onSort:s=>w(s),children:"Payments"}),e.jsx(P,{sortKey:"balance",currentSortKey:C.key,sortDirection:k("balance"),onSort:s=>w(s),children:"Balance"}),e.jsx(R,{children:"Actions"})]})}),e.jsx(ls,{children:qe.map(s=>{const r=Fs(s.id);return e.jsxs(me,{className:D("hover:bg-muted/50 transition-colors",r&&"bg-muted/50"),children:[e.jsx(f,{children:e.jsx(es,{checked:r,onCheckedChange:()=>ws(s.id),"aria-label":`Select supplier ${s.name}`})}),e.jsx(f,{className:"font-mono text-sm",children:s.id}),e.jsx(f,{children:e.jsx("button",{className:"text-left font-medium text-primary hover:underline cursor-pointer bg-transparent border-none p-0",onClick:()=>Y(s.id),children:s.name})}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ss,{className:"h-3 w-3 text-muted-foreground"}),e.jsx(Ae,{value:s.email,type:"text",onSave:t=>Se(s.id,"email",t),disabled:!b,className:"text-xs text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ts,{className:"h-3 w-3 text-muted-foreground"}),e.jsx(Ae,{value:s.phone,type:"text",onSave:t=>Se(s.id,"phone",t),disabled:!b,className:"text-xs text-muted-foreground"})]})]})}),e.jsx(f,{children:e.jsx(Ae,{value:s.category,type:"select",options:Ie.map(t=>({value:t,label:t})),onSave:t=>Se(s.id,"category",t),disabled:!b})}),e.jsx(f,{children:e.jsxs(T,{variant:"outline",className:D("gap-1",ve(s.status)),children:[e.jsx("span",{children:K(s.status)}),s.status]})}),e.jsx(f,{children:e.jsx("div",{className:"text-sm",children:s.city&&s.country?e.jsxs("span",{children:[s.city,", ",s.country]}):s.city||s.country?e.jsx("span",{children:s.city||s.country}):e.jsx("span",{className:"text-muted-foreground",children:"—"})})}),e.jsxs(f,{className:"text-right font-medium",children:["₱",s.purchases.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(f,{className:"text-right font-medium",children:["₱",s.payments.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(f,{className:D("text-right font-medium",s.balance>0?"text-amber-600":s.balance<0?"text-emerald-600":""),children:["₱",s.balance.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx(f,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(nt,{entityType:"suppliers",entityId:s.id,entityName:s.name}),e.jsxs(ie,{open:pe===s.id,onOpenChange:t=>{B(t?s.id:null),t&&d({...s,country:s.country||"",city:s.city||"",address:s.address||"",purchases:s.purchases||0,payments:s.payments||0})},children:[e.jsx(Ze,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"sm",disabled:!b,title:b?void 0:"You don't have permission to edit suppliers",children:"Edit"})}),e.jsxs(ne,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Edit Supplier"}),e.jsxs(oe,{children:["Supplier ID: ",s.id]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-name",children:"Company Name *"}),e.jsx(x,{id:"edit-name",value:a.name,onChange:t=>d({...a,name:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-status",children:"Status"}),e.jsxs(Q,{value:a.status,onValueChange:t=>d({...a,status:t}),children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select status"})}),e.jsx(se,{children:Pe.map(t=>e.jsx(V,{value:t,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:K(t)}),t]})},t))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-contact",children:"Contact Person *"}),e.jsx(x,{id:"edit-contact",value:a.contact,onChange:t=>d({...a,contact:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-email",children:"Email *"}),e.jsx(x,{id:"edit-email",type:"email",value:a.email,onChange:t=>d({...a,email:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-phone",children:"Phone *"}),e.jsx(x,{id:"edit-phone",value:a.phone,onChange:t=>d({...a,phone:t.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-category",children:"Category *"}),e.jsxs(Q,{value:a.category,onValueChange:t=>d({...a,category:t}),children:[e.jsx(Z,{children:e.jsx(ee,{placeholder:"Select category"})}),e.jsx(se,{children:Ie.map(t=>e.jsx(V,{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground mb-3 block",children:"Location Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-country",children:"Country"}),e.jsx(x,{id:"edit-country",placeholder:"e.g., United States",value:a.country,onChange:t=>d({...a,country:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-city",children:"City"}),e.jsx(x,{id:"edit-city",placeholder:"e.g., San Francisco",value:a.city,onChange:t=>d({...a,city:t.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2 mt-4",children:[e.jsx(o,{htmlFor:"edit-address",children:"Address"}),e.jsx(x,{id:"edit-address",placeholder:"Full street address",value:a.address,onChange:t=>d({...a,address:t.target.value})})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-2",children:[e.jsx(o,{className:"text-sm font-medium text-muted-foreground mb-3 block",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-purchases",children:"Total Purchases (₱)"}),e.jsx(x,{id:"edit-purchases",type:"number",min:"0",step:"0.01",placeholder:"0.00",value:a.purchases,onChange:t=>d({...a,purchases:parseFloat(t.target.value)||0})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(o,{htmlFor:"edit-payments",children:"Total Payments (₱)"}),e.jsx(x,{id:"edit-payments",type:"number",min:"0",step:"0.01",placeholder:"0.00",value:a.payments,onChange:t=>d({...a,payments:parseFloat(t.target.value)||0})})]})]})]})]}),e.jsxs(Fe,{className:"flex-col-reverse sm:flex-row sm:justify-between sm:space-x-2",children:[s.archived?e.jsxs(e.Fragment,{children:[e.jsxs(u,{variant:"outline",onClick:()=>ps(s.id),children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Restore"]}),xe&&e.jsxs(u,{variant:"destructive",onClick:()=>gs(s.id),children:[e.jsx(ue,{className:"h-4 w-4 mr-2"}),"Permanently Delete"]})]}):e.jsxs(u,{variant:"outline",onClick:()=>hs(s.id),className:"text-orange-600 border-orange-300 hover:bg-orange-50",children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Archive"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>B(null),children:"Cancel"}),!s.archived&&e.jsx(u,{onClick:async()=>{if(!a.id){c.error("Missing supplier id");return}if(!a.name.trim()||!a.contact.trim()||!a.email.trim()||!a.phone.trim()||!a.category.trim()){c.error("Please fill all required fields");return}try{const t=await Xe({id:a.id,name:a.name,contact:a.contact,email:a.email,phone:a.phone,category:a.category,status:a.status,country:a.country,city:a.city,address:a.address,purchases:a.purchases,payments:a.payments});v(l=>(l??[]).map(n=>n.id===t.id?t:n)),B(null),c.success("Supplier updated")}catch(t){c.error(t?.message||"Failed to update supplier")}},children:"Save Changes"})]})]})]})]})]})})]},s.id)})})]})}),fe.length>0&&e.jsx(lt,{currentPage:Re,totalPages:js,onPageChange:fs,itemsPerPage:ys,totalItems:vs})]})]})]}),e.jsx(ie,{open:ge!==null,onOpenChange:s=>!s&&Y(null),children:e.jsx(ne,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:ge&&(()=>{const s=y.find(n=>n.id===ge);if(!s)return null;const r=H.filter(n=>n.supplierId===s.id),t=r.reduce((n,M)=>n+M.totalAmount,0),l=he.filter(n=>n.supplierId===s.id);return e.jsxs(e.Fragment,{children:[e.jsxs(ce,{children:[e.jsxs(de,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"h-5 w-5 text-primary"}),"Supplier Details"]}),e.jsx(oe,{children:"View supplier information and statistics"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ut,{className:"h-3 w-3"}),"Supplier ID"]}),e.jsx("p",{className:"font-mono text-sm",children:s.id})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(De,{className:"h-3 w-3"}),"Name"]}),e.jsx("p",{className:"font-medium",children:s.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(xt,{className:"h-3 w-3"}),"Category"]}),e.jsx(T,{variant:"outline",children:s.category})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(is,{className:"h-3 w-3"}),"Status"]}),e.jsx(T,{variant:s.status==="Active"?"default":"secondary",children:s.status})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(we,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contact Person"}),e.jsx("p",{className:"font-medium",children:s.contact})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(ss,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"font-medium",children:s.phone})]})]})]})]}),(s.country||s.city||s.address)&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[(s.city||s.country)&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(ht,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"City / Country"}),e.jsx("p",{className:"font-medium",children:s.city&&s.country?`${s.city}, ${s.country}`:s.city||s.country})]})]}),s.address&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(De,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Address"}),e.jsx("p",{className:"font-medium",children:s.address})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Financial Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-950/30 text-center",children:[e.jsx(ds,{className:"h-4 w-4 mx-auto mb-1 text-blue-600"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["₱",s.purchases.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Purchases"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-green-50 dark:bg-green-950/30 text-center",children:[e.jsx(cs,{className:"h-4 w-4 mx-auto mb-1 text-green-600"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["₱",s.payments.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Payments"})]}),e.jsxs("div",{className:D("p-3 rounded-lg text-center",s.balance>0?"bg-amber-50 dark:bg-amber-950/30":"bg-emerald-50 dark:bg-emerald-950/30"),children:[e.jsx(cs,{className:D("h-4 w-4 mx-auto mb-1",s.balance>0?"text-amber-600":"text-emerald-600")}),e.jsxs("p",{className:D("text-lg font-bold",s.balance>0?"text-amber-600":"text-emerald-600"),children:["₱",s.balance.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Balance"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Statistics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-950/30 text-center",children:[e.jsx(Qe,{className:"h-4 w-4 mx-auto mb-1 text-blue-600"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:r.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Purchase Orders"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-green-50 dark:bg-green-950/30 text-center",children:[e.jsx(ds,{className:"h-4 w-4 mx-auto mb-1 text-green-600"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["$",t.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Value"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-purple-50 dark:bg-purple-950/30 text-center",children:[e.jsx(ke,{className:"h-4 w-4 mx-auto mb-1 text-purple-600"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:l.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Products"})]})]})]}),l.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:["Products from this Supplier (",l.length,")"]}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto border rounded-lg",children:e.jsxs(as,{children:[e.jsx(rs,{children:e.jsxs(me,{children:[e.jsx(R,{className:"text-xs",children:"Product"}),e.jsx(R,{className:"text-xs",children:"Category"}),e.jsx(R,{className:"text-xs text-right",children:"Price"}),e.jsx(R,{className:"text-xs text-right",children:"Stock"})]})}),e.jsx(ls,{children:l.map(n=>e.jsxs(me,{children:[e.jsx(f,{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[n.photoUrl?e.jsx("img",{src:n.photoUrl,alt:n.name,className:"h-8 w-8 rounded object-cover"}):e.jsx("div",{className:"h-8 w-8 rounded bg-muted flex items-center justify-center",children:e.jsx(ke,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:n.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:n.brand})]})]})}),e.jsx(f,{className:"py-2",children:e.jsx(T,{variant:"outline",className:"text-xs",children:n.category})}),e.jsxs(f,{className:"py-2 text-right text-sm",children:["₱",n.pricePerPiece.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx(f,{className:"py-2 text-right",children:e.jsx(T,{variant:n.quantity>10?"default":n.quantity>0?"secondary":"destructive",className:"text-xs",children:n.quantity})})]},n.id))})]})})]}),s.archived&&e.jsxs("div",{className:"p-3 rounded-lg bg-orange-50 dark:bg-orange-950/30 border border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-700 dark:text-orange-300",children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Archived"})]}),s.archivedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Archived on ",new Date(s.archivedAt).toLocaleDateString()]})]})]}),e.jsxs(Fe,{children:[e.jsx(u,{variant:"outline",onClick:()=>Y(null),children:"Close"}),b&&!s.archived&&e.jsxs(u,{onClick:()=>{Y(null),Bs(s)},children:[e.jsx(pt,{className:"h-4 w-4 mr-2"}),"Edit Supplier"]})]})]})})()})})]})}export{Lt as SuppliersView};
