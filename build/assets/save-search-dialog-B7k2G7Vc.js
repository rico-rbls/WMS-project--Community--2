import{c as b,F as k,j as e,B as c,d as f,r as S,D as F,X as O,v as z,w as B,x as I,y as M,L as $,I as A,aF as L,aG as E,aH as P,aI as N,aJ as H,J as d}from"./index-BLGqWry5.js";import{S as J}from"./star-DSN5bCqa.js";import{T as R}from"./sortable-table-head-B9kVZBaL.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],w=b("bookmark",_);function T({entityType:r,entityId:t,entityName:a,size:h="sm",className:m}){const{isFavorite:x,toggleFavorite:p}=k(),o=x(r,t),i=n=>{n.stopPropagation(),p(r,t,a)};return e.jsx(c,{variant:"ghost",size:h==="sm"?"icon":"default",className:f("h-8 w-8 p-0 hover:bg-transparent",o&&"text-yellow-500 hover:text-yellow-600",!o&&"text-muted-foreground hover:text-yellow-500",m),onClick:i,title:o?"Remove from favorites":"Add to favorites",children:e.jsx(J,{className:f("h-4 w-4 transition-all",o&&"fill-current")})})}function V({entityType:r,currentSearchTerm:t,currentFilters:a,onApplySearch:h}){const{saveSearch:m,getSearchesByType:x,deleteSearch:p}=k(),[o,i]=S.useState(!1),[n,v]=S.useState(""),u=x(r),g=t||a&&Object.keys(a).length>0,j=()=>{if(!n.trim()){d.error("Please enter a name for this search");return}m(n.trim(),r,t,a),d.success(`Search "${n}" saved`),v(""),i(!1)},D=(s,l,C)=>{C.stopPropagation(),p(s),d.success(`Search "${l}" deleted`)},y=s=>{h?.(s),d.success(`Applied search "${s.name}"`)};return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(F,{open:o,onOpenChange:i,children:[e.jsx(O,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",disabled:!g,title:g?"Save current search":"No active filters to save",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),"Save"]})}),e.jsxs(z,{className:"sm:max-w-[400px]",children:[e.jsxs(B,{children:[e.jsx(I,{children:"Save Search"}),e.jsx(M,{children:"Save your current search and filter settings for quick access later."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"search-name",children:"Search Name"}),e.jsx(A,{id:"search-name",placeholder:"e.g., Low stock electronics",value:n,onChange:s=>v(s.target.value),onKeyDown:s=>s.key==="Enter"&&j()})]}),t&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:['Search term: "',t,'"']}),a&&Object.keys(a).length>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Filters: ",Object.entries(a).map(([s,l])=>`${s}=${l}`).join(", ")]}),e.jsx(c,{className:"w-full",onClick:j,children:"Save Search"})]})]})]}),u.length>0&&e.jsxs(L,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(w,{className:"h-4 w-4 mr-1 fill-current"}),"Saved (",u.length,")"]})}),e.jsxs(P,{align:"end",className:"w-56",children:[u.map(s=>e.jsxs(N,{className:"flex items-center justify-between cursor-pointer",onClick:()=>y(s),children:[e.jsx("span",{className:"truncate flex-1",children:s.name}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-6 w-6 ml-2 hover:bg-destructive hover:text-destructive-foreground",onClick:l=>D(s.id,s.name,l),children:e.jsx(R,{className:"h-3 w-3"})})]},s.id)),e.jsx(H,{}),e.jsx(N,{className:"text-xs text-muted-foreground",disabled:!0,children:"Click to apply, trash to delete"})]})]})]})}export{T as F,V as S};
