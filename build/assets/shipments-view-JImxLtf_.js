import{j as e,I as u,B as v,a4 as te,J as S,O as Cs,i as ws,r as i,V as Ds,aM as bs,aN as Oe,A as c,aO as Ts,aP as ks,C,q as V,s as H,P as Is,t as w,v as Pe,d as B,z as I,x as Fs,D as Ae,a3 as Ee,E as Be,F as Le,G as Ke,H as $e,K as Me,a5 as Os,p as Ps,ac as Re,aQ as As,aR as Es}from"./index-CMIKxpnp.js";import{S as q,a as z,b as G,c as J,d as L,T as Ue,e as Bs,f as Ls,g as Ve,h as He,i as K,j as Ks,k as D}from"./sortable-table-head-z2ywGpQp.js";import{u as $s,a as Ms,P as Rs,F as Us,B as Vs,T as Hs,E as qs,S as zs,b as Gs}from"./select-all-banner-Cfw1T3U-.js";import{C as ze}from"./calendar-BOOBtjhV.js";import{B as Js}from"./bulk-delete-dialog-Ch6LgEnL.js";import{F as Ws}from"./favorite-button-CmdFGpds.js";import{u as Ys}from"./useTableSort-BFTwzeb3.js";import{c as _s}from"./permissions-DJnvoGTW.js";import{E as xe}from"./editable-cell-B_QELL0h.js";import{C as Qs}from"./circle-check-big-BudgVVGH.js";import{T as Xs}from"./trending-up-Bvsz8wNY.js";import{S as Zs}from"./star-CQ9divqL.js";import{M as et}from"./map-pin-6xbPaPaG.js";import"./skeleton-D_PrfGr5.js";function st({fromDate:$,toDate:M,onFromDateChange:W,onToDateChange:Y,onClear:_,label:p="Date Range",className:N=""}){const Q=$||M;return e.jsxs("div",{className:`space-y-2 ${N}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4 text-muted-foreground"}),e.jsx(u,{className:"text-sm font-medium",children:p}),Q&&e.jsxs(v,{variant:"ghost",size:"sm",onClick:_,className:"h-6 px-2 text-xs",children:[e.jsx(te,{className:"h-3 w-3 mr-1"}),"Clear"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{htmlFor:"from-date",className:"text-xs text-muted-foreground",children:"From"}),e.jsx(S,{id:"from-date",type:"date",value:$,onChange:n=>W(n.target.value),className:"w-full"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(u,{htmlFor:"to-date",className:"text-xs text-muted-foreground",children:"To"}),e.jsx(S,{id:"to-date",type:"date",value:M,onChange:n=>Y(n.target.value),className:"w-full"})]})]})]})}const ge=["Pending","In Transit","Delivered"],qe=["FedEx","UPS","DHL","USPS","LBC Express","J&T Express","Ninja Van","Grab Express"];function pt({initialOpenDialog:$,onDialogOpened:M}){const{isFavorite:W,getFavoritesByType:Y}=Cs(),{user:_}=ws(),p=_?_s(_.role):!1,[N,Q]=i.useState(""),[n,F]=i.useState("all"),[h,ae]=i.useState(""),[x,re]=i.useState(""),[O,je]=i.useState(!1),[pe,y]=i.useState(null),[Ge,fe]=i.useState(!0),[R,U]=i.useState(!1),[le,X]=i.useState(null),[r,g]=i.useState({id:"",salesOrderId:"",destination:"",carrier:"",status:"Pending",eta:""}),ie=Ds(N,300);i.useEffect(()=>{(async()=>{fe(!0);const s=await bs();y(s),fe(!1)})()},[]),i.useEffect(()=>{$&&!R&&(U(!0),M?.())},[$,M,R]);const j=i.useMemo(()=>pe??[],[pe]),m=i.useMemo(()=>{const s=j.length,a=j.filter(l=>l.status==="Pending").length,t=j.filter(l=>l.status==="In Transit").length,o=j.filter(l=>l.status==="Delivered").length,T=a+t,k=new Date,se=new Date(k.getTime()-10080*60*1e3);new Date(k.getTime()-720*60*60*1e3);const hs=new Date(k.getTime()+10080*60*1e3),xs=j.filter(l=>{if(l.status!=="Delivered")return!1;try{const d=new Date(l.eta);return d>=se&&d<=k}catch{return!1}}).length,gs=j.filter(l=>{if(l.status==="Delivered")return!1;try{const d=new Date(l.eta);return d>=k&&d<=hs}catch{return!1}}).length,he=j.filter(l=>l.status==="Delivered"),js=he.length,ps=he.length>0?Math.round(js/he.length*100):0,fs=s>0?Math.round(o/s*100):0,vs=j.reduce((l,d)=>(l[d.carrier]=(l[d.carrier]||0)+1,l),{}),Ss=Object.entries(vs).sort((l,d)=>d[1]-l[1]).slice(0,5).map(([l,d])=>({name:l,count:d})),Ns=j.reduce((l,d)=>(l[d.destination]=(l[d.destination]||0)+1,l),{}),ys=Object.entries(Ns).sort((l,d)=>d[1]-l[1]).slice(0,5).map(([l,d])=>({name:l,count:d}));return{totalShipments:s,pendingShipments:a,inTransitShipments:t,deliveredShipments:o,activeShipments:T,recentDeliveries7Days:xs,upcomingDeliveries:gs,onTimeRate:ps,fulfillmentRate:fs,topCarriers:Ss,topDestinations:ys,avgTransitDays:3}},[j]),ne=i.useMemo(()=>j.filter(s=>{if(O&&!W("shipments",s.id)||n!=="all"&&s.status!==n)return!1;if(ie){const a=ie.toLowerCase();if(!(s.id.toLowerCase().includes(a)||s.salesOrderId.toLowerCase().includes(a)||s.destination.toLowerCase().includes(a)||s.carrier.toLowerCase().includes(a)))return!1}if(h||x)try{const a=new Date(s.eta);if(h){const t=new Date(h);if(a<t)return!1}if(x){const t=new Date(x);if(t.setHours(23,59,59,999),a>t)return!1}}catch{return!1}return!0}),[j,ie,n,h,x,O,W]),{sortedData:ve,sortConfig:P,requestSort:A,getSortDirection:E}=Ys(ne),{currentPage:Se,totalPages:Je,paginatedData:Ne,goToPage:We,totalItems:Ye,itemsPerPage:_e}=$s(ve,25),{selectedIds:Z,selectedItems:ye,selectionCount:Ce,isAllSelected:Qe,isAllPageSelected:Xe,isAllPagesSelected:Ze,isPartiallySelected:es,hasSelection:de,toggleItem:ss,toggleAll:ce,selectAllPages:ts,deselectAll:f,isSelected:as,totalItemCount:we,pageItemCount:De}=Ms(Ne,ve),[be,Te]=i.useState(!1),[rs,ke]=i.useState(!1),[ls,oe]=i.useState(!1);i.useEffect(()=>{f()},[Se,f]),i.useEffect(()=>{const s=a=>{(a.metaKey||a.ctrlKey)&&a.key==="a"&&!R&&!le&&(a.preventDefault(),ce()),a.key==="Escape"&&de&&f()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[ce,f,de,R,le]);function me(){g({id:"",salesOrderId:"",destination:"",carrier:"",status:"Pending",eta:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]})}function Ie(){ae(""),re("")}function is(){Q(""),F("all"),ae(""),re(""),je(!1)}function Fe(){return r.salesOrderId.trim()?r.destination.trim()?r.carrier.trim()?r.eta.trim()?null:"ETA is required":"Carrier is required":"Destination is required":"Sales Order ID is required"}async function ns(){const s=Fe();if(s){c.error(s);return}try{const a=await As({salesOrderId:r.salesOrderId,destination:r.destination,carrier:r.carrier,status:r.status,eta:r.eta});y(t=>[a,...t??[]]),U(!1),me(),c.success("Shipment created successfully")}catch(a){c.error(a?.message||"Failed to create shipment")}}async function ds(){const s=Fe();if(s){c.error(s);return}if(!r.id){c.error("Missing shipment id");return}try{const a=await Oe({id:r.id,salesOrderId:r.salesOrderId,destination:r.destination,carrier:r.carrier,status:r.status,eta:r.eta});y(t=>(t??[]).map(o=>o.id===a.id?a:o)),X(null),c.success("Shipment updated successfully")}catch(a){c.error(a?.message||"Failed to update shipment")}}async function cs(s){try{await Es(s),y(a=>(a??[]).filter(t=>t.id!==s)),X(null),c.success("Shipment deleted successfully")}catch(a){c.error(a?.message||"Failed to delete shipment")}}const ue=i.useCallback(async(s,a,t)=>{try{const o={[a]:t},T=await Oe({id:s,...o});y(k=>(k??[]).map(se=>se.id===s?T:se)),c.success(`${a.charAt(0).toUpperCase()+a.slice(1)} updated`)}catch(o){throw c.error(o?.message||"Failed to update"),o}},[y]),ee=s=>{switch(s){case"Delivered":return"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-200";case"In Transit":return"bg-blue-500/15 text-blue-700 dark:text-blue-400 border-blue-200";case"Pending":return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200";default:return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200"}},b=s=>{switch(s){case"Delivered":return"âœ“";case"In Transit":return"ðŸšš";case"Pending":return"â—‹";default:return"â—‹"}},os=i.useCallback(async()=>{Te(!0);try{const s=Array.from(Z),a=await Ts(s);y(t=>t?.filter(o=>!s.includes(o.id))??[]),a.failedCount>0?c.warning(`Deleted ${a.successCount} shipments. ${a.failedCount} failed.`):c.success(`Successfully deleted ${a.successCount} shipment${a.successCount!==1?"s":""}`),f()}catch(s){c.error(s?.message||"Failed to delete shipments")}finally{Te(!1),oe(!1)}},[Z,f]),ms=i.useCallback(async s=>{ke(!0);try{const a=Array.from(Z),t=await ks(a,s);y(o=>o&&o.map(T=>a.includes(T.id)?{...T,status:s}:T)),t.failedCount>0?c.warning(`Updated ${t.successCount} shipments. ${t.failedCount} failed.`):c.success(`Successfully updated ${t.successCount} shipment${t.successCount!==1?"s":""}`),f()}catch(a){c.error(a?.message||"Failed to update shipments")}finally{ke(!1)}},[Z,f]),us=i.useMemo(()=>ye.map(s=>`${s.id} â†’ ${s.destination}`),[ye]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Shipments"}),e.jsx("p",{className:"text-muted-foreground",children:"Track shipment status, carrier information, and delivery timelines"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(C,{className:"relative overflow-hidden",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-muted-foreground",children:"Total Shipments"}),e.jsx(Is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold",children:m.totalShipments}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[m.upcomingDeliveries," arriving this week"]})]})]}),e.jsxs(C,{className:"relative overflow-hidden",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-muted-foreground",children:"Active Shipments"}),e.jsx(Pe,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:m.activeShipments}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[m.pendingShipments," pending, ",m.inTransitShipments," in transit"]})]})]}),e.jsxs(C,{className:"relative overflow-hidden",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-muted-foreground",children:"Delivered"}),e.jsx(Qs,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:m.deliveredShipments}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[m.recentDeliveries7Days," in last 7 days"]})]})]}),e.jsxs(C,{className:"relative overflow-hidden",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(H,{className:"text-sm font-medium text-muted-foreground",children:"Fulfillment Rate"}),e.jsx(Xs,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(w,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[m.fulfillmentRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[m.deliveredShipments," of ",m.totalShipments," fulfilled"]})]})]})]}),e.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-3",children:[e.jsx(C,{className:B("cursor-pointer transition-all hover:shadow-md border-l-4",n==="Pending"?"ring-2 ring-primary":"","border-l-slate-400"),onClick:()=>F(n==="Pending"?"all":"Pending"),children:e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:m.pendingShipments})]}),e.jsx(I,{variant:"outline",className:ee("Pending"),children:b("Pending")})]})})}),e.jsx(C,{className:B("cursor-pointer transition-all hover:shadow-md border-l-4",n==="In Transit"?"ring-2 ring-primary":"","border-l-blue-400"),onClick:()=>F(n==="In Transit"?"all":"In Transit"),children:e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"In Transit"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:m.inTransitShipments})]}),e.jsx(I,{variant:"outline",className:ee("In Transit"),children:b("In Transit")})]})})}),e.jsx(C,{className:B("cursor-pointer transition-all hover:shadow-md border-l-4",n==="Delivered"?"ring-2 ring-primary":"","border-l-emerald-400"),onClick:()=>F(n==="Delivered"?"all":"Delivered"),children:e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Delivered"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:m.deliveredShipments})]}),e.jsx(I,{variant:"outline",className:ee("Delivered"),children:b("Delivered")})]})})})]}),e.jsxs(C,{children:[e.jsx(V,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(H,{className:"text-xl",children:"Shipment Tracking"}),e.jsx(Fs,{className:"mt-1",children:"Track and manage all shipments and deliveries"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(Ae,{open:R,onOpenChange:s=>{U(s),s||me()},children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(v,{onClick:()=>me(),disabled:!p,title:p?void 0:"You don't have permission to add shipments",children:[e.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Add Shipment"]})}),e.jsxs(Be,{className:"sm:max-w-[500px]",children:[e.jsxs(Le,{children:[e.jsx(Ke,{children:"Create New Shipment"}),e.jsx($e,{children:"Enter the details for the new shipment."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"salesOrderId",children:"Sales Order ID *"}),e.jsx(S,{id:"salesOrderId",placeholder:"SO-001",value:r.salesOrderId,onChange:s=>g({...r,salesOrderId:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"status",children:"Status"}),e.jsxs(q,{value:r.status,onValueChange:s=>g({...r,status:s}),children:[e.jsx(z,{children:e.jsx(G,{placeholder:"Select status"})}),e.jsx(J,{children:ge.map(s=>e.jsx(L,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:b(s)}),s]})},s))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"destination",children:"Destination *"}),e.jsx(S,{id:"destination",placeholder:"City, Province/State",value:r.destination,onChange:s=>g({...r,destination:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"carrier",children:"Carrier *"}),e.jsxs(q,{value:r.carrier,onValueChange:s=>g({...r,carrier:s}),children:[e.jsx(z,{children:e.jsx(G,{placeholder:"Select carrier"})}),e.jsx(J,{children:qe.map(s=>e.jsx(L,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"eta",children:"ETA *"}),e.jsx(S,{id:"eta",type:"date",value:r.eta,onChange:s=>g({...r,eta:s.target.value})})]})]})]}),e.jsxs(Me,{children:[e.jsx(v,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),e.jsx(v,{onClick:ns,children:"Create Shipment"})]})]})]})})]})}),e.jsxs(w,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Os,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(S,{placeholder:"Search by ID, order ID, destination, or carrier...",value:N,onChange:s=>Q(s.target.value),className:"pl-9"})]}),e.jsxs(q,{value:n,onValueChange:F,children:[e.jsxs(z,{className:"w-full sm:w-[180px]",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),e.jsx(G,{placeholder:"Filter by status"})]}),e.jsxs(J,{children:[e.jsx(L,{value:"all",children:"All Statuses"}),ge.map(s=>e.jsx(L,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:b(s)}),s]})},s))]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(st,{fromDate:h,toDate:x,onFromDateChange:ae,onToDateChange:re,onClear:Ie,label:"Filter by ETA Date"}),e.jsxs(v,{variant:O?"default":"outline",size:"sm",onClick:()=>je(!O),className:"gap-1",children:[e.jsx(Zs,{className:B("h-4 w-4",O&&"fill-current")}),"Favorites",Y("shipments").length>0&&e.jsx(I,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:Y("shipments").length})]}),(N||n!=="all"||h||x||O)&&e.jsxs(v,{variant:"ghost",size:"sm",onClick:is,className:"text-muted-foreground hover:text-foreground",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"Clear All"]})]}),(n!=="all"||h||x)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[n!=="all"&&e.jsxs(I,{variant:"secondary",className:"gap-1",children:["Status: ",n,e.jsx("button",{onClick:()=>F("all"),className:"ml-1 hover:bg-secondary-foreground/20 rounded-full p-0.5",children:e.jsx(te,{className:"h-3 w-3"})})]}),(h||x)&&e.jsxs(I,{variant:"secondary",className:"gap-1",children:["ETA: ",h||"..."," to ",x||"...",e.jsx("button",{onClick:Ie,className:"ml-1 hover:bg-secondary-foreground/20 rounded-full p-0.5",children:e.jsx(te,{className:"h-3 w-3"})})]})]})]}),de&&p&&e.jsx(Vs,{selectionCount:Ce,onClearSelection:f,isLoading:be||rs,actions:[{id:"delete",label:"Delete",icon:e.jsx(Ue,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>oe(!0)}],actionGroups:[{id:"status-update",label:"Update Status",icon:e.jsx(Ps,{className:"h-4 w-4 mr-1"}),options:[{value:"Pending",label:"Pending"},{value:"Processing",label:"Processing"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"}],onSelect:s=>ms(s)}],className:"mb-4"}),e.jsx(Js,{open:ls,onOpenChange:oe,itemCount:Ce,itemType:"shipment",itemNames:us,onConfirm:os,isLoading:be}),Ge?e.jsx(Hs,{rows:8}):ne.length===0?e.jsx(qs,{icon:Pe,title:"No shipments found",description:N||n!=="all"||h||x?"Try adjusting your search or filters":"Get started by creating your first shipment",actionLabel:N||n!=="all"||h||x?void 0:"Create Shipment",onAction:N||n!=="all"||h||x?void 0:()=>U(!0)}):e.jsxs("div",{className:"rounded-md border overflow-hidden",children:[e.jsx(zs,{pageItemCount:De,totalItemCount:we,isAllPagesSelected:Ze,show:Xe&&we>De,onSelectAllPages:ts,onClearSelection:f,itemLabel:"shipments"}),e.jsxs(Bs,{children:[e.jsx(Ls,{children:e.jsxs(Ve,{children:[e.jsx(He,{className:"w-12",children:e.jsx(Re,{checked:Qe,ref:s=>{s&&(s.indeterminate=es)},onCheckedChange:ce,"aria-label":"Select all shipments"})}),e.jsx(K,{sortKey:"id",currentSortKey:P.key,sortDirection:E("id"),onSort:s=>A(s),children:"Shipment ID"}),e.jsx(K,{sortKey:"salesOrderId",currentSortKey:P.key,sortDirection:E("salesOrderId"),onSort:s=>A(s),children:"Sales Order ID"}),e.jsx(K,{sortKey:"destination",currentSortKey:P.key,sortDirection:E("destination"),onSort:s=>A(s),children:"Destination"}),e.jsx(K,{sortKey:"carrier",currentSortKey:P.key,sortDirection:E("carrier"),onSort:s=>A(s),children:"Carrier"}),e.jsx(K,{sortKey:"status",currentSortKey:P.key,sortDirection:E("status"),onSort:s=>A(s),children:"Status"}),e.jsx(K,{sortKey:"eta",currentSortKey:P.key,sortDirection:E("eta"),onSort:s=>A(s),children:"ETA"}),e.jsx(He,{children:"Actions"})]})}),e.jsx(Ks,{children:Ne.map(s=>{const a=as(s.id);return e.jsxs(Ve,{className:B("transition-colors hover:bg-muted/50",a&&"bg-primary/5 hover:bg-primary/10"),children:[e.jsx(D,{children:e.jsx(Re,{checked:a,onCheckedChange:()=>ss(s.id),"aria-label":`Select shipment ${s.id}`})}),e.jsx(D,{children:e.jsx("span",{className:"font-mono text-sm font-medium",children:s.id})}),e.jsx(D,{children:e.jsx(xe,{value:s.salesOrderId,type:"text",onSave:t=>ue(s.id,"salesOrderId",t),disabled:!p})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(et,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsx(xe,{value:s.destination,type:"text",onSave:t=>ue(s.id,"destination",t),disabled:!p})]})}),e.jsx(D,{children:e.jsx(xe,{value:s.carrier,type:"text",onSave:t=>ue(s.id,"carrier",t),disabled:!p})}),e.jsx(D,{children:e.jsxs(I,{variant:"outline",className:B("font-medium",ee(s.status)),children:[e.jsx("span",{className:"mr-1",children:b(s.status)}),s.status]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ze,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:new Date(s.eta).toLocaleDateString()})]})}),e.jsx(D,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ws,{entityType:"shipments",entityId:s.id,entityName:`${s.id} - ${s.destination}`}),e.jsxs(Ae,{open:le===s.id,onOpenChange:t=>{X(t?s.id:null),t&&g({...s})},children:[e.jsx(Ee,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"sm",disabled:!p,title:p?void 0:"You don't have permission to edit shipments",children:"View / Edit"})}),e.jsxs(Be,{className:"sm:max-w-[500px]",children:[e.jsxs(Le,{children:[e.jsx(Ke,{children:"Edit Shipment"}),e.jsxs($e,{children:["Shipment ID: ",s.id]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"edit-salesOrderId",children:"Sales Order ID *"}),e.jsx(S,{id:"edit-salesOrderId",value:r.salesOrderId,onChange:t=>g({...r,salesOrderId:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"edit-status",children:"Status"}),e.jsxs(q,{value:r.status,onValueChange:t=>g({...r,status:t}),children:[e.jsx(z,{children:e.jsx(G,{placeholder:"Select status"})}),e.jsx(J,{children:ge.map(t=>e.jsx(L,{value:t,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:b(t)}),t]})},t))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"edit-destination",children:"Destination *"}),e.jsx(S,{id:"edit-destination",value:r.destination,onChange:t=>g({...r,destination:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"edit-carrier",children:"Carrier *"}),e.jsxs(q,{value:r.carrier,onValueChange:t=>g({...r,carrier:t}),children:[e.jsx(z,{children:e.jsx(G,{placeholder:"Select carrier"})}),e.jsx(J,{children:qe.map(t=>e.jsx(L,{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"edit-eta",children:"ETA *"}),e.jsx(S,{id:"edit-eta",type:"date",value:r.eta,onChange:t=>g({...r,eta:t.target.value})})]})]})]}),e.jsxs(Me,{className:"flex-col sm:flex-row gap-2",children:[e.jsxs(v,{variant:"destructive",onClick:()=>cs(s.id),className:"sm:mr-auto",children:[e.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Delete"]}),e.jsx(v,{variant:"outline",onClick:()=>X(null),children:"Cancel"}),e.jsx(v,{onClick:ds,children:"Save Changes"})]})]})]})]})})]},s.id)})})]}),ne.length>0&&e.jsx(Gs,{currentPage:Se,totalPages:Je,onPageChange:We,itemsPerPage:_e,totalItems:Ye})]})]})]})]})}export{pt as ShipmentsView};
