const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard-D2eLsofP.js","assets/skeleton-C1MU8BYw.js","assets/permissions-DeuZZz56.js","assets/trending-up-B3ZQYaSF.js","assets/shopping-bag-CbJShgrG.js","assets/inventory-view-B_2yXRJp.js","assets/sortable-table-head-DhgH0glg.js","assets/select-all-banner-Du3Os0aa.js","assets/plus-D7p57WxJ.js","assets/circle-check-sAOqQZCY.js","assets/favorite-button-CNo8XHy_.js","assets/useTableSort-Cvw3r7HB.js","assets/editable-cell-oPXiC1qt.js","assets/dollar-sign-Dz_AToaE.js","assets/image-gxYST_i1.js","assets/square-pen-AE-WbG9A.js","assets/trash-2-DrUnq5I_.js","assets/circle-alert-DXjwCBhl.js","assets/map-pin-DKq9BnM7.js","assets/file-text-DPSGn5OM.js","assets/hash-AK3q9pFA.js","assets/tag-UZsrwVUC.js","assets/building-2-Dl8Kmy2J.js","assets/purchase-orders-view-CcTBxFr2.js","assets/printable-receipt-2UXewhw0.js","assets/printer-DDO8rILi.js","assets/sales-orders-view-D5Zz0PQo.js","assets/sparkles-BsvigoDj.js","assets/minus-C9SxuTBL.js","assets/arrow-left-B6P4-stR.js","assets/calendar-BdJU6fmE.js","assets/banknote-DIWhs2wy.js","assets/credit-card-wxf35WnO.js","assets/shipments-view-BgWlI4bK.js","assets/circle-check-big-7ieXsn4f.js","assets/suppliers-view-eAl7pt88.js","assets/customers-view-jAtVQHUm.js","assets/user-management-view-BA8ycHwD.js","assets/crown-B4B8edEh.js","assets/admin-profile-view-Bz8UrEHz.js","assets/cash-bank-view-3OE7aPzR.js","assets/payments-view-C3KM3or0.js","assets/customer-dashboard-09GUL1IY.js","assets/products-catalog-view-DgvfoDIx.js","assets/customer-cart-view-CNakm6sF.js"])))=>i.map(i=>d[i]);
function f2(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var LW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function BI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ry={exports:{}},Su={},sy={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function p2(){if(fb)return rt;fb=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.iterator;function w(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,C={};function A(F,Q,ee){this.props=F,this.context=Q,this.refs=C,this.updater=ee||S}A.prototype.isReactComponent={},A.prototype.setState=function(F,Q){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Q,"setState")},A.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function O(){}O.prototype=A.prototype;function U(F,Q,ee){this.props=F,this.context=Q,this.refs=C,this.updater=ee||S}var z=U.prototype=new O;z.constructor=U,R(z,A.prototype),z.isPureReactComponent=!0;var q=Array.isArray,W=Object.prototype.hasOwnProperty,X={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function I(F,Q,ee){var le,ve={},be=null,_e=null;if(Q!=null)for(le in Q.ref!==void 0&&(_e=Q.ref),Q.key!==void 0&&(be=""+Q.key),Q)W.call(Q,le)&&!P.hasOwnProperty(le)&&(ve[le]=Q[le]);var Ie=arguments.length-2;if(Ie===1)ve.children=ee;else if(1<Ie){for(var Ge=Array(Ie),ft=0;ft<Ie;ft++)Ge[ft]=arguments[ft+2];ve.children=Ge}if(F&&F.defaultProps)for(le in Ie=F.defaultProps,Ie)ve[le]===void 0&&(ve[le]=Ie[le]);return{$$typeof:n,type:F,key:be,ref:_e,props:ve,_owner:X.current}}function k(F,Q){return{$$typeof:n,type:F.type,key:Q,ref:F.ref,props:F.props,_owner:F._owner}}function M(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function V(F){var Q={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(ee){return Q[ee]})}var L=/\/+/g;function N(F,Q){return typeof F=="object"&&F!==null&&F.key!=null?V(""+F.key):Q.toString(36)}function ue(F,Q,ee,le,ve){var be=typeof F;(be==="undefined"||be==="boolean")&&(F=null);var _e=!1;if(F===null)_e=!0;else switch(be){case"string":case"number":_e=!0;break;case"object":switch(F.$$typeof){case n:case e:_e=!0}}if(_e)return _e=F,ve=ve(_e),F=le===""?"."+N(_e,0):le,q(ve)?(ee="",F!=null&&(ee=F.replace(L,"$&/")+"/"),ue(ve,Q,ee,"",function(ft){return ft})):ve!=null&&(M(ve)&&(ve=k(ve,ee+(!ve.key||_e&&_e.key===ve.key?"":(""+ve.key).replace(L,"$&/")+"/")+F)),Q.push(ve)),1;if(_e=0,le=le===""?".":le+":",q(F))for(var Ie=0;Ie<F.length;Ie++){be=F[Ie];var Ge=le+N(be,Ie);_e+=ue(be,Q,ee,Ge,ve)}else if(Ge=w(F),typeof Ge=="function")for(F=Ge.call(F),Ie=0;!(be=F.next()).done;)be=be.value,Ge=le+N(be,Ie++),_e+=ue(be,Q,ee,Ge,ve);else if(be==="object")throw Q=String(F),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return _e}function Me(F,Q,ee){if(F==null)return F;var le=[],ve=0;return ue(F,le,"","",function(be){return Q.call(ee,be,ve++)}),le}function pe(F){if(F._status===-1){var Q=F._result;Q=Q(),Q.then(function(ee){(F._status===0||F._status===-1)&&(F._status=1,F._result=ee)},function(ee){(F._status===0||F._status===-1)&&(F._status=2,F._result=ee)}),F._status===-1&&(F._status=0,F._result=Q)}if(F._status===1)return F._result.default;throw F._result}var ye={current:null},H={transition:null},re={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:H,ReactCurrentOwner:X};function ae(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:Me,forEach:function(F,Q,ee){Me(F,function(){Q.apply(this,arguments)},ee)},count:function(F){var Q=0;return Me(F,function(){Q++}),Q},toArray:function(F){return Me(F,function(Q){return Q})||[]},only:function(F){if(!M(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},rt.Component=A,rt.Fragment=t,rt.Profiler=s,rt.PureComponent=U,rt.StrictMode=r,rt.Suspense=d,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,rt.act=ae,rt.cloneElement=function(F,Q,ee){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var le=R({},F.props),ve=F.key,be=F.ref,_e=F._owner;if(Q!=null){if(Q.ref!==void 0&&(be=Q.ref,_e=X.current),Q.key!==void 0&&(ve=""+Q.key),F.type&&F.type.defaultProps)var Ie=F.type.defaultProps;for(Ge in Q)W.call(Q,Ge)&&!P.hasOwnProperty(Ge)&&(le[Ge]=Q[Ge]===void 0&&Ie!==void 0?Ie[Ge]:Q[Ge])}var Ge=arguments.length-2;if(Ge===1)le.children=ee;else if(1<Ge){Ie=Array(Ge);for(var ft=0;ft<Ge;ft++)Ie[ft]=arguments[ft+2];le.children=Ie}return{$$typeof:n,type:F.type,key:ve,ref:be,props:le,_owner:_e}},rt.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:i,_context:F},F.Consumer=F},rt.createElement=I,rt.createFactory=function(F){var Q=I.bind(null,F);return Q.type=F,Q},rt.createRef=function(){return{current:null}},rt.forwardRef=function(F){return{$$typeof:u,render:F}},rt.isValidElement=M,rt.lazy=function(F){return{$$typeof:g,_payload:{_status:-1,_result:F},_init:pe}},rt.memo=function(F,Q){return{$$typeof:p,type:F,compare:Q===void 0?null:Q}},rt.startTransition=function(F){var Q=H.transition;H.transition={};try{F()}finally{H.transition=Q}},rt.unstable_act=ae,rt.useCallback=function(F,Q){return ye.current.useCallback(F,Q)},rt.useContext=function(F){return ye.current.useContext(F)},rt.useDebugValue=function(){},rt.useDeferredValue=function(F){return ye.current.useDeferredValue(F)},rt.useEffect=function(F,Q){return ye.current.useEffect(F,Q)},rt.useId=function(){return ye.current.useId()},rt.useImperativeHandle=function(F,Q,ee){return ye.current.useImperativeHandle(F,Q,ee)},rt.useInsertionEffect=function(F,Q){return ye.current.useInsertionEffect(F,Q)},rt.useLayoutEffect=function(F,Q){return ye.current.useLayoutEffect(F,Q)},rt.useMemo=function(F,Q){return ye.current.useMemo(F,Q)},rt.useReducer=function(F,Q,ee){return ye.current.useReducer(F,Q,ee)},rt.useRef=function(F){return ye.current.useRef(F)},rt.useState=function(F){return ye.current.useState(F)},rt.useSyncExternalStore=function(F,Q,ee){return ye.current.useSyncExternalStore(F,Q,ee)},rt.useTransition=function(){return ye.current.useTransition()},rt.version="18.3.1",rt}var pb;function t_(){return pb||(pb=1,sy.exports=p2()),sy.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mb;function m2(){if(mb)return Su;mb=1;var n=t_(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function c(u,d,p){var g,m={},w=null,S=null;p!==void 0&&(w=""+p),d.key!==void 0&&(w=""+d.key),d.ref!==void 0&&(S=d.ref);for(g in d)r.call(d,g)&&!i.hasOwnProperty(g)&&(m[g]=d[g]);if(u&&u.defaultProps)for(g in d=u.defaultProps,d)m[g]===void 0&&(m[g]=d[g]);return{$$typeof:e,type:u,key:w,ref:S,props:m,_owner:s.current}}return Su.Fragment=t,Su.jsx=c,Su.jsxs=c,Su}var gb;function g2(){return gb||(gb=1,ry.exports=m2()),ry.exports}var v=g2(),ef={},oy={exports:{}},nr={},iy={exports:{}},ay={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function y2(){return yb||(yb=1,(function(n){function e(H,re){var ae=H.length;H.push(re);e:for(;0<ae;){var F=ae-1>>>1,Q=H[F];if(0<s(Q,re))H[F]=re,H[ae]=Q,ae=F;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var re=H[0],ae=H.pop();if(ae!==re){H[0]=ae;e:for(var F=0,Q=H.length,ee=Q>>>1;F<ee;){var le=2*(F+1)-1,ve=H[le],be=le+1,_e=H[be];if(0>s(ve,ae))be<Q&&0>s(_e,ve)?(H[F]=_e,H[be]=ae,F=be):(H[F]=ve,H[le]=ae,F=le);else if(be<Q&&0>s(_e,ae))H[F]=_e,H[be]=ae,F=be;else break e}}return re}function s(H,re){var ae=H.sortIndex-re.sortIndex;return ae!==0?ae:H.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var c=Date,u=c.now();n.unstable_now=function(){return c.now()-u}}var d=[],p=[],g=1,m=null,w=3,S=!1,R=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(H){for(var re=t(p);re!==null;){if(re.callback===null)r(p);else if(re.startTime<=H)r(p),re.sortIndex=re.expirationTime,e(d,re);else break;re=t(p)}}function q(H){if(C=!1,z(H),!R)if(t(d)!==null)R=!0,pe(W);else{var re=t(p);re!==null&&ye(q,re.startTime-H)}}function W(H,re){R=!1,C&&(C=!1,O(I),I=-1),S=!0;var ae=w;try{for(z(re),m=t(d);m!==null&&(!(m.expirationTime>re)||H&&!V());){var F=m.callback;if(typeof F=="function"){m.callback=null,w=m.priorityLevel;var Q=F(m.expirationTime<=re);re=n.unstable_now(),typeof Q=="function"?m.callback=Q:m===t(d)&&r(d),z(re)}else r(d);m=t(d)}if(m!==null)var ee=!0;else{var le=t(p);le!==null&&ye(q,le.startTime-re),ee=!1}return ee}finally{m=null,w=ae,S=!1}}var X=!1,P=null,I=-1,k=5,M=-1;function V(){return!(n.unstable_now()-M<k)}function L(){if(P!==null){var H=n.unstable_now();M=H;var re=!0;try{re=P(!0,H)}finally{re?N():(X=!1,P=null)}}else X=!1}var N;if(typeof U=="function")N=function(){U(L)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Me=ue.port2;ue.port1.onmessage=L,N=function(){Me.postMessage(null)}}else N=function(){A(L,0)};function pe(H){P=H,X||(X=!0,N())}function ye(H,re){I=A(function(){H(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){R||S||(R=!0,pe(W))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(H){switch(w){case 1:case 2:case 3:var re=3;break;default:re=w}var ae=w;w=re;try{return H()}finally{w=ae}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,re){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ae=w;w=H;try{return re()}finally{w=ae}},n.unstable_scheduleCallback=function(H,re,ae){var F=n.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?F+ae:F):ae=F,H){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ae+Q,H={id:g++,callback:re,priorityLevel:H,startTime:ae,expirationTime:Q,sortIndex:-1},ae>F?(H.sortIndex=ae,e(p,H),t(d)===null&&H===t(p)&&(C?(O(I),I=-1):C=!0,ye(q,ae-F))):(H.sortIndex=Q,e(d,H),R||S||(R=!0,pe(W))),H},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(H){var re=w;return function(){var ae=w;w=re;try{return H.apply(this,arguments)}finally{w=ae}}}})(ay)),ay}var vb;function v2(){return vb||(vb=1,iy.exports=y2()),iy.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b;function _2(){if(_b)return nr;_b=1;var n=t_(),e=v2();function t(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,l=1;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(o,a){c(o,a),c(o+"Capture",a)}function c(o,a){for(s[o]=a,o=0;o<a.length;o++)r.add(a[o])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},m={};function w(o){return d.call(m,o)?!0:d.call(g,o)?!1:p.test(o)?m[o]=!0:(g[o]=!0,!1)}function S(o,a,l,f){if(l!==null&&l.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:l!==null?!l.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function R(o,a,l,f){if(a===null||typeof a>"u"||S(o,a,l,f))return!0;if(f)return!1;if(l!==null)switch(l.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function C(o,a,l,f,y,_,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=y,this.mustUseProperty=l,this.propertyName=o,this.type=a,this.sanitizeURL=_,this.removeEmptyString=T}var A={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){A[o]=new C(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];A[a]=new C(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){A[o]=new C(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){A[o]=new C(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){A[o]=new C(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){A[o]=new C(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){A[o]=new C(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){A[o]=new C(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){A[o]=new C(o,5,!1,o.toLowerCase(),null,!1,!1)});var O=/[\-:]([a-z])/g;function U(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace(O,U);A[a]=new C(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace(O,U);A[a]=new C(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(O,U);A[a]=new C(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){A[o]=new C(o,1,!1,o.toLowerCase(),null,!1,!1)}),A.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){A[o]=new C(o,1,!1,o.toLowerCase(),null,!0,!0)});function z(o,a,l,f){var y=A.hasOwnProperty(a)?A[a]:null;(y!==null?y.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(R(a,l,y,f)&&(l=null),f||y===null?w(a)&&(l===null?o.removeAttribute(a):o.setAttribute(a,""+l)):y.mustUseProperty?o[y.propertyName]=l===null?y.type===3?!1:"":l:(a=y.attributeName,f=y.attributeNamespace,l===null?o.removeAttribute(a):(y=y.type,l=y===3||y===4&&l===!0?"":""+l,f?o.setAttributeNS(f,a,l):o.setAttribute(a,l))))}var q=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,W=Symbol.for("react.element"),X=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),V=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),Me=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),H=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=H&&o[H]||o["@@iterator"],typeof o=="function"?o:null)}var ae=Object.assign,F;function Q(o){if(F===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+o}var ee=!1;function le(o,a){if(!o||ee)return"";ee=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(J){var f=J}Reflect.construct(o,[],a)}else{try{a.call()}catch(J){f=J}o.call(a.prototype)}else{try{throw Error()}catch(J){f=J}o()}}catch(J){if(J&&f&&typeof J.stack=="string"){for(var y=J.stack.split(`
`),_=f.stack.split(`
`),T=y.length-1,j=_.length-1;1<=T&&0<=j&&y[T]!==_[j];)j--;for(;1<=T&&0<=j;T--,j--)if(y[T]!==_[j]){if(T!==1||j!==1)do if(T--,j--,0>j||y[T]!==_[j]){var $=`
`+y[T].replace(" at new "," at ");return o.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",o.displayName)),$}while(1<=T&&0<=j);break}}}finally{ee=!1,Error.prepareStackTrace=l}return(o=o?o.displayName||o.name:"")?Q(o):""}function ve(o){switch(o.tag){case 5:return Q(o.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return o=le(o.type,!1),o;case 11:return o=le(o.type.render,!1),o;case 1:return o=le(o.type,!0),o;default:return""}}function be(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case P:return"Fragment";case X:return"Portal";case k:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case ue:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case V:return(o.displayName||"Context")+".Consumer";case M:return(o._context.displayName||"Context")+".Provider";case L:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Me:return a=o.displayName||null,a!==null?a:be(o.type)||"Memo";case pe:a=o._payload,o=o._init;try{return be(o(a))}catch{}}return null}function _e(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return be(a);case 8:return a===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ie(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ge(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ft(o){var a=Ge(o)?"checked":"value",l=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),f=""+o[a];if(!o.hasOwnProperty(a)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var y=l.get,_=l.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return y.call(this)},set:function(T){f=""+T,_.call(this,T)}}),Object.defineProperty(o,a,{enumerable:l.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function ct(o){o._valueTracker||(o._valueTracker=ft(o))}function me(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var l=a.getValue(),f="";return o&&(f=Ge(o)?o.checked?"true":"false":o.value),o=f,o!==l?(a.setValue(o),!0):!1}function Vt(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function ar(o,a){var l=a.checked;return ae({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??o._wrapperState.initialChecked})}function Ya(o,a){var l=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;l=Ie(a.value!=null?a.value:l),o._wrapperState={initialChecked:f,initialValue:l,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Qs(o,a){a=a.checked,a!=null&&z(o,"checked",a,!1)}function cr(o,a){Qs(o,a);var l=Ie(a.value),f=a.type;if(l!=null)f==="number"?(l===0&&o.value===""||o.value!=l)&&(o.value=""+l):o.value!==""+l&&(o.value=""+l);else if(f==="submit"||f==="reset"){o.removeAttribute("value");return}a.hasOwnProperty("value")?_t(o,a.type,l):a.hasOwnProperty("defaultValue")&&_t(o,a.type,Ie(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(o.defaultChecked=!!a.defaultChecked)}function Po(o,a,l){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+o._wrapperState.initialValue,l||a===o.value||(o.value=a),o.defaultValue=a}l=o.name,l!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,l!==""&&(o.name=l)}function _t(o,a,l){(a!=="number"||Vt(o.ownerDocument)!==o)&&(l==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+l&&(o.defaultValue=""+l))}var Lt=Array.isArray;function lr(o,a,l,f){if(o=o.options,a){a={};for(var y=0;y<l.length;y++)a["$"+l[y]]=!0;for(l=0;l<o.length;l++)y=a.hasOwnProperty("$"+o[l].value),o[l].selected!==y&&(o[l].selected=y),y&&f&&(o[l].defaultSelected=!0)}else{for(l=""+Ie(l),a=null,y=0;y<o.length;y++){if(o[y].value===l){o[y].selected=!0,f&&(o[y].defaultSelected=!0);return}a!==null||o[y].disabled||(a=o[y])}a!==null&&(a.selected=!0)}}function on(o,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ae({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Cr(o,a){var l=a.value;if(l==null){if(l=a.children,a=a.defaultValue,l!=null){if(a!=null)throw Error(t(92));if(Lt(l)){if(1<l.length)throw Error(t(93));l=l[0]}a=l}a==null&&(a=""),l=a}o._wrapperState={initialValue:Ie(l)}}function Xa(o,a){var l=Ie(a.value),f=Ie(a.defaultValue);l!=null&&(l=""+l,l!==o.value&&(o.value=l),a.defaultValue==null&&o.defaultValue!==l&&(o.defaultValue=l)),f!=null&&(o.defaultValue=""+f)}function hs(o){var a=o.textContent;a===o._wrapperState.initialValue&&a!==""&&a!==null&&(o.value=a)}function fs(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ko(o,a){return o==null||o==="http://www.w3.org/1999/xhtml"?fs(a):o==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Hr,No=(function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,l,f,y){MSApp.execUnsafeLocalFunction(function(){return o(a,l,f,y)})}:o})(function(o,a){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=a;else{for(Hr=Hr||document.createElement("div"),Hr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Hr.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}});function Zn(o,a){if(a){var l=o.firstChild;if(l&&l===o.lastChild&&l.nodeType===3){l.nodeValue=a;return}}o.textContent=a}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gr=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(o){Gr.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),Wr[a]=Wr[o]})});function ps(o,a,l){return a==null||typeof a=="boolean"||a===""?"":l||typeof a!="number"||a===0||Wr.hasOwnProperty(o)&&Wr[o]?(""+a).trim():a+"px"}function Do(o,a){o=o.style;for(var l in a)if(a.hasOwnProperty(l)){var f=l.indexOf("--")===0,y=ps(l,a[l],f);l==="float"&&(l="cssFloat"),f?o.setProperty(l,y):o[l]=y}}var Oo=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qn(o,a){if(a){if(Oo[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function Mo(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ar=null;function zn(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Kr=null,Zr=null,At=null;function Vo(o){if(o=lu(o)){if(typeof Kr!="function")throw Error(t(280));var a=o.stateNode;a&&(a=mh(a),Kr(o.stateNode,o.type,a))}}function qe(o){Zr?At?At.push(o):At=[o]:Zr=o}function St(){if(Zr){var o=Zr,a=At;if(At=Zr=null,Vo(o),a)for(o=0;o<a.length;o++)Vo(a[o])}}function Gt(o,a){return o(a)}function pn(){}var $n=!1;function $t(o,a,l){if($n)return o(a,l);$n=!0;try{return Gt(o,a,l)}finally{$n=!1,(Zr!==null||At!==null)&&(pn(),St())}}function Yt(o,a){var l=o.stateNode;if(l===null)return null;var f=mh(l);if(f===null)return null;l=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(l&&typeof l!="function")throw Error(t(231,a,typeof l));return l}var ur=!1;if(u)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){ur=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{ur=!1}function An(o,a,l,f,y,_,T,j,$){var J=Array.prototype.slice.call(arguments,3);try{a.apply(l,J)}catch(ce){this.onError(ce)}}var Rr=!1,mn=null,Fi=!1,Pr=null,Gd={onError:function(o){Rr=!0,mn=o}};function Kd(o,a,l,f,y,_,T,j,$){Rr=!1,mn=null,An.apply(Gd,arguments)}function Ll(o,a,l,f,y,_,T,j,$){if(Kd.apply(this,arguments),Rr){if(Rr){var J=mn;Rr=!1,mn=null}else throw Error(t(198));Fi||(Fi=!0,Pr=J)}}function Qr(o){var a=o,l=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(l=a.return),o=a.return;while(o)}return a.tag===3?l:null}function Fl(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function Zd(o){if(Qr(o)!==o)throw Error(t(188))}function Qd(o){var a=o.alternate;if(!a){if(a=Qr(o),a===null)throw Error(t(188));return a!==o?null:o}for(var l=o,f=a;;){var y=l.return;if(y===null)break;var _=y.alternate;if(_===null){if(f=y.return,f!==null){l=f;continue}break}if(y.child===_.child){for(_=y.child;_;){if(_===l)return Zd(y),o;if(_===f)return Zd(y),a;_=_.sibling}throw Error(t(188))}if(l.return!==f.return)l=y,f=_;else{for(var T=!1,j=y.child;j;){if(j===l){T=!0,l=y,f=_;break}if(j===f){T=!0,f=y,l=_;break}j=j.sibling}if(!T){for(j=_.child;j;){if(j===l){T=!0,l=_,f=y;break}if(j===f){T=!0,f=_,l=y;break}j=j.sibling}if(!T)throw Error(t(189))}}if(l.alternate!==f)throw Error(t(190))}if(l.tag!==3)throw Error(t(188));return l.stateNode.current===l?o:a}function Yd(o){return o=Qd(o),o!==null?ji(o):null}function ji(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=ji(o);if(a!==null)return a;o=o.sibling}return null}var jl=e.unstable_scheduleCallback,Ja=e.unstable_cancelCallback,Ui=e.unstable_shouldYield,Ys=e.unstable_requestPaint,Rt=e.unstable_now,Om=e.unstable_getCurrentPriorityLevel,ec=e.unstable_ImmediatePriority,Ul=e.unstable_UserBlockingPriority,zi=e.unstable_NormalPriority,zl=e.unstable_LowPriority,tc=e.unstable_IdlePriority,$i=null,dr=null;function Xd(o){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot($i,o,void 0,(o.current.flags&128)===128)}catch{}}var hr=Math.clz32?Math.clz32:Bi,ms=Math.log,kr=Math.LN2;function Bi(o){return o>>>=0,o===0?32:31-(ms(o)/kr|0)|0}var gs=64,Lo=4194304;function gt(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Xs(o,a){var l=o.pendingLanes;if(l===0)return 0;var f=0,y=o.suspendedLanes,_=o.pingedLanes,T=l&268435455;if(T!==0){var j=T&~y;j!==0?f=gt(j):(_&=T,_!==0&&(f=gt(_)))}else T=l&~y,T!==0?f=gt(T):_!==0&&(f=gt(_));if(f===0)return 0;if(a!==0&&a!==f&&(a&y)===0&&(y=f&-f,_=a&-a,y>=_||y===16&&(_&4194240)!==0))return a;if((f&4)!==0&&(f|=l&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=f;0<a;)l=31-hr(a),y=1<<l,f|=o[l],a&=~y;return f}function qi(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hi(o,a){for(var l=o.suspendedLanes,f=o.pingedLanes,y=o.expirationTimes,_=o.pendingLanes;0<_;){var T=31-hr(_),j=1<<T,$=y[T];$===-1?((j&l)===0||(j&f)!==0)&&(y[T]=qi(j,a)):$<=a&&(o.expiredLanes|=j),_&=~j}}function $l(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Bl(){var o=gs;return gs<<=1,(gs&4194240)===0&&(gs=64),o}function ql(o){for(var a=[],l=0;31>l;l++)a.push(o);return a}function Wi(o,a,l){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-hr(a),o[a]=l}function Mm(o,a){var l=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var f=o.eventTimes;for(o=o.expirationTimes;0<l;){var y=31-hr(l),_=1<<y;a[y]=0,f[y]=-1,o[y]=-1,l&=~_}}function Hl(o,a){var l=o.entangledLanes|=a;for(o=o.entanglements;l;){var f=31-hr(l),y=1<<f;y&a|o[f]&a&&(o[f]|=a),l&=~y}}var at=0;function ys(o){return o&=-o,1<o?4<o?(o&268435455)!==0?16:536870912:4:1}var Wl,nc,Gl,Kl,Zl,vs=!1,rc=[],_s=null,ws=null,En=null,Gi=new Map,Js=new Map,fr=[],Jd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fo(o,a){switch(o){case"focusin":case"focusout":_s=null;break;case"dragenter":case"dragleave":ws=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":Gi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Js.delete(a.pointerId)}}function Yr(o,a,l,f,y,_){return o===null||o.nativeEvent!==_?(o={blockedOn:a,domEventName:l,eventSystemFlags:f,nativeEvent:_,targetContainers:[y]},a!==null&&(a=lu(a),a!==null&&nc(a)),o):(o.eventSystemFlags|=f,a=o.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),o)}function eh(o,a,l,f,y){switch(a){case"focusin":return _s=Yr(_s,o,a,l,f,y),!0;case"dragenter":return ws=Yr(ws,o,a,l,f,y),!0;case"mouseover":return En=Yr(En,o,a,l,f,y),!0;case"pointerover":var _=y.pointerId;return Gi.set(_,Yr(Gi.get(_)||null,o,a,l,f,y)),!0;case"gotpointercapture":return _=y.pointerId,Js.set(_,Yr(Js.get(_)||null,o,a,l,f,y)),!0}return!1}function sc(o){var a=Yi(o.target);if(a!==null){var l=Qr(a);if(l!==null){if(a=l.tag,a===13){if(a=Fl(l),a!==null){o.blockedOn=a,Zl(o.priority,function(){Gl(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){o.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}o.blockedOn=null}function It(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var l=oc(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(l===null){l=o.nativeEvent;var f=new l.constructor(l.type,l);Ar=f,l.target.dispatchEvent(f),Ar=null}else return a=lu(l),a!==null&&nc(a),o.blockedOn=l,!1;a.shift()}return!0}function th(o,a,l){It(o)&&l.delete(a)}function Vm(){vs=!1,_s!==null&&It(_s)&&(_s=null),ws!==null&&It(ws)&&(ws=null),En!==null&&It(En)&&(En=null),Gi.forEach(th),Js.forEach(th)}function jo(o,a){o.blockedOn===a&&(o.blockedOn=null,vs||(vs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Vm)))}function Uo(o){function a(y){return jo(y,o)}if(0<rc.length){jo(rc[0],o);for(var l=1;l<rc.length;l++){var f=rc[l];f.blockedOn===o&&(f.blockedOn=null)}}for(_s!==null&&jo(_s,o),ws!==null&&jo(ws,o),En!==null&&jo(En,o),Gi.forEach(a),Js.forEach(a),l=0;l<fr.length;l++)f=fr[l],f.blockedOn===o&&(f.blockedOn=null);for(;0<fr.length&&(l=fr[0],l.blockedOn===null);)sc(l),l.blockedOn===null&&fr.shift()}var eo=q.ReactCurrentBatchConfig,to=!0;function Es(o,a,l,f){var y=at,_=eo.transition;eo.transition=null;try{at=1,Ql(o,a,l,f)}finally{at=y,eo.transition=_}}function nh(o,a,l,f){var y=at,_=eo.transition;eo.transition=null;try{at=4,Ql(o,a,l,f)}finally{at=y,eo.transition=_}}function Ql(o,a,l,f){if(to){var y=oc(o,a,l,f);if(y===null)Gm(o,a,f,bs,l),Fo(o,f);else if(eh(y,o,a,l,f))f.stopPropagation();else if(Fo(o,f),a&4&&-1<Jd.indexOf(o)){for(;y!==null;){var _=lu(y);if(_!==null&&Wl(_),_=oc(o,a,l,f),_===null&&Gm(o,a,f,bs,l),_===y)break;y=_}y!==null&&f.stopPropagation()}else Gm(o,a,f,null,l)}}var bs=null;function oc(o,a,l,f){if(bs=null,o=zn(f),o=Yi(o),o!==null)if(a=Qr(o),a===null)o=null;else if(l=a.tag,l===13){if(o=Fl(a),o!==null)return o;o=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return bs=o,null}function ic(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Om()){case ec:return 1;case Ul:return 4;case zi:case zl:return 16;case tc:return 536870912;default:return 16}default:return 16}}var pr=null,ac=null,no=null;function rh(){if(no)return no;var o,a=ac,l=a.length,f,y="value"in pr?pr.value:pr.textContent,_=y.length;for(o=0;o<l&&a[o]===y[o];o++);var T=l-o;for(f=1;f<=T&&a[l-f]===y[_-f];f++);return no=y.slice(o,1<f?1-f:void 0)}function Ki(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function xs(){return!0}function Yl(){return!1}function Rn(o){function a(l,f,y,_,T){this._reactName=l,this._targetInst=y,this.type=f,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var j in o)o.hasOwnProperty(j)&&(l=o[j],this[j]=l?l(_):_[j]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?xs:Yl,this.isPropagationStopped=Yl,this}return ae(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),a}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zi=Rn(Ss),zo=ae({},Ss,{view:0,detail:0}),cc=Rn(zo),lc,uc,mr,Qi=ae({},zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ye,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==mr&&(mr&&o.type==="mousemove"?(lc=o.screenX-mr.screenX,uc=o.screenY-mr.screenY):uc=lc=0,mr=o),lc)},movementY:function(o){return"movementY"in o?o.movementY:uc}}),Xl=Rn(Qi),sh=ae({},Qi,{dataTransfer:0}),oh=Rn(sh),dc=ae({},zo,{relatedTarget:0}),bn=Rn(dc),ih=ae({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),ah=Rn(ih),$o=ae({},Ss,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),h=Rn($o),E=ae({},Ss,{data:0}),x=Rn(E),D={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},te={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ee(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=te[o])?!!a[o]:!1}function Ye(){return Ee}var Kt=ae({},zo,{key:function(o){if(o.key){var a=D[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=Ki(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Z[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ye,charCode:function(o){return o.type==="keypress"?Ki(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Ki(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),wt=Rn(Kt),Jt=ae({},Qi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gr=Rn(Jt),ro=ae({},zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ye}),Is=Rn(ro),Ts=ae({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),hc=Rn(Ts),Jl=ae({},Qi,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),aN=Rn(Jl),cN=[9,13,27,32],Lm=u&&"CompositionEvent"in window,eu=null;u&&"documentMode"in document&&(eu=document.documentMode);var lN=u&&"TextEvent"in window&&!eu,o0=u&&(!Lm||eu&&8<eu&&11>=eu),i0=" ",a0=!1;function c0(o,a){switch(o){case"keyup":return cN.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l0(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var fc=!1;function uN(o,a){switch(o){case"compositionend":return l0(a);case"keypress":return a.which!==32?null:(a0=!0,i0);case"textInput":return o=a.data,o===i0&&a0?null:o;default:return null}}function dN(o,a){if(fc)return o==="compositionend"||!Lm&&c0(o,a)?(o=rh(),no=ac=pr=null,fc=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return o0&&a.locale!=="ko"?null:a.data;default:return null}}var hN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!hN[o.type]:a==="textarea"}function d0(o,a,l,f){qe(f),a=hh(a,"onChange"),0<a.length&&(l=new Zi("onChange","change",null,l,f),o.push({event:l,listeners:a}))}var tu=null,nu=null;function fN(o){R0(o,0)}function ch(o){var a=vc(o);if(me(a))return o}function pN(o,a){if(o==="change")return a}var h0=!1;if(u){var Fm;if(u){var jm="oninput"in document;if(!jm){var f0=document.createElement("div");f0.setAttribute("oninput","return;"),jm=typeof f0.oninput=="function"}Fm=jm}else Fm=!1;h0=Fm&&(!document.documentMode||9<document.documentMode)}function p0(){tu&&(tu.detachEvent("onpropertychange",m0),nu=tu=null)}function m0(o){if(o.propertyName==="value"&&ch(nu)){var a=[];d0(a,nu,o,zn(o)),$t(fN,a)}}function mN(o,a,l){o==="focusin"?(p0(),tu=a,nu=l,tu.attachEvent("onpropertychange",m0)):o==="focusout"&&p0()}function gN(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ch(nu)}function yN(o,a){if(o==="click")return ch(a)}function vN(o,a){if(o==="input"||o==="change")return ch(a)}function _N(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var Xr=typeof Object.is=="function"?Object.is:_N;function ru(o,a){if(Xr(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var l=Object.keys(o),f=Object.keys(a);if(l.length!==f.length)return!1;for(f=0;f<l.length;f++){var y=l[f];if(!d.call(a,y)||!Xr(o[y],a[y]))return!1}return!0}function g0(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function y0(o,a){var l=g0(o);o=0;for(var f;l;){if(l.nodeType===3){if(f=o+l.textContent.length,o<=a&&f>=a)return{node:l,offset:a-o};o=f}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=g0(l)}}function v0(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?v0(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function _0(){for(var o=window,a=Vt();a instanceof o.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)o=a.contentWindow;else break;a=Vt(o.document)}return a}function Um(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function wN(o){var a=_0(),l=o.focusedElem,f=o.selectionRange;if(a!==l&&l&&l.ownerDocument&&v0(l.ownerDocument.documentElement,l)){if(f!==null&&Um(l)){if(a=f.start,o=f.end,o===void 0&&(o=a),"selectionStart"in l)l.selectionStart=a,l.selectionEnd=Math.min(o,l.value.length);else if(o=(a=l.ownerDocument||document)&&a.defaultView||window,o.getSelection){o=o.getSelection();var y=l.textContent.length,_=Math.min(f.start,y);f=f.end===void 0?_:Math.min(f.end,y),!o.extend&&_>f&&(y=f,f=_,_=y),y=y0(l,_);var T=y0(l,f);y&&T&&(o.rangeCount!==1||o.anchorNode!==y.node||o.anchorOffset!==y.offset||o.focusNode!==T.node||o.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(y.node,y.offset),o.removeAllRanges(),_>f?(o.addRange(a),o.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),o.addRange(a)))}}for(a=[],o=l;o=o.parentNode;)o.nodeType===1&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<a.length;l++)o=a[l],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var EN=u&&"documentMode"in document&&11>=document.documentMode,pc=null,zm=null,su=null,$m=!1;function w0(o,a,l){var f=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;$m||pc==null||pc!==Vt(f)||(f=pc,"selectionStart"in f&&Um(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),su&&ru(su,f)||(su=f,f=hh(zm,"onSelect"),0<f.length&&(a=new Zi("onSelect","select",null,a,l),o.push({event:a,listeners:f}),a.target=pc)))}function lh(o,a){var l={};return l[o.toLowerCase()]=a.toLowerCase(),l["Webkit"+o]="webkit"+a,l["Moz"+o]="moz"+a,l}var mc={animationend:lh("Animation","AnimationEnd"),animationiteration:lh("Animation","AnimationIteration"),animationstart:lh("Animation","AnimationStart"),transitionend:lh("Transition","TransitionEnd")},Bm={},E0={};u&&(E0=document.createElement("div").style,"AnimationEvent"in window||(delete mc.animationend.animation,delete mc.animationiteration.animation,delete mc.animationstart.animation),"TransitionEvent"in window||delete mc.transitionend.transition);function uh(o){if(Bm[o])return Bm[o];if(!mc[o])return o;var a=mc[o],l;for(l in a)if(a.hasOwnProperty(l)&&l in E0)return Bm[o]=a[l];return o}var b0=uh("animationend"),x0=uh("animationiteration"),S0=uh("animationstart"),I0=uh("transitionend"),T0=new Map,C0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bo(o,a){T0.set(o,a),i(a,[o])}for(var qm=0;qm<C0.length;qm++){var Hm=C0[qm],bN=Hm.toLowerCase(),xN=Hm[0].toUpperCase()+Hm.slice(1);Bo(bN,"on"+xN)}Bo(b0,"onAnimationEnd"),Bo(x0,"onAnimationIteration"),Bo(S0,"onAnimationStart"),Bo("dblclick","onDoubleClick"),Bo("focusin","onFocus"),Bo("focusout","onBlur"),Bo(I0,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SN=new Set("cancel close invalid load scroll toggle".split(" ").concat(ou));function A0(o,a,l){var f=o.type||"unknown-event";o.currentTarget=l,Ll(f,a,void 0,o),o.currentTarget=null}function R0(o,a){a=(a&4)!==0;for(var l=0;l<o.length;l++){var f=o[l],y=f.event;f=f.listeners;e:{var _=void 0;if(a)for(var T=f.length-1;0<=T;T--){var j=f[T],$=j.instance,J=j.currentTarget;if(j=j.listener,$!==_&&y.isPropagationStopped())break e;A0(y,j,J),_=$}else for(T=0;T<f.length;T++){if(j=f[T],$=j.instance,J=j.currentTarget,j=j.listener,$!==_&&y.isPropagationStopped())break e;A0(y,j,J),_=$}}}if(Fi)throw o=Pr,Fi=!1,Pr=null,o}function Pt(o,a){var l=a[Jm];l===void 0&&(l=a[Jm]=new Set);var f=o+"__bubble";l.has(f)||(P0(a,o,2,!1),l.add(f))}function Wm(o,a,l){var f=0;a&&(f|=4),P0(l,o,f,a)}var dh="_reactListening"+Math.random().toString(36).slice(2);function iu(o){if(!o[dh]){o[dh]=!0,r.forEach(function(l){l!=="selectionchange"&&(SN.has(l)||Wm(l,!1,o),Wm(l,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[dh]||(a[dh]=!0,Wm("selectionchange",!1,a))}}function P0(o,a,l,f){switch(ic(a)){case 1:var y=Es;break;case 4:y=nh;break;default:y=Ql}l=y.bind(null,a,l,o),y=void 0,!ur||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),f?y!==void 0?o.addEventListener(a,l,{capture:!0,passive:y}):o.addEventListener(a,l,!0):y!==void 0?o.addEventListener(a,l,{passive:y}):o.addEventListener(a,l,!1)}function Gm(o,a,l,f,y){var _=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var j=f.stateNode.containerInfo;if(j===y||j.nodeType===8&&j.parentNode===y)break;if(T===4)for(T=f.return;T!==null;){var $=T.tag;if(($===3||$===4)&&($=T.stateNode.containerInfo,$===y||$.nodeType===8&&$.parentNode===y))return;T=T.return}for(;j!==null;){if(T=Yi(j),T===null)return;if($=T.tag,$===5||$===6){f=_=T;continue e}j=j.parentNode}}f=f.return}$t(function(){var J=_,ce=zn(l),he=[];e:{var oe=T0.get(o);if(oe!==void 0){var Te=Zi,Re=o;switch(o){case"keypress":if(Ki(l)===0)break e;case"keydown":case"keyup":Te=wt;break;case"focusin":Re="focus",Te=bn;break;case"focusout":Re="blur",Te=bn;break;case"beforeblur":case"afterblur":Te=bn;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=Xl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=oh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=Is;break;case b0:case x0:case S0:Te=ah;break;case I0:Te=hc;break;case"scroll":Te=cc;break;case"wheel":Te=aN;break;case"copy":case"cut":case"paste":Te=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=gr}var De=(a&4)!==0,Zt=!De&&o==="scroll",K=De?oe!==null?oe+"Capture":null:oe;De=[];for(var B=J,Y;B!==null;){Y=B;var ge=Y.stateNode;if(Y.tag===5&&ge!==null&&(Y=ge,K!==null&&(ge=Yt(B,K),ge!=null&&De.push(au(B,ge,Y)))),Zt)break;B=B.return}0<De.length&&(oe=new Te(oe,Re,null,l,ce),he.push({event:oe,listeners:De}))}}if((a&7)===0){e:{if(oe=o==="mouseover"||o==="pointerover",Te=o==="mouseout"||o==="pointerout",oe&&l!==Ar&&(Re=l.relatedTarget||l.fromElement)&&(Yi(Re)||Re[so]))break e;if((Te||oe)&&(oe=ce.window===ce?ce:(oe=ce.ownerDocument)?oe.defaultView||oe.parentWindow:window,Te?(Re=l.relatedTarget||l.toElement,Te=J,Re=Re?Yi(Re):null,Re!==null&&(Zt=Qr(Re),Re!==Zt||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Te=null,Re=J),Te!==Re)){if(De=Xl,ge="onMouseLeave",K="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(De=gr,ge="onPointerLeave",K="onPointerEnter",B="pointer"),Zt=Te==null?oe:vc(Te),Y=Re==null?oe:vc(Re),oe=new De(ge,B+"leave",Te,l,ce),oe.target=Zt,oe.relatedTarget=Y,ge=null,Yi(ce)===J&&(De=new De(K,B+"enter",Re,l,ce),De.target=Y,De.relatedTarget=Zt,ge=De),Zt=ge,Te&&Re)t:{for(De=Te,K=Re,B=0,Y=De;Y;Y=gc(Y))B++;for(Y=0,ge=K;ge;ge=gc(ge))Y++;for(;0<B-Y;)De=gc(De),B--;for(;0<Y-B;)K=gc(K),Y--;for(;B--;){if(De===K||K!==null&&De===K.alternate)break t;De=gc(De),K=gc(K)}De=null}else De=null;Te!==null&&k0(he,oe,Te,De,!1),Re!==null&&Zt!==null&&k0(he,Zt,Re,De,!0)}}e:{if(oe=J?vc(J):window,Te=oe.nodeName&&oe.nodeName.toLowerCase(),Te==="select"||Te==="input"&&oe.type==="file")var Oe=pN;else if(u0(oe))if(h0)Oe=vN;else{Oe=gN;var $e=mN}else(Te=oe.nodeName)&&Te.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Oe=yN);if(Oe&&(Oe=Oe(o,J))){d0(he,Oe,l,ce);break e}$e&&$e(o,oe,J),o==="focusout"&&($e=oe._wrapperState)&&$e.controlled&&oe.type==="number"&&_t(oe,"number",oe.value)}switch($e=J?vc(J):window,o){case"focusin":(u0($e)||$e.contentEditable==="true")&&(pc=$e,zm=J,su=null);break;case"focusout":su=zm=pc=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,w0(he,l,ce);break;case"selectionchange":if(EN)break;case"keydown":case"keyup":w0(he,l,ce)}var Be;if(Lm)e:{switch(o){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else fc?c0(o,l)&&(He="onCompositionEnd"):o==="keydown"&&l.keyCode===229&&(He="onCompositionStart");He&&(o0&&l.locale!=="ko"&&(fc||He!=="onCompositionStart"?He==="onCompositionEnd"&&fc&&(Be=rh()):(pr=ce,ac="value"in pr?pr.value:pr.textContent,fc=!0)),$e=hh(J,He),0<$e.length&&(He=new x(He,o,null,l,ce),he.push({event:He,listeners:$e}),Be?He.data=Be:(Be=l0(l),Be!==null&&(He.data=Be)))),(Be=lN?uN(o,l):dN(o,l))&&(J=hh(J,"onBeforeInput"),0<J.length&&(ce=new x("onBeforeInput","beforeinput",null,l,ce),he.push({event:ce,listeners:J}),ce.data=Be))}R0(he,a)})}function au(o,a,l){return{instance:o,listener:a,currentTarget:l}}function hh(o,a){for(var l=a+"Capture",f=[];o!==null;){var y=o,_=y.stateNode;y.tag===5&&_!==null&&(y=_,_=Yt(o,l),_!=null&&f.unshift(au(o,_,y)),_=Yt(o,a),_!=null&&f.push(au(o,_,y))),o=o.return}return f}function gc(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function k0(o,a,l,f,y){for(var _=a._reactName,T=[];l!==null&&l!==f;){var j=l,$=j.alternate,J=j.stateNode;if($!==null&&$===f)break;j.tag===5&&J!==null&&(j=J,y?($=Yt(l,_),$!=null&&T.unshift(au(l,$,j))):y||($=Yt(l,_),$!=null&&T.push(au(l,$,j)))),l=l.return}T.length!==0&&o.push({event:a,listeners:T})}var IN=/\r\n?/g,TN=/\u0000|\uFFFD/g;function N0(o){return(typeof o=="string"?o:""+o).replace(IN,`
`).replace(TN,"")}function fh(o,a,l){if(a=N0(a),N0(o)!==a&&l)throw Error(t(425))}function ph(){}var Km=null,Zm=null;function Qm(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ym=typeof setTimeout=="function"?setTimeout:void 0,CN=typeof clearTimeout=="function"?clearTimeout:void 0,D0=typeof Promise=="function"?Promise:void 0,AN=typeof queueMicrotask=="function"?queueMicrotask:typeof D0<"u"?function(o){return D0.resolve(null).then(o).catch(RN)}:Ym;function RN(o){setTimeout(function(){throw o})}function Xm(o,a){var l=a,f=0;do{var y=l.nextSibling;if(o.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"){if(f===0){o.removeChild(y),Uo(a);return}f--}else l!=="$"&&l!=="$?"&&l!=="$!"||f++;l=y}while(l);Uo(a)}function qo(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return o}function O0(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var l=o.data;if(l==="$"||l==="$!"||l==="$?"){if(a===0)return o;a--}else l==="/$"&&a++}o=o.previousSibling}return null}var yc=Math.random().toString(36).slice(2),Cs="__reactFiber$"+yc,cu="__reactProps$"+yc,so="__reactContainer$"+yc,Jm="__reactEvents$"+yc,PN="__reactListeners$"+yc,kN="__reactHandles$"+yc;function Yi(o){var a=o[Cs];if(a)return a;for(var l=o.parentNode;l;){if(a=l[so]||l[Cs]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(o=O0(o);o!==null;){if(l=o[Cs])return l;o=O0(o)}return a}o=l,l=o.parentNode}return null}function lu(o){return o=o[Cs]||o[so],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function vc(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function mh(o){return o[cu]||null}var eg=[],_c=-1;function Ho(o){return{current:o}}function kt(o){0>_c||(o.current=eg[_c],eg[_c]=null,_c--)}function Tt(o,a){_c++,eg[_c]=o.current,o.current=a}var Wo={},Pn=Ho(Wo),Yn=Ho(!1),Xi=Wo;function wc(o,a){var l=o.type.contextTypes;if(!l)return Wo;var f=o.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var y={},_;for(_ in l)y[_]=a[_];return f&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=y),y}function Xn(o){return o=o.childContextTypes,o!=null}function gh(){kt(Yn),kt(Pn)}function M0(o,a,l){if(Pn.current!==Wo)throw Error(t(168));Tt(Pn,a),Tt(Yn,l)}function V0(o,a,l){var f=o.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return l;f=f.getChildContext();for(var y in f)if(!(y in a))throw Error(t(108,_e(o)||"Unknown",y));return ae({},l,f)}function yh(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Wo,Xi=Pn.current,Tt(Pn,o),Tt(Yn,Yn.current),!0}function L0(o,a,l){var f=o.stateNode;if(!f)throw Error(t(169));l?(o=V0(o,a,Xi),f.__reactInternalMemoizedMergedChildContext=o,kt(Yn),kt(Pn),Tt(Pn,o)):kt(Yn),Tt(Yn,l)}var oo=null,vh=!1,tg=!1;function F0(o){oo===null?oo=[o]:oo.push(o)}function NN(o){vh=!0,F0(o)}function Go(){if(!tg&&oo!==null){tg=!0;var o=0,a=at;try{var l=oo;for(at=1;o<l.length;o++){var f=l[o];do f=f(!0);while(f!==null)}oo=null,vh=!1}catch(y){throw oo!==null&&(oo=oo.slice(o+1)),jl(ec,Go),y}finally{at=a,tg=!1}}return null}var Ec=[],bc=0,_h=null,wh=0,Nr=[],Dr=0,Ji=null,io=1,ao="";function ea(o,a){Ec[bc++]=wh,Ec[bc++]=_h,_h=o,wh=a}function j0(o,a,l){Nr[Dr++]=io,Nr[Dr++]=ao,Nr[Dr++]=Ji,Ji=o;var f=io;o=ao;var y=32-hr(f)-1;f&=~(1<<y),l+=1;var _=32-hr(a)+y;if(30<_){var T=y-y%5;_=(f&(1<<T)-1).toString(32),f>>=T,y-=T,io=1<<32-hr(a)+y|l<<y|f,ao=_+o}else io=1<<_|l<<y|f,ao=o}function ng(o){o.return!==null&&(ea(o,1),j0(o,1,0))}function rg(o){for(;o===_h;)_h=Ec[--bc],Ec[bc]=null,wh=Ec[--bc],Ec[bc]=null;for(;o===Ji;)Ji=Nr[--Dr],Nr[Dr]=null,ao=Nr[--Dr],Nr[Dr]=null,io=Nr[--Dr],Nr[Dr]=null}var yr=null,vr=null,Nt=!1,Jr=null;function U0(o,a){var l=Lr(5,null,null,0);l.elementType="DELETED",l.stateNode=a,l.return=o,a=o.deletions,a===null?(o.deletions=[l],o.flags|=16):a.push(l)}function z0(o,a){switch(o.tag){case 5:var l=o.type;return a=a.nodeType!==1||l.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(o.stateNode=a,yr=o,vr=qo(a.firstChild),!0):!1;case 6:return a=o.pendingProps===""||a.nodeType!==3?null:a,a!==null?(o.stateNode=a,yr=o,vr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(l=Ji!==null?{id:io,overflow:ao}:null,o.memoizedState={dehydrated:a,treeContext:l,retryLane:1073741824},l=Lr(18,null,null,0),l.stateNode=a,l.return=o,o.child=l,yr=o,vr=null,!0):!1;default:return!1}}function sg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function og(o){if(Nt){var a=vr;if(a){var l=a;if(!z0(o,a)){if(sg(o))throw Error(t(418));a=qo(l.nextSibling);var f=yr;a&&z0(o,a)?U0(f,l):(o.flags=o.flags&-4097|2,Nt=!1,yr=o)}}else{if(sg(o))throw Error(t(418));o.flags=o.flags&-4097|2,Nt=!1,yr=o}}}function $0(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;yr=o}function Eh(o){if(o!==yr)return!1;if(!Nt)return $0(o),Nt=!0,!1;var a;if((a=o.tag!==3)&&!(a=o.tag!==5)&&(a=o.type,a=a!=="head"&&a!=="body"&&!Qm(o.type,o.memoizedProps)),a&&(a=vr)){if(sg(o))throw B0(),Error(t(418));for(;a;)U0(o,a),a=qo(a.nextSibling)}if($0(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8){var l=o.data;if(l==="/$"){if(a===0){vr=qo(o.nextSibling);break e}a--}else l!=="$"&&l!=="$!"&&l!=="$?"||a++}o=o.nextSibling}vr=null}}else vr=yr?qo(o.stateNode.nextSibling):null;return!0}function B0(){for(var o=vr;o;)o=qo(o.nextSibling)}function xc(){vr=yr=null,Nt=!1}function ig(o){Jr===null?Jr=[o]:Jr.push(o)}var DN=q.ReactCurrentBatchConfig;function uu(o,a,l){if(o=l.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(t(309));var f=l.stateNode}if(!f)throw Error(t(147,o));var y=f,_=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===_?a.ref:(a=function(T){var j=y.refs;T===null?delete j[_]:j[_]=T},a._stringRef=_,a)}if(typeof o!="string")throw Error(t(284));if(!l._owner)throw Error(t(290,o))}return o}function bh(o,a){throw o=Object.prototype.toString.call(a),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function q0(o){var a=o._init;return a(o._payload)}function H0(o){function a(K,B){if(o){var Y=K.deletions;Y===null?(K.deletions=[B],K.flags|=16):Y.push(B)}}function l(K,B){if(!o)return null;for(;B!==null;)a(K,B),B=B.sibling;return null}function f(K,B){for(K=new Map;B!==null;)B.key!==null?K.set(B.key,B):K.set(B.index,B),B=B.sibling;return K}function y(K,B){return K=ti(K,B),K.index=0,K.sibling=null,K}function _(K,B,Y){return K.index=Y,o?(Y=K.alternate,Y!==null?(Y=Y.index,Y<B?(K.flags|=2,B):Y):(K.flags|=2,B)):(K.flags|=1048576,B)}function T(K){return o&&K.alternate===null&&(K.flags|=2),K}function j(K,B,Y,ge){return B===null||B.tag!==6?(B=Yg(Y,K.mode,ge),B.return=K,B):(B=y(B,Y),B.return=K,B)}function $(K,B,Y,ge){var Oe=Y.type;return Oe===P?ce(K,B,Y.props.children,ge,Y.key):B!==null&&(B.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===pe&&q0(Oe)===B.type)?(ge=y(B,Y.props),ge.ref=uu(K,B,Y),ge.return=K,ge):(ge=Wh(Y.type,Y.key,Y.props,null,K.mode,ge),ge.ref=uu(K,B,Y),ge.return=K,ge)}function J(K,B,Y,ge){return B===null||B.tag!==4||B.stateNode.containerInfo!==Y.containerInfo||B.stateNode.implementation!==Y.implementation?(B=Xg(Y,K.mode,ge),B.return=K,B):(B=y(B,Y.children||[]),B.return=K,B)}function ce(K,B,Y,ge,Oe){return B===null||B.tag!==7?(B=ca(Y,K.mode,ge,Oe),B.return=K,B):(B=y(B,Y),B.return=K,B)}function he(K,B,Y){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Yg(""+B,K.mode,Y),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case W:return Y=Wh(B.type,B.key,B.props,null,K.mode,Y),Y.ref=uu(K,null,B),Y.return=K,Y;case X:return B=Xg(B,K.mode,Y),B.return=K,B;case pe:var ge=B._init;return he(K,ge(B._payload),Y)}if(Lt(B)||re(B))return B=ca(B,K.mode,Y,null),B.return=K,B;bh(K,B)}return null}function oe(K,B,Y,ge){var Oe=B!==null?B.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Oe!==null?null:j(K,B,""+Y,ge);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case W:return Y.key===Oe?$(K,B,Y,ge):null;case X:return Y.key===Oe?J(K,B,Y,ge):null;case pe:return Oe=Y._init,oe(K,B,Oe(Y._payload),ge)}if(Lt(Y)||re(Y))return Oe!==null?null:ce(K,B,Y,ge,null);bh(K,Y)}return null}function Te(K,B,Y,ge,Oe){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return K=K.get(Y)||null,j(B,K,""+ge,Oe);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case W:return K=K.get(ge.key===null?Y:ge.key)||null,$(B,K,ge,Oe);case X:return K=K.get(ge.key===null?Y:ge.key)||null,J(B,K,ge,Oe);case pe:var $e=ge._init;return Te(K,B,Y,$e(ge._payload),Oe)}if(Lt(ge)||re(ge))return K=K.get(Y)||null,ce(B,K,ge,Oe,null);bh(B,ge)}return null}function Re(K,B,Y,ge){for(var Oe=null,$e=null,Be=B,He=B=0,vn=null;Be!==null&&He<Y.length;He++){Be.index>He?(vn=Be,Be=null):vn=Be.sibling;var pt=oe(K,Be,Y[He],ge);if(pt===null){Be===null&&(Be=vn);break}o&&Be&&pt.alternate===null&&a(K,Be),B=_(pt,B,He),$e===null?Oe=pt:$e.sibling=pt,$e=pt,Be=vn}if(He===Y.length)return l(K,Be),Nt&&ea(K,He),Oe;if(Be===null){for(;He<Y.length;He++)Be=he(K,Y[He],ge),Be!==null&&(B=_(Be,B,He),$e===null?Oe=Be:$e.sibling=Be,$e=Be);return Nt&&ea(K,He),Oe}for(Be=f(K,Be);He<Y.length;He++)vn=Te(Be,K,He,Y[He],ge),vn!==null&&(o&&vn.alternate!==null&&Be.delete(vn.key===null?He:vn.key),B=_(vn,B,He),$e===null?Oe=vn:$e.sibling=vn,$e=vn);return o&&Be.forEach(function(ni){return a(K,ni)}),Nt&&ea(K,He),Oe}function De(K,B,Y,ge){var Oe=re(Y);if(typeof Oe!="function")throw Error(t(150));if(Y=Oe.call(Y),Y==null)throw Error(t(151));for(var $e=Oe=null,Be=B,He=B=0,vn=null,pt=Y.next();Be!==null&&!pt.done;He++,pt=Y.next()){Be.index>He?(vn=Be,Be=null):vn=Be.sibling;var ni=oe(K,Be,pt.value,ge);if(ni===null){Be===null&&(Be=vn);break}o&&Be&&ni.alternate===null&&a(K,Be),B=_(ni,B,He),$e===null?Oe=ni:$e.sibling=ni,$e=ni,Be=vn}if(pt.done)return l(K,Be),Nt&&ea(K,He),Oe;if(Be===null){for(;!pt.done;He++,pt=Y.next())pt=he(K,pt.value,ge),pt!==null&&(B=_(pt,B,He),$e===null?Oe=pt:$e.sibling=pt,$e=pt);return Nt&&ea(K,He),Oe}for(Be=f(K,Be);!pt.done;He++,pt=Y.next())pt=Te(Be,K,He,pt.value,ge),pt!==null&&(o&&pt.alternate!==null&&Be.delete(pt.key===null?He:pt.key),B=_(pt,B,He),$e===null?Oe=pt:$e.sibling=pt,$e=pt);return o&&Be.forEach(function(h2){return a(K,h2)}),Nt&&ea(K,He),Oe}function Zt(K,B,Y,ge){if(typeof Y=="object"&&Y!==null&&Y.type===P&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case W:e:{for(var Oe=Y.key,$e=B;$e!==null;){if($e.key===Oe){if(Oe=Y.type,Oe===P){if($e.tag===7){l(K,$e.sibling),B=y($e,Y.props.children),B.return=K,K=B;break e}}else if($e.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===pe&&q0(Oe)===$e.type){l(K,$e.sibling),B=y($e,Y.props),B.ref=uu(K,$e,Y),B.return=K,K=B;break e}l(K,$e);break}else a(K,$e);$e=$e.sibling}Y.type===P?(B=ca(Y.props.children,K.mode,ge,Y.key),B.return=K,K=B):(ge=Wh(Y.type,Y.key,Y.props,null,K.mode,ge),ge.ref=uu(K,B,Y),ge.return=K,K=ge)}return T(K);case X:e:{for($e=Y.key;B!==null;){if(B.key===$e)if(B.tag===4&&B.stateNode.containerInfo===Y.containerInfo&&B.stateNode.implementation===Y.implementation){l(K,B.sibling),B=y(B,Y.children||[]),B.return=K,K=B;break e}else{l(K,B);break}else a(K,B);B=B.sibling}B=Xg(Y,K.mode,ge),B.return=K,K=B}return T(K);case pe:return $e=Y._init,Zt(K,B,$e(Y._payload),ge)}if(Lt(Y))return Re(K,B,Y,ge);if(re(Y))return De(K,B,Y,ge);bh(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,B!==null&&B.tag===6?(l(K,B.sibling),B=y(B,Y),B.return=K,K=B):(l(K,B),B=Yg(Y,K.mode,ge),B.return=K,K=B),T(K)):l(K,B)}return Zt}var Sc=H0(!0),W0=H0(!1),xh=Ho(null),Sh=null,Ic=null,ag=null;function cg(){ag=Ic=Sh=null}function lg(o){var a=xh.current;kt(xh),o._currentValue=a}function ug(o,a,l){for(;o!==null;){var f=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),o===l)break;o=o.return}}function Tc(o,a){Sh=o,ag=Ic=null,o=o.dependencies,o!==null&&o.firstContext!==null&&((o.lanes&a)!==0&&(Jn=!0),o.firstContext=null)}function Or(o){var a=o._currentValue;if(ag!==o)if(o={context:o,memoizedValue:a,next:null},Ic===null){if(Sh===null)throw Error(t(308));Ic=o,Sh.dependencies={lanes:0,firstContext:o}}else Ic=Ic.next=o;return a}var ta=null;function dg(o){ta===null?ta=[o]:ta.push(o)}function G0(o,a,l,f){var y=a.interleaved;return y===null?(l.next=l,dg(a)):(l.next=y.next,y.next=l),a.interleaved=l,co(o,f)}function co(o,a){o.lanes|=a;var l=o.alternate;for(l!==null&&(l.lanes|=a),l=o,o=o.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),l=o,o=o.return;return l.tag===3?l.stateNode:null}var Ko=!1;function hg(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K0(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function lo(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function Zo(o,a,l){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(dt&2)!==0){var y=f.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),f.pending=a,co(o,l)}return y=f.interleaved,y===null?(a.next=a,dg(f)):(a.next=y.next,y.next=a),f.interleaved=a,co(o,l)}function Ih(o,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194240)!==0)){var f=a.lanes;f&=o.pendingLanes,l|=f,a.lanes=l,Hl(o,l)}}function Z0(o,a){var l=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,l===f)){var y=null,_=null;if(l=l.firstBaseUpdate,l!==null){do{var T={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};_===null?y=_=T:_=_.next=T,l=l.next}while(l!==null);_===null?y=_=a:_=_.next=a}else y=_=a;l={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:_,shared:f.shared,effects:f.effects},o.updateQueue=l;return}o=l.lastBaseUpdate,o===null?l.firstBaseUpdate=a:o.next=a,l.lastBaseUpdate=a}function Th(o,a,l,f){var y=o.updateQueue;Ko=!1;var _=y.firstBaseUpdate,T=y.lastBaseUpdate,j=y.shared.pending;if(j!==null){y.shared.pending=null;var $=j,J=$.next;$.next=null,T===null?_=J:T.next=J,T=$;var ce=o.alternate;ce!==null&&(ce=ce.updateQueue,j=ce.lastBaseUpdate,j!==T&&(j===null?ce.firstBaseUpdate=J:j.next=J,ce.lastBaseUpdate=$))}if(_!==null){var he=y.baseState;T=0,ce=J=$=null,j=_;do{var oe=j.lane,Te=j.eventTime;if((f&oe)===oe){ce!==null&&(ce=ce.next={eventTime:Te,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Re=o,De=j;switch(oe=a,Te=l,De.tag){case 1:if(Re=De.payload,typeof Re=="function"){he=Re.call(Te,he,oe);break e}he=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=De.payload,oe=typeof Re=="function"?Re.call(Te,he,oe):Re,oe==null)break e;he=ae({},he,oe);break e;case 2:Ko=!0}}j.callback!==null&&j.lane!==0&&(o.flags|=64,oe=y.effects,oe===null?y.effects=[j]:oe.push(j))}else Te={eventTime:Te,lane:oe,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ce===null?(J=ce=Te,$=he):ce=ce.next=Te,T|=oe;if(j=j.next,j===null){if(j=y.shared.pending,j===null)break;oe=j,j=oe.next,oe.next=null,y.lastBaseUpdate=oe,y.shared.pending=null}}while(!0);if(ce===null&&($=he),y.baseState=$,y.firstBaseUpdate=J,y.lastBaseUpdate=ce,a=y.shared.interleaved,a!==null){y=a;do T|=y.lane,y=y.next;while(y!==a)}else _===null&&(y.shared.lanes=0);sa|=T,o.lanes=T,o.memoizedState=he}}function Q0(o,a,l){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var f=o[a],y=f.callback;if(y!==null){if(f.callback=null,f=l,typeof y!="function")throw Error(t(191,y));y.call(f)}}}var du={},As=Ho(du),hu=Ho(du),fu=Ho(du);function na(o){if(o===du)throw Error(t(174));return o}function fg(o,a){switch(Tt(fu,a),Tt(hu,o),Tt(As,du),o=a.nodeType,o){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:ko(null,"");break;default:o=o===8?a.parentNode:a,a=o.namespaceURI||null,o=o.tagName,a=ko(a,o)}kt(As),Tt(As,a)}function Cc(){kt(As),kt(hu),kt(fu)}function Y0(o){na(fu.current);var a=na(As.current),l=ko(a,o.type);a!==l&&(Tt(hu,o),Tt(As,l))}function pg(o){hu.current===o&&(kt(As),kt(hu))}var Ft=Ho(0);function Ch(o){for(var a=o;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var mg=[];function gg(){for(var o=0;o<mg.length;o++)mg[o]._workInProgressVersionPrimary=null;mg.length=0}var Ah=q.ReactCurrentDispatcher,yg=q.ReactCurrentBatchConfig,ra=0,jt=null,an=null,gn=null,Rh=!1,pu=!1,mu=0,ON=0;function kn(){throw Error(t(321))}function vg(o,a){if(a===null)return!1;for(var l=0;l<a.length&&l<o.length;l++)if(!Xr(o[l],a[l]))return!1;return!0}function _g(o,a,l,f,y,_){if(ra=_,jt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Ah.current=o===null||o.memoizedState===null?FN:jN,o=l(f,y),pu){_=0;do{if(pu=!1,mu=0,25<=_)throw Error(t(301));_+=1,gn=an=null,a.updateQueue=null,Ah.current=UN,o=l(f,y)}while(pu)}if(Ah.current=Nh,a=an!==null&&an.next!==null,ra=0,gn=an=jt=null,Rh=!1,a)throw Error(t(300));return o}function wg(){var o=mu!==0;return mu=0,o}function Rs(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?jt.memoizedState=gn=o:gn=gn.next=o,gn}function Mr(){if(an===null){var o=jt.alternate;o=o!==null?o.memoizedState:null}else o=an.next;var a=gn===null?jt.memoizedState:gn.next;if(a!==null)gn=a,an=o;else{if(o===null)throw Error(t(310));an=o,o={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},gn===null?jt.memoizedState=gn=o:gn=gn.next=o}return gn}function gu(o,a){return typeof a=="function"?a(o):a}function Eg(o){var a=Mr(),l=a.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=o;var f=an,y=f.baseQueue,_=l.pending;if(_!==null){if(y!==null){var T=y.next;y.next=_.next,_.next=T}f.baseQueue=y=_,l.pending=null}if(y!==null){_=y.next,f=f.baseState;var j=T=null,$=null,J=_;do{var ce=J.lane;if((ra&ce)===ce)$!==null&&($=$.next={lane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),f=J.hasEagerState?J.eagerState:o(f,J.action);else{var he={lane:ce,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null};$===null?(j=$=he,T=f):$=$.next=he,jt.lanes|=ce,sa|=ce}J=J.next}while(J!==null&&J!==_);$===null?T=f:$.next=j,Xr(f,a.memoizedState)||(Jn=!0),a.memoizedState=f,a.baseState=T,a.baseQueue=$,l.lastRenderedState=f}if(o=l.interleaved,o!==null){y=o;do _=y.lane,jt.lanes|=_,sa|=_,y=y.next;while(y!==o)}else y===null&&(l.lanes=0);return[a.memoizedState,l.dispatch]}function bg(o){var a=Mr(),l=a.queue;if(l===null)throw Error(t(311));l.lastRenderedReducer=o;var f=l.dispatch,y=l.pending,_=a.memoizedState;if(y!==null){l.pending=null;var T=y=y.next;do _=o(_,T.action),T=T.next;while(T!==y);Xr(_,a.memoizedState)||(Jn=!0),a.memoizedState=_,a.baseQueue===null&&(a.baseState=_),l.lastRenderedState=_}return[_,f]}function X0(){}function J0(o,a){var l=jt,f=Mr(),y=a(),_=!Xr(f.memoizedState,y);if(_&&(f.memoizedState=y,Jn=!0),f=f.queue,xg(nE.bind(null,l,f,o),[o]),f.getSnapshot!==a||_||gn!==null&&gn.memoizedState.tag&1){if(l.flags|=2048,yu(9,tE.bind(null,l,f,y,a),void 0,null),yn===null)throw Error(t(349));(ra&30)!==0||eE(l,a,y)}return y}function eE(o,a,l){o.flags|=16384,o={getSnapshot:a,value:l},a=jt.updateQueue,a===null?(a={lastEffect:null,stores:null},jt.updateQueue=a,a.stores=[o]):(l=a.stores,l===null?a.stores=[o]:l.push(o))}function tE(o,a,l,f){a.value=l,a.getSnapshot=f,rE(a)&&sE(o)}function nE(o,a,l){return l(function(){rE(a)&&sE(o)})}function rE(o){var a=o.getSnapshot;o=o.value;try{var l=a();return!Xr(o,l)}catch{return!0}}function sE(o){var a=co(o,1);a!==null&&rs(a,o,1,-1)}function oE(o){var a=Rs();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:o},a.queue=o,o=o.dispatch=LN.bind(null,jt,o),[a.memoizedState,o]}function yu(o,a,l,f){return o={tag:o,create:a,destroy:l,deps:f,next:null},a=jt.updateQueue,a===null?(a={lastEffect:null,stores:null},jt.updateQueue=a,a.lastEffect=o.next=o):(l=a.lastEffect,l===null?a.lastEffect=o.next=o:(f=l.next,l.next=o,o.next=f,a.lastEffect=o)),o}function iE(){return Mr().memoizedState}function Ph(o,a,l,f){var y=Rs();jt.flags|=o,y.memoizedState=yu(1|a,l,void 0,f===void 0?null:f)}function kh(o,a,l,f){var y=Mr();f=f===void 0?null:f;var _=void 0;if(an!==null){var T=an.memoizedState;if(_=T.destroy,f!==null&&vg(f,T.deps)){y.memoizedState=yu(a,l,_,f);return}}jt.flags|=o,y.memoizedState=yu(1|a,l,_,f)}function aE(o,a){return Ph(8390656,8,o,a)}function xg(o,a){return kh(2048,8,o,a)}function cE(o,a){return kh(4,2,o,a)}function lE(o,a){return kh(4,4,o,a)}function uE(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function dE(o,a,l){return l=l!=null?l.concat([o]):null,kh(4,4,uE.bind(null,a,o),l)}function Sg(){}function hE(o,a){var l=Mr();a=a===void 0?null:a;var f=l.memoizedState;return f!==null&&a!==null&&vg(a,f[1])?f[0]:(l.memoizedState=[o,a],o)}function fE(o,a){var l=Mr();a=a===void 0?null:a;var f=l.memoizedState;return f!==null&&a!==null&&vg(a,f[1])?f[0]:(o=o(),l.memoizedState=[o,a],o)}function pE(o,a,l){return(ra&21)===0?(o.baseState&&(o.baseState=!1,Jn=!0),o.memoizedState=l):(Xr(l,a)||(l=Bl(),jt.lanes|=l,sa|=l,o.baseState=!0),a)}function MN(o,a){var l=at;at=l!==0&&4>l?l:4,o(!0);var f=yg.transition;yg.transition={};try{o(!1),a()}finally{at=l,yg.transition=f}}function mE(){return Mr().memoizedState}function VN(o,a,l){var f=Jo(o);if(l={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null},gE(o))yE(a,l);else if(l=G0(o,a,l,f),l!==null){var y=qn();rs(l,o,f,y),vE(l,a,f)}}function LN(o,a,l){var f=Jo(o),y={lane:f,action:l,hasEagerState:!1,eagerState:null,next:null};if(gE(o))yE(a,y);else{var _=o.alternate;if(o.lanes===0&&(_===null||_.lanes===0)&&(_=a.lastRenderedReducer,_!==null))try{var T=a.lastRenderedState,j=_(T,l);if(y.hasEagerState=!0,y.eagerState=j,Xr(j,T)){var $=a.interleaved;$===null?(y.next=y,dg(a)):(y.next=$.next,$.next=y),a.interleaved=y;return}}catch{}finally{}l=G0(o,a,y,f),l!==null&&(y=qn(),rs(l,o,f,y),vE(l,a,f))}}function gE(o){var a=o.alternate;return o===jt||a!==null&&a===jt}function yE(o,a){pu=Rh=!0;var l=o.pending;l===null?a.next=a:(a.next=l.next,l.next=a),o.pending=a}function vE(o,a,l){if((l&4194240)!==0){var f=a.lanes;f&=o.pendingLanes,l|=f,a.lanes=l,Hl(o,l)}}var Nh={readContext:Or,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},FN={readContext:Or,useCallback:function(o,a){return Rs().memoizedState=[o,a===void 0?null:a],o},useContext:Or,useEffect:aE,useImperativeHandle:function(o,a,l){return l=l!=null?l.concat([o]):null,Ph(4194308,4,uE.bind(null,a,o),l)},useLayoutEffect:function(o,a){return Ph(4194308,4,o,a)},useInsertionEffect:function(o,a){return Ph(4,2,o,a)},useMemo:function(o,a){var l=Rs();return a=a===void 0?null:a,o=o(),l.memoizedState=[o,a],o},useReducer:function(o,a,l){var f=Rs();return a=l!==void 0?l(a):a,f.memoizedState=f.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},f.queue=o,o=o.dispatch=VN.bind(null,jt,o),[f.memoizedState,o]},useRef:function(o){var a=Rs();return o={current:o},a.memoizedState=o},useState:oE,useDebugValue:Sg,useDeferredValue:function(o){return Rs().memoizedState=o},useTransition:function(){var o=oE(!1),a=o[0];return o=MN.bind(null,o[1]),Rs().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,l){var f=jt,y=Rs();if(Nt){if(l===void 0)throw Error(t(407));l=l()}else{if(l=a(),yn===null)throw Error(t(349));(ra&30)!==0||eE(f,a,l)}y.memoizedState=l;var _={value:l,getSnapshot:a};return y.queue=_,aE(nE.bind(null,f,_,o),[o]),f.flags|=2048,yu(9,tE.bind(null,f,_,l,a),void 0,null),l},useId:function(){var o=Rs(),a=yn.identifierPrefix;if(Nt){var l=ao,f=io;l=(f&~(1<<32-hr(f)-1)).toString(32)+l,a=":"+a+"R"+l,l=mu++,0<l&&(a+="H"+l.toString(32)),a+=":"}else l=ON++,a=":"+a+"r"+l.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},jN={readContext:Or,useCallback:hE,useContext:Or,useEffect:xg,useImperativeHandle:dE,useInsertionEffect:cE,useLayoutEffect:lE,useMemo:fE,useReducer:Eg,useRef:iE,useState:function(){return Eg(gu)},useDebugValue:Sg,useDeferredValue:function(o){var a=Mr();return pE(a,an.memoizedState,o)},useTransition:function(){var o=Eg(gu)[0],a=Mr().memoizedState;return[o,a]},useMutableSource:X0,useSyncExternalStore:J0,useId:mE,unstable_isNewReconciler:!1},UN={readContext:Or,useCallback:hE,useContext:Or,useEffect:xg,useImperativeHandle:dE,useInsertionEffect:cE,useLayoutEffect:lE,useMemo:fE,useReducer:bg,useRef:iE,useState:function(){return bg(gu)},useDebugValue:Sg,useDeferredValue:function(o){var a=Mr();return an===null?a.memoizedState=o:pE(a,an.memoizedState,o)},useTransition:function(){var o=bg(gu)[0],a=Mr().memoizedState;return[o,a]},useMutableSource:X0,useSyncExternalStore:J0,useId:mE,unstable_isNewReconciler:!1};function es(o,a){if(o&&o.defaultProps){a=ae({},a),o=o.defaultProps;for(var l in o)a[l]===void 0&&(a[l]=o[l]);return a}return a}function Ig(o,a,l,f){a=o.memoizedState,l=l(f,a),l=l==null?a:ae({},a,l),o.memoizedState=l,o.lanes===0&&(o.updateQueue.baseState=l)}var Dh={isMounted:function(o){return(o=o._reactInternals)?Qr(o)===o:!1},enqueueSetState:function(o,a,l){o=o._reactInternals;var f=qn(),y=Jo(o),_=lo(f,y);_.payload=a,l!=null&&(_.callback=l),a=Zo(o,_,y),a!==null&&(rs(a,o,y,f),Ih(a,o,y))},enqueueReplaceState:function(o,a,l){o=o._reactInternals;var f=qn(),y=Jo(o),_=lo(f,y);_.tag=1,_.payload=a,l!=null&&(_.callback=l),a=Zo(o,_,y),a!==null&&(rs(a,o,y,f),Ih(a,o,y))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var l=qn(),f=Jo(o),y=lo(l,f);y.tag=2,a!=null&&(y.callback=a),a=Zo(o,y,f),a!==null&&(rs(a,o,f,l),Ih(a,o,f))}};function _E(o,a,l,f,y,_,T){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,_,T):a.prototype&&a.prototype.isPureReactComponent?!ru(l,f)||!ru(y,_):!0}function wE(o,a,l){var f=!1,y=Wo,_=a.contextType;return typeof _=="object"&&_!==null?_=Or(_):(y=Xn(a)?Xi:Pn.current,f=a.contextTypes,_=(f=f!=null)?wc(o,y):Wo),a=new a(l,_),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Dh,o.stateNode=a,a._reactInternals=o,f&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=y,o.__reactInternalMemoizedMaskedChildContext=_),a}function EE(o,a,l,f){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,f),a.state!==o&&Dh.enqueueReplaceState(a,a.state,null)}function Tg(o,a,l,f){var y=o.stateNode;y.props=l,y.state=o.memoizedState,y.refs={},hg(o);var _=a.contextType;typeof _=="object"&&_!==null?y.context=Or(_):(_=Xn(a)?Xi:Pn.current,y.context=wc(o,_)),y.state=o.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Ig(o,a,_,l),y.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(a=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),a!==y.state&&Dh.enqueueReplaceState(y,y.state,null),Th(o,l,y,f),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308)}function Ac(o,a){try{var l="",f=a;do l+=ve(f),f=f.return;while(f);var y=l}catch(_){y=`
Error generating stack: `+_.message+`
`+_.stack}return{value:o,source:a,stack:y,digest:null}}function Cg(o,a,l){return{value:o,source:null,stack:l??null,digest:a??null}}function Ag(o,a){try{console.error(a.value)}catch(l){setTimeout(function(){throw l})}}var zN=typeof WeakMap=="function"?WeakMap:Map;function bE(o,a,l){l=lo(-1,l),l.tag=3,l.payload={element:null};var f=a.value;return l.callback=function(){Uh||(Uh=!0,Bg=f),Ag(o,a)},l}function xE(o,a,l){l=lo(-1,l),l.tag=3;var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var y=a.value;l.payload=function(){return f(y)},l.callback=function(){Ag(o,a)}}var _=o.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(l.callback=function(){Ag(o,a),typeof f!="function"&&(Yo===null?Yo=new Set([this]):Yo.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),l}function SE(o,a,l){var f=o.pingCache;if(f===null){f=o.pingCache=new zN;var y=new Set;f.set(a,y)}else y=f.get(a),y===void 0&&(y=new Set,f.set(a,y));y.has(l)||(y.add(l),o=t2.bind(null,o,a,l),a.then(o,o))}function IE(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function TE(o,a,l,f,y){return(o.mode&1)===0?(o===a?o.flags|=65536:(o.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(a=lo(-1,1),a.tag=2,Zo(l,a,1))),l.lanes|=1),o):(o.flags|=65536,o.lanes=y,o)}var $N=q.ReactCurrentOwner,Jn=!1;function Bn(o,a,l,f){a.child=o===null?W0(a,null,l,f):Sc(a,o.child,l,f)}function CE(o,a,l,f,y){l=l.render;var _=a.ref;return Tc(a,y),f=_g(o,a,l,f,_,y),l=wg(),o!==null&&!Jn?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~y,uo(o,a,y)):(Nt&&l&&ng(a),a.flags|=1,Bn(o,a,f,y),a.child)}function AE(o,a,l,f,y){if(o===null){var _=l.type;return typeof _=="function"&&!Qg(_)&&_.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(a.tag=15,a.type=_,RE(o,a,_,f,y)):(o=Wh(l.type,null,f,a,a.mode,y),o.ref=a.ref,o.return=a,a.child=o)}if(_=o.child,(o.lanes&y)===0){var T=_.memoizedProps;if(l=l.compare,l=l!==null?l:ru,l(T,f)&&o.ref===a.ref)return uo(o,a,y)}return a.flags|=1,o=ti(_,f),o.ref=a.ref,o.return=a,a.child=o}function RE(o,a,l,f,y){if(o!==null){var _=o.memoizedProps;if(ru(_,f)&&o.ref===a.ref)if(Jn=!1,a.pendingProps=f=_,(o.lanes&y)!==0)(o.flags&131072)!==0&&(Jn=!0);else return a.lanes=o.lanes,uo(o,a,y)}return Rg(o,a,l,f,y)}function PE(o,a,l){var f=a.pendingProps,y=f.children,_=o!==null?o.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(Pc,_r),_r|=l;else{if((l&1073741824)===0)return o=_!==null?_.baseLanes|l:l,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,Tt(Pc,_r),_r|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:l,Tt(Pc,_r),_r|=f}else _!==null?(f=_.baseLanes|l,a.memoizedState=null):f=l,Tt(Pc,_r),_r|=f;return Bn(o,a,y,l),a.child}function kE(o,a){var l=a.ref;(o===null&&l!==null||o!==null&&o.ref!==l)&&(a.flags|=512,a.flags|=2097152)}function Rg(o,a,l,f,y){var _=Xn(l)?Xi:Pn.current;return _=wc(a,_),Tc(a,y),l=_g(o,a,l,f,_,y),f=wg(),o!==null&&!Jn?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~y,uo(o,a,y)):(Nt&&f&&ng(a),a.flags|=1,Bn(o,a,l,y),a.child)}function NE(o,a,l,f,y){if(Xn(l)){var _=!0;yh(a)}else _=!1;if(Tc(a,y),a.stateNode===null)Mh(o,a),wE(a,l,f),Tg(a,l,f,y),f=!0;else if(o===null){var T=a.stateNode,j=a.memoizedProps;T.props=j;var $=T.context,J=l.contextType;typeof J=="object"&&J!==null?J=Or(J):(J=Xn(l)?Xi:Pn.current,J=wc(a,J));var ce=l.getDerivedStateFromProps,he=typeof ce=="function"||typeof T.getSnapshotBeforeUpdate=="function";he||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(j!==f||$!==J)&&EE(a,T,f,J),Ko=!1;var oe=a.memoizedState;T.state=oe,Th(a,f,T,y),$=a.memoizedState,j!==f||oe!==$||Yn.current||Ko?(typeof ce=="function"&&(Ig(a,l,ce,f),$=a.memoizedState),(j=Ko||_E(a,l,j,f,oe,$,J))?(he||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=$),T.props=f,T.state=$,T.context=J,f=j):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{T=a.stateNode,K0(o,a),j=a.memoizedProps,J=a.type===a.elementType?j:es(a.type,j),T.props=J,he=a.pendingProps,oe=T.context,$=l.contextType,typeof $=="object"&&$!==null?$=Or($):($=Xn(l)?Xi:Pn.current,$=wc(a,$));var Te=l.getDerivedStateFromProps;(ce=typeof Te=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(j!==he||oe!==$)&&EE(a,T,f,$),Ko=!1,oe=a.memoizedState,T.state=oe,Th(a,f,T,y);var Re=a.memoizedState;j!==he||oe!==Re||Yn.current||Ko?(typeof Te=="function"&&(Ig(a,l,Te,f),Re=a.memoizedState),(J=Ko||_E(a,l,J,f,oe,Re,$)||!1)?(ce||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,Re,$),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,Re,$)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||j===o.memoizedProps&&oe===o.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&oe===o.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Re),T.props=f,T.state=Re,T.context=$,f=J):(typeof T.componentDidUpdate!="function"||j===o.memoizedProps&&oe===o.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||j===o.memoizedProps&&oe===o.memoizedState||(a.flags|=1024),f=!1)}return Pg(o,a,l,f,_,y)}function Pg(o,a,l,f,y,_){kE(o,a);var T=(a.flags&128)!==0;if(!f&&!T)return y&&L0(a,l,!1),uo(o,a,_);f=a.stateNode,$N.current=a;var j=T&&typeof l.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,o!==null&&T?(a.child=Sc(a,o.child,null,_),a.child=Sc(a,null,j,_)):Bn(o,a,j,_),a.memoizedState=f.state,y&&L0(a,l,!0),a.child}function DE(o){var a=o.stateNode;a.pendingContext?M0(o,a.pendingContext,a.pendingContext!==a.context):a.context&&M0(o,a.context,!1),fg(o,a.containerInfo)}function OE(o,a,l,f,y){return xc(),ig(y),a.flags|=256,Bn(o,a,l,f),a.child}var kg={dehydrated:null,treeContext:null,retryLane:0};function Ng(o){return{baseLanes:o,cachePool:null,transitions:null}}function ME(o,a,l){var f=a.pendingProps,y=Ft.current,_=!1,T=(a.flags&128)!==0,j;if((j=T)||(j=o!==null&&o.memoizedState===null?!1:(y&2)!==0),j?(_=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(y|=1),Tt(Ft,y&1),o===null)return og(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?((a.mode&1)===0?a.lanes=1:o.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=f.children,o=f.fallback,_?(f=a.mode,_=a.child,T={mode:"hidden",children:T},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=T):_=Gh(T,f,0,null),o=ca(o,f,l,null),_.return=a,o.return=a,_.sibling=o,a.child=_,a.child.memoizedState=Ng(l),a.memoizedState=kg,o):Dg(a,T));if(y=o.memoizedState,y!==null&&(j=y.dehydrated,j!==null))return BN(o,a,T,f,j,y,l);if(_){_=f.fallback,T=a.mode,y=o.child,j=y.sibling;var $={mode:"hidden",children:f.children};return(T&1)===0&&a.child!==y?(f=a.child,f.childLanes=0,f.pendingProps=$,a.deletions=null):(f=ti(y,$),f.subtreeFlags=y.subtreeFlags&14680064),j!==null?_=ti(j,_):(_=ca(_,T,l,null),_.flags|=2),_.return=a,f.return=a,f.sibling=_,a.child=f,f=_,_=a.child,T=o.child.memoizedState,T=T===null?Ng(l):{baseLanes:T.baseLanes|l,cachePool:null,transitions:T.transitions},_.memoizedState=T,_.childLanes=o.childLanes&~l,a.memoizedState=kg,f}return _=o.child,o=_.sibling,f=ti(_,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=l),f.return=a,f.sibling=null,o!==null&&(l=a.deletions,l===null?(a.deletions=[o],a.flags|=16):l.push(o)),a.child=f,a.memoizedState=null,f}function Dg(o,a){return a=Gh({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function Oh(o,a,l,f){return f!==null&&ig(f),Sc(a,o.child,null,l),o=Dg(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function BN(o,a,l,f,y,_,T){if(l)return a.flags&256?(a.flags&=-257,f=Cg(Error(t(422))),Oh(o,a,T,f)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(_=f.fallback,y=a.mode,f=Gh({mode:"visible",children:f.children},y,0,null),_=ca(_,y,T,null),_.flags|=2,f.return=a,_.return=a,f.sibling=_,a.child=f,(a.mode&1)!==0&&Sc(a,o.child,null,T),a.child.memoizedState=Ng(T),a.memoizedState=kg,_);if((a.mode&1)===0)return Oh(o,a,T,null);if(y.data==="$!"){if(f=y.nextSibling&&y.nextSibling.dataset,f)var j=f.dgst;return f=j,_=Error(t(419)),f=Cg(_,f,void 0),Oh(o,a,T,f)}if(j=(T&o.childLanes)!==0,Jn||j){if(f=yn,f!==null){switch(T&-T){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=(y&(f.suspendedLanes|T))!==0?0:y,y!==0&&y!==_.retryLane&&(_.retryLane=y,co(o,y),rs(f,o,y,-1))}return Zg(),f=Cg(Error(t(421))),Oh(o,a,T,f)}return y.data==="$?"?(a.flags|=128,a.child=o.child,a=n2.bind(null,o),y._reactRetry=a,null):(o=_.treeContext,vr=qo(y.nextSibling),yr=a,Nt=!0,Jr=null,o!==null&&(Nr[Dr++]=io,Nr[Dr++]=ao,Nr[Dr++]=Ji,io=o.id,ao=o.overflow,Ji=a),a=Dg(a,f.children),a.flags|=4096,a)}function VE(o,a,l){o.lanes|=a;var f=o.alternate;f!==null&&(f.lanes|=a),ug(o.return,a,l)}function Og(o,a,l,f,y){var _=o.memoizedState;_===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:l,tailMode:y}:(_.isBackwards=a,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=l,_.tailMode=y)}function LE(o,a,l){var f=a.pendingProps,y=f.revealOrder,_=f.tail;if(Bn(o,a,f.children,l),f=Ft.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&VE(o,l,a);else if(o.tag===19)VE(o,l,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}f&=1}if(Tt(Ft,f),(a.mode&1)===0)a.memoizedState=null;else switch(y){case"forwards":for(l=a.child,y=null;l!==null;)o=l.alternate,o!==null&&Ch(o)===null&&(y=l),l=l.sibling;l=y,l===null?(y=a.child,a.child=null):(y=l.sibling,l.sibling=null),Og(a,!1,y,l,_);break;case"backwards":for(l=null,y=a.child,a.child=null;y!==null;){if(o=y.alternate,o!==null&&Ch(o)===null){a.child=y;break}o=y.sibling,y.sibling=l,l=y,y=o}Og(a,!0,l,null,_);break;case"together":Og(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Mh(o,a){(a.mode&1)===0&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function uo(o,a,l){if(o!==null&&(a.dependencies=o.dependencies),sa|=a.lanes,(l&a.childLanes)===0)return null;if(o!==null&&a.child!==o.child)throw Error(t(153));if(a.child!==null){for(o=a.child,l=ti(o,o.pendingProps),a.child=l,l.return=a;o.sibling!==null;)o=o.sibling,l=l.sibling=ti(o,o.pendingProps),l.return=a;l.sibling=null}return a.child}function qN(o,a,l){switch(a.tag){case 3:DE(a),xc();break;case 5:Y0(a);break;case 1:Xn(a.type)&&yh(a);break;case 4:fg(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,y=a.memoizedProps.value;Tt(xh,f._currentValue),f._currentValue=y;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(Tt(Ft,Ft.current&1),a.flags|=128,null):(l&a.child.childLanes)!==0?ME(o,a,l):(Tt(Ft,Ft.current&1),o=uo(o,a,l),o!==null?o.sibling:null);Tt(Ft,Ft.current&1);break;case 19:if(f=(l&a.childLanes)!==0,(o.flags&128)!==0){if(f)return LE(o,a,l);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Tt(Ft,Ft.current),f)break;return null;case 22:case 23:return a.lanes=0,PE(o,a,l)}return uo(o,a,l)}var FE,Mg,jE,UE;FE=function(o,a){for(var l=a.child;l!==null;){if(l.tag===5||l.tag===6)o.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},Mg=function(){},jE=function(o,a,l,f){var y=o.memoizedProps;if(y!==f){o=a.stateNode,na(As.current);var _=null;switch(l){case"input":y=ar(o,y),f=ar(o,f),_=[];break;case"select":y=ae({},y,{value:void 0}),f=ae({},f,{value:void 0}),_=[];break;case"textarea":y=on(o,y),f=on(o,f),_=[];break;default:typeof y.onClick!="function"&&typeof f.onClick=="function"&&(o.onclick=ph)}Qn(l,f);var T;l=null;for(J in y)if(!f.hasOwnProperty(J)&&y.hasOwnProperty(J)&&y[J]!=null)if(J==="style"){var j=y[J];for(T in j)j.hasOwnProperty(T)&&(l||(l={}),l[T]="")}else J!=="dangerouslySetInnerHTML"&&J!=="children"&&J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&J!=="autoFocus"&&(s.hasOwnProperty(J)?_||(_=[]):(_=_||[]).push(J,null));for(J in f){var $=f[J];if(j=y?.[J],f.hasOwnProperty(J)&&$!==j&&($!=null||j!=null))if(J==="style")if(j){for(T in j)!j.hasOwnProperty(T)||$&&$.hasOwnProperty(T)||(l||(l={}),l[T]="");for(T in $)$.hasOwnProperty(T)&&j[T]!==$[T]&&(l||(l={}),l[T]=$[T])}else l||(_||(_=[]),_.push(J,l)),l=$;else J==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,j=j?j.__html:void 0,$!=null&&j!==$&&(_=_||[]).push(J,$)):J==="children"?typeof $!="string"&&typeof $!="number"||(_=_||[]).push(J,""+$):J!=="suppressContentEditableWarning"&&J!=="suppressHydrationWarning"&&(s.hasOwnProperty(J)?($!=null&&J==="onScroll"&&Pt("scroll",o),_||j===$||(_=[])):(_=_||[]).push(J,$))}l&&(_=_||[]).push("style",l);var J=_;(a.updateQueue=J)&&(a.flags|=4)}},UE=function(o,a,l,f){l!==f&&(a.flags|=4)};function vu(o,a){if(!Nt)switch(o.tailMode){case"hidden":a=o.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?o.tail=null:l.sibling=null;break;case"collapsed":l=o.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function Nn(o){var a=o.alternate!==null&&o.alternate.child===o.child,l=0,f=0;if(a)for(var y=o.child;y!==null;)l|=y.lanes|y.childLanes,f|=y.subtreeFlags&14680064,f|=y.flags&14680064,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)l|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=f,o.childLanes=l,a}function HN(o,a,l){var f=a.pendingProps;switch(rg(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(a),null;case 1:return Xn(a.type)&&gh(),Nn(a),null;case 3:return f=a.stateNode,Cc(),kt(Yn),kt(Pn),gg(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(o===null||o.child===null)&&(Eh(a)?a.flags|=4:o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Jr!==null&&(Wg(Jr),Jr=null))),Mg(o,a),Nn(a),null;case 5:pg(a);var y=na(fu.current);if(l=a.type,o!==null&&a.stateNode!=null)jE(o,a,l,f,y),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return Nn(a),null}if(o=na(As.current),Eh(a)){f=a.stateNode,l=a.type;var _=a.memoizedProps;switch(f[Cs]=a,f[cu]=_,o=(a.mode&1)!==0,l){case"dialog":Pt("cancel",f),Pt("close",f);break;case"iframe":case"object":case"embed":Pt("load",f);break;case"video":case"audio":for(y=0;y<ou.length;y++)Pt(ou[y],f);break;case"source":Pt("error",f);break;case"img":case"image":case"link":Pt("error",f),Pt("load",f);break;case"details":Pt("toggle",f);break;case"input":Ya(f,_),Pt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},Pt("invalid",f);break;case"textarea":Cr(f,_),Pt("invalid",f)}Qn(l,_),y=null;for(var T in _)if(_.hasOwnProperty(T)){var j=_[T];T==="children"?typeof j=="string"?f.textContent!==j&&(_.suppressHydrationWarning!==!0&&fh(f.textContent,j,o),y=["children",j]):typeof j=="number"&&f.textContent!==""+j&&(_.suppressHydrationWarning!==!0&&fh(f.textContent,j,o),y=["children",""+j]):s.hasOwnProperty(T)&&j!=null&&T==="onScroll"&&Pt("scroll",f)}switch(l){case"input":ct(f),Po(f,_,!0);break;case"textarea":ct(f),hs(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=ph)}f=y,a.updateQueue=f,f!==null&&(a.flags|=4)}else{T=y.nodeType===9?y:y.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=fs(l)),o==="http://www.w3.org/1999/xhtml"?l==="script"?(o=T.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof f.is=="string"?o=T.createElement(l,{is:f.is}):(o=T.createElement(l),l==="select"&&(T=o,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):o=T.createElementNS(o,l),o[Cs]=a,o[cu]=f,FE(o,a,!1,!1),a.stateNode=o;e:{switch(T=Mo(l,f),l){case"dialog":Pt("cancel",o),Pt("close",o),y=f;break;case"iframe":case"object":case"embed":Pt("load",o),y=f;break;case"video":case"audio":for(y=0;y<ou.length;y++)Pt(ou[y],o);y=f;break;case"source":Pt("error",o),y=f;break;case"img":case"image":case"link":Pt("error",o),Pt("load",o),y=f;break;case"details":Pt("toggle",o),y=f;break;case"input":Ya(o,f),y=ar(o,f),Pt("invalid",o);break;case"option":y=f;break;case"select":o._wrapperState={wasMultiple:!!f.multiple},y=ae({},f,{value:void 0}),Pt("invalid",o);break;case"textarea":Cr(o,f),y=on(o,f),Pt("invalid",o);break;default:y=f}Qn(l,y),j=y;for(_ in j)if(j.hasOwnProperty(_)){var $=j[_];_==="style"?Do(o,$):_==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&No(o,$)):_==="children"?typeof $=="string"?(l!=="textarea"||$!=="")&&Zn(o,$):typeof $=="number"&&Zn(o,""+$):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?$!=null&&_==="onScroll"&&Pt("scroll",o):$!=null&&z(o,_,$,T))}switch(l){case"input":ct(o),Po(o,f,!1);break;case"textarea":ct(o),hs(o);break;case"option":f.value!=null&&o.setAttribute("value",""+Ie(f.value));break;case"select":o.multiple=!!f.multiple,_=f.value,_!=null?lr(o,!!f.multiple,_,!1):f.defaultValue!=null&&lr(o,!!f.multiple,f.defaultValue,!0);break;default:typeof y.onClick=="function"&&(o.onclick=ph)}switch(l){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Nn(a),null;case 6:if(o&&a.stateNode!=null)UE(o,a,o.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(l=na(fu.current),na(As.current),Eh(a)){if(f=a.stateNode,l=a.memoizedProps,f[Cs]=a,(_=f.nodeValue!==l)&&(o=yr,o!==null))switch(o.tag){case 3:fh(f.nodeValue,l,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&fh(f.nodeValue,l,(o.mode&1)!==0)}_&&(a.flags|=4)}else f=(l.nodeType===9?l:l.ownerDocument).createTextNode(f),f[Cs]=a,a.stateNode=f}return Nn(a),null;case 13:if(kt(Ft),f=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Nt&&vr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)B0(),xc(),a.flags|=98560,_=!1;else if(_=Eh(a),f!==null&&f.dehydrated!==null){if(o===null){if(!_)throw Error(t(318));if(_=a.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Cs]=a}else xc(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Nn(a),_=!1}else Jr!==null&&(Wg(Jr),Jr=null),_=!0;if(!_)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=l,a):(f=f!==null,f!==(o!==null&&o.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(o===null||(Ft.current&1)!==0?cn===0&&(cn=3):Zg())),a.updateQueue!==null&&(a.flags|=4),Nn(a),null);case 4:return Cc(),Mg(o,a),o===null&&iu(a.stateNode.containerInfo),Nn(a),null;case 10:return lg(a.type._context),Nn(a),null;case 17:return Xn(a.type)&&gh(),Nn(a),null;case 19:if(kt(Ft),_=a.memoizedState,_===null)return Nn(a),null;if(f=(a.flags&128)!==0,T=_.rendering,T===null)if(f)vu(_,!1);else{if(cn!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(T=Ch(o),T!==null){for(a.flags|=128,vu(_,!1),f=T.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=l,l=a.child;l!==null;)_=l,o=f,_.flags&=14680066,T=_.alternate,T===null?(_.childLanes=0,_.lanes=o,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=T.childLanes,_.lanes=T.lanes,_.child=T.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=T.memoizedProps,_.memoizedState=T.memoizedState,_.updateQueue=T.updateQueue,_.type=T.type,o=T.dependencies,_.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),l=l.sibling;return Tt(Ft,Ft.current&1|2),a.child}o=o.sibling}_.tail!==null&&Rt()>kc&&(a.flags|=128,f=!0,vu(_,!1),a.lanes=4194304)}else{if(!f)if(o=Ch(T),o!==null){if(a.flags|=128,f=!0,l=o.updateQueue,l!==null&&(a.updateQueue=l,a.flags|=4),vu(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!Nt)return Nn(a),null}else 2*Rt()-_.renderingStartTime>kc&&l!==1073741824&&(a.flags|=128,f=!0,vu(_,!1),a.lanes=4194304);_.isBackwards?(T.sibling=a.child,a.child=T):(l=_.last,l!==null?l.sibling=T:a.child=T,_.last=T)}return _.tail!==null?(a=_.tail,_.rendering=a,_.tail=a.sibling,_.renderingStartTime=Rt(),a.sibling=null,l=Ft.current,Tt(Ft,f?l&1|2:l&1),a):(Nn(a),null);case 22:case 23:return Kg(),f=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(_r&1073741824)!==0&&(Nn(a),a.subtreeFlags&6&&(a.flags|=8192)):Nn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function WN(o,a){switch(rg(a),a.tag){case 1:return Xn(a.type)&&gh(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return Cc(),kt(Yn),kt(Pn),gg(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 5:return pg(a),null;case 13:if(kt(Ft),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(t(340));xc()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return kt(Ft),null;case 4:return Cc(),null;case 10:return lg(a.type._context),null;case 22:case 23:return Kg(),null;case 24:return null;default:return null}}var Vh=!1,Dn=!1,GN=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Rc(o,a){var l=o.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(f){Bt(o,a,f)}else l.current=null}function Vg(o,a,l){try{l()}catch(f){Bt(o,a,f)}}var zE=!1;function KN(o,a){if(Km=to,o=_0(),Um(o)){if("selectionStart"in o)var l={start:o.selectionStart,end:o.selectionEnd};else e:{l=(l=o.ownerDocument)&&l.defaultView||window;var f=l.getSelection&&l.getSelection();if(f&&f.rangeCount!==0){l=f.anchorNode;var y=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{l.nodeType,_.nodeType}catch{l=null;break e}var T=0,j=-1,$=-1,J=0,ce=0,he=o,oe=null;t:for(;;){for(var Te;he!==l||y!==0&&he.nodeType!==3||(j=T+y),he!==_||f!==0&&he.nodeType!==3||($=T+f),he.nodeType===3&&(T+=he.nodeValue.length),(Te=he.firstChild)!==null;)oe=he,he=Te;for(;;){if(he===o)break t;if(oe===l&&++J===y&&(j=T),oe===_&&++ce===f&&($=T),(Te=he.nextSibling)!==null)break;he=oe,oe=he.parentNode}he=Te}l=j===-1||$===-1?null:{start:j,end:$}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zm={focusedElem:o,selectionRange:l},to=!1,Ce=a;Ce!==null;)if(a=Ce,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,Ce=o;else for(;Ce!==null;){a=Ce;try{var Re=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var De=Re.memoizedProps,Zt=Re.memoizedState,K=a.stateNode,B=K.getSnapshotBeforeUpdate(a.elementType===a.type?De:es(a.type,De),Zt);K.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ge){Bt(a,a.return,ge)}if(o=a.sibling,o!==null){o.return=a.return,Ce=o;break}Ce=a.return}return Re=zE,zE=!1,Re}function _u(o,a,l){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&o)===o){var _=y.destroy;y.destroy=void 0,_!==void 0&&Vg(a,l,_)}y=y.next}while(y!==f)}}function Lh(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var l=a=a.next;do{if((l.tag&o)===o){var f=l.create;l.destroy=f()}l=l.next}while(l!==a)}}function Lg(o){var a=o.ref;if(a!==null){var l=o.stateNode;switch(o.tag){case 5:o=l;break;default:o=l}typeof a=="function"?a(o):a.current=o}}function $E(o){var a=o.alternate;a!==null&&(o.alternate=null,$E(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&(delete a[Cs],delete a[cu],delete a[Jm],delete a[PN],delete a[kN])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function BE(o){return o.tag===5||o.tag===3||o.tag===4}function qE(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||BE(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Fg(o,a,l){var f=o.tag;if(f===5||f===6)o=o.stateNode,a?l.nodeType===8?l.parentNode.insertBefore(o,a):l.insertBefore(o,a):(l.nodeType===8?(a=l.parentNode,a.insertBefore(o,l)):(a=l,a.appendChild(o)),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=ph));else if(f!==4&&(o=o.child,o!==null))for(Fg(o,a,l),o=o.sibling;o!==null;)Fg(o,a,l),o=o.sibling}function jg(o,a,l){var f=o.tag;if(f===5||f===6)o=o.stateNode,a?l.insertBefore(o,a):l.appendChild(o);else if(f!==4&&(o=o.child,o!==null))for(jg(o,a,l),o=o.sibling;o!==null;)jg(o,a,l),o=o.sibling}var xn=null,ts=!1;function Qo(o,a,l){for(l=l.child;l!==null;)HE(o,a,l),l=l.sibling}function HE(o,a,l){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount($i,l)}catch{}switch(l.tag){case 5:Dn||Rc(l,a);case 6:var f=xn,y=ts;xn=null,Qo(o,a,l),xn=f,ts=y,xn!==null&&(ts?(o=xn,l=l.stateNode,o.nodeType===8?o.parentNode.removeChild(l):o.removeChild(l)):xn.removeChild(l.stateNode));break;case 18:xn!==null&&(ts?(o=xn,l=l.stateNode,o.nodeType===8?Xm(o.parentNode,l):o.nodeType===1&&Xm(o,l),Uo(o)):Xm(xn,l.stateNode));break;case 4:f=xn,y=ts,xn=l.stateNode.containerInfo,ts=!0,Qo(o,a,l),xn=f,ts=y;break;case 0:case 11:case 14:case 15:if(!Dn&&(f=l.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){y=f=f.next;do{var _=y,T=_.destroy;_=_.tag,T!==void 0&&((_&2)!==0||(_&4)!==0)&&Vg(l,a,T),y=y.next}while(y!==f)}Qo(o,a,l);break;case 1:if(!Dn&&(Rc(l,a),f=l.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=l.memoizedProps,f.state=l.memoizedState,f.componentWillUnmount()}catch(j){Bt(l,a,j)}Qo(o,a,l);break;case 21:Qo(o,a,l);break;case 22:l.mode&1?(Dn=(f=Dn)||l.memoizedState!==null,Qo(o,a,l),Dn=f):Qo(o,a,l);break;default:Qo(o,a,l)}}function WE(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var l=o.stateNode;l===null&&(l=o.stateNode=new GN),a.forEach(function(f){var y=r2.bind(null,o,f);l.has(f)||(l.add(f),f.then(y,y))})}}function ns(o,a){var l=a.deletions;if(l!==null)for(var f=0;f<l.length;f++){var y=l[f];try{var _=o,T=a,j=T;e:for(;j!==null;){switch(j.tag){case 5:xn=j.stateNode,ts=!1;break e;case 3:xn=j.stateNode.containerInfo,ts=!0;break e;case 4:xn=j.stateNode.containerInfo,ts=!0;break e}j=j.return}if(xn===null)throw Error(t(160));HE(_,T,y),xn=null,ts=!1;var $=y.alternate;$!==null&&($.return=null),y.return=null}catch(J){Bt(y,a,J)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)GE(a,o),a=a.sibling}function GE(o,a){var l=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(ns(a,o),Ps(o),f&4){try{_u(3,o,o.return),Lh(3,o)}catch(De){Bt(o,o.return,De)}try{_u(5,o,o.return)}catch(De){Bt(o,o.return,De)}}break;case 1:ns(a,o),Ps(o),f&512&&l!==null&&Rc(l,l.return);break;case 5:if(ns(a,o),Ps(o),f&512&&l!==null&&Rc(l,l.return),o.flags&32){var y=o.stateNode;try{Zn(y,"")}catch(De){Bt(o,o.return,De)}}if(f&4&&(y=o.stateNode,y!=null)){var _=o.memoizedProps,T=l!==null?l.memoizedProps:_,j=o.type,$=o.updateQueue;if(o.updateQueue=null,$!==null)try{j==="input"&&_.type==="radio"&&_.name!=null&&Qs(y,_),Mo(j,T);var J=Mo(j,_);for(T=0;T<$.length;T+=2){var ce=$[T],he=$[T+1];ce==="style"?Do(y,he):ce==="dangerouslySetInnerHTML"?No(y,he):ce==="children"?Zn(y,he):z(y,ce,he,J)}switch(j){case"input":cr(y,_);break;case"textarea":Xa(y,_);break;case"select":var oe=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!_.multiple;var Te=_.value;Te!=null?lr(y,!!_.multiple,Te,!1):oe!==!!_.multiple&&(_.defaultValue!=null?lr(y,!!_.multiple,_.defaultValue,!0):lr(y,!!_.multiple,_.multiple?[]:"",!1))}y[cu]=_}catch(De){Bt(o,o.return,De)}}break;case 6:if(ns(a,o),Ps(o),f&4){if(o.stateNode===null)throw Error(t(162));y=o.stateNode,_=o.memoizedProps;try{y.nodeValue=_}catch(De){Bt(o,o.return,De)}}break;case 3:if(ns(a,o),Ps(o),f&4&&l!==null&&l.memoizedState.isDehydrated)try{Uo(a.containerInfo)}catch(De){Bt(o,o.return,De)}break;case 4:ns(a,o),Ps(o);break;case 13:ns(a,o),Ps(o),y=o.child,y.flags&8192&&(_=y.memoizedState!==null,y.stateNode.isHidden=_,!_||y.alternate!==null&&y.alternate.memoizedState!==null||($g=Rt())),f&4&&WE(o);break;case 22:if(ce=l!==null&&l.memoizedState!==null,o.mode&1?(Dn=(J=Dn)||ce,ns(a,o),Dn=J):ns(a,o),Ps(o),f&8192){if(J=o.memoizedState!==null,(o.stateNode.isHidden=J)&&!ce&&(o.mode&1)!==0)for(Ce=o,ce=o.child;ce!==null;){for(he=Ce=ce;Ce!==null;){switch(oe=Ce,Te=oe.child,oe.tag){case 0:case 11:case 14:case 15:_u(4,oe,oe.return);break;case 1:Rc(oe,oe.return);var Re=oe.stateNode;if(typeof Re.componentWillUnmount=="function"){f=oe,l=oe.return;try{a=f,Re.props=a.memoizedProps,Re.state=a.memoizedState,Re.componentWillUnmount()}catch(De){Bt(f,l,De)}}break;case 5:Rc(oe,oe.return);break;case 22:if(oe.memoizedState!==null){QE(he);continue}}Te!==null?(Te.return=oe,Ce=Te):QE(he)}ce=ce.sibling}e:for(ce=null,he=o;;){if(he.tag===5){if(ce===null){ce=he;try{y=he.stateNode,J?(_=y.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(j=he.stateNode,$=he.memoizedProps.style,T=$!=null&&$.hasOwnProperty("display")?$.display:null,j.style.display=ps("display",T))}catch(De){Bt(o,o.return,De)}}}else if(he.tag===6){if(ce===null)try{he.stateNode.nodeValue=J?"":he.memoizedProps}catch(De){Bt(o,o.return,De)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===o)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===o)break e;for(;he.sibling===null;){if(he.return===null||he.return===o)break e;ce===he&&(ce=null),he=he.return}ce===he&&(ce=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:ns(a,o),Ps(o),f&4&&WE(o);break;case 21:break;default:ns(a,o),Ps(o)}}function Ps(o){var a=o.flags;if(a&2){try{e:{for(var l=o.return;l!==null;){if(BE(l)){var f=l;break e}l=l.return}throw Error(t(160))}switch(f.tag){case 5:var y=f.stateNode;f.flags&32&&(Zn(y,""),f.flags&=-33);var _=qE(o);jg(o,_,y);break;case 3:case 4:var T=f.stateNode.containerInfo,j=qE(o);Fg(o,j,T);break;default:throw Error(t(161))}}catch($){Bt(o,o.return,$)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function ZN(o,a,l){Ce=o,KE(o)}function KE(o,a,l){for(var f=(o.mode&1)!==0;Ce!==null;){var y=Ce,_=y.child;if(y.tag===22&&f){var T=y.memoizedState!==null||Vh;if(!T){var j=y.alternate,$=j!==null&&j.memoizedState!==null||Dn;j=Vh;var J=Dn;if(Vh=T,(Dn=$)&&!J)for(Ce=y;Ce!==null;)T=Ce,$=T.child,T.tag===22&&T.memoizedState!==null?YE(y):$!==null?($.return=T,Ce=$):YE(y);for(;_!==null;)Ce=_,KE(_),_=_.sibling;Ce=y,Vh=j,Dn=J}ZE(o)}else(y.subtreeFlags&8772)!==0&&_!==null?(_.return=y,Ce=_):ZE(o)}}function ZE(o){for(;Ce!==null;){var a=Ce;if((a.flags&8772)!==0){var l=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Dn||Lh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Dn)if(l===null)f.componentDidMount();else{var y=a.elementType===a.type?l.memoizedProps:es(a.type,l.memoizedProps);f.componentDidUpdate(y,l.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=a.updateQueue;_!==null&&Q0(a,_,f);break;case 3:var T=a.updateQueue;if(T!==null){if(l=null,a.child!==null)switch(a.child.tag){case 5:l=a.child.stateNode;break;case 1:l=a.child.stateNode}Q0(a,T,l)}break;case 5:var j=a.stateNode;if(l===null&&a.flags&4){l=j;var $=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&l.focus();break;case"img":$.src&&(l.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var J=a.alternate;if(J!==null){var ce=J.memoizedState;if(ce!==null){var he=ce.dehydrated;he!==null&&Uo(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Dn||a.flags&512&&Lg(a)}catch(oe){Bt(a,a.return,oe)}}if(a===o){Ce=null;break}if(l=a.sibling,l!==null){l.return=a.return,Ce=l;break}Ce=a.return}}function QE(o){for(;Ce!==null;){var a=Ce;if(a===o){Ce=null;break}var l=a.sibling;if(l!==null){l.return=a.return,Ce=l;break}Ce=a.return}}function YE(o){for(;Ce!==null;){var a=Ce;try{switch(a.tag){case 0:case 11:case 15:var l=a.return;try{Lh(4,a)}catch($){Bt(a,l,$)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var y=a.return;try{f.componentDidMount()}catch($){Bt(a,y,$)}}var _=a.return;try{Lg(a)}catch($){Bt(a,_,$)}break;case 5:var T=a.return;try{Lg(a)}catch($){Bt(a,T,$)}}}catch($){Bt(a,a.return,$)}if(a===o){Ce=null;break}var j=a.sibling;if(j!==null){j.return=a.return,Ce=j;break}Ce=a.return}}var QN=Math.ceil,Fh=q.ReactCurrentDispatcher,Ug=q.ReactCurrentOwner,Vr=q.ReactCurrentBatchConfig,dt=0,yn=null,en=null,Sn=0,_r=0,Pc=Ho(0),cn=0,wu=null,sa=0,jh=0,zg=0,Eu=null,er=null,$g=0,kc=1/0,ho=null,Uh=!1,Bg=null,Yo=null,zh=!1,Xo=null,$h=0,bu=0,qg=null,Bh=-1,qh=0;function qn(){return(dt&6)!==0?Rt():Bh!==-1?Bh:Bh=Rt()}function Jo(o){return(o.mode&1)===0?1:(dt&2)!==0&&Sn!==0?Sn&-Sn:DN.transition!==null?(qh===0&&(qh=Bl()),qh):(o=at,o!==0||(o=window.event,o=o===void 0?16:ic(o.type)),o)}function rs(o,a,l,f){if(50<bu)throw bu=0,qg=null,Error(t(185));Wi(o,l,f),((dt&2)===0||o!==yn)&&(o===yn&&((dt&2)===0&&(jh|=l),cn===4&&ei(o,Sn)),tr(o,f),l===1&&dt===0&&(a.mode&1)===0&&(kc=Rt()+500,vh&&Go()))}function tr(o,a){var l=o.callbackNode;Hi(o,a);var f=Xs(o,o===yn?Sn:0);if(f===0)l!==null&&Ja(l),o.callbackNode=null,o.callbackPriority=0;else if(a=f&-f,o.callbackPriority!==a){if(l!=null&&Ja(l),a===1)o.tag===0?NN(JE.bind(null,o)):F0(JE.bind(null,o)),AN(function(){(dt&6)===0&&Go()}),l=null;else{switch(ys(f)){case 1:l=ec;break;case 4:l=Ul;break;case 16:l=zi;break;case 536870912:l=tc;break;default:l=zi}l=ab(l,XE.bind(null,o))}o.callbackPriority=a,o.callbackNode=l}}function XE(o,a){if(Bh=-1,qh=0,(dt&6)!==0)throw Error(t(327));var l=o.callbackNode;if(Nc()&&o.callbackNode!==l)return null;var f=Xs(o,o===yn?Sn:0);if(f===0)return null;if((f&30)!==0||(f&o.expiredLanes)!==0||a)a=Hh(o,f);else{a=f;var y=dt;dt|=2;var _=tb();(yn!==o||Sn!==a)&&(ho=null,kc=Rt()+500,ia(o,a));do try{JN();break}catch(j){eb(o,j)}while(!0);cg(),Fh.current=_,dt=y,en!==null?a=0:(yn=null,Sn=0,a=cn)}if(a!==0){if(a===2&&(y=$l(o),y!==0&&(f=y,a=Hg(o,y))),a===1)throw l=wu,ia(o,0),ei(o,f),tr(o,Rt()),l;if(a===6)ei(o,f);else{if(y=o.current.alternate,(f&30)===0&&!YN(y)&&(a=Hh(o,f),a===2&&(_=$l(o),_!==0&&(f=_,a=Hg(o,_))),a===1))throw l=wu,ia(o,0),ei(o,f),tr(o,Rt()),l;switch(o.finishedWork=y,o.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:aa(o,er,ho);break;case 3:if(ei(o,f),(f&130023424)===f&&(a=$g+500-Rt(),10<a)){if(Xs(o,0)!==0)break;if(y=o.suspendedLanes,(y&f)!==f){qn(),o.pingedLanes|=o.suspendedLanes&y;break}o.timeoutHandle=Ym(aa.bind(null,o,er,ho),a);break}aa(o,er,ho);break;case 4:if(ei(o,f),(f&4194240)===f)break;for(a=o.eventTimes,y=-1;0<f;){var T=31-hr(f);_=1<<T,T=a[T],T>y&&(y=T),f&=~_}if(f=y,f=Rt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*QN(f/1960))-f,10<f){o.timeoutHandle=Ym(aa.bind(null,o,er,ho),f);break}aa(o,er,ho);break;case 5:aa(o,er,ho);break;default:throw Error(t(329))}}}return tr(o,Rt()),o.callbackNode===l?XE.bind(null,o):null}function Hg(o,a){var l=Eu;return o.current.memoizedState.isDehydrated&&(ia(o,a).flags|=256),o=Hh(o,a),o!==2&&(a=er,er=l,a!==null&&Wg(a)),o}function Wg(o){er===null?er=o:er.push.apply(er,o)}function YN(o){for(var a=o;;){if(a.flags&16384){var l=a.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var f=0;f<l.length;f++){var y=l[f],_=y.getSnapshot;y=y.value;try{if(!Xr(_(),y))return!1}catch{return!1}}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ei(o,a){for(a&=~zg,a&=~jh,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var l=31-hr(a),f=1<<l;o[l]=-1,a&=~f}}function JE(o){if((dt&6)!==0)throw Error(t(327));Nc();var a=Xs(o,0);if((a&1)===0)return tr(o,Rt()),null;var l=Hh(o,a);if(o.tag!==0&&l===2){var f=$l(o);f!==0&&(a=f,l=Hg(o,f))}if(l===1)throw l=wu,ia(o,0),ei(o,a),tr(o,Rt()),l;if(l===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,aa(o,er,ho),tr(o,Rt()),null}function Gg(o,a){var l=dt;dt|=1;try{return o(a)}finally{dt=l,dt===0&&(kc=Rt()+500,vh&&Go())}}function oa(o){Xo!==null&&Xo.tag===0&&(dt&6)===0&&Nc();var a=dt;dt|=1;var l=Vr.transition,f=at;try{if(Vr.transition=null,at=1,o)return o()}finally{at=f,Vr.transition=l,dt=a,(dt&6)===0&&Go()}}function Kg(){_r=Pc.current,kt(Pc)}function ia(o,a){o.finishedWork=null,o.finishedLanes=0;var l=o.timeoutHandle;if(l!==-1&&(o.timeoutHandle=-1,CN(l)),en!==null)for(l=en.return;l!==null;){var f=l;switch(rg(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&gh();break;case 3:Cc(),kt(Yn),kt(Pn),gg();break;case 5:pg(f);break;case 4:Cc();break;case 13:kt(Ft);break;case 19:kt(Ft);break;case 10:lg(f.type._context);break;case 22:case 23:Kg()}l=l.return}if(yn=o,en=o=ti(o.current,null),Sn=_r=a,cn=0,wu=null,zg=jh=sa=0,er=Eu=null,ta!==null){for(a=0;a<ta.length;a++)if(l=ta[a],f=l.interleaved,f!==null){l.interleaved=null;var y=f.next,_=l.pending;if(_!==null){var T=_.next;_.next=y,f.next=T}l.pending=f}ta=null}return o}function eb(o,a){do{var l=en;try{if(cg(),Ah.current=Nh,Rh){for(var f=jt.memoizedState;f!==null;){var y=f.queue;y!==null&&(y.pending=null),f=f.next}Rh=!1}if(ra=0,gn=an=jt=null,pu=!1,mu=0,Ug.current=null,l===null||l.return===null){cn=1,wu=a,en=null;break}e:{var _=o,T=l.return,j=l,$=a;if(a=Sn,j.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var J=$,ce=j,he=ce.tag;if((ce.mode&1)===0&&(he===0||he===11||he===15)){var oe=ce.alternate;oe?(ce.updateQueue=oe.updateQueue,ce.memoizedState=oe.memoizedState,ce.lanes=oe.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var Te=IE(T);if(Te!==null){Te.flags&=-257,TE(Te,T,j,_,a),Te.mode&1&&SE(_,J,a),a=Te,$=J;var Re=a.updateQueue;if(Re===null){var De=new Set;De.add($),a.updateQueue=De}else Re.add($);break e}else{if((a&1)===0){SE(_,J,a),Zg();break e}$=Error(t(426))}}else if(Nt&&j.mode&1){var Zt=IE(T);if(Zt!==null){(Zt.flags&65536)===0&&(Zt.flags|=256),TE(Zt,T,j,_,a),ig(Ac($,j));break e}}_=$=Ac($,j),cn!==4&&(cn=2),Eu===null?Eu=[_]:Eu.push(_),_=T;do{switch(_.tag){case 3:_.flags|=65536,a&=-a,_.lanes|=a;var K=bE(_,$,a);Z0(_,K);break e;case 1:j=$;var B=_.type,Y=_.stateNode;if((_.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Yo===null||!Yo.has(Y)))){_.flags|=65536,a&=-a,_.lanes|=a;var ge=xE(_,j,a);Z0(_,ge);break e}}_=_.return}while(_!==null)}rb(l)}catch(Oe){a=Oe,en===l&&l!==null&&(en=l=l.return);continue}break}while(!0)}function tb(){var o=Fh.current;return Fh.current=Nh,o===null?Nh:o}function Zg(){(cn===0||cn===3||cn===2)&&(cn=4),yn===null||(sa&268435455)===0&&(jh&268435455)===0||ei(yn,Sn)}function Hh(o,a){var l=dt;dt|=2;var f=tb();(yn!==o||Sn!==a)&&(ho=null,ia(o,a));do try{XN();break}catch(y){eb(o,y)}while(!0);if(cg(),dt=l,Fh.current=f,en!==null)throw Error(t(261));return yn=null,Sn=0,cn}function XN(){for(;en!==null;)nb(en)}function JN(){for(;en!==null&&!Ui();)nb(en)}function nb(o){var a=ib(o.alternate,o,_r);o.memoizedProps=o.pendingProps,a===null?rb(o):en=a,Ug.current=null}function rb(o){var a=o;do{var l=a.alternate;if(o=a.return,(a.flags&32768)===0){if(l=HN(l,a,_r),l!==null){en=l;return}}else{if(l=WN(l,a),l!==null){l.flags&=32767,en=l;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{cn=6,en=null;return}}if(a=a.sibling,a!==null){en=a;return}en=a=o}while(a!==null);cn===0&&(cn=5)}function aa(o,a,l){var f=at,y=Vr.transition;try{Vr.transition=null,at=1,e2(o,a,l,f)}finally{Vr.transition=y,at=f}return null}function e2(o,a,l,f){do Nc();while(Xo!==null);if((dt&6)!==0)throw Error(t(327));l=o.finishedWork;var y=o.finishedLanes;if(l===null)return null;if(o.finishedWork=null,o.finishedLanes=0,l===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var _=l.lanes|l.childLanes;if(Mm(o,_),o===yn&&(en=yn=null,Sn=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||zh||(zh=!0,ab(zi,function(){return Nc(),null})),_=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||_){_=Vr.transition,Vr.transition=null;var T=at;at=1;var j=dt;dt|=4,Ug.current=null,KN(o,l),GE(l,o),wN(Zm),to=!!Km,Zm=Km=null,o.current=l,ZN(l),Ys(),dt=j,at=T,Vr.transition=_}else o.current=l;if(zh&&(zh=!1,Xo=o,$h=y),_=o.pendingLanes,_===0&&(Yo=null),Xd(l.stateNode),tr(o,Rt()),a!==null)for(f=o.onRecoverableError,l=0;l<a.length;l++)y=a[l],f(y.value,{componentStack:y.stack,digest:y.digest});if(Uh)throw Uh=!1,o=Bg,Bg=null,o;return($h&1)!==0&&o.tag!==0&&Nc(),_=o.pendingLanes,(_&1)!==0?o===qg?bu++:(bu=0,qg=o):bu=0,Go(),null}function Nc(){if(Xo!==null){var o=ys($h),a=Vr.transition,l=at;try{if(Vr.transition=null,at=16>o?16:o,Xo===null)var f=!1;else{if(o=Xo,Xo=null,$h=0,(dt&6)!==0)throw Error(t(331));var y=dt;for(dt|=4,Ce=o.current;Ce!==null;){var _=Ce,T=_.child;if((Ce.flags&16)!==0){var j=_.deletions;if(j!==null){for(var $=0;$<j.length;$++){var J=j[$];for(Ce=J;Ce!==null;){var ce=Ce;switch(ce.tag){case 0:case 11:case 15:_u(8,ce,_)}var he=ce.child;if(he!==null)he.return=ce,Ce=he;else for(;Ce!==null;){ce=Ce;var oe=ce.sibling,Te=ce.return;if($E(ce),ce===J){Ce=null;break}if(oe!==null){oe.return=Te,Ce=oe;break}Ce=Te}}}var Re=_.alternate;if(Re!==null){var De=Re.child;if(De!==null){Re.child=null;do{var Zt=De.sibling;De.sibling=null,De=Zt}while(De!==null)}}Ce=_}}if((_.subtreeFlags&2064)!==0&&T!==null)T.return=_,Ce=T;else e:for(;Ce!==null;){if(_=Ce,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:_u(9,_,_.return)}var K=_.sibling;if(K!==null){K.return=_.return,Ce=K;break e}Ce=_.return}}var B=o.current;for(Ce=B;Ce!==null;){T=Ce;var Y=T.child;if((T.subtreeFlags&2064)!==0&&Y!==null)Y.return=T,Ce=Y;else e:for(T=B;Ce!==null;){if(j=Ce,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:Lh(9,j)}}catch(Oe){Bt(j,j.return,Oe)}if(j===T){Ce=null;break e}var ge=j.sibling;if(ge!==null){ge.return=j.return,Ce=ge;break e}Ce=j.return}}if(dt=y,Go(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot($i,o)}catch{}f=!0}return f}finally{at=l,Vr.transition=a}}return!1}function sb(o,a,l){a=Ac(l,a),a=bE(o,a,1),o=Zo(o,a,1),a=qn(),o!==null&&(Wi(o,1,a),tr(o,a))}function Bt(o,a,l){if(o.tag===3)sb(o,o,l);else for(;a!==null;){if(a.tag===3){sb(a,o,l);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Yo===null||!Yo.has(f))){o=Ac(l,o),o=xE(a,o,1),a=Zo(a,o,1),o=qn(),a!==null&&(Wi(a,1,o),tr(a,o));break}}a=a.return}}function t2(o,a,l){var f=o.pingCache;f!==null&&f.delete(a),a=qn(),o.pingedLanes|=o.suspendedLanes&l,yn===o&&(Sn&l)===l&&(cn===4||cn===3&&(Sn&130023424)===Sn&&500>Rt()-$g?ia(o,0):zg|=l),tr(o,a)}function ob(o,a){a===0&&((o.mode&1)===0?a=1:(a=Lo,Lo<<=1,(Lo&130023424)===0&&(Lo=4194304)));var l=qn();o=co(o,a),o!==null&&(Wi(o,a,l),tr(o,l))}function n2(o){var a=o.memoizedState,l=0;a!==null&&(l=a.retryLane),ob(o,l)}function r2(o,a){var l=0;switch(o.tag){case 13:var f=o.stateNode,y=o.memoizedState;y!==null&&(l=y.retryLane);break;case 19:f=o.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),ob(o,l)}var ib;ib=function(o,a,l){if(o!==null)if(o.memoizedProps!==a.pendingProps||Yn.current)Jn=!0;else{if((o.lanes&l)===0&&(a.flags&128)===0)return Jn=!1,qN(o,a,l);Jn=(o.flags&131072)!==0}else Jn=!1,Nt&&(a.flags&1048576)!==0&&j0(a,wh,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;Mh(o,a),o=a.pendingProps;var y=wc(a,Pn.current);Tc(a,l),y=_g(null,a,f,o,y,l);var _=wg();return a.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Xn(f)?(_=!0,yh(a)):_=!1,a.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,hg(a),y.updater=Dh,a.stateNode=y,y._reactInternals=a,Tg(a,f,o,l),a=Pg(null,a,f,!0,_,l)):(a.tag=0,Nt&&_&&ng(a),Bn(null,a,y,l),a=a.child),a;case 16:f=a.elementType;e:{switch(Mh(o,a),o=a.pendingProps,y=f._init,f=y(f._payload),a.type=f,y=a.tag=o2(f),o=es(f,o),y){case 0:a=Rg(null,a,f,o,l);break e;case 1:a=NE(null,a,f,o,l);break e;case 11:a=CE(null,a,f,o,l);break e;case 14:a=AE(null,a,f,es(f.type,o),l);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:es(f,y),Rg(o,a,f,y,l);case 1:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:es(f,y),NE(o,a,f,y,l);case 3:e:{if(DE(a),o===null)throw Error(t(387));f=a.pendingProps,_=a.memoizedState,y=_.element,K0(o,a),Th(a,f,null,l);var T=a.memoizedState;if(f=T.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=_,a.memoizedState=_,a.flags&256){y=Ac(Error(t(423)),a),a=OE(o,a,f,l,y);break e}else if(f!==y){y=Ac(Error(t(424)),a),a=OE(o,a,f,l,y);break e}else for(vr=qo(a.stateNode.containerInfo.firstChild),yr=a,Nt=!0,Jr=null,l=W0(a,null,f,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(xc(),f===y){a=uo(o,a,l);break e}Bn(o,a,f,l)}a=a.child}return a;case 5:return Y0(a),o===null&&og(a),f=a.type,y=a.pendingProps,_=o!==null?o.memoizedProps:null,T=y.children,Qm(f,y)?T=null:_!==null&&Qm(f,_)&&(a.flags|=32),kE(o,a),Bn(o,a,T,l),a.child;case 6:return o===null&&og(a),null;case 13:return ME(o,a,l);case 4:return fg(a,a.stateNode.containerInfo),f=a.pendingProps,o===null?a.child=Sc(a,null,f,l):Bn(o,a,f,l),a.child;case 11:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:es(f,y),CE(o,a,f,y,l);case 7:return Bn(o,a,a.pendingProps,l),a.child;case 8:return Bn(o,a,a.pendingProps.children,l),a.child;case 12:return Bn(o,a,a.pendingProps.children,l),a.child;case 10:e:{if(f=a.type._context,y=a.pendingProps,_=a.memoizedProps,T=y.value,Tt(xh,f._currentValue),f._currentValue=T,_!==null)if(Xr(_.value,T)){if(_.children===y.children&&!Yn.current){a=uo(o,a,l);break e}}else for(_=a.child,_!==null&&(_.return=a);_!==null;){var j=_.dependencies;if(j!==null){T=_.child;for(var $=j.firstContext;$!==null;){if($.context===f){if(_.tag===1){$=lo(-1,l&-l),$.tag=2;var J=_.updateQueue;if(J!==null){J=J.shared;var ce=J.pending;ce===null?$.next=$:($.next=ce.next,ce.next=$),J.pending=$}}_.lanes|=l,$=_.alternate,$!==null&&($.lanes|=l),ug(_.return,l,a),j.lanes|=l;break}$=$.next}}else if(_.tag===10)T=_.type===a.type?null:_.child;else if(_.tag===18){if(T=_.return,T===null)throw Error(t(341));T.lanes|=l,j=T.alternate,j!==null&&(j.lanes|=l),ug(T,l,a),T=_.sibling}else T=_.child;if(T!==null)T.return=_;else for(T=_;T!==null;){if(T===a){T=null;break}if(_=T.sibling,_!==null){_.return=T.return,T=_;break}T=T.return}_=T}Bn(o,a,y.children,l),a=a.child}return a;case 9:return y=a.type,f=a.pendingProps.children,Tc(a,l),y=Or(y),f=f(y),a.flags|=1,Bn(o,a,f,l),a.child;case 14:return f=a.type,y=es(f,a.pendingProps),y=es(f.type,y),AE(o,a,f,y,l);case 15:return RE(o,a,a.type,a.pendingProps,l);case 17:return f=a.type,y=a.pendingProps,y=a.elementType===f?y:es(f,y),Mh(o,a),a.tag=1,Xn(f)?(o=!0,yh(a)):o=!1,Tc(a,l),wE(a,f,y),Tg(a,f,y,l),Pg(null,a,f,!0,o,l);case 19:return LE(o,a,l);case 22:return PE(o,a,l)}throw Error(t(156,a.tag))};function ab(o,a){return jl(o,a)}function s2(o,a,l,f){this.tag=o,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(o,a,l,f){return new s2(o,a,l,f)}function Qg(o){return o=o.prototype,!(!o||!o.isReactComponent)}function o2(o){if(typeof o=="function")return Qg(o)?1:0;if(o!=null){if(o=o.$$typeof,o===L)return 11;if(o===Me)return 14}return 2}function ti(o,a){var l=o.alternate;return l===null?(l=Lr(o.tag,a,o.key,o.mode),l.elementType=o.elementType,l.type=o.type,l.stateNode=o.stateNode,l.alternate=o,o.alternate=l):(l.pendingProps=a,l.type=o.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=o.flags&14680064,l.childLanes=o.childLanes,l.lanes=o.lanes,l.child=o.child,l.memoizedProps=o.memoizedProps,l.memoizedState=o.memoizedState,l.updateQueue=o.updateQueue,a=o.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=o.sibling,l.index=o.index,l.ref=o.ref,l}function Wh(o,a,l,f,y,_){var T=2;if(f=o,typeof o=="function")Qg(o)&&(T=1);else if(typeof o=="string")T=5;else e:switch(o){case P:return ca(l.children,y,_,a);case I:T=8,y|=8;break;case k:return o=Lr(12,l,a,y|2),o.elementType=k,o.lanes=_,o;case N:return o=Lr(13,l,a,y),o.elementType=N,o.lanes=_,o;case ue:return o=Lr(19,l,a,y),o.elementType=ue,o.lanes=_,o;case ye:return Gh(l,y,_,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case M:T=10;break e;case V:T=9;break e;case L:T=11;break e;case Me:T=14;break e;case pe:T=16,f=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return a=Lr(T,l,a,y),a.elementType=o,a.type=f,a.lanes=_,a}function ca(o,a,l,f){return o=Lr(7,o,f,a),o.lanes=l,o}function Gh(o,a,l,f){return o=Lr(22,o,f,a),o.elementType=ye,o.lanes=l,o.stateNode={isHidden:!1},o}function Yg(o,a,l){return o=Lr(6,o,null,a),o.lanes=l,o}function Xg(o,a,l){return a=Lr(4,o.children!==null?o.children:[],o.key,a),a.lanes=l,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function i2(o,a,l,f,y){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ql(0),this.expirationTimes=ql(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ql(0),this.identifierPrefix=f,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function Jg(o,a,l,f,y,_,T,j,$){return o=new i2(o,a,l,j,$),a===1?(a=1,_===!0&&(a|=8)):a=0,_=Lr(3,null,null,a),o.current=_,_.stateNode=o,_.memoizedState={element:f,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},hg(_),o}function a2(o,a,l){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:X,key:f==null?null:""+f,children:o,containerInfo:a,implementation:l}}function cb(o){if(!o)return Wo;o=o._reactInternals;e:{if(Qr(o)!==o||o.tag!==1)throw Error(t(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Xn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(o.tag===1){var l=o.type;if(Xn(l))return V0(o,l,a)}return a}function lb(o,a,l,f,y,_,T,j,$){return o=Jg(l,f,!0,o,y,_,T,j,$),o.context=cb(null),l=o.current,f=qn(),y=Jo(l),_=lo(f,y),_.callback=a??null,Zo(l,_,y),o.current.lanes=y,Wi(o,y,f),tr(o,f),o}function Kh(o,a,l,f){var y=a.current,_=qn(),T=Jo(y);return l=cb(l),a.context===null?a.context=l:a.pendingContext=l,a=lo(_,T),a.payload={element:o},f=f===void 0?null:f,f!==null&&(a.callback=f),o=Zo(y,a,T),o!==null&&(rs(o,y,T,_),Ih(o,y,T)),T}function Zh(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function ub(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var l=o.retryLane;o.retryLane=l!==0&&l<a?l:a}}function ey(o,a){ub(o,a),(o=o.alternate)&&ub(o,a)}function c2(){return null}var db=typeof reportError=="function"?reportError:function(o){console.error(o)};function ty(o){this._internalRoot=o}Qh.prototype.render=ty.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(t(409));Kh(o,a,null,null)},Qh.prototype.unmount=ty.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;oa(function(){Kh(null,o,null,null)}),a[so]=null}};function Qh(o){this._internalRoot=o}Qh.prototype.unstable_scheduleHydration=function(o){if(o){var a=Kl();o={blockedOn:null,target:o,priority:a};for(var l=0;l<fr.length&&a!==0&&a<fr[l].priority;l++);fr.splice(l,0,o),l===0&&sc(o)}};function ny(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Yh(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function hb(){}function l2(o,a,l,f,y){if(y){if(typeof f=="function"){var _=f;f=function(){var J=Zh(T);_.call(J)}}var T=lb(a,f,o,0,null,!1,!1,"",hb);return o._reactRootContainer=T,o[so]=T.current,iu(o.nodeType===8?o.parentNode:o),oa(),T}for(;y=o.lastChild;)o.removeChild(y);if(typeof f=="function"){var j=f;f=function(){var J=Zh($);j.call(J)}}var $=Jg(o,0,!1,null,null,!1,!1,"",hb);return o._reactRootContainer=$,o[so]=$.current,iu(o.nodeType===8?o.parentNode:o),oa(function(){Kh(a,$,l,f)}),$}function Xh(o,a,l,f,y){var _=l._reactRootContainer;if(_){var T=_;if(typeof y=="function"){var j=y;y=function(){var $=Zh(T);j.call($)}}Kh(a,T,o,y)}else T=l2(l,a,o,y,f);return Zh(T)}Wl=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var l=gt(a.pendingLanes);l!==0&&(Hl(a,l|1),tr(a,Rt()),(dt&6)===0&&(kc=Rt()+500,Go()))}break;case 13:oa(function(){var f=co(o,1);if(f!==null){var y=qn();rs(f,o,1,y)}}),ey(o,1)}},nc=function(o){if(o.tag===13){var a=co(o,134217728);if(a!==null){var l=qn();rs(a,o,134217728,l)}ey(o,134217728)}},Gl=function(o){if(o.tag===13){var a=Jo(o),l=co(o,a);if(l!==null){var f=qn();rs(l,o,a,f)}ey(o,a)}},Kl=function(){return at},Zl=function(o,a){var l=at;try{return at=o,a()}finally{at=l}},Kr=function(o,a,l){switch(a){case"input":if(cr(o,l),a=l.name,l.type==="radio"&&a!=null){for(l=o;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<l.length;a++){var f=l[a];if(f!==o&&f.form===o.form){var y=mh(f);if(!y)throw Error(t(90));me(f),cr(f,y)}}}break;case"textarea":Xa(o,l);break;case"select":a=l.value,a!=null&&lr(o,!!l.multiple,a,!1)}},Gt=Gg,pn=oa;var u2={usingClientEntryPoint:!1,Events:[lu,vc,mh,qe,St,Gg]},xu={findFiberByHostInstance:Yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},d2={bundleType:xu.bundleType,version:xu.version,rendererPackageName:xu.rendererPackageName,rendererConfig:xu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:q.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Yd(o),o===null?null:o.stateNode},findFiberByHostInstance:xu.findFiberByHostInstance||c2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{$i=Jh.inject(d2),dr=Jh}catch{}}return nr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=u2,nr.createPortal=function(o,a){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ny(a))throw Error(t(200));return a2(o,a,null,l)},nr.createRoot=function(o,a){if(!ny(o))throw Error(t(299));var l=!1,f="",y=db;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=Jg(o,1,!1,null,null,l,!1,f,y),o[so]=a.current,iu(o.nodeType===8?o.parentNode:o),new ty(a)},nr.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Yd(a),o=o===null?null:o.stateNode,o},nr.flushSync=function(o){return oa(o)},nr.hydrate=function(o,a,l){if(!Yh(a))throw Error(t(200));return Xh(null,o,a,!0,l)},nr.hydrateRoot=function(o,a,l){if(!ny(o))throw Error(t(405));var f=l!=null&&l.hydratedSources||null,y=!1,_="",T=db;if(l!=null&&(l.unstable_strictMode===!0&&(y=!0),l.identifierPrefix!==void 0&&(_=l.identifierPrefix),l.onRecoverableError!==void 0&&(T=l.onRecoverableError)),a=lb(a,null,o,1,l??null,y,!1,_,T),o[so]=a.current,iu(o),f)for(o=0;o<f.length;o++)l=f[o],y=l._getVersion,y=y(l._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[l,y]:a.mutableSourceEagerHydrationData.push(l,y);return new Qh(a)},nr.render=function(o,a,l){if(!Yh(a))throw Error(t(200));return Xh(null,o,a,!1,l)},nr.unmountComponentAtNode=function(o){if(!Yh(o))throw Error(t(40));return o._reactRootContainer?(oa(function(){Xh(null,null,o,!1,function(){o._reactRootContainer=null,o[so]=null})}),!0):!1},nr.unstable_batchedUpdates=Gg,nr.unstable_renderSubtreeIntoContainer=function(o,a,l,f){if(!Yh(l))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Xh(o,a,l,!1,f)},nr.version="18.3.1-next-f1338f8080-20240426",nr}var wb;function qI(){if(wb)return oy.exports;wb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),oy.exports=_2(),oy.exports}var Eb;function w2(){if(Eb)return ef;Eb=1;var n=qI();return ef.createRoot=n.createRoot,ef.hydrateRoot=n.hydrateRoot,ef}var E2=w2();const b2="modulepreload",x2=function(n){return"/"+n},bb={},or=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let c=function(p){return Promise.all(p.map(g=>Promise.resolve(g).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=c(t.map(p=>{if(p=x2(p),p in bb)return;bb[p]=!0;const g=p.endsWith(".css"),m=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const w=document.createElement("link");if(w.rel=g?"stylesheet":b2,g||(w.as="script"),w.crossOrigin="",w.href=p,d&&w.setAttribute("nonce",d),document.head.appendChild(w),g)return new Promise((S,R)=>{w.addEventListener("load",S),w.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${p}`)))})}))}function i(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})};var b=t_();const ie=BI(b),HI=f2({__proto__:null,default:ie},[b]);function xb(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function Dp(...n){return e=>{let t=!1;const r=n.map(s=>{const i=xb(s,e);return!t&&typeof i=="function"&&(t=!0),i});if(t)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():xb(n[s],null)}}}}function xt(...n){return b.useCallback(Dp(...n),n)}function sl(n){const e=S2(n),t=b.forwardRef((r,s)=>{const{children:i,...c}=r,u=b.Children.toArray(i),d=u.find(T2);if(d){const p=d.props.children,g=u.map(m=>m===d?b.Children.count(p)>1?b.Children.only(null):b.isValidElement(p)?p.props.children:null:m);return v.jsx(e,{...c,ref:s,children:b.isValidElement(p)?b.cloneElement(p,void 0,g):null})}return v.jsx(e,{...c,ref:s,children:i})});return t.displayName=`${n}.Slot`,t}var Op=sl("Slot");function S2(n){const e=b.forwardRef((t,r)=>{const{children:s,...i}=t;if(b.isValidElement(s)){const c=A2(s),u=C2(i,s.props);return s.type!==b.Fragment&&(u.ref=r?Dp(r,c):c),b.cloneElement(s,u)}return b.Children.count(s)>1?b.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var WI=Symbol("radix.slottable");function I2(n){const e=({children:t})=>v.jsx(v.Fragment,{children:t});return e.displayName=`${n}.Slottable`,e.__radixId=WI,e}function T2(n){return b.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===WI}function C2(n,e){const t={...e};for(const r in e){const s=n[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?t[r]=(...u)=>{const d=i(...u);return s(...u),d}:s&&(t[r]=s):r==="style"?t[r]={...s,...i}:r==="className"&&(t[r]=[s,i].filter(Boolean).join(" "))}return{...n,...t}}function A2(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function GI(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=GI(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function KI(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=GI(n))&&(r&&(r+=" "),r+=e);return r}const Sb=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Ib=KI,Mp=(n,e)=>t=>{var r;if(e?.variants==null)return Ib(n,t?.class,t?.className);const{variants:s,defaultVariants:i}=e,c=Object.keys(s).map(p=>{const g=t?.[p],m=i?.[p];if(g===null)return null;const w=Sb(g)||Sb(m);return s[p][w]}),u=t&&Object.entries(t).reduce((p,g)=>{let[m,w]=g;return w===void 0||(p[m]=w),p},{}),d=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,g)=>{let{class:m,className:w,...S}=g;return Object.entries(S).every(R=>{let[C,A]=R;return Array.isArray(A)?A.includes({...i,...u}[C]):{...i,...u}[C]===A})?[...p,m,w]:p},[]);return Ib(n,c,d,t?.class,t?.className)};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R2=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P2=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),Tb=n=>{const e=P2(n);return e.charAt(0).toUpperCase()+e.slice(1)},ZI=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var k2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N2=b.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:c,...u},d)=>b.createElement("svg",{ref:d,...k2,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:ZI("lucide",s),...u},[...c.map(([p,g])=>b.createElement(p,g)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=(n,e)=>{const t=b.forwardRef(({className:r,...s},i)=>b.createElement(N2,{ref:i,iconNode:e,className:ZI(`lucide-${R2(Tb(n))}`,`lucide-${n}`,r),...s}));return t.displayName=Tb(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D2=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],QI=Xe("bell",D2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O2=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],n_=Xe("check",O2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],V2=Xe("chevron-down",M2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],F2=Xe("chevron-right",L2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j2=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],U2=Xe("chevron-up",j2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],$2=Xe("circle-help",z2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],q2=Xe("circle",B2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H2=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],r_=Xe("clipboard-list",H2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],G2=Xe("clock",W2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K2=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],Z2=Xe("command",K2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q2=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Y2=Xe("eye-off",Q2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X2=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],J2=Xe("eye",X2);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]],tD=Xe("factory",eD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],rD=Xe("house",nD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]],oD=Xe("landmark",sD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],aD=Xe("layout-dashboard",iD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Qu=Xe("loader-circle",cD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Cb=Xe("lock",lD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],dD=Xe("log-out",uD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],fD=Xe("mail",hD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],mD=Xe("menu",pD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],yD=Xe("moon",gD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Vp=Xe("package",vD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],wD=Xe("panel-left-close",_D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],bD=Xe("panel-left",ED);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],SD=Xe("phone",xD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Ab=Xe("receipt",ID);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],CD=Xe("refresh-cw",TD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],RD=Xe("search-x",AD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],qf=Xe("search",PD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ND=Xe("settings",kD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],OD=Xe("shield",DD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Lp=Xe("shopping-cart",MD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],LD=Xe("store",VD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],jD=Xe("sun",FD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],zD=Xe("triangle-alert",UD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],s_=Xe("truck",$D);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],qD=Xe("user-check",BD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],qy=Xe("user",HD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],YI=Xe("users",WD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],KD=Xe("wallet",GD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]],QD=Xe("warehouse",ZD);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],o_=Xe("x",YD),cy=768;function XD(){const[n,e]=b.useState(void 0);return b.useEffect(()=>{const t=window.matchMedia(`(max-width: ${cy-1}px)`),r=()=>{e(window.innerWidth<cy)};return t.addEventListener("change",r),e(window.innerWidth<cy),()=>t.removeEventListener("change",r)},[]),!!n}const i_="-",JD=n=>{const e=tO(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:c=>{const u=c.split(i_);return u[0]===""&&u.length!==1&&u.shift(),XI(u,e)||eO(c)},getConflictingClassGroupIds:(c,u)=>{const d=t[c]||[];return u&&r[c]?[...d,...r[c]]:d}}},XI=(n,e)=>{if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),s=r?XI(n.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=n.join(i_);return e.validators.find(({validator:c})=>c(i))?.classGroupId},Rb=/^\[(.+)\]$/,eO=n=>{if(Rb.test(n)){const e=Rb.exec(n)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},tO=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const s in t)Hy(t[s],r,s,e);return r},Hy=(n,e,t,r)=>{n.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Pb(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(nO(s)){Hy(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,c])=>{Hy(c,Pb(e,i),t,r)})})},Pb=(n,e)=>{let t=n;return e.split(i_).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},nO=n=>n.isThemeGetter,rO=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const s=(i,c)=>{t.set(i,c),e++,e>n&&(e=0,r=t,t=new Map)};return{get(i){let c=t.get(i);if(c!==void 0)return c;if((c=r.get(i))!==void 0)return s(i,c),c},set(i,c){t.has(i)?t.set(i,c):s(i,c)}}},Wy="!",Gy=":",sO=Gy.length,oO=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=s=>{const i=[];let c=0,u=0,d=0,p;for(let R=0;R<s.length;R++){let C=s[R];if(c===0&&u===0){if(C===Gy){i.push(s.slice(d,R)),d=R+sO;continue}if(C==="/"){p=R;continue}}C==="["?c++:C==="]"?c--:C==="("?u++:C===")"&&u--}const g=i.length===0?s:s.substring(d),m=iO(g),w=m!==g,S=p&&p>d?p-d:void 0;return{modifiers:i,hasImportantModifier:w,baseClassName:m,maybePostfixModifierPosition:S}};if(e){const s=e+Gy,i=r;r=c=>c.startsWith(s)?i(c.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const s=r;r=i=>t({className:i,parseClassName:s})}return r},iO=n=>n.endsWith(Wy)?n.substring(0,n.length-1):n.startsWith(Wy)?n.substring(1):n,aO=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const s=[];let i=[];return r.forEach(c=>{c[0]==="["||e[c]?(s.push(...i.sort(),c),i=[]):i.push(c)}),s.push(...i.sort()),s}},cO=n=>({cache:rO(n.cacheSize),parseClassName:oO(n),sortModifiers:aO(n),...JD(n)}),lO=/\s+/,uO=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:i}=e,c=[],u=n.trim().split(lO);let d="";for(let p=u.length-1;p>=0;p-=1){const g=u[p],{isExternal:m,modifiers:w,hasImportantModifier:S,baseClassName:R,maybePostfixModifierPosition:C}=t(g);if(m){d=g+(d.length>0?" "+d:d);continue}let A=!!C,O=r(A?R.substring(0,C):R);if(!O){if(!A){d=g+(d.length>0?" "+d:d);continue}if(O=r(R),!O){d=g+(d.length>0?" "+d:d);continue}A=!1}const U=i(w).join(":"),z=S?U+Wy:U,q=z+O;if(c.includes(q))continue;c.push(q);const W=s(O,A);for(let X=0;X<W.length;++X){const P=W[X];c.push(z+P)}d=g+(d.length>0?" "+d:d)}return d};function dO(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=JI(e))&&(r&&(r+=" "),r+=t);return r}const JI=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=JI(n[r]))&&(t&&(t+=" "),t+=e);return t};function hO(n,...e){let t,r,s,i=c;function c(d){const p=e.reduce((g,m)=>m(g),n());return t=cO(p),r=t.cache.get,s=t.cache.set,i=u,u(d)}function u(d){const p=r(d);if(p)return p;const g=uO(d,t);return s(d,g),g}return function(){return i(dO.apply(null,arguments))}}const ln=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},e1=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,t1=/^\((?:(\w[\w-]*):)?(.+)\)$/i,fO=/^\d+\/\d+$/,pO=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,mO=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gO=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,yO=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vO=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Dc=n=>fO.test(n),et=n=>!!n&&!Number.isNaN(Number(n)),ri=n=>!!n&&Number.isInteger(Number(n)),ly=n=>n.endsWith("%")&&et(n.slice(0,-1)),fo=n=>pO.test(n),_O=()=>!0,wO=n=>mO.test(n)&&!gO.test(n),n1=()=>!1,EO=n=>yO.test(n),bO=n=>vO.test(n),xO=n=>!Pe(n)&&!ke(n),SO=n=>Sl(n,o1,n1),Pe=n=>e1.test(n),la=n=>Sl(n,i1,wO),uy=n=>Sl(n,RO,et),kb=n=>Sl(n,r1,n1),IO=n=>Sl(n,s1,bO),tf=n=>Sl(n,a1,EO),ke=n=>t1.test(n),Iu=n=>Il(n,i1),TO=n=>Il(n,PO),Nb=n=>Il(n,r1),CO=n=>Il(n,o1),AO=n=>Il(n,s1),nf=n=>Il(n,a1,!0),Sl=(n,e,t)=>{const r=e1.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},Il=(n,e,t=!1)=>{const r=t1.exec(n);return r?r[1]?e(r[1]):t:!1},r1=n=>n==="position"||n==="percentage",s1=n=>n==="image"||n==="url",o1=n=>n==="length"||n==="size"||n==="bg-size",i1=n=>n==="length",RO=n=>n==="number",PO=n=>n==="family-name",a1=n=>n==="shadow",kO=()=>{const n=ln("color"),e=ln("font"),t=ln("text"),r=ln("font-weight"),s=ln("tracking"),i=ln("leading"),c=ln("breakpoint"),u=ln("container"),d=ln("spacing"),p=ln("radius"),g=ln("shadow"),m=ln("inset-shadow"),w=ln("text-shadow"),S=ln("drop-shadow"),R=ln("blur"),C=ln("perspective"),A=ln("aspect"),O=ln("ease"),U=ln("animate"),z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],W=()=>[...q(),ke,Pe],X=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],I=()=>[ke,Pe,d],k=()=>[Dc,"full","auto",...I()],M=()=>[ri,"none","subgrid",ke,Pe],V=()=>["auto",{span:["full",ri,ke,Pe]},ri,ke,Pe],L=()=>[ri,"auto",ke,Pe],N=()=>["auto","min","max","fr",ke,Pe],ue=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Me=()=>["start","end","center","stretch","center-safe","end-safe"],pe=()=>["auto",...I()],ye=()=>[Dc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],H=()=>[n,ke,Pe],re=()=>[...q(),Nb,kb,{position:[ke,Pe]}],ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",CO,SO,{size:[ke,Pe]}],Q=()=>[ly,Iu,la],ee=()=>["","none","full",p,ke,Pe],le=()=>["",et,Iu,la],ve=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],_e=()=>[et,ly,Nb,kb],Ie=()=>["","none",R,ke,Pe],Ge=()=>["none",et,ke,Pe],ft=()=>["none",et,ke,Pe],ct=()=>[et,ke,Pe],me=()=>[Dc,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[fo],breakpoint:[fo],color:[_O],container:[fo],"drop-shadow":[fo],ease:["in","out","in-out"],font:[xO],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[fo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[fo],shadow:[fo],spacing:["px",et],text:[fo],"text-shadow":[fo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Dc,Pe,ke,A]}],container:["container"],columns:[{columns:[et,Pe,ke,u]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:W()}],overflow:[{overflow:X()}],"overflow-x":[{"overflow-x":X()}],"overflow-y":[{"overflow-y":X()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:k()}],"inset-x":[{"inset-x":k()}],"inset-y":[{"inset-y":k()}],start:[{start:k()}],end:[{end:k()}],top:[{top:k()}],right:[{right:k()}],bottom:[{bottom:k()}],left:[{left:k()}],visibility:["visible","invisible","collapse"],z:[{z:[ri,"auto",ke,Pe]}],basis:[{basis:[Dc,"full","auto",u,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[et,Dc,"auto","initial","none",Pe]}],grow:[{grow:["",et,ke,Pe]}],shrink:[{shrink:["",et,ke,Pe]}],order:[{order:[ri,"first","last","none",ke,Pe]}],"grid-cols":[{"grid-cols":M()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":M()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...ue(),"normal"]}],"justify-items":[{"justify-items":[...Me(),"normal"]}],"justify-self":[{"justify-self":["auto",...Me()]}],"align-content":[{content:["normal",...ue()]}],"align-items":[{items:[...Me(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Me(),{baseline:["","last"]}]}],"place-content":[{"place-content":ue()}],"place-items":[{"place-items":[...Me(),"baseline"]}],"place-self":[{"place-self":["auto",...Me()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:pe()}],mx:[{mx:pe()}],my:[{my:pe()}],ms:[{ms:pe()}],me:[{me:pe()}],mt:[{mt:pe()}],mr:[{mr:pe()}],mb:[{mb:pe()}],ml:[{ml:pe()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:ye()}],w:[{w:[u,"screen",...ye()]}],"min-w":[{"min-w":[u,"screen","none",...ye()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...ye()]}],h:[{h:["screen","lh",...ye()]}],"min-h":[{"min-h":["screen","lh","none",...ye()]}],"max-h":[{"max-h":["screen","lh",...ye()]}],"font-size":[{text:["base",t,Iu,la]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ke,uy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ly,Pe]}],"font-family":[{font:[TO,Pe,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ke,Pe]}],"line-clamp":[{"line-clamp":[et,"none",ke,uy]}],leading:[{leading:[i,...I()]}],"list-image":[{"list-image":["none",ke,Pe]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ke,Pe]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:H()}],"text-color":[{text:H()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[et,"from-font","auto",ke,la]}],"text-decoration-color":[{decoration:H()}],"underline-offset":[{"underline-offset":[et,"auto",ke,Pe]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ke,Pe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ke,Pe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:ae()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ri,ke,Pe],radial:["",ke,Pe],conic:[ri,ke,Pe]},AO,IO]}],"bg-color":[{bg:H()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:H()}],"gradient-via":[{via:H()}],"gradient-to":[{to:H()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:le()}],"border-w-x":[{"border-x":le()}],"border-w-y":[{"border-y":le()}],"border-w-s":[{"border-s":le()}],"border-w-e":[{"border-e":le()}],"border-w-t":[{"border-t":le()}],"border-w-r":[{"border-r":le()}],"border-w-b":[{"border-b":le()}],"border-w-l":[{"border-l":le()}],"divide-x":[{"divide-x":le()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":le()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:H()}],"border-color-x":[{"border-x":H()}],"border-color-y":[{"border-y":H()}],"border-color-s":[{"border-s":H()}],"border-color-e":[{"border-e":H()}],"border-color-t":[{"border-t":H()}],"border-color-r":[{"border-r":H()}],"border-color-b":[{"border-b":H()}],"border-color-l":[{"border-l":H()}],"divide-color":[{divide:H()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[et,ke,Pe]}],"outline-w":[{outline:["",et,Iu,la]}],"outline-color":[{outline:H()}],shadow:[{shadow:["","none",g,nf,tf]}],"shadow-color":[{shadow:H()}],"inset-shadow":[{"inset-shadow":["none",m,nf,tf]}],"inset-shadow-color":[{"inset-shadow":H()}],"ring-w":[{ring:le()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:H()}],"ring-offset-w":[{"ring-offset":[et,la]}],"ring-offset-color":[{"ring-offset":H()}],"inset-ring-w":[{"inset-ring":le()}],"inset-ring-color":[{"inset-ring":H()}],"text-shadow":[{"text-shadow":["none",w,nf,tf]}],"text-shadow-color":[{"text-shadow":H()}],opacity:[{opacity:[et,ke,Pe]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[et]}],"mask-image-linear-from-pos":[{"mask-linear-from":_e()}],"mask-image-linear-to-pos":[{"mask-linear-to":_e()}],"mask-image-linear-from-color":[{"mask-linear-from":H()}],"mask-image-linear-to-color":[{"mask-linear-to":H()}],"mask-image-t-from-pos":[{"mask-t-from":_e()}],"mask-image-t-to-pos":[{"mask-t-to":_e()}],"mask-image-t-from-color":[{"mask-t-from":H()}],"mask-image-t-to-color":[{"mask-t-to":H()}],"mask-image-r-from-pos":[{"mask-r-from":_e()}],"mask-image-r-to-pos":[{"mask-r-to":_e()}],"mask-image-r-from-color":[{"mask-r-from":H()}],"mask-image-r-to-color":[{"mask-r-to":H()}],"mask-image-b-from-pos":[{"mask-b-from":_e()}],"mask-image-b-to-pos":[{"mask-b-to":_e()}],"mask-image-b-from-color":[{"mask-b-from":H()}],"mask-image-b-to-color":[{"mask-b-to":H()}],"mask-image-l-from-pos":[{"mask-l-from":_e()}],"mask-image-l-to-pos":[{"mask-l-to":_e()}],"mask-image-l-from-color":[{"mask-l-from":H()}],"mask-image-l-to-color":[{"mask-l-to":H()}],"mask-image-x-from-pos":[{"mask-x-from":_e()}],"mask-image-x-to-pos":[{"mask-x-to":_e()}],"mask-image-x-from-color":[{"mask-x-from":H()}],"mask-image-x-to-color":[{"mask-x-to":H()}],"mask-image-y-from-pos":[{"mask-y-from":_e()}],"mask-image-y-to-pos":[{"mask-y-to":_e()}],"mask-image-y-from-color":[{"mask-y-from":H()}],"mask-image-y-to-color":[{"mask-y-to":H()}],"mask-image-radial":[{"mask-radial":[ke,Pe]}],"mask-image-radial-from-pos":[{"mask-radial-from":_e()}],"mask-image-radial-to-pos":[{"mask-radial-to":_e()}],"mask-image-radial-from-color":[{"mask-radial-from":H()}],"mask-image-radial-to-color":[{"mask-radial-to":H()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":q()}],"mask-image-conic-pos":[{"mask-conic":[et]}],"mask-image-conic-from-pos":[{"mask-conic-from":_e()}],"mask-image-conic-to-pos":[{"mask-conic-to":_e()}],"mask-image-conic-from-color":[{"mask-conic-from":H()}],"mask-image-conic-to-color":[{"mask-conic-to":H()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:ae()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ke,Pe]}],filter:[{filter:["","none",ke,Pe]}],blur:[{blur:Ie()}],brightness:[{brightness:[et,ke,Pe]}],contrast:[{contrast:[et,ke,Pe]}],"drop-shadow":[{"drop-shadow":["","none",S,nf,tf]}],"drop-shadow-color":[{"drop-shadow":H()}],grayscale:[{grayscale:["",et,ke,Pe]}],"hue-rotate":[{"hue-rotate":[et,ke,Pe]}],invert:[{invert:["",et,ke,Pe]}],saturate:[{saturate:[et,ke,Pe]}],sepia:[{sepia:["",et,ke,Pe]}],"backdrop-filter":[{"backdrop-filter":["","none",ke,Pe]}],"backdrop-blur":[{"backdrop-blur":Ie()}],"backdrop-brightness":[{"backdrop-brightness":[et,ke,Pe]}],"backdrop-contrast":[{"backdrop-contrast":[et,ke,Pe]}],"backdrop-grayscale":[{"backdrop-grayscale":["",et,ke,Pe]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[et,ke,Pe]}],"backdrop-invert":[{"backdrop-invert":["",et,ke,Pe]}],"backdrop-opacity":[{"backdrop-opacity":[et,ke,Pe]}],"backdrop-saturate":[{"backdrop-saturate":[et,ke,Pe]}],"backdrop-sepia":[{"backdrop-sepia":["",et,ke,Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ke,Pe]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[et,"initial",ke,Pe]}],ease:[{ease:["linear","initial",O,ke,Pe]}],delay:[{delay:[et,ke,Pe]}],animate:[{animate:["none",U,ke,Pe]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[C,ke,Pe]}],"perspective-origin":[{"perspective-origin":W()}],rotate:[{rotate:Ge()}],"rotate-x":[{"rotate-x":Ge()}],"rotate-y":[{"rotate-y":Ge()}],"rotate-z":[{"rotate-z":Ge()}],scale:[{scale:ft()}],"scale-x":[{"scale-x":ft()}],"scale-y":[{"scale-y":ft()}],"scale-z":[{"scale-z":ft()}],"scale-3d":["scale-3d"],skew:[{skew:ct()}],"skew-x":[{"skew-x":ct()}],"skew-y":[{"skew-y":ct()}],transform:[{transform:[ke,Pe,"","none","gpu","cpu"]}],"transform-origin":[{origin:W()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:H()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:H()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ke,Pe]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ke,Pe]}],fill:[{fill:["none",...H()]}],"stroke-w":[{stroke:[et,Iu,la,uy]}],stroke:[{stroke:["none",...H()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},NO=hO(kO);function ze(...n){return NO(KI(n))}const DO=Mp("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function Ds({className:n,variant:e,size:t,asChild:r=!1,...s}){const i=r?Op:"button";return v.jsx(i,{"data-slot":"button",className:ze(DO({variant:e,size:t,className:n})),...s})}function Bc({className:n,type:e,...t}){return v.jsx("input",{type:e,"data-slot":"input",className:ze("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",n),...t})}var a_=qI();const c1=BI(a_);var OO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ut=OO.reduce((n,e)=>{const t=sl(`Primitive.${e}`),r=b.forwardRef((s,i)=>{const{asChild:c,...u}=s,d=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),v.jsx(d,{...u,ref:i})});return r.displayName=`Primitive.${e}`,{...n,[e]:r}},{});function l1(n,e){n&&a_.flushSync(()=>n.dispatchEvent(e))}var MO="Separator",Db="horizontal",VO=["horizontal","vertical"],u1=b.forwardRef((n,e)=>{const{decorative:t,orientation:r=Db,...s}=n,i=LO(r)?r:Db,u=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return v.jsx(ut.div,{"data-orientation":i,...u,...s,ref:e})});u1.displayName=MO;function LO(n){return VO.includes(n)}var FO=u1;function jO({className:n,orientation:e="horizontal",decorative:t=!0,...r}){return v.jsx(FO,{"data-slot":"separator-root",decorative:t,orientation:e,className:ze("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",n),...r})}function Fe(n,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(n?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function UO(n,e){const t=b.createContext(e),r=i=>{const{children:c,...u}=i,d=b.useMemo(()=>u,Object.values(u));return v.jsx(t.Provider,{value:d,children:c})};r.displayName=n+"Provider";function s(i){const c=b.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${n}\``)}return[r,s]}function Gs(n,e=[]){let t=[];function r(i,c){const u=b.createContext(c),d=t.length;t=[...t,c];const p=m=>{const{scope:w,children:S,...R}=m,C=w?.[n]?.[d]||u,A=b.useMemo(()=>R,Object.values(R));return v.jsx(C.Provider,{value:A,children:S})};p.displayName=i+"Provider";function g(m,w){const S=w?.[n]?.[d]||u,R=b.useContext(S);if(R)return R;if(c!==void 0)return c;throw new Error(`\`${m}\` must be used within \`${i}\``)}return[p,g]}const s=()=>{const i=t.map(c=>b.createContext(c));return function(u){const d=u?.[n]||i;return b.useMemo(()=>({[`__scope${n}`]:{...u,[n]:d}}),[u,d])}};return s.scopeName=n,[r,zO(s,...e)]}function zO(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const c=r.reduce((u,{useScope:d,scopeName:p})=>{const m=d(i)[`__scope${p}`];return{...u,...m}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var _o=globalThis?.document?b.useLayoutEffect:()=>{},$O=HI[" useId ".trim().toString()]||(()=>{}),BO=0;function ba(n){const[e,t]=b.useState($O());return _o(()=>{t(r=>r??String(BO++))},[n]),e?`radix-${e}`:""}var qO=HI[" useInsertionEffect ".trim().toString()]||_o;function Tl({prop:n,defaultProp:e,onChange:t=()=>{},caller:r}){const[s,i,c]=HO({defaultProp:e,onChange:t}),u=n!==void 0,d=u?n:s;{const g=b.useRef(n!==void 0);b.useEffect(()=>{const m=g.current;m!==u&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),g.current=u},[u,r])}const p=b.useCallback(g=>{if(u){const m=WO(g)?g(n):g;m!==n&&c.current?.(m)}else i(g)},[u,n,i,c]);return[d,p]}function HO({defaultProp:n,onChange:e}){const[t,r]=b.useState(n),s=b.useRef(t),i=b.useRef(e);return qO(()=>{i.current=e},[e]),b.useEffect(()=>{s.current!==t&&(i.current?.(t),s.current=t)},[t,s]),[t,r,i]}function WO(n){return typeof n=="function"}function Ln(n){const e=b.useRef(n);return b.useEffect(()=>{e.current=n}),b.useMemo(()=>(...t)=>e.current?.(...t),[])}function GO(n,e=globalThis?.document){const t=Ln(n);b.useEffect(()=>{const r=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[t,e])}var KO="DismissableLayer",Ky="dismissableLayer.update",ZO="dismissableLayer.pointerDownOutside",QO="dismissableLayer.focusOutside",Ob,d1=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fp=b.forwardRef((n,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:c,onDismiss:u,...d}=n,p=b.useContext(d1),[g,m]=b.useState(null),w=g?.ownerDocument??globalThis?.document,[,S]=b.useState({}),R=xt(e,P=>m(P)),C=Array.from(p.layers),[A]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),O=C.indexOf(A),U=g?C.indexOf(g):-1,z=p.layersWithOutsidePointerEventsDisabled.size>0,q=U>=O,W=JO(P=>{const I=P.target,k=[...p.branches].some(M=>M.contains(I));!q||k||(s?.(P),c?.(P),P.defaultPrevented||u?.())},w),X=eM(P=>{const I=P.target;[...p.branches].some(M=>M.contains(I))||(i?.(P),c?.(P),P.defaultPrevented||u?.())},w);return GO(P=>{U===p.layers.size-1&&(r?.(P),!P.defaultPrevented&&u&&(P.preventDefault(),u()))},w),b.useEffect(()=>{if(g)return t&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Ob=w.body.style.pointerEvents,w.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),Mb(),()=>{t&&p.layersWithOutsidePointerEventsDisabled.size===1&&(w.body.style.pointerEvents=Ob)}},[g,w,t,p]),b.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),Mb())},[g,p]),b.useEffect(()=>{const P=()=>S({});return document.addEventListener(Ky,P),()=>document.removeEventListener(Ky,P)},[]),v.jsx(ut.div,{...d,ref:R,style:{pointerEvents:z?q?"auto":"none":void 0,...n.style},onFocusCapture:Fe(n.onFocusCapture,X.onFocusCapture),onBlurCapture:Fe(n.onBlurCapture,X.onBlurCapture),onPointerDownCapture:Fe(n.onPointerDownCapture,W.onPointerDownCapture)})});Fp.displayName=KO;var YO="DismissableLayerBranch",XO=b.forwardRef((n,e)=>{const t=b.useContext(d1),r=b.useRef(null),s=xt(e,r);return b.useEffect(()=>{const i=r.current;if(i)return t.branches.add(i),()=>{t.branches.delete(i)}},[t.branches]),v.jsx(ut.div,{...n,ref:s})});XO.displayName=YO;function JO(n,e=globalThis?.document){const t=Ln(n),r=b.useRef(!1),s=b.useRef(()=>{});return b.useEffect(()=>{const i=u=>{if(u.target&&!r.current){let d=function(){h1(ZO,t,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=d,e.addEventListener("click",s.current,{once:!0})):d()}else e.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function eM(n,e=globalThis?.document){const t=Ln(n),r=b.useRef(!1);return b.useEffect(()=>{const s=i=>{i.target&&!r.current&&h1(QO,t,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Mb(){const n=new CustomEvent(Ky);document.dispatchEvent(n)}function h1(n,e,t,{discrete:r}){const s=t.originalEvent.target,i=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?l1(s,i):s.dispatchEvent(i)}var dy="focusScope.autoFocusOnMount",hy="focusScope.autoFocusOnUnmount",Vb={bubbles:!1,cancelable:!0},tM="FocusScope",c_=b.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...c}=n,[u,d]=b.useState(null),p=Ln(s),g=Ln(i),m=b.useRef(null),w=xt(e,C=>d(C)),S=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(r){let C=function(z){if(S.paused||!u)return;const q=z.target;u.contains(q)?m.current=q:li(m.current,{select:!0})},A=function(z){if(S.paused||!u)return;const q=z.relatedTarget;q!==null&&(u.contains(q)||li(m.current,{select:!0}))},O=function(z){if(document.activeElement===document.body)for(const W of z)W.removedNodes.length>0&&li(u)};document.addEventListener("focusin",C),document.addEventListener("focusout",A);const U=new MutationObserver(O);return u&&U.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",C),document.removeEventListener("focusout",A),U.disconnect()}}},[r,u,S.paused]),b.useEffect(()=>{if(u){Fb.add(S);const C=document.activeElement;if(!u.contains(C)){const O=new CustomEvent(dy,Vb);u.addEventListener(dy,p),u.dispatchEvent(O),O.defaultPrevented||(nM(aM(f1(u)),{select:!0}),document.activeElement===C&&li(u))}return()=>{u.removeEventListener(dy,p),setTimeout(()=>{const O=new CustomEvent(hy,Vb);u.addEventListener(hy,g),u.dispatchEvent(O),O.defaultPrevented||li(C??document.body,{select:!0}),u.removeEventListener(hy,g),Fb.remove(S)},0)}}},[u,p,g,S]);const R=b.useCallback(C=>{if(!t&&!r||S.paused)return;const A=C.key==="Tab"&&!C.altKey&&!C.ctrlKey&&!C.metaKey,O=document.activeElement;if(A&&O){const U=C.currentTarget,[z,q]=rM(U);z&&q?!C.shiftKey&&O===q?(C.preventDefault(),t&&li(z,{select:!0})):C.shiftKey&&O===z&&(C.preventDefault(),t&&li(q,{select:!0})):O===U&&C.preventDefault()}},[t,r,S.paused]);return v.jsx(ut.div,{tabIndex:-1,...c,ref:w,onKeyDown:R})});c_.displayName=tM;function nM(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(li(r,{select:e}),document.activeElement!==t)return}function rM(n){const e=f1(n),t=Lb(e,n),r=Lb(e.reverse(),n);return[t,r]}function f1(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Lb(n,e){for(const t of n)if(!sM(t,{upTo:e}))return t}function sM(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function oM(n){return n instanceof HTMLInputElement&&"select"in n}function li(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&oM(n)&&e&&n.select()}}var Fb=iM();function iM(){let n=[];return{add(e){const t=n[0];e!==t&&t?.pause(),n=jb(n,e),n.unshift(e)},remove(e){n=jb(n,e),n[0]?.resume()}}}function jb(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function aM(n){return n.filter(e=>e.tagName!=="A")}var cM="Portal",jp=b.forwardRef((n,e)=>{const{container:t,...r}=n,[s,i]=b.useState(!1);_o(()=>i(!0),[]);const c=t||s&&globalThis?.document?.body;return c?c1.createPortal(v.jsx(ut.div,{...r,ref:e}),c):null});jp.displayName=cM;function lM(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var Gn=n=>{const{present:e,children:t}=n,r=uM(e),s=typeof t=="function"?t({present:r.isPresent}):b.Children.only(t),i=xt(r.ref,dM(s));return typeof t=="function"||r.isPresent?b.cloneElement(s,{ref:i}):null};Gn.displayName="Presence";function uM(n){const[e,t]=b.useState(),r=b.useRef(null),s=b.useRef(n),i=b.useRef("none"),c=n?"mounted":"unmounted",[u,d]=lM(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const p=rf(r.current);i.current=u==="mounted"?p:"none"},[u]),_o(()=>{const p=r.current,g=s.current;if(g!==n){const w=i.current,S=rf(p);n?d("MOUNT"):S==="none"||p?.display==="none"?d("UNMOUNT"):d(g&&w!==S?"ANIMATION_OUT":"UNMOUNT"),s.current=n}},[n,d]),_o(()=>{if(e){let p;const g=e.ownerDocument.defaultView??window,m=S=>{const C=rf(r.current).includes(CSS.escape(S.animationName));if(S.target===e&&C&&(d("ANIMATION_END"),!s.current)){const A=e.style.animationFillMode;e.style.animationFillMode="forwards",p=g.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=A)})}},w=S=>{S.target===e&&(i.current=rf(r.current))};return e.addEventListener("animationstart",w),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{g.clearTimeout(p),e.removeEventListener("animationstart",w),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:b.useCallback(p=>{r.current=p?getComputedStyle(p):null,t(p)},[])}}function rf(n){return n?.animationName||"none"}function dM(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var fy=0;function p1(){b.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??Ub()),document.body.insertAdjacentElement("beforeend",n[1]??Ub()),fy++,()=>{fy===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fy--}},[])}function Ub(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var Os=function(){return Os=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Os.apply(this,arguments)};function m1(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function hM(n,e,t){if(t||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return n.concat(i||Array.prototype.slice.call(e))}var If="right-scroll-bar-position",Tf="width-before-scroll-bar",fM="with-scroll-bars-hidden",pM="--removed-body-scroll-bar-size";function py(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function mM(n,e){var t=b.useState(function(){return{value:n,callback:e,facade:{get current(){return t.value},set current(r){var s=t.value;s!==r&&(t.value=r,t.callback(r,s))}}}})[0];return t.callback=e,t.facade}var gM=typeof window<"u"?b.useLayoutEffect:b.useEffect,zb=new WeakMap;function yM(n,e){var t=mM(null,function(r){return n.forEach(function(s){return py(s,r)})});return gM(function(){var r=zb.get(t);if(r){var s=new Set(r),i=new Set(n),c=t.current;s.forEach(function(u){i.has(u)||py(u,null)}),i.forEach(function(u){s.has(u)||py(u,c)})}zb.set(t,n)},[n]),t}function vM(n){return n}function _M(n,e){e===void 0&&(e=vM);var t=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:n},useMedium:function(i){var c=e(i,r);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(i){for(r=!0;t.length;){var c=t;t=[],c.forEach(i)}t={push:function(u){return i(u)},filter:function(){return t}}},assignMedium:function(i){r=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(i),c=t}var d=function(){var g=c;c=[],g.forEach(i)},p=function(){return Promise.resolve().then(d)};p(),t={push:function(g){c.push(g),p()},filter:function(g){return c=c.filter(g),t}}}};return s}function wM(n){n===void 0&&(n={});var e=_M(null);return e.options=Os({async:!0,ssr:!1},n),e}var g1=function(n){var e=n.sideCar,t=m1(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return b.createElement(r,Os({},t))};g1.isSideCarExport=!0;function EM(n,e){return n.useMedium(e),g1}var y1=wM(),my=function(){},Up=b.forwardRef(function(n,e){var t=b.useRef(null),r=b.useState({onScrollCapture:my,onWheelCapture:my,onTouchMoveCapture:my}),s=r[0],i=r[1],c=n.forwardProps,u=n.children,d=n.className,p=n.removeScrollBar,g=n.enabled,m=n.shards,w=n.sideCar,S=n.noRelative,R=n.noIsolation,C=n.inert,A=n.allowPinchZoom,O=n.as,U=O===void 0?"div":O,z=n.gapMode,q=m1(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),W=w,X=yM([t,e]),P=Os(Os({},q),s);return b.createElement(b.Fragment,null,g&&b.createElement(W,{sideCar:y1,removeScrollBar:p,shards:m,noRelative:S,noIsolation:R,inert:C,setCallbacks:i,allowPinchZoom:!!A,lockRef:t,gapMode:z}),c?b.cloneElement(b.Children.only(u),Os(Os({},P),{ref:X})):b.createElement(U,Os({},P,{className:d,ref:X}),u))});Up.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Up.classNames={fullWidth:Tf,zeroRight:If};var bM=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xM(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=bM();return e&&n.setAttribute("nonce",e),n}function SM(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function IM(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var TM=function(){var n=0,e=null;return{add:function(t){n==0&&(e=xM())&&(SM(e,t),IM(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},CM=function(){var n=TM();return function(e,t){b.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&t])}},v1=function(){var n=CM(),e=function(t){var r=t.styles,s=t.dynamic;return n(r,s),null};return e},AM={left:0,top:0,right:0,gap:0},gy=function(n){return parseInt(n||"",10)||0},RM=function(n){var e=window.getComputedStyle(document.body),t=e[n==="padding"?"paddingLeft":"marginLeft"],r=e[n==="padding"?"paddingTop":"marginTop"],s=e[n==="padding"?"paddingRight":"marginRight"];return[gy(t),gy(r),gy(s)]},PM=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return AM;var e=RM(n),t=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-t+e[2]-e[0])}},kM=v1(),Qc="data-scroll-locked",NM=function(n,e,t,r){var s=n.left,i=n.top,c=n.right,u=n.gap;return t===void 0&&(t="margin"),`
  .`.concat(fM,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(u,"px ").concat(r,`;
  }
  body[`).concat(Qc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(r,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(If,` {
    right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(Tf,` {
    margin-right: `).concat(u,"px ").concat(r,`;
  }
  
  .`).concat(If," .").concat(If,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Tf," .").concat(Tf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Qc,`] {
    `).concat(pM,": ").concat(u,`px;
  }
`)},$b=function(){var n=parseInt(document.body.getAttribute(Qc)||"0",10);return isFinite(n)?n:0},DM=function(){b.useEffect(function(){return document.body.setAttribute(Qc,($b()+1).toString()),function(){var n=$b()-1;n<=0?document.body.removeAttribute(Qc):document.body.setAttribute(Qc,n.toString())}},[])},OM=function(n){var e=n.noRelative,t=n.noImportant,r=n.gapMode,s=r===void 0?"margin":r;DM();var i=b.useMemo(function(){return PM(s)},[s]);return b.createElement(kM,{styles:NM(i,!e,s,t?"":"!important")})},Zy=!1;if(typeof window<"u")try{var sf=Object.defineProperty({},"passive",{get:function(){return Zy=!0,!0}});window.addEventListener("test",sf,sf),window.removeEventListener("test",sf,sf)}catch{Zy=!1}var Oc=Zy?{passive:!1}:!1,MM=function(n){return n.tagName==="TEXTAREA"},_1=function(n,e){if(!(n instanceof Element))return!1;var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!MM(n)&&t[e]==="visible")},VM=function(n){return _1(n,"overflowY")},LM=function(n){return _1(n,"overflowX")},Bb=function(n,e){var t=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=w1(n,r);if(s){var i=E1(n,r),c=i[1],u=i[2];if(c>u)return!0}r=r.parentNode}while(r&&r!==t.body);return!1},FM=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},jM=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},w1=function(n,e){return n==="v"?VM(e):LM(e)},E1=function(n,e){return n==="v"?FM(e):jM(e)},UM=function(n,e){return n==="h"&&e==="rtl"?-1:1},zM=function(n,e,t,r,s){var i=UM(n,window.getComputedStyle(e).direction),c=i*r,u=t.target,d=e.contains(u),p=!1,g=c>0,m=0,w=0;do{if(!u)break;var S=E1(n,u),R=S[0],C=S[1],A=S[2],O=C-A-i*R;(R||O)&&w1(n,u)&&(m+=O,w+=R);var U=u.parentNode;u=U&&U.nodeType===Node.DOCUMENT_FRAGMENT_NODE?U.host:U}while(!d&&u!==document.body||d&&(e.contains(u)||e===u));return(g&&Math.abs(m)<1||!g&&Math.abs(w)<1)&&(p=!0),p},of=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},qb=function(n){return[n.deltaX,n.deltaY]},Hb=function(n){return n&&"current"in n?n.current:n},$M=function(n,e){return n[0]===e[0]&&n[1]===e[1]},BM=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},qM=0,Mc=[];function HM(n){var e=b.useRef([]),t=b.useRef([0,0]),r=b.useRef(),s=b.useState(qM++)[0],i=b.useState(v1)[0],c=b.useRef(n);b.useEffect(function(){c.current=n},[n]),b.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(s));var C=hM([n.lockRef.current],(n.shards||[]).map(Hb),!0).filter(Boolean);return C.forEach(function(A){return A.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),C.forEach(function(A){return A.classList.remove("allow-interactivity-".concat(s))})}}},[n.inert,n.lockRef.current,n.shards]);var u=b.useCallback(function(C,A){if("touches"in C&&C.touches.length===2||C.type==="wheel"&&C.ctrlKey)return!c.current.allowPinchZoom;var O=of(C),U=t.current,z="deltaX"in C?C.deltaX:U[0]-O[0],q="deltaY"in C?C.deltaY:U[1]-O[1],W,X=C.target,P=Math.abs(z)>Math.abs(q)?"h":"v";if("touches"in C&&P==="h"&&X.type==="range")return!1;var I=Bb(P,X);if(!I)return!0;if(I?W=P:(W=P==="v"?"h":"v",I=Bb(P,X)),!I)return!1;if(!r.current&&"changedTouches"in C&&(z||q)&&(r.current=W),!W)return!0;var k=r.current||W;return zM(k,A,C,k==="h"?z:q)},[]),d=b.useCallback(function(C){var A=C;if(!(!Mc.length||Mc[Mc.length-1]!==i)){var O="deltaY"in A?qb(A):of(A),U=e.current.filter(function(W){return W.name===A.type&&(W.target===A.target||A.target===W.shadowParent)&&$M(W.delta,O)})[0];if(U&&U.should){A.cancelable&&A.preventDefault();return}if(!U){var z=(c.current.shards||[]).map(Hb).filter(Boolean).filter(function(W){return W.contains(A.target)}),q=z.length>0?u(A,z[0]):!c.current.noIsolation;q&&A.cancelable&&A.preventDefault()}}},[]),p=b.useCallback(function(C,A,O,U){var z={name:C,delta:A,target:O,should:U,shadowParent:WM(O)};e.current.push(z),setTimeout(function(){e.current=e.current.filter(function(q){return q!==z})},1)},[]),g=b.useCallback(function(C){t.current=of(C),r.current=void 0},[]),m=b.useCallback(function(C){p(C.type,qb(C),C.target,u(C,n.lockRef.current))},[]),w=b.useCallback(function(C){p(C.type,of(C),C.target,u(C,n.lockRef.current))},[]);b.useEffect(function(){return Mc.push(i),n.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:w}),document.addEventListener("wheel",d,Oc),document.addEventListener("touchmove",d,Oc),document.addEventListener("touchstart",g,Oc),function(){Mc=Mc.filter(function(C){return C!==i}),document.removeEventListener("wheel",d,Oc),document.removeEventListener("touchmove",d,Oc),document.removeEventListener("touchstart",g,Oc)}},[]);var S=n.removeScrollBar,R=n.inert;return b.createElement(b.Fragment,null,R?b.createElement(i,{styles:BM(s)}):null,S?b.createElement(OM,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function WM(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const GM=EM(y1,HM);var l_=b.forwardRef(function(n,e){return b.createElement(Up,Os({},n,{ref:e,sideCar:GM}))});l_.classNames=Up.classNames;var KM=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},Vc=new WeakMap,af=new WeakMap,cf={},yy=0,b1=function(n){return n&&(n.host||b1(n.parentNode))},ZM=function(n,e){return e.map(function(t){if(n.contains(t))return t;var r=b1(t);return r&&n.contains(r)?r:(console.error("aria-hidden",t,"in not contained inside",n,". Doing nothing"),null)}).filter(function(t){return!!t})},QM=function(n,e,t,r){var s=ZM(e,Array.isArray(n)?n:[n]);cf[t]||(cf[t]=new WeakMap);var i=cf[t],c=[],u=new Set,d=new Set(s),p=function(m){!m||u.has(m)||(u.add(m),p(m.parentNode))};s.forEach(p);var g=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(w){if(u.has(w))g(w);else try{var S=w.getAttribute(r),R=S!==null&&S!=="false",C=(Vc.get(w)||0)+1,A=(i.get(w)||0)+1;Vc.set(w,C),i.set(w,A),c.push(w),C===1&&R&&af.set(w,!0),A===1&&w.setAttribute(t,"true"),R||w.setAttribute(r,"true")}catch(O){console.error("aria-hidden: cannot operate on ",w,O)}})};return g(e),u.clear(),yy++,function(){c.forEach(function(m){var w=Vc.get(m)-1,S=i.get(m)-1;Vc.set(m,w),i.set(m,S),w||(af.has(m)||m.removeAttribute(r),af.delete(m)),S||m.removeAttribute(t)}),yy--,yy||(Vc=new WeakMap,Vc=new WeakMap,af=new WeakMap,cf={})}},x1=function(n,e,t){t===void 0&&(t="data-aria-hidden");var r=Array.from(Array.isArray(n)?n:[n]),s=KM(n);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),QM(r,s,t,"aria-hidden")):function(){return null}},zp="Dialog",[S1]=Gs(zp),[YM,ds]=S1(zp),I1=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:s,onOpenChange:i,modal:c=!0}=n,u=b.useRef(null),d=b.useRef(null),[p,g]=Tl({prop:r,defaultProp:s??!1,onChange:i,caller:zp});return v.jsx(YM,{scope:e,triggerRef:u,contentRef:d,contentId:ba(),titleId:ba(),descriptionId:ba(),open:p,onOpenChange:g,onOpenToggle:b.useCallback(()=>g(m=>!m),[g]),modal:c,children:t})};I1.displayName=zp;var T1="DialogTrigger",C1=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ds(T1,t),i=xt(e,s.triggerRef);return v.jsx(ut.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":h_(s.open),...r,ref:i,onClick:Fe(n.onClick,s.onOpenToggle)})});C1.displayName=T1;var u_="DialogPortal",[XM,A1]=S1(u_,{forceMount:void 0}),R1=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:s}=n,i=ds(u_,e);return v.jsx(XM,{scope:e,forceMount:t,children:b.Children.map(r,c=>v.jsx(Gn,{present:t||i.open,children:v.jsx(jp,{asChild:!0,container:s,children:c})}))})};R1.displayName=u_;var Hf="DialogOverlay",P1=b.forwardRef((n,e)=>{const t=A1(Hf,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=ds(Hf,n.__scopeDialog);return i.modal?v.jsx(Gn,{present:r||i.open,children:v.jsx(eV,{...s,ref:e})}):null});P1.displayName=Hf;var JM=sl("DialogOverlay.RemoveScroll"),eV=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ds(Hf,t);return v.jsx(l_,{as:JM,allowPinchZoom:!0,shards:[s.contentRef],children:v.jsx(ut.div,{"data-state":h_(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ra="DialogContent",k1=b.forwardRef((n,e)=>{const t=A1(Ra,n.__scopeDialog),{forceMount:r=t.forceMount,...s}=n,i=ds(Ra,n.__scopeDialog);return v.jsx(Gn,{present:r||i.open,children:i.modal?v.jsx(tV,{...s,ref:e}):v.jsx(nV,{...s,ref:e})})});k1.displayName=Ra;var tV=b.forwardRef((n,e)=>{const t=ds(Ra,n.__scopeDialog),r=b.useRef(null),s=xt(e,t.contentRef,r);return b.useEffect(()=>{const i=r.current;if(i)return x1(i)},[]),v.jsx(N1,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Fe(n.onCloseAutoFocus,i=>{i.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:Fe(n.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&i.preventDefault()}),onFocusOutside:Fe(n.onFocusOutside,i=>i.preventDefault())})}),nV=b.forwardRef((n,e)=>{const t=ds(Ra,n.__scopeDialog),r=b.useRef(!1),s=b.useRef(!1);return v.jsx(N1,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{n.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||t.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{n.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=i.target;t.triggerRef.current?.contains(c)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),N1=b.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...c}=n,u=ds(Ra,t),d=b.useRef(null),p=xt(e,d);return p1(),v.jsxs(v.Fragment,{children:[v.jsx(c_,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:v.jsx(Fp,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":h_(u.open),...c,ref:p,onDismiss:()=>u.onOpenChange(!1)})}),v.jsxs(v.Fragment,{children:[v.jsx(rV,{titleId:u.titleId}),v.jsx(oV,{contentRef:d,descriptionId:u.descriptionId})]})]})}),d_="DialogTitle",D1=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ds(d_,t);return v.jsx(ut.h2,{id:s.titleId,...r,ref:e})});D1.displayName=d_;var O1="DialogDescription",M1=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ds(O1,t);return v.jsx(ut.p,{id:s.descriptionId,...r,ref:e})});M1.displayName=O1;var V1="DialogClose",L1=b.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,s=ds(V1,t);return v.jsx(ut.button,{type:"button",...r,ref:e,onClick:Fe(n.onClick,()=>s.onOpenChange(!1))})});L1.displayName=V1;function h_(n){return n?"open":"closed"}var F1="DialogTitleWarning",[FW,j1]=UO(F1,{contentName:Ra,titleName:d_,docsSlug:"dialog"}),rV=({titleId:n})=>{const e=j1(F1),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return b.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},sV="DialogDescriptionWarning",oV=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${j1(sV).contentName}}.`;return b.useEffect(()=>{const s=n.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},U1=I1,iV=C1,z1=R1,f_=P1,p_=k1,m_=D1,g_=M1,$1=L1;const aV=U1,cV=z1,B1=b.forwardRef(({className:n,...e},t)=>v.jsx(f_,{className:ze("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...e,ref:t}));B1.displayName=f_.displayName;const lV=Mp("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),q1=b.forwardRef(({side:n="right",className:e,children:t,...r},s)=>v.jsxs(cV,{children:[v.jsx(B1,{}),v.jsxs(p_,{ref:s,className:ze(lV({side:n}),e),...r,children:[t,v.jsxs($1,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[v.jsx(o_,{className:"h-4 w-4"}),v.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));q1.displayName=p_.displayName;const H1=({className:n,...e})=>v.jsx("div",{className:ze("flex flex-col space-y-2 text-center sm:text-left",n),...e});H1.displayName="SheetHeader";const W1=b.forwardRef(({className:n,...e},t)=>v.jsx(m_,{ref:t,className:ze("text-lg font-semibold text-foreground",n),...e}));W1.displayName=m_.displayName;const G1=b.forwardRef(({className:n,...e},t)=>v.jsx(g_,{ref:t,className:ze("text-sm text-muted-foreground",n),...e}));G1.displayName=g_.displayName;const uV=["top","right","bottom","left"],Ii=Math.min,br=Math.max,Wf=Math.round,lf=Math.floor,js=n=>({x:n,y:n}),dV={left:"right",right:"left",bottom:"top",top:"bottom"},hV={start:"end",end:"start"};function Qy(n,e,t){return br(n,Ii(e,t))}function wo(n,e){return typeof n=="function"?n(e):n}function Eo(n){return n.split("-")[0]}function Cl(n){return n.split("-")[1]}function y_(n){return n==="x"?"y":"x"}function v_(n){return n==="y"?"height":"width"}const fV=new Set(["top","bottom"]);function Vs(n){return fV.has(Eo(n))?"y":"x"}function __(n){return y_(Vs(n))}function pV(n,e,t){t===void 0&&(t=!1);const r=Cl(n),s=__(n),i=v_(s);let c=s==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(c=Gf(c)),[c,Gf(c)]}function mV(n){const e=Gf(n);return[Yy(n),e,Yy(e)]}function Yy(n){return n.replace(/start|end/g,e=>hV[e])}const Wb=["left","right"],Gb=["right","left"],gV=["top","bottom"],yV=["bottom","top"];function vV(n,e,t){switch(n){case"top":case"bottom":return t?e?Gb:Wb:e?Wb:Gb;case"left":case"right":return e?gV:yV;default:return[]}}function _V(n,e,t,r){const s=Cl(n);let i=vV(Eo(n),t==="start",r);return s&&(i=i.map(c=>c+"-"+s),e&&(i=i.concat(i.map(Yy)))),i}function Gf(n){return n.replace(/left|right|bottom|top/g,e=>dV[e])}function wV(n){return{top:0,right:0,bottom:0,left:0,...n}}function K1(n){return typeof n!="number"?wV(n):{top:n,right:n,bottom:n,left:n}}function Kf(n){const{x:e,y:t,width:r,height:s}=n;return{width:r,height:s,top:t,left:e,right:e+r,bottom:t+s,x:e,y:t}}function Kb(n,e,t){let{reference:r,floating:s}=n;const i=Vs(e),c=__(e),u=v_(c),d=Eo(e),p=i==="y",g=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,w=r[u]/2-s[u]/2;let S;switch(d){case"top":S={x:g,y:r.y-s.height};break;case"bottom":S={x:g,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y:m};break;case"left":S={x:r.x-s.width,y:m};break;default:S={x:r.x,y:r.y}}switch(Cl(e)){case"start":S[c]-=w*(t&&p?-1:1);break;case"end":S[c]+=w*(t&&p?-1:1);break}return S}const EV=async(n,e,t)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:c}=t,u=i.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(e));let p=await c.getElementRects({reference:n,floating:e,strategy:s}),{x:g,y:m}=Kb(p,r,d),w=r,S={},R=0;for(let C=0;C<u.length;C++){const{name:A,fn:O}=u[C],{x:U,y:z,data:q,reset:W}=await O({x:g,y:m,initialPlacement:r,placement:w,strategy:s,middlewareData:S,rects:p,platform:c,elements:{reference:n,floating:e}});g=U??g,m=z??m,S={...S,[A]:{...S[A],...q}},W&&R<=50&&(R++,typeof W=="object"&&(W.placement&&(w=W.placement),W.rects&&(p=W.rects===!0?await c.getElementRects({reference:n,floating:e,strategy:s}):W.rects),{x:g,y:m}=Kb(p,w,d)),C=-1)}return{x:g,y:m,placement:w,strategy:s,middlewareData:S}};async function Yu(n,e){var t;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:c,elements:u,strategy:d}=n,{boundary:p="clippingAncestors",rootBoundary:g="viewport",elementContext:m="floating",altBoundary:w=!1,padding:S=0}=wo(e,n),R=K1(S),A=u[w?m==="floating"?"reference":"floating":m],O=Kf(await i.getClippingRect({element:(t=await(i.isElement==null?void 0:i.isElement(A)))==null||t?A:A.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(u.floating)),boundary:p,rootBoundary:g,strategy:d})),U=m==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,z=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u.floating)),q=await(i.isElement==null?void 0:i.isElement(z))?await(i.getScale==null?void 0:i.getScale(z))||{x:1,y:1}:{x:1,y:1},W=Kf(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:U,offsetParent:z,strategy:d}):U);return{top:(O.top-W.top+R.top)/q.y,bottom:(W.bottom-O.bottom+R.bottom)/q.y,left:(O.left-W.left+R.left)/q.x,right:(W.right-O.right+R.right)/q.x}}const bV=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:s,rects:i,platform:c,elements:u,middlewareData:d}=e,{element:p,padding:g=0}=wo(n,e)||{};if(p==null)return{};const m=K1(g),w={x:t,y:r},S=__(s),R=v_(S),C=await c.getDimensions(p),A=S==="y",O=A?"top":"left",U=A?"bottom":"right",z=A?"clientHeight":"clientWidth",q=i.reference[R]+i.reference[S]-w[S]-i.floating[R],W=w[S]-i.reference[S],X=await(c.getOffsetParent==null?void 0:c.getOffsetParent(p));let P=X?X[z]:0;(!P||!await(c.isElement==null?void 0:c.isElement(X)))&&(P=u.floating[z]||i.floating[R]);const I=q/2-W/2,k=P/2-C[R]/2-1,M=Ii(m[O],k),V=Ii(m[U],k),L=M,N=P-C[R]-V,ue=P/2-C[R]/2+I,Me=Qy(L,ue,N),pe=!d.arrow&&Cl(s)!=null&&ue!==Me&&i.reference[R]/2-(ue<L?M:V)-C[R]/2<0,ye=pe?ue<L?ue-L:ue-N:0;return{[S]:w[S]+ye,data:{[S]:Me,centerOffset:ue-Me-ye,...pe&&{alignmentOffset:ye}},reset:pe}}}),xV=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:s,middlewareData:i,rects:c,initialPlacement:u,platform:d,elements:p}=e,{mainAxis:g=!0,crossAxis:m=!0,fallbackPlacements:w,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:R="none",flipAlignment:C=!0,...A}=wo(n,e);if((t=i.arrow)!=null&&t.alignmentOffset)return{};const O=Eo(s),U=Vs(u),z=Eo(u)===u,q=await(d.isRTL==null?void 0:d.isRTL(p.floating)),W=w||(z||!C?[Gf(u)]:mV(u)),X=R!=="none";!w&&X&&W.push(..._V(u,C,R,q));const P=[u,...W],I=await Yu(e,A),k=[];let M=((r=i.flip)==null?void 0:r.overflows)||[];if(g&&k.push(I[O]),m){const ue=pV(s,c,q);k.push(I[ue[0]],I[ue[1]])}if(M=[...M,{placement:s,overflows:k}],!k.every(ue=>ue<=0)){var V,L;const ue=(((V=i.flip)==null?void 0:V.index)||0)+1,Me=P[ue];if(Me&&(!(m==="alignment"?U!==Vs(Me):!1)||M.every(H=>Vs(H.placement)===U?H.overflows[0]>0:!0)))return{data:{index:ue,overflows:M},reset:{placement:Me}};let pe=(L=M.filter(ye=>ye.overflows[0]<=0).sort((ye,H)=>ye.overflows[1]-H.overflows[1])[0])==null?void 0:L.placement;if(!pe)switch(S){case"bestFit":{var N;const ye=(N=M.filter(H=>{if(X){const re=Vs(H.placement);return re===U||re==="y"}return!0}).map(H=>[H.placement,H.overflows.filter(re=>re>0).reduce((re,ae)=>re+ae,0)]).sort((H,re)=>H[1]-re[1])[0])==null?void 0:N[0];ye&&(pe=ye);break}case"initialPlacement":pe=u;break}if(s!==pe)return{reset:{placement:pe}}}return{}}}};function Zb(n,e){return{top:n.top-e.height,right:n.right-e.width,bottom:n.bottom-e.height,left:n.left-e.width}}function Qb(n){return uV.some(e=>n[e]>=0)}const SV=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(e){const{rects:t}=e,{strategy:r="referenceHidden",...s}=wo(n,e);switch(r){case"referenceHidden":{const i=await Yu(e,{...s,elementContext:"reference"}),c=Zb(i,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:Qb(c)}}}case"escaped":{const i=await Yu(e,{...s,altBoundary:!0}),c=Zb(i,t.floating);return{data:{escapedOffsets:c,escaped:Qb(c)}}}default:return{}}}}},Z1=new Set(["left","top"]);async function IV(n,e){const{placement:t,platform:r,elements:s}=n,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=Eo(t),u=Cl(t),d=Vs(t)==="y",p=Z1.has(c)?-1:1,g=i&&d?-1:1,m=wo(e,n);let{mainAxis:w,crossAxis:S,alignmentAxis:R}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return u&&typeof R=="number"&&(S=u==="end"?R*-1:R),d?{x:S*g,y:w*p}:{x:w*p,y:S*g}}const TV=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:s,y:i,placement:c,middlewareData:u}=e,d=await IV(e,n);return c===((t=u.offset)==null?void 0:t.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:s+d.x,y:i+d.y,data:{...d,placement:c}}}}},CV=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:c=!1,limiter:u={fn:A=>{let{x:O,y:U}=A;return{x:O,y:U}}},...d}=wo(n,e),p={x:t,y:r},g=await Yu(e,d),m=Vs(Eo(s)),w=y_(m);let S=p[w],R=p[m];if(i){const A=w==="y"?"top":"left",O=w==="y"?"bottom":"right",U=S+g[A],z=S-g[O];S=Qy(U,S,z)}if(c){const A=m==="y"?"top":"left",O=m==="y"?"bottom":"right",U=R+g[A],z=R-g[O];R=Qy(U,R,z)}const C=u.fn({...e,[w]:S,[m]:R});return{...C,data:{x:C.x-t,y:C.y-r,enabled:{[w]:i,[m]:c}}}}}},AV=function(n){return n===void 0&&(n={}),{options:n,fn(e){const{x:t,y:r,placement:s,rects:i,middlewareData:c}=e,{offset:u=0,mainAxis:d=!0,crossAxis:p=!0}=wo(n,e),g={x:t,y:r},m=Vs(s),w=y_(m);let S=g[w],R=g[m];const C=wo(u,e),A=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(d){const z=w==="y"?"height":"width",q=i.reference[w]-i.floating[z]+A.mainAxis,W=i.reference[w]+i.reference[z]-A.mainAxis;S<q?S=q:S>W&&(S=W)}if(p){var O,U;const z=w==="y"?"width":"height",q=Z1.has(Eo(s)),W=i.reference[m]-i.floating[z]+(q&&((O=c.offset)==null?void 0:O[m])||0)+(q?0:A.crossAxis),X=i.reference[m]+i.reference[z]+(q?0:((U=c.offset)==null?void 0:U[m])||0)-(q?A.crossAxis:0);R<W?R=W:R>X&&(R=X)}return{[w]:S,[m]:R}}}},RV=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(e){var t,r;const{placement:s,rects:i,platform:c,elements:u}=e,{apply:d=()=>{},...p}=wo(n,e),g=await Yu(e,p),m=Eo(s),w=Cl(s),S=Vs(s)==="y",{width:R,height:C}=i.floating;let A,O;m==="top"||m==="bottom"?(A=m,O=w===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(O=m,A=w==="end"?"top":"bottom");const U=C-g.top-g.bottom,z=R-g.left-g.right,q=Ii(C-g[A],U),W=Ii(R-g[O],z),X=!e.middlewareData.shift;let P=q,I=W;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(I=z),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(P=U),X&&!w){const M=br(g.left,0),V=br(g.right,0),L=br(g.top,0),N=br(g.bottom,0);S?I=R-2*(M!==0||V!==0?M+V:br(g.left,g.right)):P=C-2*(L!==0||N!==0?L+N:br(g.top,g.bottom))}await d({...e,availableWidth:I,availableHeight:P});const k=await c.getDimensions(u.floating);return R!==k.width||C!==k.height?{reset:{rects:!0}}:{}}}};function $p(){return typeof window<"u"}function Al(n){return Q1(n)?(n.nodeName||"").toLowerCase():"#document"}function Sr(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Ks(n){var e;return(e=(Q1(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function Q1(n){return $p()?n instanceof Node||n instanceof Sr(n).Node:!1}function cs(n){return $p()?n instanceof Element||n instanceof Sr(n).Element:!1}function qs(n){return $p()?n instanceof HTMLElement||n instanceof Sr(n).HTMLElement:!1}function Yb(n){return!$p()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof Sr(n).ShadowRoot}const PV=new Set(["inline","contents"]);function _d(n){const{overflow:e,overflowX:t,overflowY:r,display:s}=ls(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!PV.has(s)}const kV=new Set(["table","td","th"]);function NV(n){return kV.has(Al(n))}const DV=[":popover-open",":modal"];function Bp(n){return DV.some(e=>{try{return n.matches(e)}catch{return!1}})}const OV=["transform","translate","scale","rotate","perspective"],MV=["transform","translate","scale","rotate","perspective","filter"],VV=["paint","layout","strict","content"];function w_(n){const e=E_(),t=cs(n)?ls(n):n;return OV.some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||MV.some(r=>(t.willChange||"").includes(r))||VV.some(r=>(t.contain||"").includes(r))}function LV(n){let e=Ti(n);for(;qs(e)&&!ol(e);){if(w_(e))return e;if(Bp(e))return null;e=Ti(e)}return null}function E_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const FV=new Set(["html","body","#document"]);function ol(n){return FV.has(Al(n))}function ls(n){return Sr(n).getComputedStyle(n)}function qp(n){return cs(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ti(n){if(Al(n)==="html")return n;const e=n.assignedSlot||n.parentNode||Yb(n)&&n.host||Ks(n);return Yb(e)?e.host:e}function Y1(n){const e=Ti(n);return ol(e)?n.ownerDocument?n.ownerDocument.body:n.body:qs(e)&&_d(e)?e:Y1(e)}function Xu(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=Y1(n),i=s===((r=n.ownerDocument)==null?void 0:r.body),c=Sr(s);if(i){const u=Xy(c);return e.concat(c,c.visualViewport||[],_d(s)?s:[],u&&t?Xu(u):[])}return e.concat(s,Xu(s,[],t))}function Xy(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function X1(n){const e=ls(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=qs(n),i=s?n.offsetWidth:t,c=s?n.offsetHeight:r,u=Wf(t)!==i||Wf(r)!==c;return u&&(t=i,r=c),{width:t,height:r,$:u}}function b_(n){return cs(n)?n:n.contextElement}function Yc(n){const e=b_(n);if(!qs(e))return js(1);const t=e.getBoundingClientRect(),{width:r,height:s,$:i}=X1(e);let c=(i?Wf(t.width):t.width)/r,u=(i?Wf(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const jV=js(0);function J1(n){const e=Sr(n);return!E_()||!e.visualViewport?jV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function UV(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==Sr(n)?!1:e}function Pa(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=n.getBoundingClientRect(),i=b_(n);let c=js(1);e&&(r?cs(r)&&(c=Yc(r)):c=Yc(n));const u=UV(i,t,r)?J1(i):js(0);let d=(s.left+u.x)/c.x,p=(s.top+u.y)/c.y,g=s.width/c.x,m=s.height/c.y;if(i){const w=Sr(i),S=r&&cs(r)?Sr(r):r;let R=w,C=Xy(R);for(;C&&r&&S!==R;){const A=Yc(C),O=C.getBoundingClientRect(),U=ls(C),z=O.left+(C.clientLeft+parseFloat(U.paddingLeft))*A.x,q=O.top+(C.clientTop+parseFloat(U.paddingTop))*A.y;d*=A.x,p*=A.y,g*=A.x,m*=A.y,d+=z,p+=q,R=Sr(C),C=Xy(R)}}return Kf({width:g,height:m,x:d,y:p})}function Hp(n,e){const t=qp(n).scrollLeft;return e?e.left+t:Pa(Ks(n)).left+t}function eT(n,e){const t=n.getBoundingClientRect(),r=t.left+e.scrollLeft-Hp(n,t),s=t.top+e.scrollTop;return{x:r,y:s}}function zV(n){let{elements:e,rect:t,offsetParent:r,strategy:s}=n;const i=s==="fixed",c=Ks(r),u=e?Bp(e.floating):!1;if(r===c||u&&i)return t;let d={scrollLeft:0,scrollTop:0},p=js(1);const g=js(0),m=qs(r);if((m||!m&&!i)&&((Al(r)!=="body"||_d(c))&&(d=qp(r)),qs(r))){const S=Pa(r);p=Yc(r),g.x=S.x+r.clientLeft,g.y=S.y+r.clientTop}const w=c&&!m&&!i?eT(c,d):js(0);return{width:t.width*p.x,height:t.height*p.y,x:t.x*p.x-d.scrollLeft*p.x+g.x+w.x,y:t.y*p.y-d.scrollTop*p.y+g.y+w.y}}function $V(n){return Array.from(n.getClientRects())}function BV(n){const e=Ks(n),t=qp(n),r=n.ownerDocument.body,s=br(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=br(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let c=-t.scrollLeft+Hp(n);const u=-t.scrollTop;return ls(r).direction==="rtl"&&(c+=br(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:c,y:u}}const Xb=25;function qV(n,e){const t=Sr(n),r=Ks(n),s=t.visualViewport;let i=r.clientWidth,c=r.clientHeight,u=0,d=0;if(s){i=s.width,c=s.height;const g=E_();(!g||g&&e==="fixed")&&(u=s.offsetLeft,d=s.offsetTop)}const p=Hp(r);if(p<=0){const g=r.ownerDocument,m=g.body,w=getComputedStyle(m),S=g.compatMode==="CSS1Compat"&&parseFloat(w.marginLeft)+parseFloat(w.marginRight)||0,R=Math.abs(r.clientWidth-m.clientWidth-S);R<=Xb&&(i-=R)}else p<=Xb&&(i+=p);return{width:i,height:c,x:u,y:d}}const HV=new Set(["absolute","fixed"]);function WV(n,e){const t=Pa(n,!0,e==="fixed"),r=t.top+n.clientTop,s=t.left+n.clientLeft,i=qs(n)?Yc(n):js(1),c=n.clientWidth*i.x,u=n.clientHeight*i.y,d=s*i.x,p=r*i.y;return{width:c,height:u,x:d,y:p}}function Jb(n,e,t){let r;if(e==="viewport")r=qV(n,t);else if(e==="document")r=BV(Ks(n));else if(cs(e))r=WV(e,t);else{const s=J1(n);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Kf(r)}function tT(n,e){const t=Ti(n);return t===e||!cs(t)||ol(t)?!1:ls(t).position==="fixed"||tT(t,e)}function GV(n,e){const t=e.get(n);if(t)return t;let r=Xu(n,[],!1).filter(u=>cs(u)&&Al(u)!=="body"),s=null;const i=ls(n).position==="fixed";let c=i?Ti(n):n;for(;cs(c)&&!ol(c);){const u=ls(c),d=w_(c);!d&&u.position==="fixed"&&(s=null),(i?!d&&!s:!d&&u.position==="static"&&!!s&&HV.has(s.position)||_d(c)&&!d&&tT(n,c))?r=r.filter(g=>g!==c):s=u,c=Ti(c)}return e.set(n,r),r}function KV(n){let{element:e,boundary:t,rootBoundary:r,strategy:s}=n;const c=[...t==="clippingAncestors"?Bp(e)?[]:GV(e,this._c):[].concat(t),r],u=c[0],d=c.reduce((p,g)=>{const m=Jb(e,g,s);return p.top=br(m.top,p.top),p.right=Ii(m.right,p.right),p.bottom=Ii(m.bottom,p.bottom),p.left=br(m.left,p.left),p},Jb(e,u,s));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function ZV(n){const{width:e,height:t}=X1(n);return{width:e,height:t}}function QV(n,e,t){const r=qs(e),s=Ks(e),i=t==="fixed",c=Pa(n,!0,i,e);let u={scrollLeft:0,scrollTop:0};const d=js(0);function p(){d.x=Hp(s)}if(r||!r&&!i)if((Al(e)!=="body"||_d(s))&&(u=qp(e)),r){const S=Pa(e,!0,i,e);d.x=S.x+e.clientLeft,d.y=S.y+e.clientTop}else s&&p();i&&!r&&s&&p();const g=s&&!r&&!i?eT(s,u):js(0),m=c.left+u.scrollLeft-d.x-g.x,w=c.top+u.scrollTop-d.y-g.y;return{x:m,y:w,width:c.width,height:c.height}}function vy(n){return ls(n).position==="static"}function ex(n,e){if(!qs(n)||ls(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Ks(n)===t&&(t=t.ownerDocument.body),t}function nT(n,e){const t=Sr(n);if(Bp(n))return t;if(!qs(n)){let s=Ti(n);for(;s&&!ol(s);){if(cs(s)&&!vy(s))return s;s=Ti(s)}return t}let r=ex(n,e);for(;r&&NV(r)&&vy(r);)r=ex(r,e);return r&&ol(r)&&vy(r)&&!w_(r)?t:r||LV(n)||t}const YV=async function(n){const e=this.getOffsetParent||nT,t=this.getDimensions,r=await t(n.floating);return{reference:QV(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function XV(n){return ls(n).direction==="rtl"}const JV={convertOffsetParentRelativeRectToViewportRelativeRect:zV,getDocumentElement:Ks,getClippingRect:KV,getOffsetParent:nT,getElementRects:YV,getClientRects:$V,getDimensions:ZV,getScale:Yc,isElement:cs,isRTL:XV};function rT(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function eL(n,e){let t=null,r;const s=Ks(n);function i(){var u;clearTimeout(r),(u=t)==null||u.disconnect(),t=null}function c(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),i();const p=n.getBoundingClientRect(),{left:g,top:m,width:w,height:S}=p;if(u||e(),!w||!S)return;const R=lf(m),C=lf(s.clientWidth-(g+w)),A=lf(s.clientHeight-(m+S)),O=lf(g),z={rootMargin:-R+"px "+-C+"px "+-A+"px "+-O+"px",threshold:br(0,Ii(1,d))||1};let q=!0;function W(X){const P=X[0].intersectionRatio;if(P!==d){if(!q)return c();P?c(!1,P):r=setTimeout(()=>{c(!1,1e-7)},1e3)}P===1&&!rT(p,n.getBoundingClientRect())&&c(),q=!1}try{t=new IntersectionObserver(W,{...z,root:s.ownerDocument})}catch{t=new IntersectionObserver(W,z)}t.observe(n)}return c(!0),i}function tL(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,p=b_(n),g=s||i?[...p?Xu(p):[],...Xu(e)]:[];g.forEach(O=>{s&&O.addEventListener("scroll",t,{passive:!0}),i&&O.addEventListener("resize",t)});const m=p&&u?eL(p,t):null;let w=-1,S=null;c&&(S=new ResizeObserver(O=>{let[U]=O;U&&U.target===p&&S&&(S.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var z;(z=S)==null||z.observe(e)})),t()}),p&&!d&&S.observe(p),S.observe(e));let R,C=d?Pa(n):null;d&&A();function A(){const O=Pa(n);C&&!rT(C,O)&&t(),C=O,R=requestAnimationFrame(A)}return t(),()=>{var O;g.forEach(U=>{s&&U.removeEventListener("scroll",t),i&&U.removeEventListener("resize",t)}),m?.(),(O=S)==null||O.disconnect(),S=null,d&&cancelAnimationFrame(R)}}const nL=TV,rL=CV,sL=xV,oL=RV,iL=SV,tx=bV,aL=AV,cL=(n,e,t)=>{const r=new Map,s={platform:JV,...t},i={...s.platform,_c:r};return EV(n,e,{...s,platform:i})};var lL=typeof document<"u",uL=function(){},Cf=lL?b.useLayoutEffect:uL;function Zf(n,e){if(n===e)return!0;if(typeof n!=typeof e)return!1;if(typeof n=="function"&&n.toString()===e.toString())return!0;let t,r,s;if(n&&e&&typeof n=="object"){if(Array.isArray(n)){if(t=n.length,t!==e.length)return!1;for(r=t;r--!==0;)if(!Zf(n[r],e[r]))return!1;return!0}if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=t;r--!==0;){const i=s[r];if(!(i==="_owner"&&n.$$typeof)&&!Zf(n[i],e[i]))return!1}return!0}return n!==n&&e!==e}function sT(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function nx(n,e){const t=sT(n);return Math.round(e*t)/t}function _y(n){const e=b.useRef(n);return Cf(()=>{e.current=n}),e}function dL(n){n===void 0&&(n={});const{placement:e="bottom",strategy:t="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:c}={},transform:u=!0,whileElementsMounted:d,open:p}=n,[g,m]=b.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[w,S]=b.useState(r);Zf(w,r)||S(r);const[R,C]=b.useState(null),[A,O]=b.useState(null),U=b.useCallback(H=>{H!==X.current&&(X.current=H,C(H))},[]),z=b.useCallback(H=>{H!==P.current&&(P.current=H,O(H))},[]),q=i||R,W=c||A,X=b.useRef(null),P=b.useRef(null),I=b.useRef(g),k=d!=null,M=_y(d),V=_y(s),L=_y(p),N=b.useCallback(()=>{if(!X.current||!P.current)return;const H={placement:e,strategy:t,middleware:w};V.current&&(H.platform=V.current),cL(X.current,P.current,H).then(re=>{const ae={...re,isPositioned:L.current!==!1};ue.current&&!Zf(I.current,ae)&&(I.current=ae,a_.flushSync(()=>{m(ae)}))})},[w,e,t,V,L]);Cf(()=>{p===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,m(H=>({...H,isPositioned:!1})))},[p]);const ue=b.useRef(!1);Cf(()=>(ue.current=!0,()=>{ue.current=!1}),[]),Cf(()=>{if(q&&(X.current=q),W&&(P.current=W),q&&W){if(M.current)return M.current(q,W,N);N()}},[q,W,N,M,k]);const Me=b.useMemo(()=>({reference:X,floating:P,setReference:U,setFloating:z}),[U,z]),pe=b.useMemo(()=>({reference:q,floating:W}),[q,W]),ye=b.useMemo(()=>{const H={position:t,left:0,top:0};if(!pe.floating)return H;const re=nx(pe.floating,g.x),ae=nx(pe.floating,g.y);return u?{...H,transform:"translate("+re+"px, "+ae+"px)",...sT(pe.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:re,top:ae}},[t,u,pe.floating,g.x,g.y]);return b.useMemo(()=>({...g,update:N,refs:Me,elements:pe,floatingStyles:ye}),[g,N,Me,pe,ye])}const hL=n=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:n,fn(t){const{element:r,padding:s}=typeof n=="function"?n(t):n;return r&&e(r)?r.current!=null?tx({element:r.current,padding:s}).fn(t):{}:r?tx({element:r,padding:s}).fn(t):{}}}},fL=(n,e)=>({...nL(n),options:[n,e]}),pL=(n,e)=>({...rL(n),options:[n,e]}),mL=(n,e)=>({...aL(n),options:[n,e]}),gL=(n,e)=>({...sL(n),options:[n,e]}),yL=(n,e)=>({...oL(n),options:[n,e]}),vL=(n,e)=>({...iL(n),options:[n,e]}),_L=(n,e)=>({...hL(n),options:[n,e]});var wL="Arrow",oT=b.forwardRef((n,e)=>{const{children:t,width:r=10,height:s=5,...i}=n;return v.jsx(ut.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?t:v.jsx("polygon",{points:"0,0 30,0 15,10"})})});oT.displayName=wL;var EL=oT;function x_(n){const[e,t]=b.useState(void 0);return _o(()=>{if(n){t({width:n.offsetWidth,height:n.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let c,u;if("borderBoxSize"in i){const d=i.borderBoxSize,p=Array.isArray(d)?d[0]:d;c=p.inlineSize,u=p.blockSize}else c=n.offsetWidth,u=n.offsetHeight;t({width:c,height:u})});return r.observe(n,{box:"border-box"}),()=>r.unobserve(n)}else t(void 0)},[n]),e}var S_="Popper",[iT,Wp]=Gs(S_),[bL,aT]=iT(S_),cT=n=>{const{__scopePopper:e,children:t}=n,[r,s]=b.useState(null);return v.jsx(bL,{scope:e,anchor:r,onAnchorChange:s,children:t})};cT.displayName=S_;var lT="PopperAnchor",uT=b.forwardRef((n,e)=>{const{__scopePopper:t,virtualRef:r,...s}=n,i=aT(lT,t),c=b.useRef(null),u=xt(e,c),d=b.useRef(null);return b.useEffect(()=>{const p=d.current;d.current=r?.current||c.current,p!==d.current&&i.onAnchorChange(d.current)}),r?null:v.jsx(ut.div,{...s,ref:u})});uT.displayName=lT;var I_="PopperContent",[xL,SL]=iT(I_),dT=b.forwardRef((n,e)=>{const{__scopePopper:t,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:m="partial",hideWhenDetached:w=!1,updatePositionStrategy:S="optimized",onPlaced:R,...C}=n,A=aT(I_,t),[O,U]=b.useState(null),z=xt(e,_e=>U(_e)),[q,W]=b.useState(null),X=x_(q),P=X?.width??0,I=X?.height??0,k=r+(i!=="center"?"-"+i:""),M=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},V=Array.isArray(p)?p:[p],L=V.length>0,N={padding:M,boundary:V.filter(TL),altBoundary:L},{refs:ue,floatingStyles:Me,placement:pe,isPositioned:ye,middlewareData:H}=dL({strategy:"fixed",placement:k,whileElementsMounted:(..._e)=>tL(..._e,{animationFrame:S==="always"}),elements:{reference:A.anchor},middleware:[fL({mainAxis:s+I,alignmentAxis:c}),d&&pL({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?mL():void 0,...N}),d&&gL({...N}),yL({...N,apply:({elements:_e,rects:Ie,availableWidth:Ge,availableHeight:ft})=>{const{width:ct,height:me}=Ie.reference,Vt=_e.floating.style;Vt.setProperty("--radix-popper-available-width",`${Ge}px`),Vt.setProperty("--radix-popper-available-height",`${ft}px`),Vt.setProperty("--radix-popper-anchor-width",`${ct}px`),Vt.setProperty("--radix-popper-anchor-height",`${me}px`)}}),q&&_L({element:q,padding:u}),CL({arrowWidth:P,arrowHeight:I}),w&&vL({strategy:"referenceHidden",...N})]}),[re,ae]=pT(pe),F=Ln(R);_o(()=>{ye&&F?.()},[ye,F]);const Q=H.arrow?.x,ee=H.arrow?.y,le=H.arrow?.centerOffset!==0,[ve,be]=b.useState();return _o(()=>{O&&be(window.getComputedStyle(O).zIndex)},[O]),v.jsx("div",{ref:ue.setFloating,"data-radix-popper-content-wrapper":"",style:{...Me,transform:ye?Me.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[H.transformOrigin?.x,H.transformOrigin?.y].join(" "),...H.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:v.jsx(xL,{scope:t,placedSide:re,onArrowChange:W,arrowX:Q,arrowY:ee,shouldHideArrow:le,children:v.jsx(ut.div,{"data-side":re,"data-align":ae,...C,ref:z,style:{...C.style,animation:ye?void 0:"none"}})})})});dT.displayName=I_;var hT="PopperArrow",IL={top:"bottom",right:"left",bottom:"top",left:"right"},fT=b.forwardRef(function(e,t){const{__scopePopper:r,...s}=e,i=SL(hT,r),c=IL[i.placedSide];return v.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:v.jsx(EL,{...s,ref:t,style:{...s.style,display:"block"}})})});fT.displayName=hT;function TL(n){return n!==null}var CL=n=>({name:"transformOrigin",options:n,fn(e){const{placement:t,rects:r,middlewareData:s}=e,c=s.arrow?.centerOffset!==0,u=c?0:n.arrowWidth,d=c?0:n.arrowHeight,[p,g]=pT(t),m={start:"0%",center:"50%",end:"100%"}[g],w=(s.arrow?.x??0)+u/2,S=(s.arrow?.y??0)+d/2;let R="",C="";return p==="bottom"?(R=c?m:`${w}px`,C=`${-d}px`):p==="top"?(R=c?m:`${w}px`,C=`${r.floating.height+d}px`):p==="right"?(R=`${-d}px`,C=c?m:`${S}px`):p==="left"&&(R=`${r.floating.width+d}px`,C=c?m:`${S}px`),{data:{x:R,y:C}}}});function pT(n){const[e,t="center"]=n.split("-");return[e,t]}var mT=cT,gT=uT,yT=dT,vT=fT,AL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),RL="VisuallyHidden",_T=b.forwardRef((n,e)=>v.jsx(ut.span,{...n,ref:e,style:{...AL,...n.style}}));_T.displayName=RL;var PL=_T,[Gp]=Gs("Tooltip",[Wp]),Kp=Wp(),wT="TooltipProvider",kL=700,Jy="tooltip.open",[NL,T_]=Gp(wT),ET=n=>{const{__scopeTooltip:e,delayDuration:t=kL,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=n,c=b.useRef(!0),u=b.useRef(!1),d=b.useRef(0);return b.useEffect(()=>{const p=d.current;return()=>window.clearTimeout(p)},[]),v.jsx(NL,{scope:e,isOpenDelayedRef:c,delayDuration:t,onOpen:b.useCallback(()=>{window.clearTimeout(d.current),c.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.current=!0,r)},[r]),isPointerInTransitRef:u,onPointerInTransitChange:b.useCallback(p=>{u.current=p},[]),disableHoverableContent:s,children:i})};ET.displayName=wT;var Ju="Tooltip",[DL,wd]=Gp(Ju),bT=n=>{const{__scopeTooltip:e,children:t,open:r,defaultOpen:s,onOpenChange:i,disableHoverableContent:c,delayDuration:u}=n,d=T_(Ju,n.__scopeTooltip),p=Kp(e),[g,m]=b.useState(null),w=ba(),S=b.useRef(0),R=c??d.disableHoverableContent,C=u??d.delayDuration,A=b.useRef(!1),[O,U]=Tl({prop:r,defaultProp:s??!1,onChange:P=>{P?(d.onOpen(),document.dispatchEvent(new CustomEvent(Jy))):d.onClose(),i?.(P)},caller:Ju}),z=b.useMemo(()=>O?A.current?"delayed-open":"instant-open":"closed",[O]),q=b.useCallback(()=>{window.clearTimeout(S.current),S.current=0,A.current=!1,U(!0)},[U]),W=b.useCallback(()=>{window.clearTimeout(S.current),S.current=0,U(!1)},[U]),X=b.useCallback(()=>{window.clearTimeout(S.current),S.current=window.setTimeout(()=>{A.current=!0,U(!0),S.current=0},C)},[C,U]);return b.useEffect(()=>()=>{S.current&&(window.clearTimeout(S.current),S.current=0)},[]),v.jsx(mT,{...p,children:v.jsx(DL,{scope:e,contentId:w,open:O,stateAttribute:z,trigger:g,onTriggerChange:m,onTriggerEnter:b.useCallback(()=>{d.isOpenDelayedRef.current?X():q()},[d.isOpenDelayedRef,X,q]),onTriggerLeave:b.useCallback(()=>{R?W():(window.clearTimeout(S.current),S.current=0)},[W,R]),onOpen:q,onClose:W,disableHoverableContent:R,children:t})})};bT.displayName=Ju;var ev="TooltipTrigger",xT=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=wd(ev,t),i=T_(ev,t),c=Kp(t),u=b.useRef(null),d=xt(e,u,s.onTriggerChange),p=b.useRef(!1),g=b.useRef(!1),m=b.useCallback(()=>p.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),v.jsx(gT,{asChild:!0,...c,children:v.jsx(ut.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:d,onPointerMove:Fe(n.onPointerMove,w=>{w.pointerType!=="touch"&&!g.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),g.current=!0)}),onPointerLeave:Fe(n.onPointerLeave,()=>{s.onTriggerLeave(),g.current=!1}),onPointerDown:Fe(n.onPointerDown,()=>{s.open&&s.onClose(),p.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Fe(n.onFocus,()=>{p.current||s.onOpen()}),onBlur:Fe(n.onBlur,s.onClose),onClick:Fe(n.onClick,s.onClose)})})});xT.displayName=ev;var C_="TooltipPortal",[OL,ML]=Gp(C_,{forceMount:void 0}),ST=n=>{const{__scopeTooltip:e,forceMount:t,children:r,container:s}=n,i=wd(C_,e);return v.jsx(OL,{scope:e,forceMount:t,children:v.jsx(Gn,{present:t||i.open,children:v.jsx(jp,{asChild:!0,container:s,children:r})})})};ST.displayName=C_;var il="TooltipContent",IT=b.forwardRef((n,e)=>{const t=ML(il,n.__scopeTooltip),{forceMount:r=t.forceMount,side:s="top",...i}=n,c=wd(il,n.__scopeTooltip);return v.jsx(Gn,{present:r||c.open,children:c.disableHoverableContent?v.jsx(TT,{side:s,...i,ref:e}):v.jsx(VL,{side:s,...i,ref:e})})}),VL=b.forwardRef((n,e)=>{const t=wd(il,n.__scopeTooltip),r=T_(il,n.__scopeTooltip),s=b.useRef(null),i=xt(e,s),[c,u]=b.useState(null),{trigger:d,onClose:p}=t,g=s.current,{onPointerInTransitChange:m}=r,w=b.useCallback(()=>{u(null),m(!1)},[m]),S=b.useCallback((R,C)=>{const A=R.currentTarget,O={x:R.clientX,y:R.clientY},U=zL(O,A.getBoundingClientRect()),z=$L(O,U),q=BL(C.getBoundingClientRect()),W=HL([...z,...q]);u(W),m(!0)},[m]);return b.useEffect(()=>()=>w(),[w]),b.useEffect(()=>{if(d&&g){const R=A=>S(A,g),C=A=>S(A,d);return d.addEventListener("pointerleave",R),g.addEventListener("pointerleave",C),()=>{d.removeEventListener("pointerleave",R),g.removeEventListener("pointerleave",C)}}},[d,g,S,w]),b.useEffect(()=>{if(c){const R=C=>{const A=C.target,O={x:C.clientX,y:C.clientY},U=d?.contains(A)||g?.contains(A),z=!qL(O,c);U?w():z&&(w(),p())};return document.addEventListener("pointermove",R),()=>document.removeEventListener("pointermove",R)}},[d,g,c,p,w]),v.jsx(TT,{...n,ref:i})}),[LL,FL]=Gp(Ju,{isInside:!1}),jL=I2("TooltipContent"),TT=b.forwardRef((n,e)=>{const{__scopeTooltip:t,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:c,...u}=n,d=wd(il,t),p=Kp(t),{onClose:g}=d;return b.useEffect(()=>(document.addEventListener(Jy,g),()=>document.removeEventListener(Jy,g)),[g]),b.useEffect(()=>{if(d.trigger){const m=w=>{w.target?.contains(d.trigger)&&g()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,g]),v.jsx(Fp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:m=>m.preventDefault(),onDismiss:g,children:v.jsxs(yT,{"data-state":d.stateAttribute,...p,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[v.jsx(jL,{children:r}),v.jsx(LL,{scope:t,isInside:!0,children:v.jsx(PL,{id:d.contentId,role:"tooltip",children:s||r})})]})})});IT.displayName=il;var CT="TooltipArrow",UL=b.forwardRef((n,e)=>{const{__scopeTooltip:t,...r}=n,s=Kp(t);return FL(CT,t).isInside?null:v.jsx(vT,{...s,...r,ref:e})});UL.displayName=CT;function zL(n,e){const t=Math.abs(e.top-n.y),r=Math.abs(e.bottom-n.y),s=Math.abs(e.right-n.x),i=Math.abs(e.left-n.x);switch(Math.min(t,r,s,i)){case i:return"left";case s:return"right";case t:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function $L(n,e,t=5){const r=[];switch(e){case"top":r.push({x:n.x-t,y:n.y+t},{x:n.x+t,y:n.y+t});break;case"bottom":r.push({x:n.x-t,y:n.y-t},{x:n.x+t,y:n.y-t});break;case"left":r.push({x:n.x+t,y:n.y-t},{x:n.x+t,y:n.y+t});break;case"right":r.push({x:n.x-t,y:n.y-t},{x:n.x-t,y:n.y+t});break}return r}function BL(n){const{top:e,right:t,bottom:r,left:s}=n;return[{x:s,y:e},{x:t,y:e},{x:t,y:r},{x:s,y:r}]}function qL(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,c=e.length-1;i<e.length;c=i++){const u=e[i],d=e[c],p=u.x,g=u.y,m=d.x,w=d.y;g>r!=w>r&&t<(m-p)*(r-g)/(w-g)+p&&(s=!s)}return s}function HL(n){const e=n.slice();return e.sort((t,r)=>t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0),WL(e)}function WL(n){if(n.length<=1)return n.slice();const e=[];for(let r=0;r<n.length;r++){const s=n[r];for(;e.length>=2;){const i=e[e.length-1],c=e[e.length-2];if((i.x-c.x)*(s.y-c.y)>=(i.y-c.y)*(s.x-c.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let r=n.length-1;r>=0;r--){const s=n[r];for(;t.length>=2;){const i=t[t.length-1],c=t[t.length-2];if((i.x-c.x)*(s.y-c.y)>=(i.y-c.y)*(s.x-c.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var GL=ET,KL=bT,ZL=xT,QL=ST,AT=IT;const tv=GL,nv=KL,rv=ZL,Qf=b.forwardRef(({className:n,sideOffset:e=4,...t},r)=>v.jsx(QL,{children:v.jsx(AT,{ref:r,sideOffset:e,className:ze("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));Qf.displayName=AT.displayName;const YL="sidebar_state",XL=3600*24*7,JL="12rem",rx="18rem",e4="3rem",t4="b",RT=b.createContext(null);function Ed(){const n=b.useContext(RT);if(!n)throw new Error("useSidebar must be used within a SidebarProvider.");return n}function n4({defaultOpen:n=!0,open:e,onOpenChange:t,className:r,style:s,children:i,...c}){const u=XD(),[d,p]=b.useState(!1),[g,m]=b.useState(n),w=e??g,S=b.useCallback(O=>{const U=typeof O=="function"?O(w):O;t?t(U):m(U),document.cookie=`${YL}=${U}; path=/; max-age=${XL}`},[t,w]),R=b.useCallback(()=>u?p(O=>!O):S(O=>!O),[u,S,p]);b.useEffect(()=>{const O=U=>{U.key===t4&&(U.metaKey||U.ctrlKey)&&(U.preventDefault(),R())};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[R]);const C=w?"expanded":"collapsed",A=b.useMemo(()=>({state:C,open:w,setOpen:S,isMobile:u,openMobile:d,setOpenMobile:p,toggleSidebar:R}),[C,w,S,u,d,p,R]);return v.jsx(RT.Provider,{value:A,children:v.jsx(tv,{delayDuration:0,children:v.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":JL,"--sidebar-width-icon":e4,...s},className:ze("group/sidebar-wrapper flex min-h-screen w-full",r),...c,children:i})})})}function r4({side:n="left",variant:e="sidebar",collapsible:t="offcanvas",className:r,children:s,...i}){const{isMobile:c,state:u,openMobile:d,setOpenMobile:p}=Ed();return t==="none"?v.jsx("div",{"data-slot":"sidebar",className:ze("bg-sidebar text-sidebar-foreground flex h-full flex-col",r),style:{width:"var(--sidebar-width)"},...i,children:s}):c?v.jsx(aV,{open:d,onOpenChange:p,...i,children:v.jsxs(q1,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground p-0 [&>button]:hidden",style:{"--sidebar-width":rx,width:rx},side:n,children:[v.jsxs(H1,{className:"sr-only",children:[v.jsx(W1,{children:"Sidebar"}),v.jsx(G1,{children:"Displays the mobile sidebar."})]}),v.jsx("div",{className:"flex h-full w-full flex-col",children:s})]})}):v.jsxs("div",{className:"group peer text-sidebar-foreground hidden md:block","data-state":u,"data-collapsible":u==="collapsed"?t:"","data-variant":e,"data-side":n,"data-slot":"sidebar",children:[v.jsx("div",{"data-slot":"sidebar-gap",className:ze("relative shrink-0 bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:!w-0","group-data-[side=right]:rotate-180",e==="floating"||e==="inset"?"group-data-[collapsible=icon]:!w-[calc(var(--sidebar-width-icon)+1rem)]":"group-data-[collapsible=icon]:!w-[var(--sidebar-width-icon)]"),style:{width:"var(--sidebar-width)"}}),v.jsx("div",{"data-slot":"sidebar-container",className:ze("fixed inset-y-0 z-10 hidden h-screen transition-[left,right,width] duration-200 ease-linear md:flex",n==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",e==="floating"||e==="inset"?"p-2 group-data-[collapsible=icon]:!w-[calc(var(--sidebar-width-icon)+1rem+2px)]":"group-data-[collapsible=icon]:!w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),style:{width:"var(--sidebar-width)"},...i,children:v.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:s})})]})}function s4({className:n,...e}){const{toggleSidebar:t}=Ed();return v.jsx("button",{"data-sidebar":"rail","data-slot":"sidebar-rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:t,title:"Toggle Sidebar",className:ze("hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex","cursor-ew-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",n),...e})}function o4({className:n,...e}){return v.jsx("main",{"data-slot":"sidebar-inset",className:ze("bg-background relative flex min-w-0 flex-1 flex-col","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",n),...e})}function i4({className:n,...e}){return v.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:ze("flex flex-col gap-2 p-2",n),...e})}function a4({className:n,...e}){return v.jsx("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:ze("flex flex-col gap-2 p-2",n),...e})}function c4({className:n,...e}){return v.jsx(jO,{"data-slot":"sidebar-separator","data-sidebar":"separator",className:ze("bg-sidebar-border mx-2 w-auto",n),...e})}function l4({className:n,...e}){return v.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:ze("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",n),...e})}function sx({className:n,...e}){return v.jsx("div",{"data-slot":"sidebar-group","data-sidebar":"group",className:ze("relative flex w-full min-w-0 flex-col p-2",n),...e})}function ox({className:n,asChild:e=!1,...t}){const r=e?Op:"div";return v.jsx(r,{"data-slot":"sidebar-group-label","data-sidebar":"group-label",className:ze("text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",n),...t})}function ix({className:n,...e}){return v.jsx("div",{"data-slot":"sidebar-group-content","data-sidebar":"group-content",className:ze("w-full text-sm",n),...e})}function wy({className:n,...e}){return v.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:ze("flex w-full min-w-0 flex-col gap-1",n),...e})}function uf({className:n,...e}){return v.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:ze("group/menu-item relative",n),...e})}const u4=Mp("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Ey({asChild:n=!1,isActive:e=!1,variant:t="default",size:r="default",tooltip:s,className:i,...c}){const u=n?Op:"button",{isMobile:d,state:p}=Ed(),g=v.jsx(u,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":e,className:ze(u4({variant:t,size:r}),i),...c});return s?(typeof s=="string"&&(s={children:s}),v.jsxs(nv,{children:[v.jsx(rv,{asChild:!0,children:g}),v.jsx(Qf,{side:"right",align:"center",hidden:p!=="collapsed"||d,...s})]})):g}function PT(n){const e=n+"CollectionProvider",[t,r]=Gs(e),[s,i]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=C=>{const{scope:A,children:O}=C,U=ie.useRef(null),z=ie.useRef(new Map).current;return v.jsx(s,{scope:A,itemMap:z,collectionRef:U,children:O})};c.displayName=e;const u=n+"CollectionSlot",d=sl(u),p=ie.forwardRef((C,A)=>{const{scope:O,children:U}=C,z=i(u,O),q=xt(A,z.collectionRef);return v.jsx(d,{ref:q,children:U})});p.displayName=u;const g=n+"CollectionItemSlot",m="data-radix-collection-item",w=sl(g),S=ie.forwardRef((C,A)=>{const{scope:O,children:U,...z}=C,q=ie.useRef(null),W=xt(A,q),X=i(g,O);return ie.useEffect(()=>(X.itemMap.set(q,{ref:q,...z}),()=>void X.itemMap.delete(q))),v.jsx(w,{[m]:"",ref:W,children:U})});S.displayName=g;function R(C){const A=i(n+"CollectionConsumer",C);return ie.useCallback(()=>{const U=A.collectionRef.current;if(!U)return[];const z=Array.from(U.querySelectorAll(`[${m}]`));return Array.from(A.itemMap.values()).sort((X,P)=>z.indexOf(X.ref.current)-z.indexOf(P.ref.current))},[A.collectionRef,A.itemMap])}return[{Provider:c,Slot:p,ItemSlot:S},R,r]}var d4=b.createContext(void 0);function A_(n){const e=b.useContext(d4);return n||e||"ltr"}var by="rovingFocusGroup.onEntryFocus",h4={bubbles:!1,cancelable:!0},bd="RovingFocusGroup",[sv,kT,f4]=PT(bd),[p4,NT]=Gs(bd,[f4]),[m4,g4]=p4(bd),DT=b.forwardRef((n,e)=>v.jsx(sv.Provider,{scope:n.__scopeRovingFocusGroup,children:v.jsx(sv.Slot,{scope:n.__scopeRovingFocusGroup,children:v.jsx(y4,{...n,ref:e})})}));DT.displayName=bd;var y4=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,orientation:r,loop:s=!1,dir:i,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...m}=n,w=b.useRef(null),S=xt(e,w),R=A_(i),[C,A]=Tl({prop:c,defaultProp:u??null,onChange:d,caller:bd}),[O,U]=b.useState(!1),z=Ln(p),q=kT(t),W=b.useRef(!1),[X,P]=b.useState(0);return b.useEffect(()=>{const I=w.current;if(I)return I.addEventListener(by,z),()=>I.removeEventListener(by,z)},[z]),v.jsx(m4,{scope:t,orientation:r,dir:R,loop:s,currentTabStopId:C,onItemFocus:b.useCallback(I=>A(I),[A]),onItemShiftTab:b.useCallback(()=>U(!0),[]),onFocusableItemAdd:b.useCallback(()=>P(I=>I+1),[]),onFocusableItemRemove:b.useCallback(()=>P(I=>I-1),[]),children:v.jsx(ut.div,{tabIndex:O||X===0?-1:0,"data-orientation":r,...m,ref:S,style:{outline:"none",...n.style},onMouseDown:Fe(n.onMouseDown,()=>{W.current=!0}),onFocus:Fe(n.onFocus,I=>{const k=!W.current;if(I.target===I.currentTarget&&k&&!O){const M=new CustomEvent(by,h4);if(I.currentTarget.dispatchEvent(M),!M.defaultPrevented){const V=q().filter(pe=>pe.focusable),L=V.find(pe=>pe.active),N=V.find(pe=>pe.id===C),Me=[L,N,...V].filter(Boolean).map(pe=>pe.ref.current);VT(Me,g)}}W.current=!1}),onBlur:Fe(n.onBlur,()=>U(!1))})})}),OT="RovingFocusGroupItem",MT=b.forwardRef((n,e)=>{const{__scopeRovingFocusGroup:t,focusable:r=!0,active:s=!1,tabStopId:i,children:c,...u}=n,d=ba(),p=i||d,g=g4(OT,t),m=g.currentTabStopId===p,w=kT(t),{onFocusableItemAdd:S,onFocusableItemRemove:R,currentTabStopId:C}=g;return b.useEffect(()=>{if(r)return S(),()=>R()},[r,S,R]),v.jsx(sv.ItemSlot,{scope:t,id:p,focusable:r,active:s,children:v.jsx(ut.span,{tabIndex:m?0:-1,"data-orientation":g.orientation,...u,ref:e,onMouseDown:Fe(n.onMouseDown,A=>{r?g.onItemFocus(p):A.preventDefault()}),onFocus:Fe(n.onFocus,()=>g.onItemFocus(p)),onKeyDown:Fe(n.onKeyDown,A=>{if(A.key==="Tab"&&A.shiftKey){g.onItemShiftTab();return}if(A.target!==A.currentTarget)return;const O=w4(A,g.orientation,g.dir);if(O!==void 0){if(A.metaKey||A.ctrlKey||A.altKey||A.shiftKey)return;A.preventDefault();let z=w().filter(q=>q.focusable).map(q=>q.ref.current);if(O==="last")z.reverse();else if(O==="prev"||O==="next"){O==="prev"&&z.reverse();const q=z.indexOf(A.currentTarget);z=g.loop?E4(z,q+1):z.slice(q+1)}setTimeout(()=>VT(z))}}),children:typeof c=="function"?c({isCurrentTabStop:m,hasTabStop:C!=null}):c})})});MT.displayName=OT;var v4={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _4(n,e){return e!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function w4(n,e,t){const r=_4(n.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return v4[r]}function VT(n,e=!1){const t=document.activeElement;for(const r of n)if(r===t||(r.focus({preventScroll:e}),document.activeElement!==t))return}function E4(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var b4=DT,x4=MT,ov=["Enter"," "],S4=["ArrowDown","PageUp","Home"],LT=["ArrowUp","PageDown","End"],I4=[...S4,...LT],T4={ltr:[...ov,"ArrowRight"],rtl:[...ov,"ArrowLeft"]},C4={ltr:["ArrowLeft"],rtl:["ArrowRight"]},xd="Menu",[ed,A4,R4]=PT(xd),[qa,FT]=Gs(xd,[R4,Wp,NT]),Zp=Wp(),jT=NT(),[P4,Ha]=qa(xd),[k4,Sd]=qa(xd),UT=n=>{const{__scopeMenu:e,open:t=!1,children:r,dir:s,onOpenChange:i,modal:c=!0}=n,u=Zp(e),[d,p]=b.useState(null),g=b.useRef(!1),m=Ln(i),w=A_(s);return b.useEffect(()=>{const S=()=>{g.current=!0,document.addEventListener("pointerdown",R,{capture:!0,once:!0}),document.addEventListener("pointermove",R,{capture:!0,once:!0})},R=()=>g.current=!1;return document.addEventListener("keydown",S,{capture:!0}),()=>{document.removeEventListener("keydown",S,{capture:!0}),document.removeEventListener("pointerdown",R,{capture:!0}),document.removeEventListener("pointermove",R,{capture:!0})}},[]),v.jsx(mT,{...u,children:v.jsx(P4,{scope:e,open:t,onOpenChange:m,content:d,onContentChange:p,children:v.jsx(k4,{scope:e,onClose:b.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:g,dir:w,modal:c,children:r})})})};UT.displayName=xd;var N4="MenuAnchor",R_=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Zp(t);return v.jsx(gT,{...s,...r,ref:e})});R_.displayName=N4;var P_="MenuPortal",[D4,zT]=qa(P_,{forceMount:void 0}),$T=n=>{const{__scopeMenu:e,forceMount:t,children:r,container:s}=n,i=Ha(P_,e);return v.jsx(D4,{scope:e,forceMount:t,children:v.jsx(Gn,{present:t||i.open,children:v.jsx(jp,{asChild:!0,container:s,children:r})})})};$T.displayName=P_;var zr="MenuContent",[O4,k_]=qa(zr),BT=b.forwardRef((n,e)=>{const t=zT(zr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Ha(zr,n.__scopeMenu),c=Sd(zr,n.__scopeMenu);return v.jsx(ed.Provider,{scope:n.__scopeMenu,children:v.jsx(Gn,{present:r||i.open,children:v.jsx(ed.Slot,{scope:n.__scopeMenu,children:c.modal?v.jsx(M4,{...s,ref:e}):v.jsx(V4,{...s,ref:e})})})})}),M4=b.forwardRef((n,e)=>{const t=Ha(zr,n.__scopeMenu),r=b.useRef(null),s=xt(e,r);return b.useEffect(()=>{const i=r.current;if(i)return x1(i)},[]),v.jsx(N_,{...n,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:Fe(n.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),V4=b.forwardRef((n,e)=>{const t=Ha(zr,n.__scopeMenu);return v.jsx(N_,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),L4=sl("MenuContent.ScrollLock"),N_=b.forwardRef((n,e)=>{const{__scopeMenu:t,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:w,onDismiss:S,disableOutsideScroll:R,...C}=n,A=Ha(zr,t),O=Sd(zr,t),U=Zp(t),z=jT(t),q=A4(t),[W,X]=b.useState(null),P=b.useRef(null),I=xt(e,P,A.onContentChange),k=b.useRef(0),M=b.useRef(""),V=b.useRef(0),L=b.useRef(null),N=b.useRef("right"),ue=b.useRef(0),Me=R?l_:b.Fragment,pe=R?{as:L4,allowPinchZoom:!0}:void 0,ye=re=>{const ae=M.current+re,F=q().filter(_e=>!_e.disabled),Q=document.activeElement,ee=F.find(_e=>_e.ref.current===Q)?.textValue,le=F.map(_e=>_e.textValue),ve=Z4(le,ae,ee),be=F.find(_e=>_e.textValue===ve)?.ref.current;(function _e(Ie){M.current=Ie,window.clearTimeout(k.current),Ie!==""&&(k.current=window.setTimeout(()=>_e(""),1e3))})(ae),be&&setTimeout(()=>be.focus())};b.useEffect(()=>()=>window.clearTimeout(k.current),[]),p1();const H=b.useCallback(re=>N.current===L.current?.side&&Y4(re,L.current?.area),[]);return v.jsx(O4,{scope:t,searchRef:M,onItemEnter:b.useCallback(re=>{H(re)&&re.preventDefault()},[H]),onItemLeave:b.useCallback(re=>{H(re)||(P.current?.focus(),X(null))},[H]),onTriggerLeave:b.useCallback(re=>{H(re)&&re.preventDefault()},[H]),pointerGraceTimerRef:V,onPointerGraceIntentChange:b.useCallback(re=>{L.current=re},[]),children:v.jsx(Me,{...pe,children:v.jsx(c_,{asChild:!0,trapped:s,onMountAutoFocus:Fe(i,re=>{re.preventDefault(),P.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:v.jsx(Fp,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:m,onInteractOutside:w,onDismiss:S,children:v.jsx(b4,{asChild:!0,...z,dir:O.dir,orientation:"vertical",loop:r,currentTabStopId:W,onCurrentTabStopIdChange:X,onEntryFocus:Fe(d,re=>{O.isUsingKeyboardRef.current||re.preventDefault()}),preventScrollOnEntryFocus:!0,children:v.jsx(yT,{role:"menu","aria-orientation":"vertical","data-state":oC(A.open),"data-radix-menu-content":"",dir:O.dir,...U,...C,ref:I,style:{outline:"none",...C.style},onKeyDown:Fe(C.onKeyDown,re=>{const F=re.target.closest("[data-radix-menu-content]")===re.currentTarget,Q=re.ctrlKey||re.altKey||re.metaKey,ee=re.key.length===1;F&&(re.key==="Tab"&&re.preventDefault(),!Q&&ee&&ye(re.key));const le=P.current;if(re.target!==le||!I4.includes(re.key))return;re.preventDefault();const be=q().filter(_e=>!_e.disabled).map(_e=>_e.ref.current);LT.includes(re.key)&&be.reverse(),G4(be)}),onBlur:Fe(n.onBlur,re=>{re.currentTarget.contains(re.target)||(window.clearTimeout(k.current),M.current="")}),onPointerMove:Fe(n.onPointerMove,td(re=>{const ae=re.target,F=ue.current!==re.clientX;if(re.currentTarget.contains(ae)&&F){const Q=re.clientX>ue.current?"right":"left";N.current=Q,ue.current=re.clientX}}))})})})})})})});BT.displayName=zr;var F4="MenuGroup",D_=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.jsx(ut.div,{role:"group",...r,ref:e})});D_.displayName=F4;var j4="MenuLabel",qT=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.jsx(ut.div,{...r,ref:e})});qT.displayName=j4;var Yf="MenuItem",ax="menu.itemSelect",Qp=b.forwardRef((n,e)=>{const{disabled:t=!1,onSelect:r,...s}=n,i=b.useRef(null),c=Sd(Yf,n.__scopeMenu),u=k_(Yf,n.__scopeMenu),d=xt(e,i),p=b.useRef(!1),g=()=>{const m=i.current;if(!t&&m){const w=new CustomEvent(ax,{bubbles:!0,cancelable:!0});m.addEventListener(ax,S=>r?.(S),{once:!0}),l1(m,w),w.defaultPrevented?p.current=!1:c.onClose()}};return v.jsx(HT,{...s,ref:d,disabled:t,onClick:Fe(n.onClick,g),onPointerDown:m=>{n.onPointerDown?.(m),p.current=!0},onPointerUp:Fe(n.onPointerUp,m=>{p.current||m.currentTarget?.click()}),onKeyDown:Fe(n.onKeyDown,m=>{const w=u.searchRef.current!=="";t||w&&m.key===" "||ov.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});Qp.displayName=Yf;var HT=b.forwardRef((n,e)=>{const{__scopeMenu:t,disabled:r=!1,textValue:s,...i}=n,c=k_(Yf,t),u=jT(t),d=b.useRef(null),p=xt(e,d),[g,m]=b.useState(!1),[w,S]=b.useState("");return b.useEffect(()=>{const R=d.current;R&&S((R.textContent??"").trim())},[i.children]),v.jsx(ed.ItemSlot,{scope:t,disabled:r,textValue:s??w,children:v.jsx(x4,{asChild:!0,...u,focusable:!r,children:v.jsx(ut.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:p,onPointerMove:Fe(n.onPointerMove,td(R=>{r?c.onItemLeave(R):(c.onItemEnter(R),R.defaultPrevented||R.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Fe(n.onPointerLeave,td(R=>c.onItemLeave(R))),onFocus:Fe(n.onFocus,()=>m(!0)),onBlur:Fe(n.onBlur,()=>m(!1))})})})}),U4="MenuCheckboxItem",WT=b.forwardRef((n,e)=>{const{checked:t=!1,onCheckedChange:r,...s}=n;return v.jsx(YT,{scope:n.__scopeMenu,checked:t,children:v.jsx(Qp,{role:"menuitemcheckbox","aria-checked":Xf(t)?"mixed":t,...s,ref:e,"data-state":M_(t),onSelect:Fe(s.onSelect,()=>r?.(Xf(t)?!0:!t),{checkForDefaultPrevented:!1})})})});WT.displayName=U4;var GT="MenuRadioGroup",[z4,$4]=qa(GT,{value:void 0,onValueChange:()=>{}}),KT=b.forwardRef((n,e)=>{const{value:t,onValueChange:r,...s}=n,i=Ln(r);return v.jsx(z4,{scope:n.__scopeMenu,value:t,onValueChange:i,children:v.jsx(D_,{...s,ref:e})})});KT.displayName=GT;var ZT="MenuRadioItem",QT=b.forwardRef((n,e)=>{const{value:t,...r}=n,s=$4(ZT,n.__scopeMenu),i=t===s.value;return v.jsx(YT,{scope:n.__scopeMenu,checked:i,children:v.jsx(Qp,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":M_(i),onSelect:Fe(r.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});QT.displayName=ZT;var O_="MenuItemIndicator",[YT,B4]=qa(O_,{checked:!1}),XT=b.forwardRef((n,e)=>{const{__scopeMenu:t,forceMount:r,...s}=n,i=B4(O_,t);return v.jsx(Gn,{present:r||Xf(i.checked)||i.checked===!0,children:v.jsx(ut.span,{...s,ref:e,"data-state":M_(i.checked)})})});XT.displayName=O_;var q4="MenuSeparator",JT=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n;return v.jsx(ut.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});JT.displayName=q4;var H4="MenuArrow",eC=b.forwardRef((n,e)=>{const{__scopeMenu:t,...r}=n,s=Zp(t);return v.jsx(vT,{...s,...r,ref:e})});eC.displayName=H4;var W4="MenuSub",[jW,tC]=qa(W4),Du="MenuSubTrigger",nC=b.forwardRef((n,e)=>{const t=Ha(Du,n.__scopeMenu),r=Sd(Du,n.__scopeMenu),s=tC(Du,n.__scopeMenu),i=k_(Du,n.__scopeMenu),c=b.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=i,p={__scopeMenu:n.__scopeMenu},g=b.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return b.useEffect(()=>g,[g]),b.useEffect(()=>{const m=u.current;return()=>{window.clearTimeout(m),d(null)}},[u,d]),v.jsx(R_,{asChild:!0,...p,children:v.jsx(HT,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":oC(t.open),...n,ref:Dp(e,s.onTriggerChange),onClick:m=>{n.onClick?.(m),!(n.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:Fe(n.onPointerMove,td(m=>{i.onItemEnter(m),!m.defaultPrevented&&!n.disabled&&!t.open&&!c.current&&(i.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{t.onOpenChange(!0),g()},100))})),onPointerLeave:Fe(n.onPointerLeave,td(m=>{g();const w=t.content?.getBoundingClientRect();if(w){const S=t.content?.dataset.side,R=S==="right",C=R?-5:5,A=w[R?"left":"right"],O=w[R?"right":"left"];i.onPointerGraceIntentChange({area:[{x:m.clientX+C,y:m.clientY},{x:A,y:w.top},{x:O,y:w.top},{x:O,y:w.bottom},{x:A,y:w.bottom}],side:S}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(m),m.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Fe(n.onKeyDown,m=>{const w=i.searchRef.current!=="";n.disabled||w&&m.key===" "||T4[r.dir].includes(m.key)&&(t.onOpenChange(!0),t.content?.focus(),m.preventDefault())})})})});nC.displayName=Du;var rC="MenuSubContent",sC=b.forwardRef((n,e)=>{const t=zT(zr,n.__scopeMenu),{forceMount:r=t.forceMount,...s}=n,i=Ha(zr,n.__scopeMenu),c=Sd(zr,n.__scopeMenu),u=tC(rC,n.__scopeMenu),d=b.useRef(null),p=xt(e,d);return v.jsx(ed.Provider,{scope:n.__scopeMenu,children:v.jsx(Gn,{present:r||i.open,children:v.jsx(ed.Slot,{scope:n.__scopeMenu,children:v.jsx(N_,{id:u.contentId,"aria-labelledby":u.triggerId,...s,ref:p,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{c.isUsingKeyboardRef.current&&d.current?.focus(),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:Fe(n.onFocusOutside,g=>{g.target!==u.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Fe(n.onEscapeKeyDown,g=>{c.onClose(),g.preventDefault()}),onKeyDown:Fe(n.onKeyDown,g=>{const m=g.currentTarget.contains(g.target),w=C4[c.dir].includes(g.key);m&&w&&(i.onOpenChange(!1),u.trigger?.focus(),g.preventDefault())})})})})})});sC.displayName=rC;function oC(n){return n?"open":"closed"}function Xf(n){return n==="indeterminate"}function M_(n){return Xf(n)?"indeterminate":n?"checked":"unchecked"}function G4(n){const e=document.activeElement;for(const t of n)if(t===e||(t.focus(),document.activeElement!==e))return}function K4(n,e){return n.map((t,r)=>n[(e+r)%n.length])}function Z4(n,e,t){const s=e.length>1&&Array.from(e).every(p=>p===e[0])?e[0]:e,i=t?n.indexOf(t):-1;let c=K4(n,Math.max(i,0));s.length===1&&(c=c.filter(p=>p!==t));const d=c.find(p=>p.toLowerCase().startsWith(s.toLowerCase()));return d!==t?d:void 0}function Q4(n,e){const{x:t,y:r}=n;let s=!1;for(let i=0,c=e.length-1;i<e.length;c=i++){const u=e[i],d=e[c],p=u.x,g=u.y,m=d.x,w=d.y;g>r!=w>r&&t<(m-p)*(r-g)/(w-g)+p&&(s=!s)}return s}function Y4(n,e){if(!e)return!1;const t={x:n.clientX,y:n.clientY};return Q4(t,e)}function td(n){return e=>e.pointerType==="mouse"?n(e):void 0}var X4=UT,J4=R_,eF=$T,tF=BT,nF=D_,rF=qT,sF=Qp,oF=WT,iF=KT,aF=QT,cF=XT,lF=JT,uF=eC,dF=nC,hF=sC,Yp="DropdownMenu",[fF]=Gs(Yp,[FT]),Kn=FT(),[pF,iC]=fF(Yp),aC=n=>{const{__scopeDropdownMenu:e,children:t,dir:r,open:s,defaultOpen:i,onOpenChange:c,modal:u=!0}=n,d=Kn(e),p=b.useRef(null),[g,m]=Tl({prop:s,defaultProp:i??!1,onChange:c,caller:Yp});return v.jsx(pF,{scope:e,triggerId:ba(),triggerRef:p,contentId:ba(),open:g,onOpenChange:m,onOpenToggle:b.useCallback(()=>m(w=>!w),[m]),modal:u,children:v.jsx(X4,{...d,open:g,onOpenChange:m,dir:r,modal:u,children:t})})};aC.displayName=Yp;var cC="DropdownMenuTrigger",lC=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,disabled:r=!1,...s}=n,i=iC(cC,t),c=Kn(t);return v.jsx(J4,{asChild:!0,...c,children:v.jsx(ut.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Dp(e,i.triggerRef),onPointerDown:Fe(n.onPointerDown,u=>{!r&&u.button===0&&u.ctrlKey===!1&&(i.onOpenToggle(),i.open||u.preventDefault())}),onKeyDown:Fe(n.onKeyDown,u=>{r||(["Enter"," "].includes(u.key)&&i.onOpenToggle(),u.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});lC.displayName=cC;var mF="DropdownMenuPortal",uC=n=>{const{__scopeDropdownMenu:e,...t}=n,r=Kn(e);return v.jsx(eF,{...r,...t})};uC.displayName=mF;var dC="DropdownMenuContent",hC=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=iC(dC,t),i=Kn(t),c=b.useRef(!1);return v.jsx(tF,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:Fe(n.onCloseAutoFocus,u=>{c.current||s.triggerRef.current?.focus(),c.current=!1,u.preventDefault()}),onInteractOutside:Fe(n.onInteractOutside,u=>{const d=u.detail.originalEvent,p=d.button===0&&d.ctrlKey===!0,g=d.button===2||p;(!s.modal||g)&&(c.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hC.displayName=dC;var gF="DropdownMenuGroup",yF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(nF,{...s,...r,ref:e})});yF.displayName=gF;var vF="DropdownMenuLabel",fC=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(rF,{...s,...r,ref:e})});fC.displayName=vF;var _F="DropdownMenuItem",pC=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(sF,{...s,...r,ref:e})});pC.displayName=_F;var wF="DropdownMenuCheckboxItem",mC=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(oF,{...s,...r,ref:e})});mC.displayName=wF;var EF="DropdownMenuRadioGroup",bF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(iF,{...s,...r,ref:e})});bF.displayName=EF;var xF="DropdownMenuRadioItem",gC=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(aF,{...s,...r,ref:e})});gC.displayName=xF;var SF="DropdownMenuItemIndicator",yC=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(cF,{...s,...r,ref:e})});yC.displayName=SF;var IF="DropdownMenuSeparator",vC=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(lF,{...s,...r,ref:e})});vC.displayName=IF;var TF="DropdownMenuArrow",CF=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(uF,{...s,...r,ref:e})});CF.displayName=TF;var AF="DropdownMenuSubTrigger",_C=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(dF,{...s,...r,ref:e})});_C.displayName=AF;var RF="DropdownMenuSubContent",wC=b.forwardRef((n,e)=>{const{__scopeDropdownMenu:t,...r}=n,s=Kn(t);return v.jsx(hF,{...s,...r,ref:e,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wC.displayName=RF;var PF=aC,kF=lC,NF=uC,EC=hC,bC=fC,xC=pC,SC=mC,IC=gC,TC=yC,CC=vC,AC=_C,RC=wC;const iv=PF,av=kF,DF=b.forwardRef(({className:n,inset:e,children:t,...r},s)=>v.jsxs(AC,{ref:s,className:ze("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",n),...r,children:[t,v.jsx(F2,{className:"ml-auto"})]}));DF.displayName=AC.displayName;const OF=b.forwardRef(({className:n,...e},t)=>v.jsx(RC,{ref:t,className:ze("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...e}));OF.displayName=RC.displayName;const Jf=b.forwardRef(({className:n,sideOffset:e=4,...t},r)=>v.jsx(NF,{children:v.jsx(EC,{ref:r,sideOffset:e,className:ze("z-[100] min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t})}));Jf.displayName=EC.displayName;const Xc=b.forwardRef(({className:n,inset:e,...t},r)=>v.jsx(xC,{ref:r,className:ze("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",e&&"pl-8",n),...t}));Xc.displayName=xC.displayName;const MF=b.forwardRef(({className:n,children:e,checked:t,...r},s)=>v.jsxs(SC,{ref:s,className:ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:t,...r,children:[v.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:v.jsx(TC,{children:v.jsx(n_,{className:"h-4 w-4"})})}),e]}));MF.displayName=SC.displayName;const VF=b.forwardRef(({className:n,children:e,...t},r)=>v.jsxs(IC,{ref:r,className:ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...t,children:[v.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:v.jsx(TC,{children:v.jsx(q2,{className:"h-2 w-2 fill-current"})})}),e]}));VF.displayName=IC.displayName;const ep=b.forwardRef(({className:n,inset:e,...t},r)=>v.jsx(bC,{ref:r,className:ze("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",n),...t}));ep.displayName=bC.displayName;const tp=b.forwardRef(({className:n,...e},t)=>v.jsx(CC,{ref:t,className:ze("-mx-1 my-1 h-px bg-muted",n),...e}));tp.displayName=CC.displayName;function PC(n){const e=b.useRef({value:n,previous:n});return b.useMemo(()=>(e.current.value!==n&&(e.current.previous=e.current.value,e.current.value=n),e.current.previous),[n])}var Xp="Switch",[LF]=Gs(Xp),[FF,jF]=LF(Xp),kC=b.forwardRef((n,e)=>{const{__scopeSwitch:t,name:r,checked:s,defaultChecked:i,required:c,disabled:u,value:d="on",onCheckedChange:p,form:g,...m}=n,[w,S]=b.useState(null),R=xt(e,z=>S(z)),C=b.useRef(!1),A=w?g||!!w.closest("form"):!0,[O,U]=Tl({prop:s,defaultProp:i??!1,onChange:p,caller:Xp});return v.jsxs(FF,{scope:t,checked:O,disabled:u,children:[v.jsx(ut.button,{type:"button",role:"switch","aria-checked":O,"aria-required":c,"data-state":MC(O),"data-disabled":u?"":void 0,disabled:u,value:d,...m,ref:R,onClick:Fe(n.onClick,z=>{U(q=>!q),A&&(C.current=z.isPropagationStopped(),C.current||z.stopPropagation())})}),A&&v.jsx(OC,{control:w,bubbles:!C.current,name:r,value:d,checked:O,required:c,disabled:u,form:g,style:{transform:"translateX(-100%)"}})]})});kC.displayName=Xp;var NC="SwitchThumb",DC=b.forwardRef((n,e)=>{const{__scopeSwitch:t,...r}=n,s=jF(NC,t);return v.jsx(ut.span,{"data-state":MC(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});DC.displayName=NC;var UF="SwitchBubbleInput",OC=b.forwardRef(({__scopeSwitch:n,control:e,checked:t,bubbles:r=!0,...s},i)=>{const c=b.useRef(null),u=xt(c,i),d=PC(t),p=x_(e);return b.useEffect(()=>{const g=c.current;if(!g)return;const m=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==t&&S){const R=new Event("click",{bubbles:r});S.call(g,t),g.dispatchEvent(R)}},[d,t,r]),v.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:u,style:{...s.style,...p,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});OC.displayName=UF;function MC(n){return n?"checked":"unchecked"}var VC=kC,zF=DC;const LC=b.forwardRef(({className:n,...e},t)=>v.jsx(VC,{className:ze("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...e,ref:t,children:v.jsx(zF,{className:ze("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));LC.displayName=VC.displayName;const $F=()=>{};var cx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},BF=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],c=n[t++],u=n[t++],d=((s&7)<<18|(i&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const i=n[t++],c=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|c&63)}}return e.join("")},jC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],c=s+1<n.length,u=c?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,g=i>>2,m=(i&3)<<4|u>>4;let w=(u&15)<<2|p>>6,S=p&63;d||(S=64,c||(w=64)),r.push(t[g],t[m],t[w],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):BF(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const m=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||u==null||p==null||m==null)throw new qF;const w=i<<2|u>>4;if(r.push(w),p!==64){const S=u<<4&240|p>>2;if(r.push(S),m!==64){const R=p<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class qF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const HF=function(n){const e=FC(n);return jC.encodeByteArray(e,!0)},np=function(n){return HF(n).replace(/\./g,"")},UC=function(n){try{return jC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF=()=>zC().__FIREBASE_DEFAULTS__,GF=()=>{if(typeof process>"u"||typeof cx>"u")return;const n=cx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},KF=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&UC(n[1]);return e&&JSON.parse(e)},Jp=()=>{try{return $F()||WF()||GF()||KF()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$C=n=>Jp()?.emulatorHosts?.[n],ZF=n=>{const e=$C(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},BC=()=>Jp()?.config,qC=n=>Jp()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HC(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[np(JSON.stringify(t)),np(JSON.stringify(c)),""].join(".")}const ju={};function XF(){const n={prod:[],emulator:[]};for(const e of Object.keys(ju))ju[e]?n.emulator.push(e):n.prod.push(e);return n}function JF(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let lx=!1;function WC(n,e){if(typeof window>"u"||typeof document>"u"||!Rl(window.location.host)||ju[n]===e||ju[n]||lx)return;ju[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",i=XF().prod.length>0;function c(){const w=document.getElementById(r);w&&w.remove()}function u(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function d(w,S){w.setAttribute("width","24"),w.setAttribute("id",S),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{lx=!0,c()},w}function g(w,S){w.setAttribute("id",S),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function m(){const w=JF(r),S=t("text"),R=document.getElementById(S)||document.createElement("span"),C=t("learnmore"),A=document.getElementById(C)||document.createElement("a"),O=t("preprendIcon"),U=document.getElementById(O)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const z=w.element;u(z),g(A,C);const q=p();d(U,O),z.append(U,R,A,q),document.body.appendChild(z)}i?(R.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,R.innerText="Preview backend running in this workspace."),R.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ej(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function GC(){const n=Jp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nj(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sj(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function KC(){return!GC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZC(){return!GC()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function QC(){try{return typeof indexedDB=="object"}catch{return!1}}function oj(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="FirebaseError";class To extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ij,Object.setPrototypeOf(this,To.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Id.prototype.create)}}class Id{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],c=i?aj(i,r):"Error",u=`${this.serviceName}: ${c} (${s}).`;return new To(s,u,r)}}function aj(n,e){return n.replace(cj,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cj=/\{\$([^}]+)}/g;function lj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ka(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],c=e[s];if(ux(i)&&ux(c)){if(!ka(i,c))return!1}else if(i!==c)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function ux(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uj(n,e){const t=new dj(n,e);return t.subscribe.bind(t)}class dj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");hj(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=xy),s.error===void 0&&(s.error=xy),s.complete===void 0&&(s.complete=xy);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hj(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function xy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(n){return n&&n._delegate?n._delegate:n}class Na{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new QF;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mj(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&c.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pj(n){return n===ha?void 0:n}function mj(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new fj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ot;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ot||(ot={}));const yj={debug:ot.DEBUG,verbose:ot.VERBOSE,info:ot.INFO,warn:ot.WARN,error:ot.ERROR,silent:ot.SILENT},vj=ot.INFO,_j={[ot.DEBUG]:"log",[ot.VERBOSE]:"log",[ot.INFO]:"info",[ot.WARN]:"warn",[ot.ERROR]:"error"},wj=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=_j[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class V_{constructor(e){this.name=e,this._logLevel=vj,this._logHandler=wj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ot.DEBUG,...e),this._logHandler(this,ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ot.VERBOSE,...e),this._logHandler(this,ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ot.INFO,...e),this._logHandler(this,ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ot.WARN,...e),this._logHandler(this,ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ot.ERROR,...e),this._logHandler(this,ot.ERROR,...e)}}const Ej=(n,e)=>e.some(t=>n instanceof t);let dx,hx;function bj(){return dx||(dx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xj(){return hx||(hx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const YC=new WeakMap,cv=new WeakMap,XC=new WeakMap,Sy=new WeakMap,L_=new WeakMap;function Sj(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",c)},i=()=>{t(vi(n.result)),s()},c=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&YC.set(t,n)}).catch(()=>{}),L_.set(e,n),e}function Ij(n){if(cv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",c),n.removeEventListener("abort",c)},i=()=>{t(),s()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",c),n.addEventListener("abort",c)});cv.set(n,e)}let lv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return cv.get(n);if(e==="objectStoreNames")return n.objectStoreNames||XC.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return vi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Tj(n){lv=n(lv)}function Cj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Iy(this),e,...t);return XC.set(r,e.sort?e.sort():[e]),vi(r)}:xj().includes(n)?function(...e){return n.apply(Iy(this),e),vi(YC.get(this))}:function(...e){return vi(n.apply(Iy(this),e))}}function Aj(n){return typeof n=="function"?Cj(n):(n instanceof IDBTransaction&&Ij(n),Ej(n,bj())?new Proxy(n,lv):n)}function vi(n){if(n instanceof IDBRequest)return Sj(n);if(Sy.has(n))return Sy.get(n);const e=Aj(n);return e!==n&&(Sy.set(n,e),L_.set(e,n)),e}const Iy=n=>L_.get(n);function Rj(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const c=indexedDB.open(n,e),u=vi(c);return r&&c.addEventListener("upgradeneeded",d=>{r(vi(c.result),d.oldVersion,d.newVersion,vi(c.transaction),d)}),t&&c.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{i&&d.addEventListener("close",()=>i()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const Pj=["get","getKey","getAll","getAllKeys","count"],kj=["put","add","delete","clear"],Ty=new Map;function fx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ty.get(e))return Ty.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=kj.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Pj.includes(t)))return;const i=async function(c,...u){const d=this.transaction(c,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&d.done]))[0]};return Ty.set(e,i),i}Tj(n=>({...n,get:(e,t,r)=>fx(e,t)||n.get(e,t,r),has:(e,t)=>!!fx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Dj(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Dj(n){return n.getComponent()?.type==="VERSION"}const uv="@firebase/app",px="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new V_("@firebase/app"),Oj="@firebase/app-compat",Mj="@firebase/analytics-compat",Vj="@firebase/analytics",Lj="@firebase/app-check-compat",Fj="@firebase/app-check",jj="@firebase/auth",Uj="@firebase/auth-compat",zj="@firebase/database",$j="@firebase/data-connect",Bj="@firebase/database-compat",qj="@firebase/functions",Hj="@firebase/functions-compat",Wj="@firebase/installations",Gj="@firebase/installations-compat",Kj="@firebase/messaging",Zj="@firebase/messaging-compat",Qj="@firebase/performance",Yj="@firebase/performance-compat",Xj="@firebase/remote-config",Jj="@firebase/remote-config-compat",e5="@firebase/storage",t5="@firebase/storage-compat",n5="@firebase/firestore",r5="@firebase/ai",s5="@firebase/firestore-compat",o5="firebase",i5="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="[DEFAULT]",a5={[uv]:"fire-core",[Oj]:"fire-core-compat",[Vj]:"fire-analytics",[Mj]:"fire-analytics-compat",[Fj]:"fire-app-check",[Lj]:"fire-app-check-compat",[jj]:"fire-auth",[Uj]:"fire-auth-compat",[zj]:"fire-rtdb",[$j]:"fire-data-connect",[Bj]:"fire-rtdb-compat",[qj]:"fire-fn",[Hj]:"fire-fn-compat",[Wj]:"fire-iid",[Gj]:"fire-iid-compat",[Kj]:"fire-fcm",[Zj]:"fire-fcm-compat",[Qj]:"fire-perf",[Yj]:"fire-perf-compat",[Xj]:"fire-rc",[Jj]:"fire-rc-compat",[e5]:"fire-gcs",[t5]:"fire-gcs-compat",[n5]:"fire-fst",[s5]:"fire-fst-compat",[r5]:"fire-vertex","fire-js":"fire-js",[o5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rp=new Map,c5=new Map,hv=new Map;function mx(n,e){try{n.container.addComponent(e)}catch(t){bo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function al(n){const e=n.name;if(hv.has(e))return bo.debug(`There were multiple attempts to register component ${e}.`),!1;hv.set(e,n);for(const t of rp.values())mx(t,n);for(const t of c5.values())mx(t,n);return!0}function F_(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function os(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_i=new Id("app","Firebase",l5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _i.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pl=i5;function JC(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:dv,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw _i.create("bad-app-name",{appName:String(s)});if(t||(t=BC()),!t)throw _i.create("no-options");const i=rp.get(s);if(i){if(ka(t,i.options)&&ka(r,i.config))return i;throw _i.create("duplicate-app",{appName:s})}const c=new gj(s);for(const d of hv.values())c.addComponent(d);const u=new u5(t,r,c);return rp.set(s,u),u}function eA(n=dv){const e=rp.get(n);if(!e&&n===dv&&BC())return JC();if(!e)throw _i.create("no-app",{appName:n});return e}function wi(n,e,t){let r=a5[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&c.push("and"),i&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bo.warn(c.join(" "));return}al(new Na(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d5="firebase-heartbeat-database",h5=1,nd="firebase-heartbeat-store";let Cy=null;function tA(){return Cy||(Cy=Rj(d5,h5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nd)}catch(t){console.warn(t)}}}}).catch(n=>{throw _i.create("idb-open",{originalErrorMessage:n.message})})),Cy}async function f5(n){try{const t=(await tA()).transaction(nd),r=await t.objectStore(nd).get(nA(n));return await t.done,r}catch(e){if(e instanceof To)bo.warn(e.message);else{const t=_i.create("idb-get",{originalErrorMessage:e?.message});bo.warn(t.message)}}}async function gx(n,e){try{const r=(await tA()).transaction(nd,"readwrite");await r.objectStore(nd).put(e,nA(n)),await r.done}catch(t){if(t instanceof To)bo.warn(t.message);else{const r=_i.create("idb-set",{originalErrorMessage:t?.message});bo.warn(r.message)}}}function nA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=1024,m5=30;class g5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new v5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=yx();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>m5){const s=_5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bo.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=yx(),{heartbeatsToSend:t,unsentEntries:r}=y5(this._heartbeatsCache.heartbeats),s=np(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return bo.warn(e),""}}}function yx(){return new Date().toISOString().substring(0,10)}function y5(n,e=p5){const t=[];let r=n.slice();for(const s of n){const i=t.find(c=>c.agent===s.agent);if(i){if(i.dates.push(s.date),vx(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),vx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class v5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QC()?oj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await f5(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return gx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function vx(n){return np(JSON.stringify({version:2,heartbeats:n})).length}function _5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w5(n){al(new Na("platform-logger",e=>new Nj(e),"PRIVATE")),al(new Na("heartbeat",e=>new g5(e),"PRIVATE")),wi(uv,px,n),wi(uv,px,"esm2020"),wi("fire-js","")}w5("");function rA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const E5=rA,sA=new Id("auth","Firebase",rA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=new V_("@firebase/auth");function b5(n,...e){sp.logLevel<=ot.WARN&&sp.warn(`Auth (${Pl}): ${n}`,...e)}function Af(n,...e){sp.logLevel<=ot.ERROR&&sp.error(`Auth (${Pl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(n,...e){throw U_(n,...e)}function as(n,...e){return U_(n,...e)}function j_(n,e,t){const r={...E5(),[e]:t};return new Id("auth","Firebase",r).create(e,{appName:n.name})}function xa(n){return j_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function x5(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Hs(n,"argument-error"),j_(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function U_(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return sA.create(n,...e)}function We(n,e,...t){if(!n)throw U_(e,...t)}function go(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Af(e),new Error(e)}function xo(n,e){n||go(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(){return typeof self<"u"&&self.location?.href||""}function S5(){return _x()==="http:"||_x()==="https:"}function _x(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(S5()||nj()||"connection"in navigator)?navigator.onLine:!0}function T5(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,t){this.shortDelay=e,this.longDelay=t,xo(t>e,"Short delay should be less than long delay!"),this.isMobile=ej()||rj()}get(){return I5()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(n,e){xo(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;go("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;go("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;go("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],R5=new Cd(3e4,6e4);function $_(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function kl(n,e,t,r,s={}){return iA(n,s,async()=>{let i={},c={};r&&(e==="GET"?c=r:i={body:JSON.stringify(r)});const u=Td({key:n.config.apiKey,...c}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:d,...i};return tj()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Rl(n.emulatorConfig.host)&&(p.credentials="include"),oA.fetch()(await aA(n,n.config.apiHost,t,u),p)})}async function iA(n,e,t){n._canInitEmulator=!1;const r={...C5,...e};try{const s=new k5(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await i.json();if("needConfirmation"in c)throw df(n,"account-exists-with-different-credential",c);if(i.ok&&!("errorMessage"in c))return c;{const u=i.ok?c.errorMessage:c.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw df(n,"credential-already-in-use",c);if(d==="EMAIL_EXISTS")throw df(n,"email-already-in-use",c);if(d==="USER_DISABLED")throw df(n,"user-disabled",c);const g=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw j_(n,g,p);Hs(n,g)}}catch(s){if(s instanceof To)throw s;Hs(n,"network-request-failed",{message:String(s)})}}async function P5(n,e,t,r,s={}){const i=await kl(n,e,t,r,s);return"mfaPendingCredential"in i&&Hs(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function aA(n,e,t,r){const s=`${e}${t}?${r}`,i=n,c=i.config.emulator?z_(n.config,s):`${n.config.apiScheme}://${s}`;return A5.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(c).toString():c}class k5{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(as(this.auth,"network-request-failed")),R5.get())})}}function df(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=as(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(n,e){return kl(n,"POST","/v1/accounts:delete",e)}async function op(n,e){return kl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function D5(n,e=!1){const t=wn(n),r=await t.getIdToken(e),s=B_(r);We(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,c=i?.sign_in_provider;return{claims:s,token:r,authTime:Uu(Ay(s.auth_time)),issuedAtTime:Uu(Ay(s.iat)),expirationTime:Uu(Ay(s.exp)),signInProvider:c||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Ay(n){return Number(n)*1e3}function B_(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Af("JWT malformed, contained fewer than 3 sections"),null;try{const s=UC(t);return s?JSON.parse(s):(Af("Failed to decode base64 JWT payload"),null)}catch(s){return Af("Caught error parsing JWT payload as JSON",s?.toString()),null}}function wx(n){const e=B_(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof To&&O5(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function O5({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uu(this.lastLoginAt),this.creationTime=Uu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ip(n){const e=n.auth,t=await n.getIdToken(),r=await rd(n,op(e,{idToken:t}));We(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=s.providerUserInfo?.length?cA(s.providerUserInfo):[],c=L5(n.providerData,i),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,p=u?d:!1,g={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new pv(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,g)}async function V5(n){const e=wn(n);await ip(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function L5(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function cA(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F5(n,e){const t=await iA(n,{},async()=>{const r=Td({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,c=await aA(n,s,"/v1/token",`key=${i}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&Rl(n.emulatorConfig.host)&&(d.credentials="include"),oA.fetch()(c,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function j5(n,e){return kl(n,"POST","/v2/accounts:revokeToken",$_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=wx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await F5(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,c=new Jc;return r&&(We(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),s&&(We(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),i&&(We(typeof i=="number","internal-error",{appName:e}),c.expirationTime=i),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jc,this.toJSON())}_performRefresh(){return go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class is{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new M5(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await rd(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return D5(this,e)}reload(){return V5(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new is({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await ip(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(os(this.auth.app))return Promise.reject(xa(this.auth));const e=await this.getIdToken();return await rd(this,N5(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,c=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,p=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:m,emailVerified:w,isAnonymous:S,providerData:R,stsTokenManager:C}=t;We(m&&C,e,"internal-error");const A=Jc.fromJSON(this.name,C);We(typeof m=="string",e,"internal-error"),si(r,e.name),si(s,e.name),We(typeof w=="boolean",e,"internal-error"),We(typeof S=="boolean",e,"internal-error"),si(i,e.name),si(c,e.name),si(u,e.name),si(d,e.name),si(p,e.name),si(g,e.name);const O=new is({uid:m,auth:e,email:s,emailVerified:w,displayName:r,isAnonymous:S,photoURL:c,phoneNumber:i,tenantId:u,stsTokenManager:A,createdAt:p,lastLoginAt:g});return R&&Array.isArray(R)&&(O.providerData=R.map(U=>({...U}))),d&&(O._redirectEventId=d),O}static async _fromIdTokenResponse(e,t,r=!1){const s=new Jc;s.updateFromServerResponse(t);const i=new is({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ip(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];We(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?cA(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!i?.length,u=new Jc;u.updateFromIdToken(r);const d=new is({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:c}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new pv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=new Map;function yo(n){xo(n instanceof Function,"Expected a class definition");let e=Ex.get(n);return e?(xo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ex.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}lA.type="NONE";const bx=lA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(n,e,t){return`firebase:${n}:${e}:${t}`}class el{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Rf(this.userKey,s.apiKey,i),this.fullPersistenceKey=Rf("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await op(this.auth,{idToken:e}).catch(()=>{});return t?is._fromGetAccountInfoResponse(this.auth,t,e):null}return is._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new el(yo(bx),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let i=s[0]||yo(bx);const c=Rf(r,e.config.apiKey,e.name);let u=null;for(const p of t)try{const g=await p._get(c);if(g){let m;if(typeof g=="string"){const w=await op(e,{idToken:g}).catch(()=>{});if(!w)break;m=await is._fromGetAccountInfoResponse(e,w,g)}else m=is._fromJSON(e,g);p!==i&&(u=m),i=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new el(i,e,r):(i=d[0],u&&await i._set(c,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==i)try{await p._remove(c)}catch{}})),new el(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mA(e))return"Blackberry";if(gA(e))return"Webos";if(dA(e))return"Safari";if((e.includes("chrome/")||hA(e))&&!e.includes("edge/"))return"Chrome";if(pA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function uA(n=dn()){return/firefox\//i.test(n)}function dA(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hA(n=dn()){return/crios\//i.test(n)}function fA(n=dn()){return/iemobile/i.test(n)}function pA(n=dn()){return/android/i.test(n)}function mA(n=dn()){return/blackberry/i.test(n)}function gA(n=dn()){return/webos/i.test(n)}function q_(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function U5(n=dn()){return q_(n)&&!!window.navigator?.standalone}function z5(){return sj()&&document.documentMode===10}function yA(n=dn()){return q_(n)||pA(n)||gA(n)||mA(n)||/windows phone/i.test(n)||fA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vA(n,e=[]){let t;switch(n){case"Browser":t=xx(dn());break;case"Worker":t=`${xx(dn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((c,u)=>{try{const d=e(i);c(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B5(n,e={}){return kl(n,"GET","/v2/passwordPolicy",$_(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=6;class H5{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??q5,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sx(this),this.idTokenSubscription=new Sx(this),this.beforeStateQueue=new $5(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=yo(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await el.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await op(this,{idToken:e}),r=await is._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(os(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,c=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!i||i===c)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ip(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=T5()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(os(this.app))return Promise.reject(xa(this));const t=e?wn(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return os(this.app)?Promise.reject(xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return os(this.app)?Promise.reject(xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(yo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await B5(this),t=new H5(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Id("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await j5(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&yo(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await el.create(this,[yo(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(u,this,"internal-error"),u.then(()=>{c||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{c=!0,d()}}else{const d=e.addObserver(t);return()=>{c=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&b5(`Error while retrieving App Check token: ${e.error}`),e?.token}}function em(n){return wn(n)}class Sx{constructor(e){this.auth=e,this.observer=null,this.addObserver=uj(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function G5(n){H_=n}function K5(n){return H_.loadJS(n)}function Z5(){return H_.gapiScript}function Q5(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5(n,e){const t=F_(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(ka(i,e??{}))return s;Hs(s,"already-initialized")}return t.initialize({options:e})}function X5(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(yo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function J5(n,e,t){const r=em(n);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=_A(e),{host:c,port:u}=e3(e),d=u===null?"":`:${u}`,p={url:`${i}//${c}${d}/`},g=Object.freeze({host:c,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(ka(p,r.config.emulator)&&ka(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,Rl(c)?(HC(`${i}//${c}${d}`),WC("Auth",!0)):t3()}function _A(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function e3(n){const e=_A(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ix(r.substr(i.length+1))}}else{const[i,c]=r.split(":");return{host:i,port:Ix(c)}}}function Ix(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function t3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return go("not implemented")}_getIdTokenResponse(e){return go("not implemented")}_linkToIdToken(e,t){return go("not implemented")}_getReauthenticationResolver(e){return go("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(n,e){return P5(n,"POST","/v1/accounts:signInWithIdp",$_(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3="http://localhost";class Da extends wA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Da(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const c=new Da(r,s);return c.idToken=i.idToken||void 0,c.accessToken=i.accessToken||void 0,c.secret=i.secret,c.nonce=i.nonce,c.pendingToken=i.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return tl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,tl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tl(e,t)}buildRequest(){const e={requestUri:n3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Td(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends W_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di extends Ad{constructor(){super("facebook.com")}static credential(e){return Da._fromParams({providerId:di.PROVIDER_ID,signInMethod:di.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return di.credentialFromTaggedObject(e)}static credentialFromError(e){return di.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return di.credential(e.oauthAccessToken)}catch{return null}}}di.FACEBOOK_SIGN_IN_METHOD="facebook.com";di.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Ad{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Da._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ms.credential(t,r)}catch{return null}}}Ms.GOOGLE_SIGN_IN_METHOD="google.com";Ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Ad{constructor(){super("github.com")}static credential(e){return Da._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Ad{constructor(){super("twitter.com")}static credential(e,t){return Da._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return fi.credential(t,r)}catch{return null}}}fi.TWITTER_SIGN_IN_METHOD="twitter.com";fi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await is._fromIdTokenResponse(e,r,s),c=Tx(r);return new cl({user:i,providerId:c,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Tx(r);return new cl({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Tx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap extends To{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ap.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new ap(e,t,r,s)}}function EA(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ap._fromErrorAndOperation(n,i,e,r):i})}async function r3(n,e,t=!1){const r=await rd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return cl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s3(n,e,t=!1){const{auth:r}=n;if(os(r.app))return Promise.reject(xa(r));const s="reauthenticate";try{const i=await rd(n,EA(r,s,e,n),t);We(i.idToken,r,"internal-error");const c=B_(i.idToken);We(c,r,"internal-error");const{sub:u}=c;return We(n.uid===u,r,"user-mismatch"),cl._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Hs(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(n,e,t=!1){if(os(n.app))return Promise.reject(xa(n));const r="signIn",s=await EA(n,r,e),i=await cl._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}function i3(n,e,t,r){return wn(n).onIdTokenChanged(e,t,r)}function a3(n,e,t){return wn(n).beforeAuthStateChanged(e,t)}const cp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cp,"1"),this.storage.removeItem(cp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=1e3,l3=10;class xA extends bA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,u,d)=>{this.notifyListeners(c,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(r);!t&&this.localCache[r]===c||this.notifyListeners(r,c)},i=this.storage.getItem(r);z5()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,l3):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},c3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xA.type="LOCAL";const u3=xA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA extends bA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}SA.type="SESSION";const IA=SA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new tm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(c).map(async p=>p(t.origin,i)),d=await d3(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G_(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,c;return new Promise((u,d)=>{const p=G_("",20);s.port1.start();const g=setTimeout(()=>{d(new Error("unsupported_event"))},r);c={messageChannel:s,onMessage(m){const w=m;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(g),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(w.data.response);break;default:clearTimeout(g),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(){return window}function f3(n){Us().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof Us().WorkerGlobalScope<"u"&&typeof Us().importScripts=="function"}async function p3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function m3(){return navigator?.serviceWorker?.controller||null}function g3(){return TA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="firebaseLocalStorageDb",y3=1,lp="firebaseLocalStorage",AA="fbase_key";class Rd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nm(n,e){return n.transaction([lp],e?"readwrite":"readonly").objectStore(lp)}function v3(){const n=indexedDB.deleteDatabase(CA);return new Rd(n).toPromise()}function mv(){const n=indexedDB.open(CA,y3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(lp,{keyPath:AA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(lp)?e(r):(r.close(),await v3(),e(await mv()))})})}async function Cx(n,e,t){const r=nm(n,!0).put({[AA]:e,value:t});return new Rd(r).toPromise()}async function _3(n,e){const t=nm(n,!1).get(e),r=await new Rd(t).toPromise();return r===void 0?null:r.value}function Ax(n,e){const t=nm(n,!0).delete(e);return new Rd(t).toPromise()}const w3=800,E3=3;class RA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mv(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>E3)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tm._getInstance(g3()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await p3(),!this.activeServiceWorker)return;this.sender=new h3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||m3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mv();return await Cx(e,cp,"1"),await Ax(e,cp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Cx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>_3(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ax(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=nm(s,!1).getAll();return new Rd(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),w3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RA.type="LOCAL";const b3=RA;new Cd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(n,e){return e?yo(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_ extends wA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function x3(n){return o3(n.auth,new K_(n),n.bypassAuthState)}function S3(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),s3(t,new K_(n),n.bypassAuthState)}async function I3(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),r3(t,new K_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:c,type:u}=e;if(c){this.reject(c);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return x3;case"linkViaPopup":case"linkViaRedirect":return I3;case"reauthViaPopup":case"reauthViaRedirect":return S3;default:Hs(this.auth,"internal-error")}}resolve(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=new Cd(2e3,1e4);async function Rx(n,e,t){if(os(n.app))return Promise.reject(as(n,"operation-not-supported-in-this-environment"));const r=em(n);x5(n,e,W_);const s=PA(r,t);return new wa(r,"signInViaPopup",e,s).executeNotNull()}class wa extends kA{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,wa.currentPopupAction&&wa.currentPopupAction.cancel(),wa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){xo(this.filter.length===1,"Popup operations only handle one event");const e=G_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(as(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(as(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(as(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,T3.get())};e()}}wa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3="pendingRedirect",Pf=new Map;class A3 extends kA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Pf.get(this.auth._key());if(!e){try{const r=await R3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Pf.set(this.auth._key(),e)}return this.bypassAuthState||Pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function R3(n,e){const t=N3(e),r=k3(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function P3(n,e){Pf.set(n._key(),e)}function k3(n){return yo(n._redirectPersistence)}function N3(n){return Rf(C3,n.config.apiKey,n.name)}async function D3(n,e,t=!1){if(os(n.app))return Promise.reject(xa(n));const r=em(n),s=PA(r,e),c=await new A3(r,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=600*1e3;class M3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!V3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!NA(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(as(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=O3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Px(e))}saveEventToCache(e){this.cachedEventUids.add(Px(e)),this.lastProcessedEventTime=Date.now()}}function Px(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function NA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function V3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L3(n,e={}){return kl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j3=/^https?/;async function U3(n){if(n.config.emulator)return;const{authorizedDomains:e}=await L3(n);for(const t of e)try{if(z3(t))return}catch{}Hs(n,"unauthorized-domain")}function z3(n){const e=fv(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!j3.test(t))return!1;if(F3.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=new Cd(3e4,6e4);function kx(){const n=Us().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function B3(n){return new Promise((e,t)=>{function r(){kx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kx(),t(as(n,"network-request-failed"))},timeout:$3.get()})}if(Us().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Us().gapi?.load)r();else{const s=Q5("iframefcb");return Us()[s]=()=>{gapi.load?r():t(as(n,"network-request-failed"))},K5(`${Z5()}?onload=${s}`).catch(i=>t(i))}}).catch(e=>{throw kf=null,e})}let kf=null;function q3(n){return kf=kf||B3(n),kf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=new Cd(5e3,15e3),W3="__/auth/iframe",G3="emulator/auth/iframe",K3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Z3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Q3(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?z_(e,G3):`https://${n.config.authDomain}/${W3}`,r={apiKey:e.apiKey,appName:n.name,v:Pl},s=Z3.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Td(r).slice(1)}`}async function Y3(n){const e=await q3(n),t=Us().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:Q3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:K3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const c=as(n,"network-request-failed"),u=Us().setTimeout(()=>{i(c)},H3.get());function d(){Us().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{i(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},J3=500,e6=600,t6="_blank",n6="http://localhost";class Nx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function r6(n,e,t,r=J3,s=e6){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...X3,width:r.toString(),height:s.toString(),top:i,left:c},p=dn().toLowerCase();t&&(u=hA(p)?t6:t),uA(p)&&(e=e||n6,d.scrollbars="yes");const g=Object.entries(d).reduce((w,[S,R])=>`${w}${S}=${R},`,"");if(U5(p)&&u!=="_self")return s6(e||"",u),new Nx(null);const m=window.open(e||"",u,g);We(m,n,"popup-blocked");try{m.focus()}catch{}return new Nx(m)}function s6(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6="__/auth/handler",i6="emulator/auth/handler",a6=encodeURIComponent("fac");async function Dx(n,e,t,r,s,i){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pl,eventId:s};if(e instanceof W_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",lj(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,m]of Object.entries({}))c[g]=m}if(e instanceof Ad){const g=e.getScopes().filter(m=>m!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const u=c;for(const g of Object.keys(u))u[g]===void 0&&delete u[g];const d=await n._getAppCheckToken(),p=d?`#${a6}=${encodeURIComponent(d)}`:"";return`${c6(n)}?${Td(u).slice(1)}${p}`}function c6({config:n}){return n.emulator?z_(n,i6):`https://${n.authDomain}/${o6}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="webStorageSupport";class l6{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IA,this._completeRedirectFn=D3,this._overrideRedirectResult=P3}async _openPopup(e,t,r,s){xo(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await Dx(e,t,r,fv(),s);return r6(e,i,G_())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await Dx(e,t,r,fv(),s);return f3(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(xo(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await Y3(e),r=new M3(e);return t.register("authEvent",s=>(We(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ry,{type:Ry},s=>{const i=s?.[0]?.[Ry];i!==void 0&&t(!!i),Hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=U3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yA()||dA()||q_()}}const u6=l6;var Ox="@firebase/auth",Mx="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function f6(n){al(new Na("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;We(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:c,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vA(n)},p=new W5(r,s,i,d);return X5(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),al(new Na("auth-internal",e=>{const t=em(e.getProvider("auth").getImmediate());return(r=>new d6(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wi(Ox,Mx,h6(n)),wi(Ox,Mx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=300,m6=qC("authIdTokenMaxAge")||p6;let Vx=null;const g6=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>m6)return;const s=t?.token;Vx!==s&&(Vx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function y6(n=eA()){const e=F_(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Y5(n,{popupRedirectResolver:u6,persistence:[b3,u3,IA]}),r=qC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const c=g6(i.toString());a3(t,c,()=>c(t.currentUser)),i3(t,u=>c(u))}}const s=$C("auth");return s&&J5(t,`http://${s}`),t}function v6(){return document.getElementsByTagName("head")?.[0]??document}G5({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=as("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",v6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});f6("Browser");var _6="firebase",w6="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wi(_6,w6,"app");var Lx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ei,DA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function k(){}k.prototype=I.prototype,P.F=I.prototype,P.prototype=new k,P.prototype.constructor=P,P.D=function(M,V,L){for(var N=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)N[ue-2]=arguments[ue];return I.prototype[V].apply(M,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,I,k){k||(k=0);const M=Array(16);if(typeof I=="string")for(var V=0;V<16;++V)M[V]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(V=0;V<16;++V)M[V]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=P.g[0],k=P.g[1],V=P.g[2];let L=P.g[3],N;N=I+(L^k&(V^L))+M[0]+3614090360&4294967295,I=k+(N<<7&4294967295|N>>>25),N=L+(V^I&(k^V))+M[1]+3905402710&4294967295,L=I+(N<<12&4294967295|N>>>20),N=V+(k^L&(I^k))+M[2]+606105819&4294967295,V=L+(N<<17&4294967295|N>>>15),N=k+(I^V&(L^I))+M[3]+3250441966&4294967295,k=V+(N<<22&4294967295|N>>>10),N=I+(L^k&(V^L))+M[4]+4118548399&4294967295,I=k+(N<<7&4294967295|N>>>25),N=L+(V^I&(k^V))+M[5]+1200080426&4294967295,L=I+(N<<12&4294967295|N>>>20),N=V+(k^L&(I^k))+M[6]+2821735955&4294967295,V=L+(N<<17&4294967295|N>>>15),N=k+(I^V&(L^I))+M[7]+4249261313&4294967295,k=V+(N<<22&4294967295|N>>>10),N=I+(L^k&(V^L))+M[8]+1770035416&4294967295,I=k+(N<<7&4294967295|N>>>25),N=L+(V^I&(k^V))+M[9]+2336552879&4294967295,L=I+(N<<12&4294967295|N>>>20),N=V+(k^L&(I^k))+M[10]+4294925233&4294967295,V=L+(N<<17&4294967295|N>>>15),N=k+(I^V&(L^I))+M[11]+2304563134&4294967295,k=V+(N<<22&4294967295|N>>>10),N=I+(L^k&(V^L))+M[12]+1804603682&4294967295,I=k+(N<<7&4294967295|N>>>25),N=L+(V^I&(k^V))+M[13]+4254626195&4294967295,L=I+(N<<12&4294967295|N>>>20),N=V+(k^L&(I^k))+M[14]+2792965006&4294967295,V=L+(N<<17&4294967295|N>>>15),N=k+(I^V&(L^I))+M[15]+1236535329&4294967295,k=V+(N<<22&4294967295|N>>>10),N=I+(V^L&(k^V))+M[1]+4129170786&4294967295,I=k+(N<<5&4294967295|N>>>27),N=L+(k^V&(I^k))+M[6]+3225465664&4294967295,L=I+(N<<9&4294967295|N>>>23),N=V+(I^k&(L^I))+M[11]+643717713&4294967295,V=L+(N<<14&4294967295|N>>>18),N=k+(L^I&(V^L))+M[0]+3921069994&4294967295,k=V+(N<<20&4294967295|N>>>12),N=I+(V^L&(k^V))+M[5]+3593408605&4294967295,I=k+(N<<5&4294967295|N>>>27),N=L+(k^V&(I^k))+M[10]+38016083&4294967295,L=I+(N<<9&4294967295|N>>>23),N=V+(I^k&(L^I))+M[15]+3634488961&4294967295,V=L+(N<<14&4294967295|N>>>18),N=k+(L^I&(V^L))+M[4]+3889429448&4294967295,k=V+(N<<20&4294967295|N>>>12),N=I+(V^L&(k^V))+M[9]+568446438&4294967295,I=k+(N<<5&4294967295|N>>>27),N=L+(k^V&(I^k))+M[14]+3275163606&4294967295,L=I+(N<<9&4294967295|N>>>23),N=V+(I^k&(L^I))+M[3]+4107603335&4294967295,V=L+(N<<14&4294967295|N>>>18),N=k+(L^I&(V^L))+M[8]+1163531501&4294967295,k=V+(N<<20&4294967295|N>>>12),N=I+(V^L&(k^V))+M[13]+2850285829&4294967295,I=k+(N<<5&4294967295|N>>>27),N=L+(k^V&(I^k))+M[2]+4243563512&4294967295,L=I+(N<<9&4294967295|N>>>23),N=V+(I^k&(L^I))+M[7]+1735328473&4294967295,V=L+(N<<14&4294967295|N>>>18),N=k+(L^I&(V^L))+M[12]+2368359562&4294967295,k=V+(N<<20&4294967295|N>>>12),N=I+(k^V^L)+M[5]+4294588738&4294967295,I=k+(N<<4&4294967295|N>>>28),N=L+(I^k^V)+M[8]+2272392833&4294967295,L=I+(N<<11&4294967295|N>>>21),N=V+(L^I^k)+M[11]+1839030562&4294967295,V=L+(N<<16&4294967295|N>>>16),N=k+(V^L^I)+M[14]+4259657740&4294967295,k=V+(N<<23&4294967295|N>>>9),N=I+(k^V^L)+M[1]+2763975236&4294967295,I=k+(N<<4&4294967295|N>>>28),N=L+(I^k^V)+M[4]+1272893353&4294967295,L=I+(N<<11&4294967295|N>>>21),N=V+(L^I^k)+M[7]+4139469664&4294967295,V=L+(N<<16&4294967295|N>>>16),N=k+(V^L^I)+M[10]+3200236656&4294967295,k=V+(N<<23&4294967295|N>>>9),N=I+(k^V^L)+M[13]+681279174&4294967295,I=k+(N<<4&4294967295|N>>>28),N=L+(I^k^V)+M[0]+3936430074&4294967295,L=I+(N<<11&4294967295|N>>>21),N=V+(L^I^k)+M[3]+3572445317&4294967295,V=L+(N<<16&4294967295|N>>>16),N=k+(V^L^I)+M[6]+76029189&4294967295,k=V+(N<<23&4294967295|N>>>9),N=I+(k^V^L)+M[9]+3654602809&4294967295,I=k+(N<<4&4294967295|N>>>28),N=L+(I^k^V)+M[12]+3873151461&4294967295,L=I+(N<<11&4294967295|N>>>21),N=V+(L^I^k)+M[15]+530742520&4294967295,V=L+(N<<16&4294967295|N>>>16),N=k+(V^L^I)+M[2]+3299628645&4294967295,k=V+(N<<23&4294967295|N>>>9),N=I+(V^(k|~L))+M[0]+4096336452&4294967295,I=k+(N<<6&4294967295|N>>>26),N=L+(k^(I|~V))+M[7]+1126891415&4294967295,L=I+(N<<10&4294967295|N>>>22),N=V+(I^(L|~k))+M[14]+2878612391&4294967295,V=L+(N<<15&4294967295|N>>>17),N=k+(L^(V|~I))+M[5]+4237533241&4294967295,k=V+(N<<21&4294967295|N>>>11),N=I+(V^(k|~L))+M[12]+1700485571&4294967295,I=k+(N<<6&4294967295|N>>>26),N=L+(k^(I|~V))+M[3]+2399980690&4294967295,L=I+(N<<10&4294967295|N>>>22),N=V+(I^(L|~k))+M[10]+4293915773&4294967295,V=L+(N<<15&4294967295|N>>>17),N=k+(L^(V|~I))+M[1]+2240044497&4294967295,k=V+(N<<21&4294967295|N>>>11),N=I+(V^(k|~L))+M[8]+1873313359&4294967295,I=k+(N<<6&4294967295|N>>>26),N=L+(k^(I|~V))+M[15]+4264355552&4294967295,L=I+(N<<10&4294967295|N>>>22),N=V+(I^(L|~k))+M[6]+2734768916&4294967295,V=L+(N<<15&4294967295|N>>>17),N=k+(L^(V|~I))+M[13]+1309151649&4294967295,k=V+(N<<21&4294967295|N>>>11),N=I+(V^(k|~L))+M[4]+4149444226&4294967295,I=k+(N<<6&4294967295|N>>>26),N=L+(k^(I|~V))+M[11]+3174756917&4294967295,L=I+(N<<10&4294967295|N>>>22),N=V+(I^(L|~k))+M[2]+718787259&4294967295,V=L+(N<<15&4294967295|N>>>17),N=k+(L^(V|~I))+M[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(V+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+V&4294967295,P.g[3]=P.g[3]+L&4294967295}r.prototype.v=function(P,I){I===void 0&&(I=P.length);const k=I-this.blockSize,M=this.C;let V=this.h,L=0;for(;L<I;){if(V==0)for(;L<=k;)s(this,P,L),L+=this.blockSize;if(typeof P=="string"){for(;L<I;)if(M[V++]=P.charCodeAt(L++),V==this.blockSize){s(this,M),V=0;break}}else for(;L<I;)if(M[V++]=P[L++],V==this.blockSize){s(this,M),V=0;break}}this.h=V,this.o+=I},r.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;I=this.o*8;for(var k=P.length-8;k<P.length;++k)P[k]=I&255,I/=256;for(this.v(P),P=Array(16),I=0,k=0;k<4;++k)for(let M=0;M<32;M+=8)P[I++]=this.g[k]>>>M&255;return P};function i(P,I){var k=u;return Object.prototype.hasOwnProperty.call(k,P)?k[P]:k[P]=I(P)}function c(P,I){this.h=I;const k=[];let M=!0;for(let V=P.length-1;V>=0;V--){const L=P[V]|0;M&&L==I||(k[V]=L,M=!1)}this.g=k}var u={};function d(P){return-128<=P&&P<128?i(P,function(I){return new c([I|0],I<0?-1:0)}):new c([P|0],P<0?-1:0)}function p(P){if(isNaN(P)||!isFinite(P))return m;if(P<0)return A(p(-P));const I=[];let k=1;for(let M=0;P>=k;M++)I[M]=P/k|0,k*=4294967296;return new c(I,0)}function g(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return A(g(P.substring(1),I));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=p(Math.pow(I,8));let M=m;for(let L=0;L<P.length;L+=8){var V=Math.min(8,P.length-L);const N=parseInt(P.substring(L,L+V),I);V<8?(V=p(Math.pow(I,V)),M=M.j(V).add(p(N))):(M=M.j(k),M=M.add(p(N)))}return M}var m=d(0),w=d(1),S=d(16777216);n=c.prototype,n.m=function(){if(C(this))return-A(this).m();let P=0,I=1;for(let k=0;k<this.g.length;k++){const M=this.i(k);P+=(M>=0?M:4294967296+M)*I,I*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(R(this))return"0";if(C(this))return"-"+A(this).toString(P);const I=p(Math.pow(P,6));var k=this;let M="";for(;;){const V=q(k,I).g;k=O(k,V.j(I));let L=((k.g.length>0?k.g[0]:k.h)>>>0).toString(P);if(k=V,R(k))return L+M;for(;L.length<6;)L="0"+L;M=L+M}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function R(P){if(P.h!=0)return!1;for(let I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function C(P){return P.h==-1}n.l=function(P){return P=O(this,P),C(P)?-1:R(P)?0:1};function A(P){const I=P.g.length,k=[];for(let M=0;M<I;M++)k[M]=~P.g[M];return new c(k,~P.h).add(w)}n.abs=function(){return C(this)?A(this):this},n.add=function(P){const I=Math.max(this.g.length,P.g.length),k=[];let M=0;for(let V=0;V<=I;V++){let L=M+(this.i(V)&65535)+(P.i(V)&65535),N=(L>>>16)+(this.i(V)>>>16)+(P.i(V)>>>16);M=N>>>16,L&=65535,N&=65535,k[V]=N<<16|L}return new c(k,k[k.length-1]&-2147483648?-1:0)};function O(P,I){return P.add(A(I))}n.j=function(P){if(R(this)||R(P))return m;if(C(this))return C(P)?A(this).j(A(P)):A(A(this).j(P));if(C(P))return A(this.j(A(P)));if(this.l(S)<0&&P.l(S)<0)return p(this.m()*P.m());const I=this.g.length+P.g.length,k=[];for(var M=0;M<2*I;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<P.g.length;V++){const L=this.i(M)>>>16,N=this.i(M)&65535,ue=P.i(V)>>>16,Me=P.i(V)&65535;k[2*M+2*V]+=N*Me,U(k,2*M+2*V),k[2*M+2*V+1]+=L*Me,U(k,2*M+2*V+1),k[2*M+2*V+1]+=N*ue,U(k,2*M+2*V+1),k[2*M+2*V+2]+=L*ue,U(k,2*M+2*V+2)}for(P=0;P<I;P++)k[P]=k[2*P+1]<<16|k[2*P];for(P=I;P<2*I;P++)k[P]=0;return new c(k,0)};function U(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function z(P,I){this.g=P,this.h=I}function q(P,I){if(R(I))throw Error("division by zero");if(R(P))return new z(m,m);if(C(P))return I=q(A(P),I),new z(A(I.g),A(I.h));if(C(I))return I=q(P,A(I)),new z(A(I.g),I.h);if(P.g.length>30){if(C(P)||C(I))throw Error("slowDivide_ only works with positive integers.");for(var k=w,M=I;M.l(P)<=0;)k=W(k),M=W(M);var V=X(k,1),L=X(M,1);for(M=X(M,2),k=X(k,2);!R(M);){var N=L.add(M);N.l(P)<=0&&(V=V.add(k),L=N),M=X(M,1),k=X(k,1)}return I=O(P,V.j(I)),new z(V,I)}for(V=m;P.l(I)>=0;){for(k=Math.max(1,Math.floor(P.m()/I.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),L=p(k),N=L.j(I);C(N)||N.l(P)>0;)k-=M,L=p(k),N=L.j(I);R(L)&&(L=w),V=V.add(L),P=O(P,N)}return new z(V,P)}n.B=function(P){return q(this,P).h},n.and=function(P){const I=Math.max(this.g.length,P.g.length),k=[];for(let M=0;M<I;M++)k[M]=this.i(M)&P.i(M);return new c(k,this.h&P.h)},n.or=function(P){const I=Math.max(this.g.length,P.g.length),k=[];for(let M=0;M<I;M++)k[M]=this.i(M)|P.i(M);return new c(k,this.h|P.h)},n.xor=function(P){const I=Math.max(this.g.length,P.g.length),k=[];for(let M=0;M<I;M++)k[M]=this.i(M)^P.i(M);return new c(k,this.h^P.h)};function W(P){const I=P.g.length+1,k=[];for(let M=0;M<I;M++)k[M]=P.i(M)<<1|P.i(M-1)>>>31;return new c(k,P.h)}function X(P,I){const k=I>>5;I%=32;const M=P.g.length-k,V=[];for(let L=0;L<M;L++)V[L]=I>0?P.i(L+k)>>>I|P.i(L+k+1)<<32-I:P.i(L+k);return new c(V,P.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,DA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=g,Ei=c}).apply(typeof Lx<"u"?Lx:typeof self<"u"?self:typeof window<"u"?window:{});var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OA,Ou,MA,Nf,gv,VA,LA,FA;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof hf=="object"&&hf];for(var E=0;E<h.length;++E){var x=h[E];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function s(h,E){if(E)e:{var x=r;h=h.split(".");for(var D=0;D<h.length-1;D++){var Z=h[D];if(!(Z in x))break e;x=x[Z]}h=h[h.length-1],D=x[h],E=E(D),E!=D&&E!=null&&e(x,h,{configurable:!0,writable:!0,value:E})}}s("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(h){return h||function(E){var x=[],D;for(D in E)Object.prototype.hasOwnProperty.call(E,D)&&x.push([D,E[D]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},c=this||self;function u(h){var E=typeof h;return E=="object"&&h!=null||E=="function"}function d(h,E,x){return h.call.apply(h.bind,arguments)}function p(h,E,x){return p=d,p.apply(null,arguments)}function g(h,E){var x=Array.prototype.slice.call(arguments,1);return function(){var D=x.slice();return D.push.apply(D,arguments),h.apply(this,D)}}function m(h,E){function x(){}x.prototype=E.prototype,h.Z=E.prototype,h.prototype=new x,h.prototype.constructor=h,h.Ob=function(D,Z,te){for(var Ee=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)Ee[Ye-2]=arguments[Ye];return E.prototype[Z].apply(D,Ee)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function S(h){const E=h.length;if(E>0){const x=Array(E);for(let D=0;D<E;D++)x[D]=h[D];return x}return[]}function R(h,E){for(let D=1;D<arguments.length;D++){const Z=arguments[D];var x=typeof Z;if(x=x!="object"?x:Z?Array.isArray(Z)?"array":x:"null",x=="array"||x=="object"&&typeof Z.length=="number"){x=h.length||0;const te=Z.length||0;h.length=x+te;for(let Ee=0;Ee<te;Ee++)h[x+Ee]=Z[Ee]}else h.push(Z)}}class C{constructor(E,x){this.i=E,this.j=x,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function A(h){c.setTimeout(()=>{throw h},0)}function O(){var h=P;let E=null;return h.g&&(E=h.g,h.g=h.g.next,h.g||(h.h=null),E.next=null),E}class U{constructor(){this.h=this.g=null}add(E,x){const D=z.get();D.set(E,x),this.h?this.h.next=D:this.g=D,this.h=D}}var z=new C(()=>new q,h=>h.reset());class q{constructor(){this.next=this.g=this.h=null}set(E,x){this.h=E,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let W,X=!1,P=new U,I=()=>{const h=Promise.resolve(void 0);W=()=>{h.then(k)}};function k(){for(var h;h=O();){try{h.h.call(h.g)}catch(x){A(x)}var E=z;E.j(h),E.h<100&&(E.h++,h.next=E.g,E.g=h)}X=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,E){this.type=h,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,E=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const x=()=>{};c.addEventListener("test",x,E),c.removeEventListener("test",x,E)}catch{}return h})();function N(h){return/^[\s\xa0]*$/.test(h)}function ue(h,E){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,E)}m(ue,V),ue.prototype.init=function(h,E){const x=this.type=h.type,D=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=E,E=h.relatedTarget,E||(x=="mouseover"?E=h.fromElement:x=="mouseout"&&(E=h.toElement)),this.relatedTarget=E,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&ue.Z.h.call(this)},ue.prototype.h=function(){ue.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Me="closure_listenable_"+(Math.random()*1e6|0),pe=0;function ye(h,E,x,D,Z){this.listener=h,this.proxy=null,this.src=E,this.type=x,this.capture=!!D,this.ha=Z,this.key=++pe,this.da=this.fa=!1}function H(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function re(h,E,x){for(const D in h)E.call(x,h[D],D,h)}function ae(h,E){for(const x in h)E.call(void 0,h[x],x,h)}function F(h){const E={};for(const x in h)E[x]=h[x];return E}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(h,E){let x,D;for(let Z=1;Z<arguments.length;Z++){D=arguments[Z];for(x in D)h[x]=D[x];for(let te=0;te<Q.length;te++)x=Q[te],Object.prototype.hasOwnProperty.call(D,x)&&(h[x]=D[x])}}function le(h){this.src=h,this.g={},this.h=0}le.prototype.add=function(h,E,x,D,Z){const te=h.toString();h=this.g[te],h||(h=this.g[te]=[],this.h++);const Ee=be(h,E,D,Z);return Ee>-1?(E=h[Ee],x||(E.fa=!1)):(E=new ye(E,this.src,te,!!D,Z),E.fa=x,h.push(E)),E};function ve(h,E){const x=E.type;if(x in h.g){var D=h.g[x],Z=Array.prototype.indexOf.call(D,E,void 0),te;(te=Z>=0)&&Array.prototype.splice.call(D,Z,1),te&&(H(E),h.g[x].length==0&&(delete h.g[x],h.h--))}}function be(h,E,x,D){for(let Z=0;Z<h.length;++Z){const te=h[Z];if(!te.da&&te.listener==E&&te.capture==!!x&&te.ha==D)return Z}return-1}var _e="closure_lm_"+(Math.random()*1e6|0),Ie={};function Ge(h,E,x,D,Z){if(Array.isArray(E)){for(let te=0;te<E.length;te++)Ge(h,E[te],x,D,Z);return null}return x=Po(x),h&&h[Me]?h.J(E,x,u(D)?!!D.capture:!1,Z):ft(h,E,x,!1,D,Z)}function ft(h,E,x,D,Z,te){if(!E)throw Error("Invalid event type");const Ee=u(Z)?!!Z.capture:!!Z;let Ye=Qs(h);if(Ye||(h[_e]=Ye=new le(h)),x=Ye.add(E,x,D,Ee,te),x.proxy)return x;if(D=ct(),x.proxy=D,D.src=h,D.listener=x,h.addEventListener)L||(Z=Ee),Z===void 0&&(Z=!1),h.addEventListener(E.toString(),D,Z);else if(h.attachEvent)h.attachEvent(ar(E.toString()),D);else if(h.addListener&&h.removeListener)h.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return x}function ct(){function h(x){return E.call(h.src,h.listener,x)}const E=Ya;return h}function me(h,E,x,D,Z){if(Array.isArray(E))for(var te=0;te<E.length;te++)me(h,E[te],x,D,Z);else D=u(D)?!!D.capture:!!D,x=Po(x),h&&h[Me]?(h=h.i,te=String(E).toString(),te in h.g&&(E=h.g[te],x=be(E,x,D,Z),x>-1&&(H(E[x]),Array.prototype.splice.call(E,x,1),E.length==0&&(delete h.g[te],h.h--)))):h&&(h=Qs(h))&&(E=h.g[E.toString()],h=-1,E&&(h=be(E,x,D,Z)),(x=h>-1?E[h]:null)&&Vt(x))}function Vt(h){if(typeof h!="number"&&h&&!h.da){var E=h.src;if(E&&E[Me])ve(E.i,h);else{var x=h.type,D=h.proxy;E.removeEventListener?E.removeEventListener(x,D,h.capture):E.detachEvent?E.detachEvent(ar(x),D):E.addListener&&E.removeListener&&E.removeListener(D),(x=Qs(E))?(ve(x,h),x.h==0&&(x.src=null,E[_e]=null)):H(h)}}}function ar(h){return h in Ie?Ie[h]:Ie[h]="on"+h}function Ya(h,E){if(h.da)h=!0;else{E=new ue(E,this);const x=h.listener,D=h.ha||h.src;h.fa&&Vt(h),h=x.call(D,E)}return h}function Qs(h){return h=h[_e],h instanceof le?h:null}var cr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Po(h){return typeof h=="function"?h:(h[cr]||(h[cr]=function(E){return h.handleEvent(E)}),h[cr])}function _t(){M.call(this),this.i=new le(this),this.M=this,this.G=null}m(_t,M),_t.prototype[Me]=!0,_t.prototype.removeEventListener=function(h,E,x,D){me(this,h,E,x,D)};function Lt(h,E){var x,D=h.G;if(D)for(x=[];D;D=D.G)x.push(D);if(h=h.M,D=E.type||E,typeof E=="string")E=new V(E,h);else if(E instanceof V)E.target=E.target||h;else{var Z=E;E=new V(D,h),ee(E,Z)}Z=!0;let te,Ee;if(x)for(Ee=x.length-1;Ee>=0;Ee--)te=E.g=x[Ee],Z=lr(te,D,!0,E)&&Z;if(te=E.g=h,Z=lr(te,D,!0,E)&&Z,Z=lr(te,D,!1,E)&&Z,x)for(Ee=0;Ee<x.length;Ee++)te=E.g=x[Ee],Z=lr(te,D,!1,E)&&Z}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var h=this.i;for(const E in h.g){const x=h.g[E];for(let D=0;D<x.length;D++)H(x[D]);delete h.g[E],h.h--}}this.G=null},_t.prototype.J=function(h,E,x,D){return this.i.add(String(h),E,!1,x,D)},_t.prototype.K=function(h,E,x,D){return this.i.add(String(h),E,!0,x,D)};function lr(h,E,x,D){if(E=h.i.g[String(E)],!E)return!0;E=E.concat();let Z=!0;for(let te=0;te<E.length;++te){const Ee=E[te];if(Ee&&!Ee.da&&Ee.capture==x){const Ye=Ee.listener,Kt=Ee.ha||Ee.src;Ee.fa&&ve(h.i,Ee),Z=Ye.call(Kt,D)!==!1&&Z}}return Z&&!D.defaultPrevented}function on(h,E){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(h,E||0)}function Cr(h){h.g=on(()=>{h.g=null,h.i&&(h.i=!1,Cr(h))},h.l);const E=h.h;h.h=null,h.m.apply(null,E)}class Xa extends M{constructor(E,x){super(),this.m=E,this.l=x,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hs(h){M.call(this),this.h=h,this.g={}}m(hs,M);var fs=[];function ko(h){re(h.g,function(E,x){this.g.hasOwnProperty(x)&&Vt(E)},h),h.g={}}hs.prototype.N=function(){hs.Z.N.call(this),ko(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hr=c.JSON.stringify,No=c.JSON.parse,Zn=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Wr(){}function Gr(){}var ps={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Do(){V.call(this,"d")}m(Do,V);function Oo(){V.call(this,"c")}m(Oo,V);var Qn={},Mo=null;function Ar(){return Mo=Mo||new _t}Qn.Ia="serverreachability";function zn(h){V.call(this,Qn.Ia,h)}m(zn,V);function Kr(h){const E=Ar();Lt(E,new zn(E))}Qn.STAT_EVENT="statevent";function Zr(h,E){V.call(this,Qn.STAT_EVENT,h),this.stat=E}m(Zr,V);function At(h){const E=Ar();Lt(E,new Zr(E,h))}Qn.Ja="timingevent";function Vo(h,E){V.call(this,Qn.Ja,h),this.size=E}m(Vo,V);function qe(h,E){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},E)}function St(){this.g=!0}St.prototype.ua=function(){this.g=!1};function Gt(h,E,x,D,Z,te){h.info(function(){if(h.g)if(te){var Ee="",Ye=te.split("&");for(let wt=0;wt<Ye.length;wt++){var Kt=Ye[wt].split("=");if(Kt.length>1){const Jt=Kt[0];Kt=Kt[1];const gr=Jt.split("_");Ee=gr.length>=2&&gr[1]=="type"?Ee+(Jt+"="+Kt+"&"):Ee+(Jt+"=redacted&")}}}else Ee=null;else Ee=te;return"XMLHTTP REQ ("+D+") [attempt "+Z+"]: "+E+`
`+x+`
`+Ee})}function pn(h,E,x,D,Z,te,Ee){h.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Z+"]: "+E+`
`+x+`
`+te+" "+Ee})}function $n(h,E,x,D){h.info(function(){return"XMLHTTP TEXT ("+E+"): "+Yt(h,x)+(D?" "+D:"")})}function $t(h,E){h.info(function(){return"TIMEOUT: "+E})}St.prototype.info=function(){};function Yt(h,E){if(!h.g)return E;if(!E)return null;try{const te=JSON.parse(E);if(te){for(h=0;h<te.length;h++)if(Array.isArray(te[h])){var x=te[h];if(!(x.length<2)){var D=x[1];if(Array.isArray(D)&&!(D.length<1)){var Z=D[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(let Ee=1;Ee<D.length;Ee++)D[Ee]=""}}}}return Hr(te)}catch{return E}}var ur={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xt={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},An;function Rr(){}m(Rr,Wr),Rr.prototype.g=function(){return new XMLHttpRequest},An=new Rr;function mn(h){return encodeURIComponent(String(h))}function Fi(h){var E=1;h=h.split(":");const x=[];for(;E>0&&h.length;)x.push(h.shift()),E--;return h.length&&x.push(h.join(":")),x}function Pr(h,E,x,D){this.j=h,this.i=E,this.l=x,this.S=D||1,this.V=new hs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Gd}function Gd(){this.i=null,this.g="",this.h=!1}var Kd={},Ll={};function Qr(h,E,x){h.M=1,h.A=Xs(kr(E)),h.u=x,h.R=!0,Fl(h,null)}function Fl(h,E){h.F=Date.now(),ji(h),h.B=kr(h.A);var x=h.B,D=h.S;Array.isArray(D)||(D=[String(D)]),Kl(x.i,"t",D),h.C=0,x=h.j.L,h.h=new Gd,h.g=sh(h.j,x?E:null,!h.u),h.P>0&&(h.O=new Xa(p(h.Y,h,h.g),h.P)),E=h.V,x=h.g,D=h.ba;var Z="readystatechange";Array.isArray(Z)||(Z&&(fs[0]=Z.toString()),Z=fs);for(let te=0;te<Z.length;te++){const Ee=Ge(x,Z[te],D||E.handleEvent,!1,E.h||E);if(!Ee)break;E.g[Ee.key]=Ee}E=h.J?F(h.J):{},h.u?(h.v||(h.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,E)):(h.v="GET",h.g.ea(h.B,h.v,null,E)),Kr(),Gt(h.i,h.v,h.B,h.l,h.S,h.u)}Pr.prototype.ba=function(h){h=h.target;const E=this.O;E&&Es(h)==3?E.j():this.Y(h)},Pr.prototype.Y=function(h){try{if(h==this.g)e:{const Ye=Es(this.g),Kt=this.g.ya(),wt=this.g.ca();if(!(Ye<3)&&(Ye!=3||this.g&&(this.h.h||this.g.la()||nh(this.g)))){this.K||Ye!=4||Kt==7||(Kt==8||wt<=0?Kr(3):Kr(2)),Ja(this);var E=this.g.ca();this.X=E;var x=Zd(this);if(this.o=E==200,pn(this.i,this.v,this.B,this.l,this.S,Ye,E),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Z=this.g;if((D=Z.g?Z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(D)){var te=D;break t}}te=null}if(h=te)$n(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Rt(this,h);else{this.o=!1,this.m=3,At(12),Ys(this),Ui(this);break e}}if(this.R){h=!0;let Jt;for(;!this.K&&this.C<x.length;)if(Jt=Yd(this,x),Jt==Ll){Ye==4&&(this.m=4,At(14),h=!1),$n(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==Kd){this.m=4,At(15),$n(this.i,this.l,x,"[Invalid Chunk]"),h=!1;break}else $n(this.i,this.l,Jt,null),Rt(this,Jt);if(Qd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||x.length!=0||this.h.h||(this.m=1,At(16),h=!1),this.o=this.o&&h,!h)$n(this.i,this.l,x,"[Invalid Chunked Response]"),Ys(this),Ui(this);else if(x.length>0&&!this.W){this.W=!0;var Ee=this.j;Ee.g==this&&Ee.aa&&!Ee.P&&(Ee.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Zi(Ee),Ee.P=!0,At(11))}}else $n(this.i,this.l,x,null),Rt(this,x);Ye==4&&Ys(this),this.o&&!this.K&&(Ye==4?lc(this.j,this):(this.o=!1,ji(this)))}else Ql(this.g),E==400&&x.indexOf("Unknown SID")>0?(this.m=3,At(12)):(this.m=0,At(13)),Ys(this),Ui(this)}}}catch{}finally{}};function Zd(h){if(!Qd(h))return h.g.la();const E=nh(h.g);if(E==="")return"";let x="";const D=E.length,Z=Es(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return Ys(h),Ui(h),"";h.h.i=new c.TextDecoder}for(let te=0;te<D;te++)h.h.h=!0,x+=h.h.i.decode(E[te],{stream:!(Z&&te==D-1)});return E.length=0,h.h.g+=x,h.C=0,h.h.g}function Qd(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Yd(h,E){var x=h.C,D=E.indexOf(`
`,x);return D==-1?Ll:(x=Number(E.substring(x,D)),isNaN(x)?Kd:(D+=1,D+x>E.length?Ll:(E=E.slice(D,D+x),h.C=D+x,E)))}Pr.prototype.cancel=function(){this.K=!0,Ys(this)};function ji(h){h.T=Date.now()+h.H,jl(h,h.H)}function jl(h,E){if(h.D!=null)throw Error("WatchDog timer not null");h.D=qe(p(h.aa,h),E)}function Ja(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Pr.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?($t(this.i,this.B),this.M!=2&&(Kr(),At(17)),Ys(this),this.m=2,Ui(this)):jl(this,this.T-h)};function Ui(h){h.j.I==0||h.K||lc(h.j,h)}function Ys(h){Ja(h);var E=h.O;E&&typeof E.dispose=="function"&&E.dispose(),h.O=null,ko(h.V),h.g&&(E=h.g,h.g=null,E.abort(),E.dispose())}function Rt(h,E){try{var x=h.j;if(x.I!=0&&(x.g==h||zl(x.h,h))){if(!h.L&&zl(x.h,h)&&x.I==3){try{var D=x.Ba.g.parse(E)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Z=D;if(Z[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<h.F)cc(x),pr(x);else break e;Ss(x),At(18)}}else x.xa=Z[1],0<x.xa-x.K&&Z[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=qe(p(x.Va,x),6e3));zi(x.h)<=1&&x.ta&&(x.ta=void 0)}else mr(x,11)}else if((h.L||x.g==h)&&cc(x),!N(E))for(Z=x.Ba.g.parse(E),E=0;E<Z.length;E++){let wt=Z[E];const Jt=wt[0];if(!(Jt<=x.K))if(x.K=Jt,wt=wt[1],x.I==2)if(wt[0]=="c"){x.M=wt[1],x.ba=wt[2];const gr=wt[3];gr!=null&&(x.ka=gr,x.j.info("VER="+x.ka));const ro=wt[4];ro!=null&&(x.za=ro,x.j.info("SVER="+x.za));const Is=wt[5];Is!=null&&typeof Is=="number"&&Is>0&&(D=1.5*Is,x.O=D,x.j.info("backChannelRequestTimeoutMs_="+D)),D=x;const Ts=h.g;if(Ts){const hc=Ts.g?Ts.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hc){var te=D.h;te.g||hc.indexOf("spdy")==-1&&hc.indexOf("quic")==-1&&hc.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(tc(te,te.h),te.h=null))}if(D.G){const Jl=Ts.g?Ts.g.getResponseHeader("X-HTTP-Session-Id"):null;Jl&&(D.wa=Jl,gt(D.J,D.G,Jl))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-h.F,x.j.info("Handshake RTT: "+x.T+"ms")),D=x;var Ee=h;if(D.na=Xl(D,D.L?D.ba:null,D.W),Ee.L){$i(D.h,Ee);var Ye=Ee,Kt=D.O;Kt&&(Ye.H=Kt),Ye.D&&(Ja(Ye),ji(Ye)),D.g=Ee}else Rn(D);x.i.length>0&&no(x)}else wt[0]!="stop"&&wt[0]!="close"||mr(x,7);else x.I==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?mr(x,7):ic(x):wt[0]!="noop"&&x.l&&x.l.qa(wt),x.A=0)}}Kr(4)}catch{}}var Om=class{constructor(h,E){this.g=h,this.map=E}};function ec(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ul(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function zi(h){return h.h?1:h.g?h.g.size:0}function zl(h,E){return h.h?h.h==E:h.g?h.g.has(E):!1}function tc(h,E){h.g?h.g.add(E):h.h=E}function $i(h,E){h.h&&h.h==E?h.h=null:h.g&&h.g.has(E)&&h.g.delete(E)}ec.prototype.cancel=function(){if(this.i=dr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function dr(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let E=h.i;for(const x of h.g.values())E=E.concat(x.G);return E}return S(h.i)}var Xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hr(h,E){if(h){h=h.split("&");for(let x=0;x<h.length;x++){const D=h[x].indexOf("=");let Z,te=null;D>=0?(Z=h[x].substring(0,D),te=h[x].substring(D+1)):Z=h[x],E(Z,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function ms(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;h instanceof ms?(this.l=h.l,Bi(this,h.j),this.o=h.o,this.g=h.g,gs(this,h.u),this.h=h.h,Lo(this,Zl(h.i)),this.m=h.m):h&&(E=String(h).match(Xd))?(this.l=!1,Bi(this,E[1]||"",!0),this.o=qi(E[2]||""),this.g=qi(E[3]||"",!0),gs(this,E[4]),this.h=qi(E[5]||"",!0),Lo(this,E[6]||"",!0),this.m=qi(E[7]||"")):(this.l=!1,this.i=new at(null,this.l))}ms.prototype.toString=function(){const h=[];var E=this.j;E&&h.push(Hi(E,Bl,!0),":");var x=this.g;return(x||E=="file")&&(h.push("//"),(E=this.o)&&h.push(Hi(E,Bl,!0),"@"),h.push(mn(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&h.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&h.push("/"),h.push(Hi(x,x.charAt(0)=="/"?Wi:ql,!0))),(x=this.i.toString())&&h.push("?",x),(x=this.m)&&h.push("#",Hi(x,Hl)),h.join("")},ms.prototype.resolve=function(h){const E=kr(this);let x=!!h.j;x?Bi(E,h.j):x=!!h.o,x?E.o=h.o:x=!!h.g,x?E.g=h.g:x=h.u!=null;var D=h.h;if(x)gs(E,h.u);else if(x=!!h.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Z=E.h.lastIndexOf("/");Z!=-1&&(D=E.h.slice(0,Z+1)+D)}if(Z=D,Z==".."||Z==".")D="";else if(Z.indexOf("./")!=-1||Z.indexOf("/.")!=-1){D=Z.lastIndexOf("/",0)==0,Z=Z.split("/");const te=[];for(let Ee=0;Ee<Z.length;){const Ye=Z[Ee++];Ye=="."?D&&Ee==Z.length&&te.push(""):Ye==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),D&&Ee==Z.length&&te.push("")):(te.push(Ye),D=!0)}D=te.join("/")}else D=Z}return x?E.h=D:x=h.i.toString()!=="",x?Lo(E,Zl(h.i)):x=!!h.m,x&&(E.m=h.m),E};function kr(h){return new ms(h)}function Bi(h,E,x){h.j=x?qi(E,!0):E,h.j&&(h.j=h.j.replace(/:$/,""))}function gs(h,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);h.u=E}else h.u=null}function Lo(h,E,x){E instanceof at?(h.i=E,rc(h.i,h.l)):(x||(E=Hi(E,Mm)),h.i=new at(E,h.l))}function gt(h,E,x){h.i.set(E,x)}function Xs(h){return gt(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function qi(h,E){return h?E?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Hi(h,E,x){return typeof h=="string"?(h=encodeURI(h).replace(E,$l),x&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $l(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Bl=/[#\/\?@]/g,ql=/[#\?:]/g,Wi=/[#\?]/g,Mm=/[#\?@]/g,Hl=/#/g;function at(h,E){this.h=this.g=null,this.i=h||null,this.j=!!E}function ys(h){h.g||(h.g=new Map,h.h=0,h.i&&hr(h.i,function(E,x){h.add(decodeURIComponent(E.replace(/\+/g," ")),x)}))}n=at.prototype,n.add=function(h,E){ys(this),this.i=null,h=vs(this,h);let x=this.g.get(h);return x||this.g.set(h,x=[]),x.push(E),this.h+=1,this};function Wl(h,E){ys(h),E=vs(h,E),h.g.has(E)&&(h.i=null,h.h-=h.g.get(E).length,h.g.delete(E))}function nc(h,E){return ys(h),E=vs(h,E),h.g.has(E)}n.forEach=function(h,E){ys(this),this.g.forEach(function(x,D){x.forEach(function(Z){h.call(E,Z,D,this)},this)},this)};function Gl(h,E){ys(h);let x=[];if(typeof E=="string")nc(h,E)&&(x=x.concat(h.g.get(vs(h,E))));else for(h=Array.from(h.g.values()),E=0;E<h.length;E++)x=x.concat(h[E]);return x}n.set=function(h,E){return ys(this),this.i=null,h=vs(this,h),nc(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[E]),this.h+=1,this},n.get=function(h,E){return h?(h=Gl(this,h),h.length>0?String(h[0]):E):E};function Kl(h,E,x){Wl(h,E),x.length>0&&(h.i=null,h.g.set(vs(h,E),S(x)),h.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],E=Array.from(this.g.keys());for(let D=0;D<E.length;D++){var x=E[D];const Z=mn(x);x=Gl(this,x);for(let te=0;te<x.length;te++){let Ee=Z;x[te]!==""&&(Ee+="="+mn(x[te])),h.push(Ee)}}return this.i=h.join("&")};function Zl(h){const E=new at;return E.i=h.i,h.g&&(E.g=new Map(h.g),E.h=h.h),E}function vs(h,E){return E=String(E),h.j&&(E=E.toLowerCase()),E}function rc(h,E){E&&!h.j&&(ys(h),h.i=null,h.g.forEach(function(x,D){const Z=D.toLowerCase();D!=Z&&(Wl(this,D),Kl(this,Z,x))},h)),h.j=E}function _s(h,E){const x=new St;if(c.Image){const D=new Image;D.onload=g(En,x,"TestLoadImage: loaded",!0,E,D),D.onerror=g(En,x,"TestLoadImage: error",!1,E,D),D.onabort=g(En,x,"TestLoadImage: abort",!1,E,D),D.ontimeout=g(En,x,"TestLoadImage: timeout",!1,E,D),c.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=h}else E(!1)}function ws(h,E){const x=new St,D=new AbortController,Z=setTimeout(()=>{D.abort(),En(x,"TestPingServer: timeout",!1,E)},1e4);fetch(h,{signal:D.signal}).then(te=>{clearTimeout(Z),te.ok?En(x,"TestPingServer: ok",!0,E):En(x,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(Z),En(x,"TestPingServer: error",!1,E)})}function En(h,E,x,D,Z){try{Z&&(Z.onload=null,Z.onerror=null,Z.onabort=null,Z.ontimeout=null),D(x)}catch{}}function Gi(){this.g=new Zn}function Js(h){this.i=h.Sb||null,this.h=h.ab||!1}m(Js,Wr),Js.prototype.g=function(){return new fr(this.i,this.h)};function fr(h,E){_t.call(this),this.H=h,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(fr,_t),n=fr.prototype,n.open=function(h,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=E,this.readyState=1,Yr(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(E.body=h),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fo(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Yr(this)),this.g&&(this.readyState=3,Yr(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Jd(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Jd(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var E=h.value?h.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!h.done}))&&(this.response=this.responseText+=E)}h.done?Fo(this):Yr(this),this.readyState==3&&Jd(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,Fo(this))},n.Na=function(h){this.g&&(this.response=h,Fo(this))},n.ga=function(){this.g&&Fo(this)};function Fo(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Yr(h)}n.setRequestHeader=function(h,E){this.A.append(h,E)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],E=this.h.entries();for(var x=E.next();!x.done;)x=x.value,h.push(x[0]+": "+x[1]),x=E.next();return h.join(`\r
`)};function Yr(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(fr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function eh(h){let E="";return re(h,function(x,D){E+=D,E+=":",E+=x,E+=`\r
`}),E}function sc(h,E,x){e:{for(D in x){var D=!1;break e}D=!0}D||(x=eh(x),typeof h=="string"?x!=null&&mn(x):gt(h,E,x))}function It(h){_t.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(It,_t);var th=/^https?$/i,Vm=["POST","PUT"];n=It.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,E,x,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);E=E?E.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():An.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(E,String(h),!0),this.B=!1}catch(te){jo(this,te);return}if(h=x||"",x=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Z in D)x.set(Z,D[Z]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())x.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(x.keys()).find(te=>te.toLowerCase()=="content-type"),Z=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Vm,E,void 0)>=0)||D||Z||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,Ee]of x)this.g.setRequestHeader(te,Ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(te){jo(this,te)}};function jo(h,E){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=E,h.o=5,Uo(h),to(h)}function Uo(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Lt(this,"complete"),Lt(this,"abort"),to(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),to(this,!0)),It.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?eo(this):this.Xa())},n.Xa=function(){eo(this)};function eo(h){if(h.h&&typeof i<"u"){if(h.v&&Es(h)==4)setTimeout(h.Ca.bind(h),0);else if(Lt(h,"readystatechange"),Es(h)==4){h.h=!1;try{const te=h.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var x;if(!(x=E)){var D;if(D=te===0){let Ee=String(h.D).match(Xd)[1]||null;!Ee&&c.self&&c.self.location&&(Ee=c.self.location.protocol.slice(0,-1)),D=!th.test(Ee?Ee.toLowerCase():"")}x=D}if(x)Lt(h,"complete"),Lt(h,"success");else{h.o=6;try{var Z=Es(h)>2?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.ca()+"]",Uo(h)}}finally{to(h)}}}}function to(h,E){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const x=h.g;h.g=null,E||Lt(h,"ready");try{x.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Es(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Es(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var E=this.g.responseText;return h&&E.indexOf(h)==0&&(E=E.substring(h.length)),No(E)}};function nh(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ql(h){const E={};h=(h.g&&Es(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<h.length;D++){if(N(h[D]))continue;var x=Fi(h[D]);const Z=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const te=E[Z]||[];E[Z]=te,te.push(x)}ae(E,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(h,E,x){return x&&x.internalChannelParams&&x.internalChannelParams[h]||E}function oc(h){this.za=0,this.i=[],this.j=new St,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bs("baseRetryDelayMs",5e3,h),this.Za=bs("retryDelaySeedMs",1e4,h),this.Ta=bs("forwardChannelMaxRetries",2,h),this.va=bs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ec(h&&h.concurrentRequestLimit),this.Ba=new Gi,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=oc.prototype,n.ka=8,n.I=1,n.connect=function(h,E,x,D){At(0),this.W=h,this.H=E||{},x&&D!==void 0&&(this.H.OSID=x,this.H.OAID=D),this.F=this.X,this.J=Xl(this,null,this.W),no(this)};function ic(h){if(ac(h),h.I==3){var E=h.V++,x=kr(h.J);if(gt(x,"SID",h.M),gt(x,"RID",E),gt(x,"TYPE","terminate"),xs(h,x),E=new Pr(h,h.j,E),E.M=2,E.A=Xs(kr(x)),x=!1,c.navigator&&c.navigator.sendBeacon)try{x=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!x&&c.Image&&(new Image().src=E.A,x=!0),x||(E.g=sh(E.j,null),E.g.ea(E.A)),E.F=Date.now(),ji(E)}Qi(h)}function pr(h){h.g&&(Zi(h),h.g.cancel(),h.g=null)}function ac(h){pr(h),h.v&&(c.clearTimeout(h.v),h.v=null),cc(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function no(h){if(!Ul(h.h)&&!h.m){h.m=!0;var E=h.Ea;W||I(),X||(W(),X=!0),P.add(E,h),h.D=0}}function rh(h,E){return zi(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=E.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=qe(p(h.Ea,h,E),uc(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const Z=new Pr(this,this.j,h);let te=this.o;if(this.U&&(te?(te=F(te),ee(te,this.U)):te=this.U),this.u!==null||this.R||(Z.J=te,te=null),this.S)e:{for(var E=0,x=0;x<this.i.length;x++){t:{var D=this.i[x];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(E+=D,E>4096){E=x;break e}if(E===4096||x===this.i.length-1){E=x+1;break e}}E=1e3}else E=1e3;E=Yl(this,Z,E),x=kr(this.J),gt(x,"RID",h),gt(x,"CVER",22),this.G&&gt(x,"X-HTTP-Session-Id",this.G),xs(this,x),te&&(this.R?E="headers="+mn(eh(te))+"&"+E:this.u&&sc(x,this.u,te)),tc(this.h,Z),this.Ra&&gt(x,"TYPE","init"),this.S?(gt(x,"$req",E),gt(x,"SID","null"),Z.U=!0,Qr(Z,x,null)):Qr(Z,x,E),this.I=2}}else this.I==3&&(h?Ki(this,h):this.i.length==0||Ul(this.h)||Ki(this))};function Ki(h,E){var x;E?x=E.l:x=h.V++;const D=kr(h.J);gt(D,"SID",h.M),gt(D,"RID",x),gt(D,"AID",h.K),xs(h,D),h.u&&h.o&&sc(D,h.u,h.o),x=new Pr(h,h.j,x,h.D+1),h.u===null&&(x.J=h.o),E&&(h.i=E.G.concat(h.i)),E=Yl(h,x,1e3),x.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),tc(h.h,x),Qr(x,D,E)}function xs(h,E){h.H&&re(h.H,function(x,D){gt(E,D,x)}),h.l&&re({},function(x,D){gt(E,D,x)})}function Yl(h,E,x){x=Math.min(h.i.length,x);const D=h.l?p(h.l.Ka,h.l,h):null;e:{var Z=h.i;let Ye=-1;for(;;){const Kt=["count="+x];Ye==-1?x>0?(Ye=Z[0].g,Kt.push("ofs="+Ye)):Ye=0:Kt.push("ofs="+Ye);let wt=!0;for(let Jt=0;Jt<x;Jt++){var te=Z[Jt].g;const gr=Z[Jt].map;if(te-=Ye,te<0)Ye=Math.max(0,Z[Jt].g-100),wt=!1;else try{te="req"+te+"_"||"";try{var Ee=gr instanceof Map?gr:Object.entries(gr);for(const[ro,Is]of Ee){let Ts=Is;u(Is)&&(Ts=Hr(Is)),Kt.push(te+ro+"="+encodeURIComponent(Ts))}}catch(ro){throw Kt.push(te+"type="+encodeURIComponent("_badmap")),ro}}catch{D&&D(gr)}}if(wt){Ee=Kt.join("&");break e}}Ee=void 0}return h=h.i.splice(0,x),E.G=h,Ee}function Rn(h){if(!h.g&&!h.v){h.Y=1;var E=h.Da;W||I(),X||(W(),X=!0),P.add(E,h),h.A=0}}function Ss(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=qe(p(h.Da,h),uc(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,zo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=qe(p(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,At(10),pr(this),zo(this))};function Zi(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function zo(h){h.g=new Pr(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var E=kr(h.na);gt(E,"RID","rpc"),gt(E,"SID",h.M),gt(E,"AID",h.K),gt(E,"CI",h.F?"0":"1"),!h.F&&h.ia&&gt(E,"TO",h.ia),gt(E,"TYPE","xmlhttp"),xs(h,E),h.u&&h.o&&sc(E,h.u,h.o),h.O&&(h.g.H=h.O);var x=h.g;h=h.ba,x.M=1,x.A=Xs(kr(E)),x.u=null,x.R=!0,Fl(x,h)}n.Va=function(){this.C!=null&&(this.C=null,pr(this),Ss(this),At(19))};function cc(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function lc(h,E){var x=null;if(h.g==E){cc(h),Zi(h),h.g=null;var D=2}else if(zl(h.h,E))x=E.G,$i(h.h,E),D=1;else return;if(h.I!=0){if(E.o)if(D==1){x=E.u?E.u.length:0,E=Date.now()-E.F;var Z=h.D;D=Ar(),Lt(D,new Vo(D,x)),no(h)}else Rn(h);else if(Z=E.m,Z==3||Z==0&&E.X>0||!(D==1&&rh(h,E)||D==2&&Ss(h)))switch(x&&x.length>0&&(E=h.h,E.i=E.i.concat(x)),Z){case 1:mr(h,5);break;case 4:mr(h,10);break;case 3:mr(h,6);break;default:mr(h,2)}}}function uc(h,E){let x=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(x*=2),x*E}function mr(h,E){if(h.j.info("Error code "+E),E==2){var x=p(h.bb,h),D=h.Ua;const Z=!D;D=new ms(D||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Bi(D,"https"),Xs(D),Z?_s(D.toString(),x):ws(D.toString(),x)}else At(2);h.I=0,h.l&&h.l.pa(E),Qi(h),ac(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Qi(h){if(h.I=0,h.ja=[],h.l){const E=dr(h.h);(E.length!=0||h.i.length!=0)&&(R(h.ja,E),R(h.ja,h.i),h.h.i.length=0,S(h.i),h.i.length=0),h.l.oa()}}function Xl(h,E,x){var D=x instanceof ms?kr(x):new ms(x);if(D.g!="")E&&(D.g=E+"."+D.g),gs(D,D.u);else{var Z=c.location;D=Z.protocol,E=E?E+"."+Z.hostname:Z.hostname,Z=+Z.port;const te=new ms(null);D&&Bi(te,D),E&&(te.g=E),Z&&gs(te,Z),x&&(te.h=x),D=te}return x=h.G,E=h.wa,x&&E&&gt(D,x,E),gt(D,"VER",h.ka),xs(h,D),D}function sh(h,E,x){if(E&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=h.Aa&&!h.ma?new It(new Js({ab:x})):new It(h.ma),E.Fa(h.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function oh(){}n=oh.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function dc(){}dc.prototype.g=function(h,E){return new bn(h,E)};function bn(h,E){_t.call(this),this.g=new oc(E),this.l=h,this.h=E&&E.messageUrlParams||null,h=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(h?h["X-WebChannel-Content-Type"]=E.messageContentType:h={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(h?h["X-WebChannel-Client-Profile"]=E.sa:h={"X-WebChannel-Client-Profile":E.sa}),this.g.U=h,(h=E&&E.Qb)&&!N(h)&&(this.g.u=h),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!N(E)&&(this.g.G=E,h=this.h,h!==null&&E in h&&(h=this.h,E in h&&delete h[E])),this.j=new $o(this)}m(bn,_t),bn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){ic(this.g)},bn.prototype.o=function(h){var E=this.g;if(typeof h=="string"){var x={};x.__data__=h,h=x}else this.v&&(x={},x.__data__=Hr(h),h=x);E.i.push(new Om(E.Ya++,h)),E.I==3&&no(E)},bn.prototype.N=function(){this.g.l=null,delete this.j,ic(this.g),delete this.g,bn.Z.N.call(this)};function ih(h){Do.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var E=h.__sm__;if(E){e:{for(const x in E){h=x;break e}h=void 0}(this.i=h)&&(h=this.i,E=E!==null&&h in E?E[h]:void 0),this.data=E}else this.data=h}m(ih,Do);function ah(){Oo.call(this),this.status=1}m(ah,Oo);function $o(h){this.g=h}m($o,oh),$o.prototype.ra=function(){Lt(this.g,"a")},$o.prototype.qa=function(h){Lt(this.g,new ih(h))},$o.prototype.pa=function(h){Lt(this.g,new ah)},$o.prototype.oa=function(){Lt(this.g,"b")},dc.prototype.createWebChannel=dc.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,FA=function(){return new dc},LA=function(){return Ar()},VA=Qn,gv={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ur.NO_ERROR=0,ur.TIMEOUT=8,ur.HTTP_ERROR=6,Nf=ur,Xt.COMPLETE="complete",MA=Xt,Gr.EventType=ps,ps.OPEN="a",ps.CLOSE="b",ps.ERROR="c",ps.MESSAGE="d",_t.prototype.listen=_t.prototype.J,Ou=Gr,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,OA=It}).apply(typeof hf<"u"?hf:typeof self<"u"?self:typeof window<"u"?window:{});const Fx="@firebase/firestore",jx="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa=new V_("@firebase/firestore");function qc(){return Oa.logLevel}function fe(n,...e){if(Oa.logLevel<=ot.DEBUG){const t=e.map(Z_);Oa.debug(`Firestore (${Nl}): ${n}`,...t)}}function Hn(n,...e){if(Oa.logLevel<=ot.ERROR){const t=e.map(Z_);Oa.error(`Firestore (${Nl}): ${n}`,...t)}}function Ma(n,...e){if(Oa.logLevel<=ot.WARN){const t=e.map(Z_);Oa.warn(`Firestore (${Nl}): ${n}`,...t)}}function Z_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,jA(n,r,t)}function jA(n,e,t){let r=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Hn(r),new Error(r)}function Ve(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||jA(e,s,r)}function Ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends To{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class E6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(In.UNAUTHENTICATED)))}shutdown(){}}class b6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class x6{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ve(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let i=new zs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zs,e.enqueueRetryable((()=>s(this.currentUser)))};const c=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string",31837,{l:r}),new UA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class S6{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class I6{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new S6(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(In.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ux{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class T6{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ve(this.o===void 0,3512);const r=i=>{i.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const c=i.token!==this.m;return this.m=i.token,fe("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ux(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ux(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=C6(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function Ke(n,e){return n<e?-1:n>e?1:0}function yv(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return Py(s)===Py(i)?Ke(s,i):Py(s)?1:-1}return Ke(n.length,e.length)}const A6=55296,R6=57343;function Py(n){const e=n.charCodeAt(0);return e>=A6&&e<=R6}function ll(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function zA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="__name__";class Ns{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ne(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ns.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ns?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=Ns.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return Ke(e.length,t.length)}static compareSegments(e,t){const r=Ns.isNumericId(e),s=Ns.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Ns.extractNumericId(e).compare(Ns.extractNumericId(t)):yv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ei.fromString(e.substring(4,e.length-2))}}class yt extends Ns{construct(e,t,r){return new yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new we(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const P6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ut extends Ns{construct(e,t,r){return new Ut(e,t,r)}static isValidIdentifier(e){return P6.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ut.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===zx}static keyField(){return new Ut([zx])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new we(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new we(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new we(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(c=!c,s++):u!=="."||c?(r+=u,s++):(i(),s++)}if(i(),c)throw new we(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ut(t)}static emptyPath(){return new Ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(yt.fromString(e))}static fromName(e){return new Se(yt.fromString(e).popFirst(5))}static empty(){return new Se(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(n,e,t){if(!t)throw new we(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function k6(n,e,t,r){if(e===!0&&r===!0)throw new we(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $x(n){if(!Se.isDocumentKey(n))throw new we(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Bx(n){if(Se.isDocumentKey(n))throw new we(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function BA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function rm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne(12329,{type:typeof n})}function jn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=rm(n);throw new we(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Pd(n,e){if(!BA(n))throw new we(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const c=n[r];if(s&&typeof c!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&c!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new we(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=-62135596800,Hx=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Hx);return new mt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qx)throw new we(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Hx}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Pd(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:nn("string",mt._jsonSchemaVersion),seconds:nn("number"),nanoseconds:nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new mt(0,0))}static max(){return new Ue(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd=-1;class up{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function vv(n){return n.fields.find((e=>e.kind===2))}function fa(n){return n.fields.filter((e=>e.kind!==2))}up.UNKNOWN_ID=-1;class Df{constructor(e,t){this.fieldPath=e,this.kind=t}}class od{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new od(0,Ir.min())}}function N6(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ue.fromTimestamp(r===1e9?new mt(t+1,0):new mt(t,r));return new Ir(s,Se.empty(),e)}function qA(n){return new Ir(n.readTime,n.key,sd)}class Ir{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ir(Ue.min(),Se.empty(),sd)}static max(){return new Ir(Ue.max(),Se.empty(),sd)}}function Y_(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Se.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==HA)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,r)=>{t(e)}))}static reject(e){return new G(((t,r)=>{r(e)}))}static waitFor(e){return new G(((t,r)=>{let s=0,i=0,c=!1;e.forEach((u=>{++s,u.next((()=>{++i,c&&i===s&&t()}),(d=>r(d)))})),c=!0,i===s&&t()}))}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next((s=>s?G.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,i)=>{r.push(t.call(this,s,i))})),this.waitFor(r)}static mapArray(e,t){return new G(((r,s)=>{const i=e.length,c=new Array(i);let u=0;for(let d=0;d<i;d++){const p=d;t(e[p]).next((g=>{c[p]=g,++u,u===i&&r(c)}),(g=>s(g)))}}))}static doWhile(e,t){return new G(((r,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="SimpleDb";class sm{static open(e,t,r,s){try{return new sm(t,e.transaction(s,r))}catch(i){throw new zu(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new zs,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new zu(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=X_(r.target.error);this.S.reject(new zu(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(fe(Er,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new O6(t)}}class bi{static delete(e){return fe(Er,"Removing database:",e),ga(zC().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!QC())return!1;if(bi.F())return!0;const e=dn(),t=bi.M(e),r=0<t&&t<10,s=GA(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,bi.M(dn())===12.2&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(fe(Er,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const c=i.target.result;t(c)},s.onblocked=()=>{r(new zu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const c=i.target.error;c.name==="VersionError"?r(new we(ne.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?r(new we(ne.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):r(new zu(e,c))},s.onupgradeneeded=i=>{fe(Er,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const c=i.target.result;this.N.k(c,s.transaction,i.oldVersion,this.version).next((()=>{fe(Er,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const i=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const u=sm.open(this.db,e,i?"readonly":"readwrite",r),d=s(u).next((p=>(u.C(),p))).catch((p=>(u.abort(p),G.reject(p)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,p=d.name!=="FirebaseError"&&c<3;if(fe(Er,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function GA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class D6{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return ga(this.U.delete())}}class zu extends we{constructor(e,t){super(ne.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ki(n){return n.name==="IndexedDbTransactionError"}class O6{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(fe(Er,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(fe(Er,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ga(r)}add(e){return fe(Er,"ADD",this.store.name,e,e),ga(this.store.add(e))}get(e){return ga(this.store.get(e)).next((t=>(t===void 0&&(t=null),fe(Er,"GET",this.store.name,e,t),t)))}delete(e){return fe(Er,"DELETE",this.store.name,e),ga(this.store.delete(e))}count(){return fe(Er,"COUNT",this.store.name),ga(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new G(((c,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{c(d.target.result)}}))}{const i=this.cursor(r),c=[];return this.H(i,((u,d)=>{c.push(d)})).next((()=>c))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new G(((s,i)=>{r.onerror=c=>{i(c.target.error)},r.onsuccess=c=>{s(c.target.result)}}))}Z(e,t){fe(Er,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,((i,c,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}te(e){const t=this.cursor({});return new G(((r,s)=>{t.onerror=i=>{const c=X_(i.target.error);s(c)},t.onsuccess=i=>{const c=i.target.result;c?e(c.primaryKey,c.value).next((u=>{u?c.continue():r()})):r()}}))}H(e,t){const r=[];return new G(((s,i)=>{e.onerror=c=>{i(c.target.error)},e.onsuccess=c=>{const u=c.target.result;if(!u)return void s();const d=new D6(u),p=t(u.primaryKey,u.value,d);if(p instanceof G){const g=p.catch((m=>(d.done(),G.reject(m))));r.push(g)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>G.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ga(n){return new G(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=X_(r.target.error);t(s)}}))}let Wx=!1;function X_(n){const e=bi.M(dn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new we("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wx||(Wx=!0,setTimeout((()=>{throw r}),0)),r}}return n}const $u="IndexBackfiller";class M6{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){fe($u,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();fe($u,`Documents written: ${t}`)}catch(t){ki(t)?fe($u,"Ignoring IndexedDB error during index backfill: ",t):await Wa(t)}await this.re(6e4)}))}}class V6{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let s=t,i=!0;return G.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!r.has(c))return fe($u,`Processing collection: ${c}`),this.oe(e,c,s).next((u=>{s-=u,r.add(c)}));i=!1})))).next((()=>t-s))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((i=>{const c=i.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(s,i))).next((u=>(fe($u,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>c.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((s,i)=>{const c=qA(i);Y_(c,r)>0&&(r=c)})),new Ir(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ur.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=-1;function om(n){return n==null}function id(n){return n===0&&1/n==-1/0}function L6(n){return typeof n=="number"&&Number.isInteger(n)&&!id(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp="";function Un(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Gx(e)),e=F6(n.get(t),e);return Gx(e)}function F6(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case dp:t+="";break;default:t+=i}}return t}function Gx(n){return n+dp+""}function Ls(n){const e=n.length;if(Ve(e>=2,64408,{path:n}),e===2)return Ve(n.charAt(0)===dp&&n.charAt(1)==="",56145,{path:n}),yt.emptyPath();const t=e-2,r=[];let s="";for(let i=0;i<e;){const c=n.indexOf(dp,i);switch((c<0||c>t)&&Ne(50515,{path:n}),n.charAt(c+1)){case"":const u=n.substring(i,c);let d;s.length===0?d=u:(s+=u,d=s,s=""),r.push(d);break;case"":s+=n.substring(i,c),s+="\0";break;case"":s+=n.substring(i,c+1);break;default:Ne(61167,{path:n})}i=c+2}return new yt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="remoteDocuments",kd="owner",Lc="owner",ad="mutationQueues",j6="userId",ss="mutations",Kx="batchId",Ea="userMutationsIndex",Zx=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(n,e){return[n,Un(e)]}function KA(n,e,t){return[n,Un(e),t]}const U6={},ul="documentMutations",hp="remoteDocumentsV14",z6=["prefixPath","collectionGroup","readTime","documentId"],Mf="documentKeyIndex",$6=["prefixPath","collectionGroup","documentId"],ZA="collectionGroupIndex",B6=["collectionGroup","readTime","prefixPath","documentId"],cd="remoteDocumentGlobal",_v="remoteDocumentGlobalKey",dl="targets",QA="queryTargetsIndex",q6=["canonicalId","targetId"],hl="targetDocuments",H6=["targetId","path"],J_="documentTargetsIndex",W6=["path","targetId"],fp="targetGlobalKey",Ia="targetGlobal",ld="collectionParents",G6=["collectionId","parent"],fl="clientMetadata",K6="clientId",im="bundles",Z6="bundleId",am="namedQueries",Q6="name",ew="indexConfiguration",Y6="indexId",wv="collectionGroupIndex",X6="collectionGroup",Bu="indexState",J6=["indexId","uid"],YA="sequenceNumberIndex",eU=["uid","sequenceNumber"],qu="indexEntries",tU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],XA="documentKeyIndex",nU=["indexId","uid","orderedDocumentKey"],cm="documentOverlays",rU=["userId","collectionPath","documentId"],Ev="collectionPathOverlayIndex",sU=["userId","collectionPath","largestBatchId"],JA="collectionGroupOverlayIndex",oU=["userId","collectionGroup","largestBatchId"],tw="globals",iU="name",eR=[ad,ss,ul,pa,dl,kd,Ia,hl,fl,cd,ld,im,am],aU=[...eR,cm],tR=[ad,ss,ul,hp,dl,kd,Ia,hl,fl,cd,ld,im,am,cm],nR=tR,nw=[...nR,ew,Bu,qu],cU=nw,rR=[...nw,tw],lU=rR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv extends WA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function fn(n,e){const t=Ze(n);return bi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ni(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e,t){this.comparator=e,this.root=t||Tn.EMPTY}insert(e,t){return new Ot(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new Ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ff(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ff(this.root,e,this.comparator,!1)}getReverseIterator(){return new ff(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ff(this.root,e,this.comparator,!0)}}class ff{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Tn.RED,this.left=s??Tn.EMPTY,this.right=i??Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Tn(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Tn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new Tn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.comparator=e,this.data=new Ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yx(this.data.getIterator())}getIteratorFrom(e){return new Yx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new bt(this.comparator);return t.data=e,t}}class Yx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new sr([])}unionWith(e){let t=new bt(Ut.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new sr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new oR("Invalid base64 string: "+i):i}})(e);return new rn(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let c=0;c<s.length;++c)i+=String.fromCharCode(s[c]);return i})(e);return new rn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rn.EMPTY_BYTE_STRING=new rn("");const uU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function So(n){if(Ve(!!n,39018),typeof n=="string"){let e=0;const t=uU.exec(n);if(Ve(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Io(n){return typeof n=="string"?rn.fromBase64String(n):rn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="server_timestamp",aR="__type__",cR="__previous_value__",lR="__local_write_time__";function rw(n){return(n?.mapValue?.fields||{})[aR]?.stringValue===iR}function lm(n){const e=n.mapValue.fields[cR];return rw(e)?lm(e):e}function ud(n){const e=So(n.mapValue.fields[lR].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(e,t,r,s,i,c,u,d,p,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=g}}const pp="(default)";class Va{constructor(e,t){this.projectId=e,this.database=t||pp}static empty(){return new Va("","")}get isDefaultDatabase(){return this.database===pp}isEqual(e){return e instanceof Va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="__type__",uR="__max__",gi={mapValue:{fields:{__type__:{stringValue:uR}}}},ow="__vector__",pl="value",Vf={nullValue:"NULL_VALUE"};function Ci(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?rw(n)?4:dR(n)?9007199254740991:um(n)?10:11:Ne(28295,{value:n})}function Ws(n,e){if(n===e)return!0;const t=Ci(n);if(t!==Ci(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ud(n).isEqual(ud(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const c=So(s.timestampValue),u=So(i.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return Io(s.bytesValue).isEqual(Io(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return Dt(s.geoPointValue.latitude)===Dt(i.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Dt(s.integerValue)===Dt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const c=Dt(s.doubleValue),u=Dt(i.doubleValue);return c===u?id(c)===id(u):isNaN(c)&&isNaN(u)}return!1})(n,e);case 9:return ll(n.arrayValue.values||[],e.arrayValue.values||[],Ws);case 10:case 11:return(function(s,i){const c=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Qx(c)!==Qx(u))return!1;for(const d in c)if(c.hasOwnProperty(d)&&(u[d]===void 0||!Ws(c[d],u[d])))return!1;return!0})(n,e);default:return Ne(52216,{left:n})}}function dd(n,e){return(n.values||[]).find((t=>Ws(t,e)))!==void 0}function Ai(n,e){if(n===e)return 0;const t=Ci(n),r=Ci(e);if(t!==r)return Ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return(function(i,c){const u=Dt(i.integerValue||i.doubleValue),d=Dt(c.integerValue||c.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return Xx(n.timestampValue,e.timestampValue);case 4:return Xx(ud(n),ud(e));case 5:return yv(n.stringValue,e.stringValue);case 6:return(function(i,c){const u=Io(i),d=Io(c);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(i,c){const u=i.split("/"),d=c.split("/");for(let p=0;p<u.length&&p<d.length;p++){const g=Ke(u[p],d[p]);if(g!==0)return g}return Ke(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,c){const u=Ke(Dt(i.latitude),Dt(c.latitude));return u!==0?u:Ke(Dt(i.longitude),Dt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Jx(n.arrayValue,e.arrayValue);case 10:return(function(i,c){const u=i.fields||{},d=c.fields||{},p=u[pl]?.arrayValue,g=d[pl]?.arrayValue,m=Ke(p?.values?.length||0,g?.values?.length||0);return m!==0?m:Jx(p,g)})(n.mapValue,e.mapValue);case 11:return(function(i,c){if(i===gi.mapValue&&c===gi.mapValue)return 0;if(i===gi.mapValue)return 1;if(c===gi.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),p=c.fields||{},g=Object.keys(p);d.sort(),g.sort();for(let m=0;m<d.length&&m<g.length;++m){const w=yv(d[m],g[m]);if(w!==0)return w;const S=Ai(u[d[m]],p[g[m]]);if(S!==0)return S}return Ke(d.length,g.length)})(n.mapValue,e.mapValue);default:throw Ne(23264,{he:t})}}function Xx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=So(n),r=So(e),s=Ke(t.seconds,r.seconds);return s!==0?s:Ke(t.nanos,r.nanos)}function Jx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Ai(t[s],r[s]);if(i)return i}return Ke(t.length,r.length)}function ml(n){return xv(n)}function xv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=So(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Io(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Se.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=xv(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const c of r)i?i=!1:s+=",",s+=`${c}:${xv(t.fields[c])}`;return s+"}"})(n.mapValue):Ne(61005,{value:n})}function Lf(n){switch(Ci(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=lm(n);return e?16+Lf(e):16;case 5:return 2*n.stringValue.length;case 6:return Io(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Lf(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return Ni(r.fields,((i,c)=>{s+=i.length+Lf(c)})),s})(n.mapValue);default:throw Ne(13486,{value:n})}}function hd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Sv(n){return!!n&&"integerValue"in n}function fd(n){return!!n&&"arrayValue"in n}function eS(n){return!!n&&"nullValue"in n}function tS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ff(n){return!!n&&"mapValue"in n}function um(n){return(n?.mapValue?.fields||{})[sw]?.stringValue===ow}function Hu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ni(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Hu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hu(n.arrayValue.values[t]);return e}return{...n}}function dR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uR}const hR={mapValue:{fields:{[sw]:{stringValue:ow},[pl]:{arrayValue:{}}}}};function hU(n){return"nullValue"in n?Vf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hd(Va.empty(),Se.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?um(n)?hR:{mapValue:{}}:Ne(35942,{value:n})}function fU(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hd(Va.empty(),Se.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?hR:"mapValue"in n?um(n)?{mapValue:{}}:gi:Ne(61959,{value:n})}function nS(n,e){const t=Ai(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rS(n,e){const t=Ai(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ff(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hu(t)}setAll(e){let t=Ut.emptyPath(),r={},s=[];e.forEach(((c,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}c?r[u.lastSegment()]=Hu(c):s.push(u.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());Ff(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ws(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ff(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ni(t,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Fn(Hu(this.value))}}function fR(n){const e=[];return Ni(n.fields,((t,r)=>{const s=new Ut([t]);if(Ff(r)){const i=fR(r.mapValue).fields;if(i.length===0)e.push(s);else for(const c of i)e.push(s.child(c))}else e.push(s)})),new sr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t,r,s,i,c,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=c,this.documentState=u}static newInvalidDocument(e){return new qt(e,0,Ue.min(),Ue.min(),Ue.min(),Fn.empty(),0)}static newFoundDocument(e,t,r,s){return new qt(e,1,t,Ue.min(),r,s,0)}static newNoDocument(e,t){return new qt(e,2,t,Ue.min(),Ue.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,Ue.min(),Ue.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t){this.position=e,this.inclusive=t}}function sS(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],c=n.position[s];if(i.field.isKeyField()?r=Se.comparator(Se.fromName(c.referenceValue),t.key):r=Ai(c,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function oS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ws(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd{constructor(e,t="asc"){this.field=e,this.dir=t}}function pU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{}class it extends pR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mU(e,t,r):t==="array-contains"?new vU(e,r):t==="in"?new wR(e,r):t==="not-in"?new _U(e,r):t==="array-contains-any"?new wU(e,r):new it(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gU(e,r):new yU(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ai(t,this.value)):t!==null&&Ci(this.value)===Ci(t)&&this.matchesComparison(Ai(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Et extends pR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Et(e,t)}matches(e){return yl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yl(n){return n.op==="and"}function Iv(n){return n.op==="or"}function iw(n){return mR(n)&&yl(n)}function mR(n){for(const e of n.filters)if(e instanceof Et)return!1;return!0}function Tv(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+ml(n.value);if(iw(n))return n.filters.map((e=>Tv(e))).join(",");{const e=n.filters.map((t=>Tv(t))).join(",");return`${n.op}(${e})`}}function gR(n,e){return n instanceof it?(function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&Ws(r.value,s.value)})(n,e):n instanceof Et?(function(r,s){return s instanceof Et&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,c,u)=>i&&gR(c,s.filters[u])),!0):!1})(n,e):void Ne(19439)}function yR(n,e){const t=n.filters.concat(e);return Et.create(t,n.op)}function vR(n){return n instanceof it?(function(t){return`${t.field.canonicalString()} ${t.op} ${ml(t.value)}`})(n):n instanceof Et?(function(t){return t.op.toString()+" {"+t.getFilters().map(vR).join(" ,")+"}"})(n):"Filter"}class mU extends it{constructor(e,t,r){super(e,t,r),this.key=Se.fromName(r.referenceValue)}matches(e){const t=Se.comparator(e.key,this.key);return this.matchesComparison(t)}}class gU extends it{constructor(e,t){super(e,"in",t),this.keys=_R("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yU extends it{constructor(e,t){super(e,"not-in",t),this.keys=_R("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _R(n,e){return(e.arrayValue?.values||[]).map((t=>Se.fromName(t.referenceValue)))}class vU extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fd(t)&&dd(t.arrayValue,this.value)}}class wR extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dd(this.value.arrayValue,t)}}class _U extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(dd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dd(this.value.arrayValue,t)}}class wU extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>dd(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EU{constructor(e,t=null,r=[],s=[],i=null,c=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=c,this.endAt=u,this.Te=null}}function Cv(n,e=null,t=[],r=[],s=null,i=null,c=null){return new EU(n,e,t,r,s,i,c)}function La(n){const e=Ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Tv(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),om(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ml(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ml(r))).join(",")),e.Te=t}return e.Te}function Nd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pU(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!gR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oS(n.startAt,e.startAt)&&oS(n.endAt,e.endAt)}function mp(n){return Se.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function gp(n,e){return n.filters.filter((t=>t instanceof it&&t.field.isEqual(e)))}function iS(n,e,t){let r=Vf,s=!0;for(const i of gp(n,e)){let c=Vf,u=!0;switch(i.op){case"<":case"<=":c=hU(i.value);break;case"==":case"in":case">=":c=i.value;break;case">":c=i.value,u=!1;break;case"!=":case"not-in":c=Vf}nS({value:r,inclusive:s},{value:c,inclusive:u})<0&&(r=c,s=u)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const c=t.position[i];nS({value:r,inclusive:s},{value:c,inclusive:t.inclusive})<0&&(r=c,s=t.inclusive);break}}return{value:r,inclusive:s}}function aS(n,e,t){let r=gi,s=!0;for(const i of gp(n,e)){let c=gi,u=!0;switch(i.op){case">=":case">":c=fU(i.value),u=!1;break;case"==":case"in":case"<=":c=i.value;break;case"<":c=i.value,u=!1;break;case"!=":case"not-in":c=gi}rS({value:r,inclusive:s},{value:c,inclusive:u})>0&&(r=c,s=u)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const c=t.position[i];rS({value:r,inclusive:s},{value:c,inclusive:t.inclusive})>0&&(r=c,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,t=null,r=[],s=[],i=null,c="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=c,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function bU(n,e,t,r,s,i,c,u){return new Dl(n,e,t,r,s,i,c,u)}function Dd(n){return new Dl(n)}function cS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ER(n){return n.collectionGroup!==null}function Wu(n){const e=Ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new bt(Ut.comparator);return c.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new pd(i,r))})),t.has(Ut.keyField().canonicalString())||e.Ie.push(new pd(Ut.keyField(),r))}return e.Ie}function $r(n){const e=Ze(n);return e.Ee||(e.Ee=xU(e,Wu(n))),e.Ee}function xU(n,e){if(n.limitType==="F")return Cv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new pd(s.field,i)}));const t=n.endAt?new gl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gl(n.startAt.position,n.startAt.inclusive):null;return Cv(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Av(n,e){const t=n.filters.concat([e]);return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Rv(n,e,t){return new Dl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dm(n,e){return Nd($r(n),$r(e))&&n.limitType===e.limitType}function bR(n){return`${La($r(n))}|lt:${n.limitType}`}function Hc(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>vR(s))).join(", ")}]`),om(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>ml(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>ml(s))).join(",")),`Target(${r})`})($r(n))}; limitType=${n.limitType})`}function Od(n,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Se.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,e)&&(function(r,s){for(const i of Wu(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(c,u,d){const p=sS(c,u,d);return c.inclusive?p<=0:p<0})(r.startAt,Wu(r),s)||r.endAt&&!(function(c,u,d){const p=sS(c,u,d);return c.inclusive?p>=0:p>0})(r.endAt,Wu(r),s))})(n,e)}function SU(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function xR(n){return(e,t)=>{let r=!1;for(const s of Wu(n)){const i=IU(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function IU(n,e,t){const r=n.field.isKeyField()?Se.comparator(e.key,t.key):(function(i,c,u){const d=c.data.field(i),p=u.data.field(i);return d!==null&&p!==null?Ai(d,p):Ne(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ni(this.inner,((t,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return sR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TU=new Ot(Se.comparator);function xr(){return TU}const SR=new Ot(Se.comparator);function Mu(...n){let e=SR;for(const t of n)e=e.insert(t.key,t);return e}function IR(n){let e=SR;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Fs(){return Gu()}function TR(){return Gu()}function Gu(){return new Co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const CU=new Ot(Se.comparator),AU=new bt(Se.comparator);function tt(...n){let e=AU;for(const t of n)e=e.add(t);return e}const RU=new bt(Ke);function PU(){return RU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:id(e)?"-0":e}}function CR(n){return{integerValue:""+n}}function kU(n,e){return L6(e)?CR(e):aw(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this._=void 0}}function NU(n,e,t){return n instanceof vl?(function(s,i){const c={fields:{[aR]:{stringValue:iR},[lR]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&rw(i)&&(i=lm(i)),i&&(c.fields[cR]=i),{mapValue:c}})(t,e):n instanceof _l?RR(n,e):n instanceof wl?PR(n,e):(function(s,i){const c=AR(s,i),u=lS(c)+lS(s.Ae);return Sv(c)&&Sv(s.Ae)?CR(u):aw(s.serializer,u)})(n,e)}function DU(n,e,t){return n instanceof _l?RR(n,e):n instanceof wl?PR(n,e):t}function AR(n,e){return n instanceof md?(function(r){return Sv(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class vl extends hm{}class _l extends hm{constructor(e){super(),this.elements=e}}function RR(n,e){const t=kR(e);for(const r of n.elements)t.some((s=>Ws(s,r)))||t.push(r);return{arrayValue:{values:t}}}class wl extends hm{constructor(e){super(),this.elements=e}}function PR(n,e){let t=kR(e);for(const r of n.elements)t=t.filter((s=>!Ws(s,r)));return{arrayValue:{values:t}}}class md extends hm{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function lS(n){return Dt(n.integerValue||n.doubleValue)}function kR(n){return fd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e,t){this.field=e,this.transform=t}}function OU(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof _l&&s instanceof _l||r instanceof wl&&s instanceof wl?ll(r.elements,s.elements,Ws):r instanceof md&&s instanceof md?Ws(r.Ae,s.Ae):r instanceof vl&&s instanceof vl})(n.transform,e.transform)}class MU{constructor(e,t){this.version=e,this.transformResults=t}}class un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new un}static exists(e){return new un(void 0,e)}static updateTime(e){return new un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class fm{}function DR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Md(n.key,un.none()):new Ol(n.key,n.data,un.none());{const t=n.data,r=Fn.empty();let s=new bt(Ut.comparator);for(let i of e.fields)if(!s.has(i)){let c=t.field(i);c===null&&i.length>1&&(i=i.popLast(),c=t.field(i)),c===null?r.delete(i):r.set(i,c),s=s.add(i)}return new Ao(n.key,r,new sr(s.toArray()),un.none())}}function VU(n,e,t){n instanceof Ol?(function(s,i,c){const u=s.value.clone(),d=dS(s.fieldTransforms,i,c.transformResults);u.setAll(d),i.convertToFoundDocument(c.version,u).setHasCommittedMutations()})(n,e,t):n instanceof Ao?(function(s,i,c){if(!jf(s.precondition,i))return void i.convertToUnknownDocument(c.version);const u=dS(s.fieldTransforms,i,c.transformResults),d=i.data;d.setAll(OR(s)),d.setAll(u),i.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):(function(s,i,c){i.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Ku(n,e,t,r){return n instanceof Ol?(function(i,c,u,d){if(!jf(i.precondition,c))return u;const p=i.value.clone(),g=hS(i.fieldTransforms,d,c);return p.setAll(g),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ao?(function(i,c,u,d){if(!jf(i.precondition,c))return u;const p=hS(i.fieldTransforms,d,c),g=c.data;return g.setAll(OR(i)),g.setAll(p),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(n,e,t,r):(function(i,c,u){return jf(i.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u})(n,e,t)}function LU(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=AR(r.transform,s||null);i!=null&&(t===null&&(t=Fn.empty()),t.set(r.field,i))}return t||null}function uS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ll(r,s,((i,c)=>OU(i,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ol extends fm{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ao extends fm{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function OR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function dS(n,e,t){const r=new Map;Ve(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const i=n[s],c=i.transform,u=e.data.field(i.field);r.set(i.field,DU(c,u,t[s]))}return r}function hS(n,e,t){const r=new Map;for(const s of n){const i=s.transform,c=t.data.field(s.field);r.set(s.field,NU(i,c,e))}return r}class Md extends fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class MR extends fm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&VU(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ku(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=TR();return this.mutations.forEach((s=>{const i=e.get(s.key),c=i.overlayedDocument;let u=this.applyToLocalView(c,i.mutatedFields);u=t.has(s.key)?null:u;const d=DR(c,u);d!==null&&r.set(s.key,d),c.isValidDocument()||c.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),tt())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,((t,r)=>uS(t,r)))&&ll(this.baseMutations,e.baseMutations,((t,r)=>uS(t,r)))}}class lw{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return CU})();const i=e.mutations;for(let c=0;c<i.length;c++)s=s.insert(i[c].key,r[c].version);return new lw(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,lt;function jU(n){switch(n){case ne.OK:return Ne(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ne(15467,{code:n})}}function VR(n){if(n===void 0)return Hn("GRPC error has no .code"),ne.UNKNOWN;switch(n){case tn.OK:return ne.OK;case tn.CANCELLED:return ne.CANCELLED;case tn.UNKNOWN:return ne.UNKNOWN;case tn.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case tn.INTERNAL:return ne.INTERNAL;case tn.UNAVAILABLE:return ne.UNAVAILABLE;case tn.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case tn.NOT_FOUND:return ne.NOT_FOUND;case tn.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case tn.ABORTED:return ne.ABORTED;case tn.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case tn.DATA_LOSS:return ne.DATA_LOSS;default:return Ne(39323,{code:n})}}(lt=tn||(tn={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU=new Ei([4294967295,4294967295],0);function fS(n){const e=UU().encode(n),t=new DA;return t.update(e),new Uint8Array(t.digest())}function pS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ei([t,r],0),new Ei([s,i],0)]}class dw{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Vu(`Invalid padding: ${t}`);if(r<0)throw new Vu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ei.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(Ei.fromNumber(r)));return s.compare(zU)===1&&(s=new Ei([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=fS(e),[r,s]=pS(t);for(let i=0;i<this.hashCount;i++){const c=this.ye(r,s,i);if(!this.we(c))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),c=new dw(i,s,t);return r.forEach((u=>c.insert(u))),c}insert(e){if(this.ge===0)return;const t=fS(e),[r,s]=pS(t);for(let i=0;i<this.hashCount;i++){const c=this.ye(r,s,i);this.Se(c)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Vd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new pm(Ue.min(),s,new Ot(Ke),xr(),tt())}}class Vd{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Vd(r,t,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class LR{constructor(e,t){this.targetId=e,this.Ce=t}}class FR{constructor(e,t,r=rn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class mS{constructor(){this.ve=0,this.Fe=gS(),this.Me=rn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=tt(),t=tt(),r=tt();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ne(38017,{changeType:i})}})),new Vd(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=gS()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class $U{constructor(e){this.Ge=e,this.ze=new Map,this.je=xr(),this.Je=pf(),this.He=pf(),this.Ye=new Ot(Ke)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(mp(i))if(r===0){const c=new Se(i.path);this.et(t,c,qt.newNoDocument(c,Ue.min()))}else Ve(r===1,20013,{expectedCount:r});else{const c=this._t(t);if(c!==r){const u=this.ut(e),d=u?this.ct(u,e,c):1;if(d!==0){this.it(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let c,u;try{c=Io(r).toUint8Array()}catch(d){if(d instanceof oR)return Ma("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new dw(c,s,i)}catch(d){return Ma(d instanceof Vu?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((i=>{const c=this.Ge.ht(),u=`projects/${c.projectId}/databases/${c.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(t,i,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((i,c)=>{const u=this.ot(c);if(u){if(i.current&&mp(u.target)){const d=new Se(u.target.path);this.It(d).has(c)||this.Et(c,d)||this.et(c,d,qt.newNoDocument(d,e))}i.Be&&(t.set(c,i.ke()),i.qe())}}));let r=tt();this.He.forEach(((i,c)=>{let u=!0;c.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(i))})),this.je.forEach(((i,c)=>c.setReadTime(e)));const s=new pm(e,t,this.Ye,this.je,r);return this.je=xr(),this.Je=pf(),this.He=pf(),this.Ye=new Ot(Ke),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new mS,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new bt(Ke),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new bt(Ke),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function pf(){return new Ot(Se.comparator)}function gS(){return new Ot(Se.comparator)}const BU={asc:"ASCENDING",desc:"DESCENDING"},qU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HU={and:"AND",or:"OR"};class WU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pv(n,e){return n.useProto3Json||om(e)?e:{value:e}}function El(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function GU(n,e){return El(n,e.toTimestamp())}function Wn(n){return Ve(!!n,49232),Ue.fromTimestamp((function(t){const r=So(t);return new mt(r.seconds,r.nanos)})(n))}function hw(n,e){return kv(n,e).canonicalString()}function kv(n,e){const t=(function(s){return new yt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function UR(n){const e=yt.fromString(n);return Ve(ZR(e),10190,{key:e.toString()}),e}function yp(n,e){return hw(n.databaseId,e.path)}function Ta(n,e){const t=UR(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Se(BR(t))}function zR(n,e){return hw(n.databaseId,e)}function $R(n){const e=UR(n);return e.length===4?yt.emptyPath():BR(e)}function Nv(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function BR(n){return Ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function yS(n,e,t){return{name:yp(n,e),fields:t.value.mapValue.fields}}function KU(n,e,t){const r=Ta(n,e.name),s=Wn(e.updateTime),i=e.createTime?Wn(e.createTime):Ue.min(),c=new Fn({mapValue:{fields:e.fields}}),u=qt.newFoundDocument(r,s,i,c);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function ZU(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ne(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(p,g){return p.useProto3Json?(Ve(g===void 0||typeof g=="string",58123),rn.fromBase64String(g||"")):(Ve(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),rn.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&(function(p){const g=p.code===void 0?ne.UNKNOWN:VR(p.code);return new we(g,p.message||"")})(c);t=new FR(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ta(n,r.document.name),i=Wn(r.document.updateTime),c=r.document.createTime?Wn(r.document.createTime):Ue.min(),u=new Fn({mapValue:{fields:r.document.fields}}),d=qt.newFoundDocument(s,i,c,u),p=r.targetIds||[],g=r.removedTargetIds||[];t=new Uf(p,g,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ta(n,r.document),i=r.readTime?Wn(r.readTime):Ue.min(),c=qt.newNoDocument(s,i),u=r.removedTargetIds||[];t=new Uf([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ta(n,r.document),i=r.removedTargetIds||[];t=new Uf([],i,s,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,c=new FU(s,i),u=r.targetId;t=new LR(u,c)}}return t}function vp(n,e){let t;if(e instanceof Ol)t={update:yS(n,e.key,e.value)};else if(e instanceof Md)t={delete:yp(n,e.key)};else if(e instanceof Ao)t={update:yS(n,e.key,e.data),updateMask:tz(e.fieldMask)};else{if(!(e instanceof MR))return Ne(16599,{Vt:e.type});t={verify:yp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(i,c){const u=c.transform;if(u instanceof vl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _l)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof wl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof md)return{fieldPath:c.field.canonicalString(),increment:u.Ae};throw Ne(20930,{transform:c.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:GU(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Ne(27497)})(n,e.precondition)),t}function Dv(n,e){const t=e.currentDocument?(function(i){return i.updateTime!==void 0?un.updateTime(Wn(i.updateTime)):i.exists!==void 0?un.exists(i.exists):un.none()})(e.currentDocument):un.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(c,u){let d=null;if("setToServerValue"in u)Ve(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new vl;else if("appendMissingElements"in u){const g=u.appendMissingElements.values||[];d=new _l(g)}else if("removeAllFromArray"in u){const g=u.removeAllFromArray.values||[];d=new wl(g)}else"increment"in u?d=new md(c,u.increment):Ne(16584,{proto:u});const p=Ut.fromServerFormat(u.fieldPath);return new NR(p,d)})(n,s))):[];if(e.update){e.update.name;const s=Ta(n,e.update.name),i=new Fn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(d){const p=d.fieldPaths||[];return new sr(p.map((g=>Ut.fromServerFormat(g))))})(e.updateMask);return new Ao(s,i,c,t,r)}return new Ol(s,i,t,r)}if(e.delete){const s=Ta(n,e.delete);return new Md(s,t)}if(e.verify){const s=Ta(n,e.verify);return new MR(s,t)}return Ne(1463,{proto:e})}function QU(n,e){return n&&n.length>0?(Ve(e!==void 0,14353),n.map((t=>(function(s,i){let c=s.updateTime?Wn(s.updateTime):Wn(i);return c.isEqual(Ue.min())&&(c=Wn(i)),new MU(c,s.transformResults||[])})(t,e)))):[]}function qR(n,e){return{documents:[zR(n,e.path)]}}function HR(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=zR(n,s);const i=(function(p){if(p.length!==0)return KR(Et.create(p,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const c=(function(p){if(p.length!==0)return p.map((g=>(function(w){return{field:Wc(w.field),direction:XU(w.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const u=Pv(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function WR(n){let e=$R(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ve(r===1,65062);const g=t.from[0];g.allDescendants?s=g.collectionId:e=e.child(g.collectionId)}let i=[];t.where&&(i=(function(m){const w=GR(m);return w instanceof Et&&iw(w)?w.getFilters():[w]})(t.where));let c=[];t.orderBy&&(c=(function(m){return m.map((w=>(function(R){return new pd(Gc(R.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(R.direction))})(w)))})(t.orderBy));let u=null;t.limit&&(u=(function(m){let w;return w=typeof m=="object"?m.value:m,om(w)?null:w})(t.limit));let d=null;t.startAt&&(d=(function(m){const w=!!m.before,S=m.values||[];return new gl(S,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(m){const w=!m.before,S=m.values||[];return new gl(S,w)})(t.endAt)),bU(e,s,c,i,u,"F",d,p)}function YU(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function GR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Gc(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Gc(t.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gc(t.unaryFilter.field);return it.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Gc(t.unaryFilter.field);return it.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(n):n.fieldFilter!==void 0?(function(t){return it.create(Gc(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Et.create(t.compositeFilter.filters.map((r=>GR(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(n):Ne(30097,{filter:n})}function XU(n){return BU[n]}function JU(n){return qU[n]}function ez(n){return HU[n]}function Wc(n){return{fieldPath:n.canonicalString()}}function Gc(n){return Ut.fromServerFormat(n.fieldPath)}function KR(n){return n instanceof it?(function(t){if(t.op==="=="){if(tS(t.value))return{unaryFilter:{field:Wc(t.field),op:"IS_NAN"}};if(eS(t.value))return{unaryFilter:{field:Wc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tS(t.value))return{unaryFilter:{field:Wc(t.field),op:"IS_NOT_NAN"}};if(eS(t.value))return{unaryFilter:{field:Wc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wc(t.field),op:JU(t.op),value:t.value}}})(n):n instanceof Et?(function(t){const r=t.getFilters().map((s=>KR(s)));return r.length===1?r[0]:{compositeFilter:{op:ez(t.op),filters:r}}})(n):Ne(54877,{filter:n})}function tz(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ZR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,t,r,s,i=Ue.min(),c=Ue.min(),u=rn.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new vo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.yt=e}}function nz(n,e){let t;if(e.document)t=KU(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Se.fromSegments(e.noDocument.path),s=ja(e.noDocument.readTime);t=qt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ne(56709);{const r=Se.fromSegments(e.unknownDocument.path),s=ja(e.unknownDocument.version);t=qt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const i=new mt(s[0],s[1]);return Ue.fromTimestamp(i)})(e.readTime)),t}function vS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_p(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,c){return{name:yp(i,c.key),fields:c.data.value.mapValue.fields,updateTime:El(i,c.version.toTimestamp()),createTime:El(i,c.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Fa(e.version)};else{if(!e.isUnknownDocument())return Ne(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Fa(e.version)}}return r}function _p(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Fa(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ja(n){const e=new mt(n.seconds,n.nanoseconds);return Ue.fromTimestamp(e)}function ya(n,e){const t=(e.baseMutations||[]).map((i=>Dv(n.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const c=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const u=e.mutations[i+1];c.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>Dv(n.yt,i))),s=mt.fromMillis(e.localWriteTimeMs);return new cw(e.batchId,s,t,r)}function Lu(n){const e=ja(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ja(n.lastLimboFreeSnapshotVersion):Ue.min();let r;return r=(function(i){return i.documents!==void 0})(n.query)?(function(i){const c=i.documents.length;return Ve(c===1,1966,{count:c}),$r(Dd($R(i.documents[0])))})(n.query):(function(i){return $r(WR(i))})(n.query),new vo(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,rn.fromBase64String(n.resumeToken))}function YR(n,e){const t=Fa(e.snapshotVersion),r=Fa(e.lastLimboFreeSnapshotVersion);let s;s=mp(e.target)?qR(n.yt,e.target):HR(n.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:La(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function XR(n){const e=WR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rv(e,e.limit,"L"):e}function ky(n,e){return new uw(e.largestBatchId,Dv(n.yt,e.overlayMutation))}function _S(n,e){const t=e.path.lastSegment();return[n,Un(e.path.popLast()),t]}function wS(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Fa(r.readTime),documentKey:Un(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{getBundleMetadata(e,t){return ES(e).get(t).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:ja(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,t){return ES(e).put((function(s){return{bundleId:s.id,createTime:Fa(Wn(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return bS(e).get(t).next((r=>{if(r)return(function(i){return{name:i.name,query:XR(i.bundledQuery),readTime:ja(i.readTime)}})(r)}))}saveNamedQuery(e,t){return bS(e).put((function(s){return{name:s.name,readTime:Fa(Wn(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function ES(n){return fn(n,im)}function bS(n){return fn(n,am)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new mm(e,r)}getOverlay(e,t){return Tu(e).get(_S(this.userId,t)).next((r=>r?ky(this.serializer,r):null))}getOverlays(e,t){const r=Fs();return G.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((i,c)=>{const u=new uw(t,c);s.push(this.St(e,u))})),G.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((c=>s.add(Un(c.getCollectionPath()))));const i=[];return s.forEach((c=>{const u=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);i.push(Tu(e).Z(Ev,u))})),G.waitFor(i)}getOverlaysForCollection(e,t,r){const s=Fs(),i=Un(t),c=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Tu(e).J(Ev,c).next((u=>{for(const d of u){const p=ky(this.serializer,d);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const i=Fs();let c;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Tu(e).ee({index:JA,range:u},((d,p,g)=>{const m=ky(this.serializer,p);i.size()<s||m.largestBatchId===c?(i.set(m.getKey(),m),c=m.largestBatchId):g.done()})).next((()=>i))}St(e,t){return Tu(e).put((function(s,i,c){const[u,d,p]=_S(i,c.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:vp(s.yt,c.mutation)}})(this.serializer,this.userId,t))}}function Tu(n){return fn(n,cm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{bt(e){return fn(e,tw)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?rn.fromUint8Array(r):rn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Dt(e.integerValue));else if("doubleValue"in e){const r=Dt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),id(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=So(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Io(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?dR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):um(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ne(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const s=pl,i=r[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Dt(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),Se.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}va.Kt=new va;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=255;function oz(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function xS(n){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const c=oz(255&r[i]);if(s+=c,c!==8)break}return s})(n);return Math.ceil(e/8)}class iz{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),r=xS(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=xS(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(jc),this.sn(255)}_n(){this.an(jc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(i){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,i,!1),new Uint8Array(c.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===jc?(this.sn(jc),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===jc?(this.an(jc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class az{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class cz{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Cu{constructor(){this.cn=new iz,this.ln=new az(this.cn),this.hn=new cz(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t,r,s){this.Tn=e,this.In=t,this.En=r,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new _a(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:zf(this.En),directionalValue:zf(this.dn),orderedDocumentKey:zf(t),documentKey:r.path.toArray()}}Vn(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function oi(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=SS(n.En,e.En),t!==0?t:(t=SS(n.dn,e.dn),t!==0?t:Se.comparator(n.In,e.In)))}function SS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function zf(n){return ZC()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function IS(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class TS{constructor(e){this.mn=new bt(((t,r)=>Ut.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ve(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=vv(e);if(t!==void 0&&!this.wn(t))return!1;const r=fa(e);let s=new Set,i=0,c=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=r[i];if(!this.Sn(u,d)||!this.bn(this.fn[c++],d))return!1}++i}for(;i<r.length;++i){const u=r[i];if(c>=this.fn.length||!this.bn(this.fn[c++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new bt(Ut.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Df(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Df(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Df(r.field,r.dir==="asc"?0:1)));return new up(up.UNKNOWN_ID,this.collectionId,t,od.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(n){if(Ve(n instanceof it||n instanceof Et,20012),n instanceof it){if(n instanceof wR){const t=n.value.arrayValue?.values?.map((r=>it.create(n.field,"==",r)))||[];return Et.create(t,"or")}return n}const e=n.filters.map((t=>JR(t)));return Et.create(e,n.op)}function lz(n){if(n.getFilters().length===0)return[];const e=Vv(JR(n));return Ve(eP(e),7391),Ov(e)||Mv(e)?[e]:e.getFilters()}function Ov(n){return n instanceof it}function Mv(n){return n instanceof Et&&iw(n)}function eP(n){return Ov(n)||Mv(n)||(function(t){if(t instanceof Et&&Iv(t)){for(const r of t.getFilters())if(!Ov(r)&&!Mv(r))return!1;return!0}return!1})(n)}function Vv(n){if(Ve(n instanceof it||n instanceof Et,34018),n instanceof it)return n;if(n.filters.length===1)return Vv(n.filters[0]);const e=n.filters.map((r=>Vv(r)));let t=Et.create(e,n.op);return t=wp(t),eP(t)?t:(Ve(t instanceof Et,64498),Ve(yl(t),40251),Ve(t.filters.length>1,57927),t.filters.reduce(((r,s)=>fw(r,s))))}function fw(n,e){let t;return Ve(n instanceof it||n instanceof Et,38388),Ve(e instanceof it||e instanceof Et,25473),t=n instanceof it?e instanceof it?(function(s,i){return Et.create([s,i],"and")})(n,e):CS(n,e):e instanceof it?CS(e,n):(function(s,i){if(Ve(s.filters.length>0&&i.filters.length>0,48005),yl(s)&&yl(i))return yR(s,i.getFilters());const c=Iv(s)?s:i,u=Iv(s)?i:s,d=c.filters.map((p=>fw(p,u)));return Et.create(d,"or")})(n,e),wp(t)}function CS(n,e){if(yl(e))return yR(e,n.getFilters());{const t=e.filters.map((r=>fw(n,r)));return Et.create(t,"or")}}function wp(n){if(Ve(n instanceof it||n instanceof Et,11850),n instanceof it)return n;const e=n.getFilters();if(e.length===1)return wp(e[0]);if(mR(n))return n;const t=e.map((s=>wp(s))),r=[];return t.forEach((s=>{s instanceof it?r.push(s):s instanceof Et&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:Et.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(){this.Cn=new pw}addToCollectionParentIndex(e,t){return this.Cn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Ir.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Ir.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class pw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new bt(yt.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new bt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="IndexedDbIndexManager",mf=new Uint8Array(0);class dz{constructor(e,t){this.databaseId=t,this.vn=new pw,this.Fn=new Co((r=>La(r)),((r,s)=>Nd(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const i={collectionId:r,parent:Un(s)};return RS(e).put(i)}return G.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[zA(t),""],!1,!0);return RS(e).J(s).next((i=>{for(const c of i){if(c.collectionId!==t)break;r.push(Ls(c.parent))}return r}))}addFieldIndex(e,t){const r=Au(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const i=r.add(s);if(t.indexState){const c=zc(e);return i.next((u=>{c.put(wS(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const r=Au(e),s=zc(e),i=Uc(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Au(e),r=Uc(e),s=zc(e);return t.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return G.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new TS(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,t){const r=Uc(e);let s=!0;const i=new Map;return G.forEach(this.Mn(t),(c=>this.xn(e,c).next((u=>{s&&(s=!!u),i.set(c,u)})))).next((()=>{if(s){let c=tt();const u=[];return G.forEach(i,((d,p)=>{fe(AS,`Using index ${(function(z){return`id=${z.indexId}|cg=${z.collectionGroup}|f=${z.fields.map((q=>`${q.fieldPath}:${q.kind}`)).join(",")}`})(d)} to execute ${La(t)}`);const g=(function(z,q){const W=vv(q);if(W===void 0)return null;for(const X of gp(z,W.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null})(p,d),m=(function(z,q){const W=new Map;for(const X of fa(q))for(const P of gp(z,X.fieldPath))switch(P.op){case"==":case"in":W.set(X.fieldPath.canonicalString(),P.value);break;case"not-in":case"!=":return W.set(X.fieldPath.canonicalString(),P.value),Array.from(W.values())}return null})(p,d),w=(function(z,q){const W=[];let X=!0;for(const P of fa(q)){const I=P.kind===0?iS(z,P.fieldPath,z.startAt):aS(z,P.fieldPath,z.startAt);W.push(I.value),X&&(X=I.inclusive)}return new gl(W,X)})(p,d),S=(function(z,q){const W=[];let X=!0;for(const P of fa(q)){const I=P.kind===0?aS(z,P.fieldPath,z.endAt):iS(z,P.fieldPath,z.endAt);W.push(I.value),X&&(X=I.inclusive)}return new gl(W,X)})(p,d),R=this.On(d,p,w),C=this.On(d,p,S),A=this.Nn(d,p,m),O=this.Bn(d.indexId,g,R,w.inclusive,C,S.inclusive,A);return G.forEach(O,(U=>r.Y(U,t.limit).next((z=>{z.forEach((q=>{const W=Se.fromSegments(q.documentKey);c.has(W)||(c=c.add(W),u.push(W))}))}))))})).next((()=>u))}return G.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=lz(Et.create(e.filters,"and")).map((r=>Cv(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,s,i,c,u){const d=(t!=null?t.length:1)*Math.max(r.length,i.length),p=d/(t!=null?t.length:1),g=[];for(let m=0;m<d;++m){const w=t?this.Ln(t[m/p]):mf,S=this.kn(e,w,r[m%p],s),R=this.qn(e,w,i[m%p],c),C=u.map((A=>this.kn(e,w,A,!0)));g.push(...this.createRange(S,R,C))}return g}kn(e,t,r,s){const i=new _a(e,Se.empty(),t,r);return s?i:i.An()}qn(e,t,r,s){const i=new _a(e,Se.empty(),t,r);return s?i.An():i}xn(e,t){const r=new TS(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let c=null;for(const u of i)r.yn(u)&&(!c||u.fields.length>c.fields.length)&&(c=u);return c}))}getIndexType(e,t){let r=2;const s=this.Mn(t);return G.forEach(s,(i=>this.xn(e,i).next((c=>{c?r!==0&&c.fields.length<(function(d){let p=new bt(Ut.comparator),g=!1;for(const m of d.filters)for(const w of m.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?g=!0:p=p.add(w.field));for(const m of d.orderBy)m.field.isKeyField()||(p=p.add(m.field));return p.size+(g?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(c){return c.limit!==null})(t)&&s.length>1&&r===2?1:r))}Qn(e,t){const r=new Cu;for(const s of fa(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const c=r.Pn(s.kind);va.Kt.Dt(i,c)}return r.un()}Ln(e){const t=new Cu;return va.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Cu;return va.Kt.Dt(hd(this.databaseId,t),r.Pn((function(i){const c=fa(i);return c.length===0?0:c[c.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let s=[];s.push(new Cu);let i=0;for(const c of fa(e)){const u=r[i++];for(const d of s)if(this.Un(t,c.fieldPath)&&fd(u))s=this.Kn(s,c,u);else{const p=d.Pn(c.kind);va.Kt.Dt(u,p)}}return this.Wn(s)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const s=[...e],i=[];for(const c of r.arrayValue.values||[])for(const u of s){const d=new Cu;d.seed(u.un()),va.Kt.Dt(c,d.Pn(t.kind)),i.push(d)}return i}Un(e,t){return!!e.filters.find((r=>r instanceof it&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Au(e),s=zc(e);return(t?r.J(wv,IDBKeyRange.bound(t,t)):r.J()).next((i=>{const c=[];return G.forEach(i,(u=>s.get([u.indexId,this.uid]).next((d=>{c.push((function(g,m){const w=m?new od(m.sequenceNumber,new Ir(ja(m.readTime),new Se(Ls(m.documentKey)),m.largestBatchId)):od.empty(),S=g.fields.map((([R,C])=>new Df(Ut.fromServerFormat(R),C)));return new up(g.indexId,g.collectionGroup,S,w)})(u,d))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Ke(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Au(e),i=zc(e);return this.Gn(e).next((c=>s.J(wv,IDBKeyRange.bound(t,t)).next((u=>G.forEach(u,(d=>i.put(wS(d.indexId,this.uid,c,r))))))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,((s,i)=>{const c=r.get(s.collectionGroup);return(c?G.resolve(c):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(r.set(s.collectionGroup,u),G.forEach(u,(d=>this.zn(e,s,d).next((p=>{const g=this.jn(i,d);return p.isEqual(g)?G.resolve():this.Jn(e,i,d,p,g)})))))))}))}Hn(e,t,r,s){return Uc(e).put(s.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,s){return Uc(e).delete(s.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const s=Uc(e);let i=new bt(oi);return s.ee({index:XA,range:IDBKeyRange.only([r.indexId,this.uid,zf(this.$n(r,t))])},((c,u)=>{i=i.add(new _a(r.indexId,t,IS(u.arrayValue),IS(u.directionalValue)))})).next((()=>i))}jn(e,t){let r=new bt(oi);const s=this.Qn(t,e);if(s==null)return r;const i=vv(t);if(i!=null){const c=e.data.field(i.fieldPath);if(fd(c))for(const u of c.arrayValue.values||[])r=r.add(new _a(t.indexId,e.key,this.Ln(u),s))}else r=r.add(new _a(t.indexId,e.key,mf,s));return r}Jn(e,t,r,s,i){fe(AS,"Updating index entries for document '%s'",t.key);const c=[];return(function(d,p,g,m,w){const S=d.getIterator(),R=p.getIterator();let C=Fc(S),A=Fc(R);for(;C||A;){let O=!1,U=!1;if(C&&A){const z=g(C,A);z<0?U=!0:z>0&&(O=!0)}else C!=null?U=!0:O=!0;O?(m(A),A=Fc(R)):U?(w(C),C=Fc(S)):(C=Fc(S),A=Fc(R))}})(s,i,oi,(u=>{c.push(this.Hn(e,t,r,u))}),(u=>{c.push(this.Yn(e,t,r,u))})),G.waitFor(c)}Gn(e){let t=1;return zc(e).ee({index:YA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((c,u)=>oi(c,u))).filter(((c,u,d)=>!u||oi(c,d[u-1])!==0));const s=[];s.push(e);for(const c of r){const u=oi(c,e),d=oi(c,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(c),s.push(c.An());else if(d>0)break}s.push(t);const i=[];for(let c=0;c<s.length;c+=2){if(this.Zn(s[c],s[c+1]))return[];const u=s[c].Vn(this.uid,mf,Se.empty()),d=s[c+1].Vn(this.uid,mf,Se.empty());i.push(IDBKeyRange.bound(u,d))}return i}Zn(e,t){return oi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(PS)}getMinOffset(e,t){return G.mapArray(this.Mn(t),(r=>this.xn(e,r).next((s=>s||Ne(44426))))).next(PS)}}function RS(n){return fn(n,ld)}function Uc(n){return fn(n,qu)}function Au(n){return fn(n,ew)}function zc(n){return fn(n,Bu)}function PS(n){Ve(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;Y_(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Ir(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tP=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(n,e,t){const r=n.store(ss),s=n.store(ul),i=[],c=IDBKeyRange.only(t.batchId);let u=0;const d=r.ee({range:c},((g,m,w)=>(u++,w.delete())));i.push(d.next((()=>{Ve(u===1,47070,{batchId:t.batchId})})));const p=[];for(const g of t.mutations){const m=KA(e,g.key.path,t.batchId);i.push(s.delete(m)),p.push(g.key)}return G.waitFor(i).next((()=>p))}function Ep(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ne(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(tP,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);class gm{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,t,r,s){Ve(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new gm(i,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ii(e).ee({index:Ea,range:r},((s,i,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const i=Kc(e),c=ii(e);return c.add({}).next((u=>{Ve(typeof u=="number",49019);const d=new cw(u,t,r,s),p=(function(S,R,C){const A=C.baseMutations.map((U=>vp(S.yt,U))),O=C.mutations.map((U=>vp(S.yt,U)));return{userId:R,batchId:C.batchId,localWriteTimeMs:C.localWriteTime.toMillis(),baseMutations:A,mutations:O}})(this.serializer,this.userId,d),g=[];let m=new bt(((w,S)=>Ke(w.canonicalString(),S.canonicalString())));for(const w of s){const S=KA(this.userId,w.key.path,u);m=m.add(w.key.path.popLast()),g.push(c.put(p)),g.push(i.put(S,U6))}return m.forEach((w=>{g.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),G.waitFor(g).next((()=>d))}))}lookupMutationBatch(e,t){return ii(e).get(t).next((r=>r?(Ve(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),ya(this.serializer,r)):null))}er(e,t){return this.Xn[t]?G.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return ii(e).ee({index:Ea,range:s},((c,u,d)=>{u.userId===this.userId&&(Ve(u.batchId>=r,47524,{tr:r}),i=ya(this.serializer,u)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Sa;return ii(e).ee({index:Ea,range:t,reverse:!0},((s,i,c)=>{r=i.batchId,c.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Sa],[this.userId,Number.POSITIVE_INFINITY]);return ii(e).J(Ea,t).next((r=>r.map((s=>ya(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Of(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return Kc(e).ee({range:s},((c,u,d)=>{const[p,g,m]=c,w=Ls(g);if(p===this.userId&&t.path.isEqual(w))return ii(e).get(m).next((S=>{if(!S)throw Ne(61480,{nr:c,batchId:m});Ve(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:m}),i.push(ya(this.serializer,S))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(Ke);const s=[];return t.forEach((i=>{const c=Of(this.userId,i.path),u=IDBKeyRange.lowerBound(c),d=Kc(e).ee({range:u},((p,g,m)=>{const[w,S,R]=p,C=Ls(S);w===this.userId&&i.path.isEqual(C)?r=r.add(R):m.done()}));s.push(d)})),G.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,i=Of(this.userId,r),c=IDBKeyRange.lowerBound(i);let u=new bt(Ke);return Kc(e).ee({range:c},((d,p,g)=>{const[m,w,S]=d,R=Ls(w);m===this.userId&&r.isPrefixOf(R)?R.length===s&&(u=u.add(S)):g.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],s=[];return t.forEach((i=>{s.push(ii(e).get(i).next((c=>{if(c===null)throw Ne(35274,{batchId:i});Ve(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:i}),r.push(ya(this.serializer,c))})))})),G.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return nP(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),G.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),s=[];return Kc(e).ee({range:r},((i,c,u)=>{if(i[0]===this.userId){const d=Ls(i[1]);s.push(d)}else u.done()})).next((()=>{Ve(s.length===0,56720,{sr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,t){return rP(e,this.userId,t)}_r(e){return sP(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Sa,lastStreamToken:""}))}}function rP(n,e,t){const r=Of(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r);let c=!1;return Kc(n).ee({range:i,X:!0},((u,d,p)=>{const[g,m,w]=u;g===e&&m===s&&(c=!0),p.done()})).next((()=>c))}function ii(n){return fn(n,ss)}function Kc(n){return fn(n,ul)}function sP(n){return fn(n,ad)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ua(0)}static cr(){return new Ua(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new Ua(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ue.fromTimestamp(new mt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>$c(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ve(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let s=0;const i=[];return $c(e).ee(((c,u)=>{const d=Lu(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,i.push(this.removeTargetData(e,d)))})).next((()=>G.waitFor(i))).next((()=>s))}forEachTarget(e,t){return $c(e).ee(((r,s)=>{const i=Lu(s);t(i)}))}lr(e){return NS(e).get(fp).next((t=>(Ve(t!==null,2888),t)))}hr(e,t){return NS(e).put(fp,t)}Pr(e,t){return $c(e).put(YR(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=La(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return $c(e).ee({range:s,index:QA},((c,u,d)=>{const p=Lu(u);Nd(t,p.target)&&(i=p,d.done())})).next((()=>i))}addMatchingKeys(e,t,r){const s=[],i=pi(e);return t.forEach((c=>{const u=Un(c.path);s.push(i.put({targetId:r,path:u})),s.push(this.referenceDelegate.addReference(e,r,c))})),G.waitFor(s)}removeMatchingKeys(e,t,r){const s=pi(e);return G.forEach(t,(i=>{const c=Un(i.path);return G.waitFor([s.delete([r,c]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,t){const r=pi(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=pi(e);let i=tt();return s.ee({range:r,X:!0},((c,u,d)=>{const p=Ls(c[1]),g=new Se(p);i=i.add(g)})).next((()=>i))}containsKey(e,t){const r=Un(t.path),s=IDBKeyRange.bound([r],[zA(r)],!1,!0);let i=0;return pi(e).ee({index:J_,X:!0,range:s},(([c,u],d,p)=>{c!==0&&(i++,p.done())})).next((()=>i>0))}At(e,t){return $c(e).get(t).next((r=>r?Lu(r):null))}}function $c(n){return fn(n,dl)}function NS(n){return fn(n,Ia)}function pi(n){return fn(n,hl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="LruGarbageCollector",fz=1048576;function OS([n,e],[t,r]){const s=Ke(n,t);return s===0?Ke(e,r):s}class pz{constructor(e){this.Ir=e,this.buffer=new bt(OS),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();OS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(DS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ki(t)?fe(DS,"Ignoring IndexedDB error during garbage collection: ",t):await Wa(t)}await this.Vr(3e5)}))}}class mz{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(Ur.ce);const r=new pz(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(kS)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),kS):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,i,c,u,d,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,c=Date.now(),this.nthSequenceNumber(e,s)))).next((m=>(r=m,u=Date.now(),this.removeTargets(e,r,t)))).next((m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(p=Date.now(),qc()<=ot.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${s} in `+(u-c)+`ms
	Removed ${i} targets in `+(d-u)+`ms
	Removed ${m} documents in `+(p-d)+`ms
Total Duration: ${p-g}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m}))))}}function iP(n,e){return new mz(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,t){this.db=e,this.garbageCollector=iP(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,s)=>t(s)))}addReference(e,t,r){return gf(e,r)}removeReference(e,t,r){return gf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return gf(e,t)}br(e,t){return(function(s,i){let c=!1;return sP(s).te((u=>rP(s,u,i).next((d=>(d&&(c=!0),G.resolve(!d)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,((c,u)=>{if(u<=t){const d=this.br(e,c).next((p=>{if(!p)return i++,r.getEntry(e,c).next((()=>(r.removeEntry(c,Ue.min()),pi(e).delete((function(m){return[0,Un(m.path)]})(c)))))}));s.push(d)}})).next((()=>G.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return gf(e,t)}Sr(e,t){const r=pi(e);let s,i=Ur.ce;return r.ee({index:J_},(([c,u],{path:d,sequenceNumber:p})=>{c===0?(i!==Ur.ce&&t(new Se(Ls(s)),i),i=p,s=d):i=Ur.ce})).next((()=>{i!==Ur.ce&&t(new Se(Ls(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function gf(n,e){return pi(n).put((function(r,s){return{targetId:0,path:Un(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.changes=new Co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yz{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ua(e).put(r)}removeEntry(e,t,r){return ua(e).delete((function(i,c){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],_p(c),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=qt.newInvalidDocument(t);return ua(e).ee({index:Mf,range:IDBKeyRange.only(Ru(t))},((s,i)=>{r=this.Cr(t,i)})).next((()=>r))}vr(e,t){let r={size:0,document:qt.newInvalidDocument(t)};return ua(e).ee({index:Mf,range:IDBKeyRange.only(Ru(t))},((s,i)=>{r={document:this.Cr(t,i),size:Ep(i)}})).next((()=>r))}getEntries(e,t){let r=xr();return this.Fr(e,t,((s,i)=>{const c=this.Cr(s,i);r=r.insert(s,c)})).next((()=>r))}Mr(e,t){let r=xr(),s=new Ot(Se.comparator);return this.Fr(e,t,((i,c)=>{const u=this.Cr(i,c);r=r.insert(i,u),s=s.insert(i,Ep(c))})).next((()=>({documents:r,Or:s})))}Fr(e,t,r){if(t.isEmpty())return G.resolve();let s=new bt(LS);t.forEach((d=>s=s.add(d)));const i=IDBKeyRange.bound(Ru(s.first()),Ru(s.last())),c=s.getIterator();let u=c.getNext();return ua(e).ee({index:Mf,range:i},((d,p,g)=>{const m=Se.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;u&&LS(u,m)<0;)r(u,null),u=c.getNext();u&&u.isEqual(m)&&(r(u,p),u=c.hasNext()?c.getNext():null),u?g.j(Ru(u)):g.done()})).next((()=>{for(;u;)r(u,null),u=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,i){const c=t.path,u=[c.popLast().toArray(),c.lastSegment(),_p(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ua(e).J(IDBKeyRange.bound(u,d,!0)).next((p=>{i?.incrementDocumentReadCount(p.length);let g=xr();for(const m of p){const w=this.Cr(Se.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);w.isFoundDocument()&&(Od(t,w)||s.has(w.key))&&(g=g.insert(w.key,w))}return g}))}getAllFromCollectionGroup(e,t,r,s){let i=xr();const c=VS(t,r),u=VS(t,Ir.max());return ua(e).ee({index:ZA,range:IDBKeyRange.bound(c,u,!0)},((d,p,g)=>{const m=this.Cr(Se.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);i=i.insert(m.key,m),i.size===s&&g.done()})).next((()=>i))}newChangeBuffer(e){return new vz(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return MS(e).get(_v).next((t=>(Ve(!!t,20021),t)))}Dr(e,t){return MS(e).put(_v,t)}Cr(e,t){if(t){const r=nz(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ue.min())))return r}return qt.newInvalidDocument(e)}}function cP(n){return new yz(n)}class vz extends aP{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Co((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new bt(((i,c)=>Ke(i.canonicalString(),c.canonicalString())));return this.changes.forEach(((i,c)=>{const u=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,u.readTime)),c.isValidDocument()){const d=vS(this.Nr.serializer,c);s=s.add(i.path.popLast());const p=Ep(d);r+=p-u.size,t.push(this.Nr.addEntry(e,i,d))}else if(r-=u.size,this.trackRemovals){const d=vS(this.Nr.serializer,c.convertToNoDocument(Ue.min()));t.push(this.Nr.addEntry(e,i,d))}})),s.forEach((i=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))})),t.push(this.Nr.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:s})=>(s.forEach(((i,c)=>{this.Br.set(i,{size:c,readTime:r.get(i).readTime})})),r)))}}function MS(n){return fn(n,cd)}function ua(n){return fn(n,hp)}function Ru(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function VS(n,e){const t=e.documentKey.path.toArray();return[n,_p(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function LS(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=Ke(t[i],r[i]),s)return s;return s=Ke(t.length,r.length),s||(s=Ke(t[t.length-2],r[r.length-2]),s||Ke(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _z{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Ku(r.mutation,s,sr.empty(),mt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,tt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=tt()){const s=Fs();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((i=>{let c=Mu();return i.forEach(((u,d)=>{c=c.insert(u,d.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const r=Fs();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,tt())))}populateOverlays(e,t,r){const s=[];return r.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((c,u)=>{t.set(c,u)}))}))}computeViews(e,t,r,s){let i=xr();const c=Gu(),u=(function(){return Gu()})();return t.forEach(((d,p)=>{const g=r.get(p.key);s.has(p.key)&&(g===void 0||g.mutation instanceof Ao)?i=i.insert(p.key,p):g!==void 0?(c.set(p.key,g.mutation.getFieldMask()),Ku(g.mutation,p,g.mutation.getFieldMask(),mt.now())):c.set(p.key,sr.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((p,g)=>c.set(p,g))),t.forEach(((p,g)=>u.set(p,new _z(g,c.get(p)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Gu();let s=new Ot(((c,u)=>c-u)),i=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const u of c)u.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let g=r.get(d)||sr.empty();g=u.applyToLocalView(p,g),r.set(d,g);const m=(s.get(u.batchId)||tt()).add(d);s=s.insert(u.batchId,m)}))})).next((()=>{const c=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,g=d.value,m=TR();g.forEach((w=>{if(!i.has(w)){const S=DR(t.get(w),r.get(w));S!==null&&m.set(w,S),i=i.add(w)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,m))}return G.waitFor(c)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(c){return Se.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ER(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((i=>{const c=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):G.resolve(Fs());let u=sd,d=i;return c.next((p=>G.forEach(p,((g,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(g)?G.resolve():this.remoteDocumentCache.getEntry(e,g).next((w=>{d=d.insert(g,w)}))))).next((()=>this.populateOverlays(e,p,i))).next((()=>this.computeViews(e,d,p,tt()))).next((g=>({batchId:u,changes:IR(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Se(t)).next((r=>{let s=Mu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let c=Mu();return this.indexManager.getCollectionParents(e,i).next((u=>G.forEach(u,(d=>{const p=(function(m,w){return new Dl(w,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((g=>{g.forEach(((m,w)=>{c=c.insert(m,w)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((c=>(i=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s)))).next((c=>{i.forEach(((d,p)=>{const g=p.getKey();c.get(g)===null&&(c=c.insert(g,qt.newInvalidDocument(g)))}));let u=Mu();return c.forEach(((d,p)=>{const g=i.get(d);g!==void 0&&Ku(g.mutation,p,sr.empty(),mt.now()),Od(t,p)&&(u=u.insert(d,p))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return G.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Wn(s.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:XR(s.bundledQuery),readTime:Wn(s.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ez{constructor(){this.overlays=new Ot(Se.comparator),this.qr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Fs();return G.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,i)=>{this.St(e,t,i)})),G.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const s=Fs(),i=t.length+1,c=new Se(t.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===i&&d.largestBatchId>r&&s.set(d.getKey(),d)}return G.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new Ot(((p,g)=>p-g));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let g=i.get(p.largestBatchId);g===null&&(g=Fs(),i=i.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const u=Fs(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,g)=>u.set(p,g))),!(u.size()>=s)););return G.resolve(u)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const c=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new uw(t,r));let i=this.qr.get(t);i===void 0&&(i=tt(),this.qr.set(t,i)),this.qr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(){this.sessionToken=rn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(){this.Qr=new bt(_n.$r),this.Ur=new bt(_n.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new _n(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new _n(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Se(new yt([])),r=new _n(t,e),s=new _n(t,e+1),i=[];return this.Ur.forEachInRange([r,s],(c=>{this.Gr(c),i.push(c.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Se(new yt([])),r=new _n(t,e),s=new _n(t,e+1);let i=tt();return this.Ur.forEachInRange([r,s],(c=>{i=i.add(c.key)})),i}containsKey(e){const t=new _n(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class _n{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Se.comparator(e.key,t.key)||Ke(e.Yr,t.Yr)}static Kr(e,t){return Ke(e.Yr,t.Yr)||Se.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xz{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new bt(_n.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new cw(i,t,r,s);this.mutationQueue.push(c);for(const u of s)this.Zr=this.Zr.add(new _n(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return G.resolve(c)}lookupMutationBatch(e,t){return G.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Sa:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new _n(t,0),s=new _n(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(c=>{const u=this.Xr(c.Yr);i.push(u)})),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bt(Ke);return t.forEach((s=>{const i=new _n(s,0),c=new _n(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,c],(u=>{r=r.add(u.Yr)}))})),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;Se.isDocumentKey(i)||(i=i.child(""));const c=new _n(new Se(i),0);let u=new bt(Ke);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(d.Yr)),!0)}),c),G.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ve(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(t.mutations,(s=>{const i=new _n(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new _n(t,0),s=this.Zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sz{constructor(e){this.ri=e,this.docs=(function(){return new Ot(Se.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,c=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let r=xr();return t.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():qt.newInvalidDocument(s))})),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=xr();const c=t.path,u=new Se(c.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:g}}=d.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Y_(qA(g),r)<=0||(s.has(g.key)||Od(t,g))&&(i=i.insert(g.key,g.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,t,r,s){Ne(9500)}ii(e,t){return G.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new Iz(this)}getSize(e){return G.resolve(this.size)}}class Iz extends aP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),G.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tz{constructor(e){this.persistence=e,this.si=new Co((t=>La(t)),Nd),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new mw,this.targetCount=0,this.ai=Ua.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),G.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ua(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Pr(t),G.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.si.forEach(((c,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(c),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),G.waitFor(i).next((()=>s))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((c=>{i.push(s.markPotentiallyOrphaned(e,c))})),G.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ur(0),this.li=!1,this.li=!0,this.hi=new bz,this.referenceDelegate=e(this),this.Pi=new Tz(this),this.indexManager=new uz,this.remoteDocumentCache=(function(s){return new Sz(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new QR(t),this.Ii=new wz(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ez,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new xz(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const s=new Cz(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,t){return G.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class Cz extends WA{constructor(e){super(),this.currentSequenceNumber=e}}class ym{constructor(e){this.persistence=e,this.Ri=new mw,this.Vi=null}static mi(e){return new ym(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,(r=>{const s=Se.fromPath(r);return this.gi(e,s).next((i=>{i||t.removeEntry(s,Ue.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return G.or([()=>G.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class bp{constructor(e,t){this.persistence=e,this.pi=new Co((r=>Un(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=iP(this,t)}static mi(e,t){return new bp(e,t)}Ei(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return G.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?G.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(c=>this.br(e,c,t).next((u=>{u||(r++,i.removeEntry(c,Ue.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),G.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Lf(e.data.value)),t}br(e,t,r){return G.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Az{constructor(e){this.serializer=e}k(e,t,r,s){const i=new sm("createOrUpgrade",t);r<1&&s>=1&&((function(d){d.createObjectStore(kd)})(e),(function(d){d.createObjectStore(ad,{keyPath:j6}),d.createObjectStore(ss,{keyPath:Kx,autoIncrement:!0}).createIndex(Ea,Zx,{unique:!0}),d.createObjectStore(ul)})(e),FS(e),(function(d){d.createObjectStore(pa)})(e));let c=G.resolve();return r<3&&s>=3&&(r!==0&&((function(d){d.deleteObjectStore(hl),d.deleteObjectStore(dl),d.deleteObjectStore(Ia)})(e),FS(e)),c=c.next((()=>(function(d){const p=d.store(Ia),g={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ue.min().toTimestamp(),targetCount:0};return p.put(fp,g)})(i)))),r<4&&s>=4&&(r!==0&&(c=c.next((()=>(function(d,p){return p.store(ss).J().next((m=>{d.deleteObjectStore(ss),d.createObjectStore(ss,{keyPath:Kx,autoIncrement:!0}).createIndex(Ea,Zx,{unique:!0});const w=p.store(ss),S=m.map((R=>w.put(R)));return G.waitFor(S)}))})(e,i)))),c=c.next((()=>{(function(d){d.createObjectStore(fl,{keyPath:K6})})(e)}))),r<5&&s>=5&&(c=c.next((()=>this.yi(i)))),r<6&&s>=6&&(c=c.next((()=>((function(d){d.createObjectStore(cd)})(e),this.wi(i))))),r<7&&s>=7&&(c=c.next((()=>this.Si(i)))),r<8&&s>=8&&(c=c.next((()=>this.bi(e,i)))),r<9&&s>=9&&(c=c.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(c=c.next((()=>this.Di(i)))),r<11&&s>=11&&(c=c.next((()=>{(function(d){d.createObjectStore(im,{keyPath:Z6})})(e),(function(d){d.createObjectStore(am,{keyPath:Q6})})(e)}))),r<12&&s>=12&&(c=c.next((()=>{(function(d){const p=d.createObjectStore(cm,{keyPath:rU});p.createIndex(Ev,sU,{unique:!1}),p.createIndex(JA,oU,{unique:!1})})(e)}))),r<13&&s>=13&&(c=c.next((()=>(function(d){const p=d.createObjectStore(hp,{keyPath:z6});p.createIndex(Mf,$6),p.createIndex(ZA,B6)})(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(pa)))),r<14&&s>=14&&(c=c.next((()=>this.Fi(e,i)))),r<15&&s>=15&&(c=c.next((()=>(function(d){d.createObjectStore(ew,{keyPath:Y6,autoIncrement:!0}).createIndex(wv,X6,{unique:!1}),d.createObjectStore(Bu,{keyPath:J6}).createIndex(YA,eU,{unique:!1}),d.createObjectStore(qu,{keyPath:tU}).createIndex(XA,nU,{unique:!1})})(e)))),r<16&&s>=16&&(c=c.next((()=>{t.objectStore(Bu).clear()})).next((()=>{t.objectStore(qu).clear()}))),r<17&&s>=17&&(c=c.next((()=>{(function(d){d.createObjectStore(tw,{keyPath:iU})})(e)}))),r<18&&s>=18&&ZC()&&(c=c.next((()=>{t.objectStore(Bu).clear()})).next((()=>{t.objectStore(qu).clear()}))),c}wi(e){let t=0;return e.store(pa).ee(((r,s)=>{t+=Ep(s)})).next((()=>{const r={byteSize:t};return e.store(cd).put(_v,r)}))}yi(e){const t=e.store(ad),r=e.store(ss);return t.J().next((s=>G.forEach(s,(i=>{const c=IDBKeyRange.bound([i.userId,Sa],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Ea,c).next((u=>G.forEach(u,(d=>{Ve(d.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const p=ya(this.serializer,d);return nP(e,i.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(hl),r=e.store(pa);return e.store(Ia).get(fp).next((s=>{const i=[];return r.ee(((c,u)=>{const d=new yt(c),p=(function(m){return[0,Un(m)]})(d);i.push(t.get(p).next((g=>g?G.resolve():(m=>t.put({targetId:0,path:Un(m),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>G.waitFor(i)))}))}bi(e,t){e.createObjectStore(ld,{keyPath:G6});const r=t.store(ld),s=new pw,i=c=>{if(s.add(c)){const u=c.lastSegment(),d=c.popLast();return r.put({collectionId:u,parent:Un(d)})}};return t.store(pa).ee({X:!0},((c,u)=>{const d=new yt(c);return i(d.popLast())})).next((()=>t.store(ul).ee({X:!0},(([c,u,d],p)=>{const g=Ls(u);return i(g.popLast())}))))}Di(e){const t=e.store(dl);return t.ee(((r,s)=>{const i=Lu(s),c=YR(this.serializer,i);return t.put(c)}))}Ci(e,t){const r=t.store(pa),s=[];return r.ee(((i,c)=>{const u=t.store(hp),d=(function(m){return m.document?new Se(yt.fromString(m.document.name).popFirst(5)):m.noDocument?Se.fromSegments(m.noDocument.path):m.unknownDocument?Se.fromSegments(m.unknownDocument.path):Ne(36783)})(c).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};s.push(u.put(p))})).next((()=>G.waitFor(s)))}Fi(e,t){const r=t.store(ss),s=cP(this.serializer),i=new gw(ym.mi,this.serializer.yt);return r.J().next((c=>{const u=new Map;return c.forEach((d=>{let p=u.get(d.userId)??tt();ya(this.serializer,d).keys().forEach((g=>p=p.add(g))),u.set(d.userId,p)})),G.forEach(u,((d,p)=>{const g=new In(p),m=mm.wt(this.serializer,g),w=i.getIndexManager(g),S=gm.wt(g,this.serializer,w,i.referenceDelegate);return new lP(s,S,m,w).recalculateAndSaveOverlaysForDocumentKeys(new bv(t,Ur.ce),d).next()}))}))}}function FS(n){n.createObjectStore(hl,{keyPath:H6}).createIndex(J_,W6,{unique:!0}),n.createObjectStore(dl,{keyPath:"targetId"}).createIndex(QA,q6,{unique:!0}),n.createObjectStore(Ia)}const ai="IndexedDbPersistence",Ny=18e5,Dy=5e3,Oy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Rz="main";class yw{constructor(e,t,r,s,i,c,u,d,p,g,m=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=i,this.window=c,this.document=u,this.xi=p,this.Oi=g,this.Ni=m,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=w=>Promise.resolve(),!yw.v())throw new we(ne.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gz(this,s),this.$i=t+Rz,this.serializer=new QR(d),this.Ui=new bi(this.$i,this.Ni,new Az(this.serializer)),this.hi=new sz,this.Pi=new hz(this.referenceDelegate,this.serializer),this.remoteDocumentCache=cP(this.serializer),this.Ii=new rz,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,g===!1&&Hn(ai,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new we(ne.FAILED_PRECONDITION,Oy);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Ur(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>yf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ki(e))return fe(ai,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe(ai,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Pu(e).get(Lc).next((t=>G.resolve(this.es(t))))}ts(e){return yf(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Ny)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=fn(t,fl);return r.J().next((s=>{const i=this.ss(s,Ny),c=s.filter((u=>i.indexOf(u)===-1));return G.forEach(c,(u=>r.delete(u.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?G.resolve(!0):Pu(e).get(Lc).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Dy)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new we(ne.FAILED_PRECONDITION,Oy);return!1}}return!(!this.networkEnabled||!this.inForeground)||yf(e).J().next((r=>this.ss(r,Dy).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,c=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(i||c&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&fe(ai,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[kd,fl],(e=>{const t=new bv(e,Ur.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>yf(e).J().next((t=>this.ss(t,Ny).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return gm.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new dz(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return mm.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){fe(ai,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=(function(d){return d===18?lU:d===17?rR:d===16?cU:d===15?nw:d===14?nR:d===13?tR:d===12?aU:d===11?eR:void Ne(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,s,i,(u=>(c=new bv(u,this.ci?this.ci.next():Ur.ce),t==="readwrite-primary"?this.Hi(c).next((d=>!!d||this.Yi(c))).next((d=>{if(!d)throw Hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new we(ne.FAILED_PRECONDITION,HA);return r(c)})).next((d=>this.Xi(c).next((()=>d)))):this.Is(c).next((()=>r(c)))))).then((u=>(c.raiseOnCommittedEvent(),u)))}Is(e){return Pu(e).get(Lc).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Dy)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new we(ne.FAILED_PRECONDITION,Oy)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pu(e).put(Lc,t)}static v(){return bi.v()}Zi(e){const t=Pu(e);return t.get(Lc).next((r=>this.es(r)?(fe(ai,"Releasing primary lease."),t.delete(Lc)):G.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Hn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;KC()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return fe(ai,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Hn(ai,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Hn("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pu(n){return fn(n,kd)}function yf(n){return fn(n,fl)}function Pz(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=tt(),s=tt();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vw(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return KC()?8:GA(dn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ys(e,t).next((c=>{i.result=c})).next((()=>{if(!i.result)return this.ws(e,t,s,r).next((c=>{i.result=c}))})).next((()=>{if(i.result)return;const c=new kz;return this.Ss(e,t,c).next((u=>{if(i.result=u,this.Vs)return this.bs(e,t,c,u.size)}))})).next((()=>i.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(qc()<=ot.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Hc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(qc()<=ot.DEBUG&&fe("QueryEngine","Query:",Hc(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(qc()<=ot.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Hc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(t))):G.resolve())}ys(e,t){if(cS(t))return G.resolve(null);let r=$r(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Rv(t,null,"F"),r=$r(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const c=tt(...i);return this.ps.getDocuments(e,c).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.Ds(t,u);return this.Cs(t,p,c,d.readTime)?this.ys(e,Rv(t,null,"F")):this.vs(e,p,t,d)}))))})))))}ws(e,t,r,s){return cS(t)||s.isEqual(Ue.min())?G.resolve(null):this.ps.getDocuments(e,r).next((i=>{const c=this.Ds(t,i);return this.Cs(t,c,r,s)?G.resolve(null):(qc()<=ot.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Hc(t)),this.vs(e,c,t,N6(s,sd)).next((u=>u)))}))}Ds(e,t){let r=new bt(xR(e));return t.forEach(((s,i)=>{Od(e,i)&&(r=r.add(i))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return qc()<=ot.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Hc(t)),this.ps.getDocumentsMatchingQuery(e,t,Ir.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(t.forEach((c=>{i=i.insert(c.key,c)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w="LocalStore",Nz=3e8;class Dz{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new Ot(Ke),this.xs=new Co((i=>La(i)),Nd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function dP(n,e,t,r){return new Dz(n,e,t,r)}async function hP(n,e){const t=Ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((i=>{const c=[],u=[];let d=tt();for(const p of s){c.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}for(const p of i){u.push(p.batchId);for(const g of p.mutations)d=d.add(g.key)}return t.localDocuments.getDocuments(r,d).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:u})))}))}))}function Oz(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,g){const m=p.batch,w=m.keys();let S=G.resolve();return w.forEach((R=>{S=S.next((()=>g.getEntry(d,R))).next((C=>{const A=p.docVersions.get(R);Ve(A!==null,48541),C.version.compareTo(A)<0&&(m.applyToRemoteDocument(C,p),C.isValidDocument()&&(C.setReadTime(p.commitVersion),g.addEntry(C)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(d,m)))})(t,r,e,i).next((()=>i.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=tt();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function fP(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Mz(n,e){const t=Ze(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((g,m)=>{const w=s.get(m);if(!w)return;u.push(t.Pi.removeMatchingKeys(i,g.removedDocuments,m).next((()=>t.Pi.addMatchingKeys(i,g.addedDocuments,m))));let S=w.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(rn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):g.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(g.resumeToken,r)),s=s.insert(m,S),(function(C,A,O){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=Nz?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0})(w,S,g)&&u.push(t.Pi.updateTargetData(i,S))}));let d=xr(),p=tt();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(i,g))})),u.push(Vz(i,c,e.documentUpdates).next((g=>{d=g.ks,p=g.qs}))),!r.isEqual(Ue.min())){const g=t.Pi.getLastRemoteSnapshotVersion(i).next((m=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));u.push(g)}return G.waitFor(u).next((()=>c.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,d,p))).next((()=>d))})).then((i=>(t.Ms=s,i)))}function Vz(n,e,t){let r=tt(),s=tt();return t.forEach((i=>r=r.add(i))),e.getEntries(n,r).next((i=>{let c=xr();return t.forEach(((u,d)=>{const p=i.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Ue.min())?(e.removeEntry(u,d.readTime),c=c.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),c=c.insert(u,d)):fe(_w,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{ks:c,qs:s}}))}function Lz(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Sa),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Fz(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((i=>i?(s=i,G.resolve(s)):t.Pi.allocateTargetId(r).next((c=>(s=new vo(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Lv(n,e,t){const r=Ze(n),s=r.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,(c=>r.persistence.referenceDelegate.removeTarget(c,s)))}catch(c){if(!ki(c))throw c;fe(_w,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function jS(n,e,t){const r=Ze(n);let s=Ue.min(),i=tt();return r.persistence.runTransaction("Execute query","readwrite",(c=>(function(d,p,g){const m=Ze(d),w=m.xs.get(g);return w!==void 0?G.resolve(m.Ms.get(w)):m.Pi.getTargetData(p,g)})(r,c,$r(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(c,u.targetId).next((d=>{i=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(c,e,t?s:Ue.min(),t?i:tt()))).next((u=>(jz(r,SU(e),u),{documents:u,Qs:i})))))}function jz(n,e,t){let r=n.Os.get(e)||Ue.min();t.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Os.set(e,r)}class US{constructor(){this.activeTargetIds=PU()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pP{constructor(){this.Mo=new US,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new US,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="ConnectivityMonitor";class $S{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(zS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(zS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf=null;function Fv(){return vf===null?vf=(function(){return 268435456+Math.round(2147483648*Math.random())})():vf++,"0x"+vf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="RestConnection",zz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $z{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===pp?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,i){const c=Fv(),u=this.zo(e,t.toUriEncodedString());fe(My,`Sending RPC '${e}' ${c}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,i);const{host:p}=new URL(u),g=Rl(p);return this.Jo(e,u,d,r,g).then((m=>(fe(My,`Received RPC '${e}' ${c}: `,m),m)),(m=>{throw Ma(My,`RPC '${e}' ${c} failed with error: `,m,"url: ",u,"request:",r),m}))}Ho(e,t,r,s,i,c){return this.Go(e,t,r,s,i)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Nl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,t){const r=zz[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="WebChannelConnection";class qz extends $z{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const c=Fv();return new Promise(((u,d)=>{const p=new OA;p.setWithCredentials(!0),p.listenOnce(MA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Nf.NO_ERROR:const m=p.getResponseJson();fe(On,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(m)),u(m);break;case Nf.TIMEOUT:fe(On,`RPC '${e}' ${c} timed out`),d(new we(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Nf.HTTP_ERROR:const w=p.getStatus();if(fe(On,`RPC '${e}' ${c} failed with status:`,w,"response text:",p.getResponseText()),w>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const R=S?.error;if(R&&R.status&&R.message){const C=(function(O){const U=O.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(U)>=0?U:ne.UNKNOWN})(R.status);d(new we(C,R.message))}else d(new we(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new we(ne.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{fe(On,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(s);fe(On,`RPC '${e}' ${c} sending request:`,s),p.send(t,"POST",g,r,15)}))}T_(e,t,r){const s=Fv(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=FA(),u=LA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const g=i.join("");fe(On,`Creating RPC '${e}' stream ${s}: ${g}`,d);const m=c.createWebChannel(g,d);this.I_(m);let w=!1,S=!1;const R=new Bz({Yo:A=>{S?fe(On,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(w||(fe(On,`Opening RPC '${e}' stream ${s} transport.`),m.open(),w=!0),fe(On,`RPC '${e}' stream ${s} sending:`,A),m.send(A))},Zo:()=>m.close()}),C=(A,O,U)=>{A.listen(O,(z=>{try{U(z)}catch(q){setTimeout((()=>{throw q}),0)}}))};return C(m,Ou.EventType.OPEN,(()=>{S||(fe(On,`RPC '${e}' stream ${s} transport opened.`),R.o_())})),C(m,Ou.EventType.CLOSE,(()=>{S||(S=!0,fe(On,`RPC '${e}' stream ${s} transport closed`),R.a_(),this.E_(m))})),C(m,Ou.EventType.ERROR,(A=>{S||(S=!0,Ma(On,`RPC '${e}' stream ${s} transport errored. Name:`,A.name,"Message:",A.message),R.a_(new we(ne.UNAVAILABLE,"The operation could not be completed")))})),C(m,Ou.EventType.MESSAGE,(A=>{if(!S){const O=A.data[0];Ve(!!O,16349);const U=O,z=U?.error||U[0]?.error;if(z){fe(On,`RPC '${e}' stream ${s} received error:`,z);const q=z.status;let W=(function(I){const k=tn[I];if(k!==void 0)return VR(k)})(q),X=z.message;W===void 0&&(W=ne.INTERNAL,X="Unknown error status: "+q+" with message "+z.message),S=!0,R.a_(new we(W,X)),m.close()}else fe(On,`RPC '${e}' stream ${s} received:`,O),R.u_(O)}})),C(u,VA.STAT_EVENT,(A=>{A.stat===gv.PROXY?fe(On,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===gv.NOPROXY&&fe(On,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{R.__()}),0),R}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(){return typeof window<"u"?window:null}function $f(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(n){return new WU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="PersistentStream";class gP{constructor(e,t,r,s,i,c,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new mP(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Hn(t.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new we(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(BS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(fe(BS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Wz extends gP{constructor(e,t,r,s,i,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,c),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=ZU(this.serializer,e),r=(function(i){if(!("targetChange"in i))return Ue.min();const c=i.targetChange;return c.targetIds&&c.targetIds.length?Ue.min():c.readTime?Wn(c.readTime):Ue.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Nv(this.serializer),t.addTarget=(function(i,c){let u;const d=c.target;if(u=mp(d)?{documents:qR(i,d)}:{query:HR(i,d).ft},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=jR(i,c.resumeToken);const p=Pv(i,c.expectedCount);p!==null&&(u.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ue.min())>0){u.readTime=El(i,c.snapshotVersion.toTimestamp());const p=Pv(i,c.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);const r=YU(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Nv(this.serializer),t.removeTarget=e,this.q_(t)}}class Gz extends gP{constructor(e,t,r,s,i,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,c),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=QU(e.writeResults,e.commitTime),r=Wn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Nv(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>vp(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{}class Zz extends Kz{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new we(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,c])=>this.connection.Go(e,kv(t,r),s,i,c))).catch((i=>{throw i.name==="FirebaseError"?(i.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new we(ne.UNKNOWN,i.toString())}))}Ho(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,u])=>this.connection.Ho(e,kv(t,r),s,c,u,i))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Qz{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hn(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za="RemoteStore";class Yz{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((c=>{r.enqueueAndForget((async()=>{Ga(this)&&(fe(za,"Restarting streams for network reachability change."),await(async function(d){const p=Ze(d);p.Ea.add(4),await Ld(p),p.Ra.set("Unknown"),p.Ea.delete(4),await _m(p)})(this))}))})),this.Ra=new Qz(r,s)}}async function _m(n){if(Ga(n))for(const e of n.da)await e(!0)}async function Ld(n){for(const e of n.da)await e(!1)}function yP(n,e){const t=Ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),xw(t)?bw(t):Ml(t).O_()&&Ew(t,e))}function ww(n,e){const t=Ze(n),r=Ml(t);t.Ia.delete(e),r.O_()&&vP(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ga(t)&&t.Ra.set("Unknown"))}function Ew(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ml(n).Y_(e)}function vP(n,e){n.Va.Ue(e),Ml(n).Z_(e)}function bw(n){n.Va=new $U({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Ml(n).start(),n.Ra.ua()}function xw(n){return Ga(n)&&!Ml(n).x_()&&n.Ia.size>0}function Ga(n){return Ze(n).Ea.size===0}function _P(n){n.Va=void 0}async function Xz(n){n.Ra.set("Online")}async function Jz(n){n.Ia.forEach(((e,t)=>{Ew(n,e)}))}async function e9(n,e){_P(n),xw(n)?(n.Ra.ha(e),bw(n)):n.Ra.set("Unknown")}async function t9(n,e,t){if(n.Ra.set("Online"),e instanceof FR&&e.state===2&&e.cause)try{await(async function(s,i){const c=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,c),s.Ia.delete(u),s.Va.removeTarget(u))})(n,e)}catch(r){fe(za,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xp(n,r)}else if(e instanceof Uf?n.Va.Ze(e):e instanceof LR?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ue.min()))try{const r=await fP(n.localStore);t.compareTo(r)>=0&&await(function(i,c){const u=i.Va.Tt(c);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const g=i.Ia.get(p);g&&i.Ia.set(p,g.withResumeToken(d.resumeToken,c))}})),u.targetMismatches.forEach(((d,p)=>{const g=i.Ia.get(d);if(!g)return;i.Ia.set(d,g.withResumeToken(rn.EMPTY_BYTE_STRING,g.snapshotVersion)),vP(i,d);const m=new vo(g.target,d,p,g.sequenceNumber);Ew(i,m)})),i.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){fe(za,"Failed to raise snapshot:",r),await xp(n,r)}}async function xp(n,e,t){if(!ki(e))throw e;n.Ea.add(1),await Ld(n),n.Ra.set("Offline"),t||(t=()=>fP(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(za,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _m(n)}))}function wP(n,e){return e().catch((t=>xp(n,t,e)))}async function Fd(n){const e=Ze(n),t=Ri(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sa;for(;n9(e);)try{const s=await Lz(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,r9(e,s)}catch(s){await xp(e,s)}EP(e)&&bP(e)}function n9(n){return Ga(n)&&n.Ta.length<10}function r9(n,e){n.Ta.push(e);const t=Ri(n);t.O_()&&t.X_&&t.ea(e.mutations)}function EP(n){return Ga(n)&&!Ri(n).x_()&&n.Ta.length>0}function bP(n){Ri(n).start()}async function s9(n){Ri(n).ra()}async function o9(n){const e=Ri(n);for(const t of n.Ta)e.ea(t.mutations)}async function i9(n,e,t){const r=n.Ta.shift(),s=lw.from(r,e,t);await wP(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Fd(n)}async function a9(n,e){e&&Ri(n).X_&&await(async function(r,s){if((function(c){return jU(c)&&c!==ne.ABORTED})(s.code)){const i=r.Ta.shift();Ri(r).B_(),await wP(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Fd(r)}})(n,e),EP(n)&&bP(n)}async function qS(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),fe(za,"RemoteStore received new credentials");const r=Ga(t);t.Ea.add(3),await Ld(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _m(t)}async function c9(n,e){const t=Ze(n);e?(t.Ea.delete(2),await _m(t)):e||(t.Ea.add(2),await Ld(t),t.Ra.set("Unknown"))}function Ml(n){return n.ma||(n.ma=(function(t,r,s){const i=Ze(t);return i.sa(),new Wz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:Xz.bind(null,n),t_:Jz.bind(null,n),r_:e9.bind(null,n),H_:t9.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),xw(n)?bw(n):n.Ra.set("Unknown")):(await n.ma.stop(),_P(n))}))),n.ma}function Ri(n){return n.fa||(n.fa=(function(t,r,s){const i=Ze(t);return i.sa(),new Gz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:s9.bind(null,n),r_:a9.bind(null,n),ta:o9.bind(null,n),na:i9.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Fd(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(za,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const c=Date.now()+r,u=new Sw(e,t,c,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iw(n,e){if(Hn("AsyncQueue",`${e}: ${n}`),ki(n))return new we(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{static emptySet(e){return new nl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Se.comparator(t.key,r.key):(t,r)=>Se.comparator(t.key,r.key),this.keyedMap=Mu(),this.sortedSet=new Ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.ga=new Ot(Se.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class bl{constructor(e,t,r,s,i,c,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,i){const c=[];return t.forEach((u=>{c.push({type:0,doc:u})})),new bl(e,t,nl.emptySet(t),c,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class u9{constructor(){this.queries=WS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=Ze(t),i=s.queries;s.queries=WS(),i.forEach(((c,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new we(ne.ABORTED,"Firestore shutting down"))}}function WS(){return new Co((n=>bR(n)),dm)}async function Tw(n,e){const t=Ze(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new l9,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const u=Iw(c,`Initialization of query '${Hc(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&Aw(t)}async function Cw(n,e){const t=Ze(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const c=i.Sa.indexOf(e);c>=0&&(i.Sa.splice(c,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function d9(n,e){const t=Ze(n);let r=!1;for(const s of e){const i=s.query,c=t.queries.get(i);if(c){for(const u of c.Sa)u.Fa(s)&&(r=!0);c.wa=s}}r&&Aw(t)}function h9(n,e,t){const r=Ze(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function Aw(n){n.Ca.forEach((e=>{e.next()}))}var jv,GS;(GS=jv||(jv={})).Ma="default",GS.Cache="cache";class Rw{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new bl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=bl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e){this.key=e}}class SP{constructor(e){this.key=e}}class f9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=tt(),this.mutatedKeys=tt(),this.eu=xR(e),this.tu=new nl(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new HS,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,c=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((g,m)=>{const w=s.get(g),S=Od(this.query,m)?m:null,R=!!w&&this.mutatedKeys.has(w.key),C=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let A=!1;w&&S?w.data.isEqual(S.data)?R!==C&&(r.track({type:3,doc:S}),A=!0):this.su(w,S)||(r.track({type:2,doc:S}),A=!0,(d&&this.eu(S,d)>0||p&&this.eu(S,p)<0)&&(u=!0)):!w&&S?(r.track({type:0,doc:S}),A=!0):w&&!S&&(r.track({type:1,doc:w}),A=!0,(d||p)&&(u=!0)),A&&(S?(c=c.add(S),i=C?i.add(g):i.delete(g)):(c=c.delete(g),i=i.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),i=i.delete(g.key),r.track({type:1,doc:g})}return{tu:c,iu:r,Cs:u,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,m)=>(function(S,R){const C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:A})}};return C(S)-C(R)})(g.type,m.type)||this.eu(g.doc,m.doc))),this.ou(r),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,c.length!==0||p?{snapshot:new bl(this.query,e.tu,i,c,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new HS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=tt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new SP(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new xP(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=tt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return bl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Pw="SyncEngine";class p9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class m9{constructor(e){this.key=e,this.hu=!1}}class g9{constructor(e,t,r,s,i,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Co((u=>bR(u)),dm),this.Iu=new Map,this.Eu=new Set,this.du=new Ot(Se.comparator),this.Au=new Map,this.Ru=new mw,this.Vu={},this.mu=new Map,this.fu=Ua.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function y9(n,e,t=!0){const r=PP(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await IP(r,e,t,!0),s}async function v9(n,e){const t=PP(n);await IP(t,e,!0,!1)}async function IP(n,e,t,r){const s=await Fz(n.localStore,$r(e)),i=s.targetId,c=n.sharedClientState.addLocalQueryTarget(i,t);let u;return r&&(u=await _9(n,e,i,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&yP(n.remoteStore,s),u}async function _9(n,e,t,r,s){n.pu=(m,w,S)=>(async function(C,A,O,U){let z=A.view.ru(O);z.Cs&&(z=await jS(C.localStore,A.query,!1).then((({documents:P})=>A.view.ru(P,z))));const q=U&&U.targetChanges.get(A.targetId),W=U&&U.targetMismatches.get(A.targetId)!=null,X=A.view.applyChanges(z,C.isPrimaryClient,q,W);return ZS(C,A.targetId,X.au),X.snapshot})(n,m,w,S);const i=await jS(n.localStore,e,!0),c=new f9(e,i.Qs),u=c.ru(i.documents),d=Vd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=c.applyChanges(u,n.isPrimaryClient,d);ZS(n,t,p.au);const g=new p9(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function w9(n,e,t){const r=Ze(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((c=>!dm(c,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Lv(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ww(r.remoteStore,s.targetId),Uv(r,s.targetId)})).catch(Wa)):(Uv(r,s.targetId),await Lv(r.localStore,s.targetId,!0))}async function E9(n,e){const t=Ze(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ww(t.remoteStore,r.targetId))}async function b9(n,e,t){const r=kP(n);try{const s=await(function(c,u){const d=Ze(c),p=mt.now(),g=u.reduce(((S,R)=>S.add(R.key)),tt());let m,w;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let R=xr(),C=tt();return d.Ns.getEntries(S,g).next((A=>{R=A,R.forEach(((O,U)=>{U.isValidDocument()||(C=C.add(O))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,R))).next((A=>{m=A;const O=[];for(const U of u){const z=LU(U,m.get(U.key).overlayedDocument);z!=null&&O.push(new Ao(U.key,z,fR(z.value.mapValue),un.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,O,u)})).next((A=>{w=A;const O=A.applyToLocalDocumentSet(m,C);return d.documentOverlayCache.saveOverlays(S,A.batchId,O)}))})).then((()=>({batchId:w.batchId,changes:IR(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(c,u,d){let p=c.Vu[c.currentUser.toKey()];p||(p=new Ot(Ke)),p=p.insert(u,d),c.Vu[c.currentUser.toKey()]=p})(r,s.batchId,t),await jd(r,s.changes),await Fd(r.remoteStore)}catch(s){const i=Iw(s,"Failed to persist write");t.reject(i)}}async function TP(n,e){const t=Ze(n);try{const r=await Mz(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const c=t.Au.get(i);c&&(Ve(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.hu=!0:s.modifiedDocuments.size>0?Ve(c.hu,14607):s.removedDocuments.size>0&&(Ve(c.hu,42227),c.hu=!1))})),await jd(t,r,e)}catch(r){await Wa(r)}}function KS(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((i,c)=>{const u=c.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(c,u){const d=Ze(c);d.onlineState=u;let p=!1;d.queries.forEach(((g,m)=>{for(const w of m.Sa)w.va(u)&&(p=!0)})),p&&Aw(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function x9(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let c=new Ot(Se.comparator);c=c.insert(i,qt.newNoDocument(i,Ue.min()));const u=tt().add(i),d=new pm(Ue.min(),new Map,new Ot(Ke),c,u);await TP(r,d),r.du=r.du.remove(i),r.Au.delete(e),kw(r)}else await Lv(r.localStore,e,!1).then((()=>Uv(r,e,t))).catch(Wa)}async function S9(n,e){const t=Ze(n),r=e.batch.batchId;try{const s=await Oz(t.localStore,e);AP(t,r,null),CP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await jd(t,s)}catch(s){await Wa(s)}}async function I9(n,e,t){const r=Ze(n);try{const s=await(function(c,u){const d=Ze(c);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let g;return d.mutationQueue.lookupMutationBatch(p,u).next((m=>(Ve(m!==null,37113),g=m.keys(),d.mutationQueue.removeMutationBatch(p,m)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,g,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g))).next((()=>d.localDocuments.getDocuments(p,g)))}))})(r.localStore,e);AP(r,e,t),CP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await jd(r,s)}catch(s){await Wa(s)}}function CP(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function AP(n,e,t){const r=Ze(n);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Uv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||RP(n,r)}))}function RP(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(ww(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),kw(n))}function ZS(n,e,t){for(const r of t)r instanceof xP?(n.Ru.addReference(r.key,e),T9(n,r)):r instanceof SP?(fe(Pw,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||RP(n,r.key)):Ne(19791,{wu:r})}function T9(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(fe(Pw,"New document in limbo: "+t),n.Eu.add(r),kw(n))}function kw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Se(yt.fromString(e)),r=n.fu.next();n.Au.set(r,new m9(t)),n.du=n.du.insert(t,r),yP(n.remoteStore,new vo($r(Dd(t.path)),r,"TargetPurposeLimboResolution",Ur.ce))}}async function jd(n,e,t){const r=Ze(n),s=[],i=[],c=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{c.push(r.pu(d,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const g=p?!p.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,g?"current":"not-current")}if(p){s.push(p);const g=vw.As(d.targetId,p);i.push(g)}})))})),await Promise.all(c),r.Pu.H_(s),await(async function(d,p){const g=Ze(d);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>G.forEach(p,(w=>G.forEach(w.Es,(S=>g.persistence.referenceDelegate.addReference(m,w.targetId,S))).next((()=>G.forEach(w.ds,(S=>g.persistence.referenceDelegate.removeReference(m,w.targetId,S)))))))))}catch(m){if(!ki(m))throw m;fe(_w,"Failed to update sequence numbers: "+m)}for(const m of p){const w=m.targetId;if(!m.fromCache){const S=g.Ms.get(w),R=S.snapshotVersion,C=S.withLastLimboFreeSnapshotVersion(R);g.Ms=g.Ms.insert(w,C)}}})(r.localStore,i))}async function C9(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){fe(Pw,"User change. New user:",e.toKey());const r=await hP(t.localStore,e);t.currentUser=e,(function(i,c){i.mu.forEach((u=>{u.forEach((d=>{d.reject(new we(ne.CANCELLED,c))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await jd(t,r.Ls)}}function A9(n,e){const t=Ze(n),r=t.Au.get(e);if(r&&r.hu)return tt().add(r.key);{let s=tt();const i=t.Iu.get(e);if(!i)return s;for(const c of i){const u=t.Tu.get(c);s=s.unionWith(u.view.nu)}return s}}function PP(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x9.bind(null,e),e.Pu.H_=d9.bind(null,e.eventManager),e.Pu.yu=h9.bind(null,e.eventManager),e}function kP(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I9.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vm(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return dP(this.persistence,new uP,e.initialUser,this.serializer)}Cu(e){return new gw(ym.mi,this.serializer)}Du(e){return new pP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class R9 extends gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ve(this.persistence.referenceDelegate instanceof bp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new oP(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new gw((r=>bp.mi(r,t)),this.serializer)}}class P9 extends gd{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await kP(this.xu.syncEngine),await Fd(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return dP(this.persistence,new uP,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new oP(r,e.asyncQueue,t)}Mu(e,t){const r=new V6(t,this.persistence);return new M6(e.asyncQueue,r)}Cu(e){const t=Pz(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new yw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Hz(),$f(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new pP}}class Sp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>KS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=C9.bind(null,this.syncEngine),await c9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new u9})()}createDatastore(e){const t=vm(e.databaseInfo.databaseId),r=(function(i){return new qz(i)})(e.databaseInfo);return(function(i,c,u,d){return new Zz(i,c,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,i,c,u){return new Yz(r,s,i,c,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>KS(this.syncEngine,t,0)),(function(){return $S.v()?new $S:new Uz})())}createSyncEngine(e,t){return(function(s,i,c,u,d,p,g){const m=new g9(s,i,c,u,d,p);return g&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=Ze(t);fe(za,"RemoteStore shutting down."),r.Ea.add(5),await Ld(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Sp.provider={build:()=>new Sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="FirestoreClient";class k9{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=In.UNAUTHENTICATED,this.clientId=Q_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async c=>{fe(Pi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(r,(c=>(fe(Pi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Iw(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Vy(n,e){n.asyncQueue.verifyOperationInProgress(),fe(Pi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await hP(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function QS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await N9(n);fe(Pi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>qS(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>qS(e.remoteStore,s))),n._onlineComponents=e}async function N9(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(Pi,"Using user provided OfflineComponentProvider");try{await Vy(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ne.FAILED_PRECONDITION||s.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ma("Error using user provided cache. Falling back to memory cache: "+t),await Vy(n,new gd)}}else fe(Pi,"Using default OfflineComponentProvider"),await Vy(n,new R9(void 0));return n._offlineComponents}async function NP(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(Pi,"Using user provided OnlineComponentProvider"),await QS(n,n._uninitializedComponentsProvider._online)):(fe(Pi,"Using default OnlineComponentProvider"),await QS(n,new Sp))),n._onlineComponents}function D9(n){return NP(n).then((e=>e.syncEngine))}async function Ip(n){const e=await NP(n),t=e.eventManager;return t.onListen=y9.bind(null,e.syncEngine),t.onUnlisten=w9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=v9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=E9.bind(null,e.syncEngine),t}function O9(n,e,t={}){const r=new zs;return n.asyncQueue.enqueueAndForget((async()=>(function(i,c,u,d,p){const g=new Nw({next:w=>{g.Nu(),c.enqueueAndForget((()=>Cw(i,m)));const S=w.docs.has(u);!S&&w.fromCache?p.reject(new we(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&w.fromCache&&d&&d.source==="server"?p.reject(new we(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),m=new Rw(Dd(u.path),g,{includeMetadataChanges:!0,qa:!0});return Tw(i,m)})(await Ip(n),n.asyncQueue,e,t,r))),r.promise}function M9(n,e,t={}){const r=new zs;return n.asyncQueue.enqueueAndForget((async()=>(function(i,c,u,d,p){const g=new Nw({next:w=>{g.Nu(),c.enqueueAndForget((()=>Cw(i,m))),w.fromCache&&d.source==="server"?p.reject(new we(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),m=new Rw(u,g,{includeMetadataChanges:!0,qa:!0});return Tw(i,m)})(await Ip(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="firestore.googleapis.com",XS=!0;class JS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=OP,this.ssl=XS}else this.host=e.host,this.ssl=e.ssl??XS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=tP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fz)throw new we(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DP(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new we(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new we(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new we(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wm{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new JS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new JS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new E6;switch(r.type){case"firstParty":return new I6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=YS.get(t);r&&(fe("ComponentProvider","Removing Datastore"),YS.delete(t),r.terminate())})(this),Promise.resolve()}}function V9(n,e,t,r={}){n=jn(n,wm);const s=Rl(e),i=n._getSettings(),c={...i,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;s&&(HC(`https://${u}`),WC("Firestore",!0)),i.host!==OP&&i.host!==u&&Ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...i,host:u,ssl:s,emulatorOptions:r};if(!ka(d,c)&&(n._setSettings(d),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=In.MOCK_USER;else{p=YF(r.mockUserToken,n._app?.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new we(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new In(m)}n._authCredentials=new b6(new UA(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Di(this.firestore,e,this._query)}}class Ht{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ht(this.firestore,e,this._key)}toJSON(){return{type:Ht._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Pd(t,Ht._jsonSchema))return new Ht(e,r||null,new Se(yt.fromString(t.referencePath)))}}Ht._jsonSchemaVersion="firestore/documentReference/1.0",Ht._jsonSchema={type:nn("string",Ht._jsonSchemaVersion),referencePath:nn("string")};class xi extends Di{constructor(e,t,r){super(e,t,Dd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ht(this.firestore,null,new Se(e))}withConverter(e){return new xi(this.firestore,e,this._path)}}function Wt(n,e,...t){if(n=wn(n),$A("collection","path",e),n instanceof wm){const r=yt.fromString(e,...t);return Bx(r),new xi(n,null,r)}{if(!(n instanceof Ht||n instanceof xi))throw new we(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return Bx(r),new xi(n.firestore,null,r)}}function Le(n,e,...t){if(n=wn(n),arguments.length===1&&(e=Q_.newId()),$A("doc","path",e),n instanceof wm){const r=yt.fromString(e,...t);return $x(r),new Ht(n,null,new Se(r))}{if(!(n instanceof Ht||n instanceof xi))throw new we(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return $x(r),new Ht(n.firestore,n instanceof xi?n.converter:null,new Se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="AsyncQueue";class tI{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new mP(this,"async_queue_retry"),this._c=()=>{const r=$f();r&&fe(eI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=$f();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=$f();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new zs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ki(e))throw e;fe(eI,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Hn("INTERNAL UNHANDLED ERROR: ",nI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Sw.createAndSchedule(this,e,t,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&Ne(47125,{Pc:nI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function nI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(n,["next","error","complete"])}class us extends wm{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new tI,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new tI(e),this._firestoreClient=void 0,await e}}}function L9(n,e){const t=typeof n=="object"?n:eA(),r=typeof n=="string"?n:pp,s=F_(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ZF("firestore");i&&V9(s,...i)}return s}function Ud(n){if(n._terminated)throw new we(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||MP(n),n._firestoreClient}function MP(n){const e=n._freezeSettings(),t=(function(s,i,c,u){return new dU(s,i,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,DP(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new k9(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}function F9(n,e){Ma("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return j9(n,Sp.provider,{build:r=>new P9(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function j9(n,e,t){if((n=jn(n,us))._firestoreClient||n._terminated)throw new we(ne.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new we(ne.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},MP(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jr(rn.fromBase64String(e))}catch(t){throw new we(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jr(rn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Pd(e,jr._jsonSchema))return jr.fromBase64String(e.bytes)}}jr._jsonSchemaVersion="firestore/bytes/1.0",jr._jsonSchema={type:nn("string",jr._jsonSchemaVersion),bytes:nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$s._jsonSchemaVersion}}static fromJSON(e){if(Pd(e,$s._jsonSchema))return new $s(e.latitude,e.longitude)}}$s._jsonSchemaVersion="firestore/geoPoint/1.0",$s._jsonSchema={type:nn("string",$s._jsonSchemaVersion),latitude:nn("number"),longitude:nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Bs._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Pd(e,Bs._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Bs(e.vectorValues);throw new we(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bs._jsonSchemaVersion="firestore/vectorValue/1.0",Bs._jsonSchema={type:nn("string",Bs._jsonSchemaVersion),vectorValues:nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=/^__.*__$/;class z9{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ol(e,this.data,t,this.fieldTransforms)}}class VP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:n})}}class Dw{constructor(e,t,r,s,i,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Tp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(LP(this.Ac)&&U9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class $9{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vm(e)}Cc(e,t,r,s=!1){return new Dw({Ac:e,methodName:t,Dc:r,path:Ut.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $d(n){const e=n._freezeSettings(),t=vm(n._databaseId);return new $9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ow(n,e,t,r,s,i={}){const c=n.Cc(i.merge||i.mergeFields?2:0,e,t,s);Vw("Data must be an object, but it was:",c,r);const u=UP(r,c);let d,p;if(i.merge)d=new sr(c.fieldMask),p=c.fieldTransforms;else if(i.mergeFields){const g=[];for(const m of i.mergeFields){const w=zv(e,m,t);if(!c.contains(w))throw new we(ne.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);$P(g,w)||g.push(w)}d=new sr(g),p=c.fieldTransforms.filter((m=>d.covers(m.field)))}else d=null,p=c.fieldTransforms;return new z9(new Fn(u),d,p)}class bm extends Em{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bm}}class Mw extends Em{_toFieldTransform(e){return new NR(e.path,new vl)}isEqual(e){return e instanceof Mw}}function FP(n,e,t,r){const s=n.Cc(1,e,t);Vw("Data must be an object, but it was:",s,r);const i=[],c=Fn.empty();Ni(r,((d,p)=>{const g=Lw(e,d,t);p=wn(p);const m=s.yc(g);if(p instanceof bm)i.push(g);else{const w=Bd(p,m);w!=null&&(i.push(g),c.set(g,w))}}));const u=new sr(i);return new VP(c,u,s.fieldTransforms)}function jP(n,e,t,r,s,i){const c=n.Cc(1,e,t),u=[zv(e,r,t)],d=[s];if(i.length%2!=0)throw new we(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<i.length;w+=2)u.push(zv(e,i[w])),d.push(i[w+1]);const p=[],g=Fn.empty();for(let w=u.length-1;w>=0;--w)if(!$P(p,u[w])){const S=u[w];let R=d[w];R=wn(R);const C=c.yc(S);if(R instanceof bm)p.push(S);else{const A=Bd(R,C);A!=null&&(p.push(S),g.set(S,A))}}const m=new sr(p);return new VP(g,m,c.fieldTransforms)}function B9(n,e,t,r=!1){return Bd(t,n.Cc(r?4:3,e))}function Bd(n,e){if(zP(n=wn(n)))return Vw("Unsupported field value:",e,n),UP(n,e);if(n instanceof Em)return(function(r,s){if(!LP(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let c=0;for(const u of r){let d=Bd(u,s.wc(c));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),c++}return{arrayValue:{values:i}}})(n,e)}return(function(r,s){if((r=wn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kU(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=mt.fromDate(r);return{timestampValue:El(s.serializer,i)}}if(r instanceof mt){const i=new mt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:El(s.serializer,i)}}if(r instanceof $s)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jr)return{bytesValue:jR(s.serializer,r._byteString)};if(r instanceof Ht){const i=s.databaseId,c=r.firestore._databaseId;if(!c.isEqual(i))throw s.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Bs)return(function(c,u){return{mapValue:{fields:{[sw]:{stringValue:ow},[pl]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw u.Sc("VectorValues must only contain numeric values.");return aw(u.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${rm(r)}`)})(n,e)}function UP(n,e){const t={};return sR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ni(n,((r,s)=>{const i=Bd(s,e.mc(r));i!=null&&(t[r]=i)})),{mapValue:{fields:t}}}function zP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mt||n instanceof $s||n instanceof jr||n instanceof Ht||n instanceof Em||n instanceof Bs)}function Vw(n,e,t){if(!zP(t)||!BA(t)){const r=rm(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function zv(n,e,t){if((e=wn(e))instanceof zd)return e._internalPath;if(typeof e=="string")return Lw(n,e);throw Tp("Field path arguments must be of type string or ",n,!1,void 0,t)}const q9=new RegExp("[~\\*/\\[\\]]");function Lw(n,e,t){if(e.search(q9)>=0)throw Tp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zd(...e.split("."))._internalPath}catch{throw Tp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Tp(n,e,t,r,s){const i=r&&!r.isEmpty(),c=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(i||c)&&(d+=" (found",i&&(d+=` in field ${r}`),c&&(d+=` in document ${s}`),d+=")"),new we(ne.INVALID_ARGUMENT,u+n+d)}function $P(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new H9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class H9 extends BP{data(){return super.data()}}function xm(n,e){return typeof e=="string"?Lw(n,e):e instanceof zd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fw{}class HP extends Fw{}function W9(n,e,...t){let r=[];e instanceof Fw&&r.push(e),r=r.concat(t),(function(i){const c=i.filter((d=>d instanceof jw)).length,u=i.filter((d=>d instanceof Sm)).length;if(c>1||c>0&&u>0)throw new we(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Sm extends HP{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Sm(e,t,r)}_apply(e){const t=this._parse(e);return WP(e._query,t),new Di(e.firestore,e.converter,Av(e._query,t))}_parse(e){const t=$d(e.firestore);return(function(i,c,u,d,p,g,m){let w;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new we(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){oI(m,g);const R=[];for(const C of m)R.push(sI(d,i,C));w={arrayValue:{values:R}}}else w=sI(d,i,m)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||oI(m,g),w=B9(u,c,m,g==="in"||g==="not-in");return it.create(p,g,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function zW(n,e,t){const r=e,s=xm("where",n);return Sm._create(s,r,t)}class jw extends Fw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new jw(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let c=s;const u=i.getFlattenedFilters();for(const d of u)WP(c,d),c=Av(c,d)})(e._query,t),new Di(e.firestore,e.converter,Av(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Uw extends HP{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Uw(e,t)}_apply(e){const t=(function(s,i,c){if(s.startAt!==null)throw new we(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new we(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pd(i,c)})(e._query,this._field,this._direction);return new Di(e.firestore,e.converter,(function(s,i){const c=s.explicitOrderBy.concat([i]);return new Dl(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function G9(n,e="asc"){const t=e,r=xm("orderBy",n);return Uw._create(r,t)}function sI(n,e,t){if(typeof(t=wn(t))=="string"){if(t==="")throw new we(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ER(e)&&t.indexOf("/")!==-1)throw new we(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yt.fromString(t));if(!Se.isDocumentKey(r))throw new we(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hd(n,new Se(r))}if(t instanceof Ht)return hd(n,t._key);throw new we(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rm(t)}.`)}function oI(n,e){if(!Array.isArray(n)||n.length===0)throw new we(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WP(n,e){const t=(function(s,i){for(const c of s)for(const u of c.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class K9{convertValue(e,t="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ni(e,((s,i)=>{r[s]=this.convertValue(i,t)})),r}convertVectorValue(e){const t=e.fields?.[pl].arrayValue?.values?.map((r=>Dt(r.doubleValue)));return new Bs(t)}convertGeoPoint(e){return new $s(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=lm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ud(e));default:return null}}convertTimestamp(e){const t=So(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yt.fromString(e);Ve(ZR(r),9688,{name:e});const s=new Va(r.get(1),r.get(3)),i=new Se(r.popFirst(5));return s.isEqual(t)||Hn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Fu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ca extends BP{constructor(e,t,r,s,i,c){super(e,t,r,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Bf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(xm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ca._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ca._jsonSchema={type:nn("string",Ca._jsonSchemaVersion),bundleSource:nn("string","DocumentSnapshot"),bundleName:nn("string"),bundle:nn("string")};class Bf extends Ca{data(e={}){return super.data(e)}}class Aa{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Fu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Bf(this._firestore,this._userDataWriter,r.key,r,new Fu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map((u=>{const d=new Bf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:c++}}))}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>i||u.type!==3)).map((u=>{const d=new Bf(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Fu(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,g=-1;return u.type!==0&&(p=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),g=c.indexOf(u.doc.key)),{type:Z9(u.type),doc:d,oldIndex:p,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Aa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Q_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Z9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(n){n=jn(n,Ht);const e=jn(n.firestore,us);return O9(Ud(e),n._key).then((t=>GP(e,n,t)))}Aa._jsonSchemaVersion="firestore/querySnapshot/1.0",Aa._jsonSchema={type:nn("string",Aa._jsonSchemaVersion),bundleSource:nn("string","QuerySnapshot"),bundleName:nn("string"),bundle:nn("string")};class $w extends K9{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ht(this.firestore,null,t)}}function Tr(n){n=jn(n,Di);const e=jn(n.firestore,us),t=Ud(e),r=new $w(e);return qP(n._query),M9(t,n._query).then((s=>new Aa(e,r,n,s)))}function Oi(n,e,t){n=jn(n,Ht);const r=jn(n.firestore,us),s=zw(n.converter,e,t);return qd(r,[Ow($d(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,un.none())])}function hn(n,e,t,...r){n=jn(n,Ht);const s=jn(n.firestore,us),i=$d(s);let c;return c=typeof(e=wn(e))=="string"||e instanceof zd?jP(i,"updateDoc",n._key,e,t,r):FP(i,"updateDoc",n._key,e),qd(s,[c.toMutation(n._key,un.exists(!0))])}function Ka(n){return qd(jn(n.firestore,us),[new Md(n._key,un.none())])}function Q9(n,e){const t=jn(n.firestore,us),r=Le(n),s=zw(n.converter,e);return qd(t,[Ow($d(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,un.exists(!1))]).then((()=>r))}function Mi(n,...e){n=wn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||rI(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(rI(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let i,c,u;if(n instanceof Ht)c=jn(n.firestore,us),u=Dd(n._key.path),i={next:d=>{e[r]&&e[r](GP(c,n,d))},error:e[r+1],complete:e[r+2]};else{const d=jn(n,Di);c=jn(d.firestore,us),u=d._query;const p=new $w(c);i={next:g=>{e[r]&&e[r](new Aa(c,p,d,g))},error:e[r+1],complete:e[r+2]},qP(n._query)}return(function(p,g,m,w){const S=new Nw(w),R=new Rw(g,S,m);return p.asyncQueue.enqueueAndForget((async()=>Tw(await Ip(p),R))),()=>{S.Nu(),p.asyncQueue.enqueueAndForget((async()=>Cw(await Ip(p),R)))}})(Ud(c),u,s,i)}function qd(n,e){return(function(r,s){const i=new zs;return r.asyncQueue.enqueueAndForget((async()=>b9(await D9(r),s,i))),i.promise})(Ud(n),e)}function GP(n,e,t){const r=t.docs.get(e._key),s=new $w(n);return new Ca(n,s,e._key,r,new Fu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$d(e)}set(e,t,r){this._verifyNotCommitted();const s=Ly(e,this._firestore),i=zw(s.converter,t,r),c=Ow(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(c.toMutation(s._key,un.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const i=Ly(e,this._firestore);let c;return c=typeof(t=wn(t))=="string"||t instanceof zd?jP(this._dataReader,"WriteBatch.update",i._key,t,r,s):FP(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(c.toMutation(i._key,un.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ly(e,this._firestore);return this._mutations=this._mutations.concat(new Md(t._key,un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new we(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ly(n,e){if((n=wn(n)).firestore!==e)throw new we(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function $W(){return new Mw("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(n){return Ud(n=jn(n,us)),new Y9(n,(e=>qd(n,e)))}(function(e,t=!0){(function(s){Nl=s})(Pl),al(new Na("firestore",((r,{instanceIdentifier:s,options:i})=>{const c=r.getProvider("app").getImmediate(),u=new us(new x6(r.getProvider("auth-internal")),new T6(c,r.getProvider("app-check-internal")),(function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new we(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Va(p.options.projectId,g)})(c,s),c);return i={useFetchStreams:t,...i},u._setSettings(i),u}),"PUBLIC").setMultipleInstances(!0)),wi(Fx,jx,e),wi(Fx,jx,"esm2020")})();const X9={apiKey:"AIzaSyAtQmAaUFEuyJmeOq3M3ZIkI3a1gna_Do8",authDomain:"nosql-demo-e5885.firebaseapp.com",databaseURL:"https://nosql-demo-e5885-default-rtdb.firebaseio.com",projectId:"nosql-demo-e5885",storageBucket:"nosql-demo-e5885.firebasestorage.app",messagingSenderId:"377685820338",appId:"1:377685820338:web:12a7618478c1cdeda79aab",measurementId:"G-EWRZ4F64R6"};let Fy,de,$v;try{Fy=JC(X9),de=L9(Fy),$v=y6(Fy),F9(de).catch(n=>{n.code==="failed-precondition"?console.warn("Firestore persistence failed: Multiple tabs open"):n.code==="unimplemented"&&console.warn("Firestore persistence not supported in this browser")})}catch(n){throw console.error("Firebase initialization error:",n),n}const xe={INVENTORY:"inventory",CUSTOMERS:"customers",WMS_SUPPLIERS:"wms_suppliers",SALES_ORDERS:"sales_orders",PURCHASE_ORDERS:"purchase_orders",CASH_BANK_TRANSACTIONS:"cash_bank_transactions",PAYMENT_TRANSACTIONS:"payment_transactions",SHIPMENTS:"shipments",ORDERS:"orders",USERS:"users",CATEGORIES:"categories",NOTIFICATIONS:"notifications",IMS_PRODUCTS:"products"},KP=b.createContext(void 0),wr="wms_auth_user",ci="wms_remember_me",ZP="wms_users",mi=[{id:"0",email:"owner@wms.com",password:"owner123",name:"System Owner",role:"Owner",status:"Active",createdAt:"2024-01-01T00:00:00Z"},{id:"1",email:"admin@wms.com",password:"admin123",name:"Admin User",role:"Admin",status:"Active",createdAt:"2024-01-01T00:00:00Z"},{id:"2",email:"customer@wms.com",password:"customer123",name:"Customer User",role:"Customer",status:"Active",createdAt:"2024-01-15T00:00:00Z"}];function ui(){try{const n=localStorage.getItem(ZP);if(n)return JSON.parse(n)}catch(n){console.error("Error reading users from storage:",n)}return[]}function Zu(n){localStorage.setItem(ZP,JSON.stringify(n))}async function Bv(n){try{const e=Le(de,xe.USERS,n.id);await Oi(e,n)}catch(e){throw console.error("Error saving user to Firestore:",e),e}}async function ma(){try{const n=Wt(de,xe.USERS),e=await Tr(n),t=[];return e.forEach(r=>{t.push(r.data())}),t}catch(n){console.error("Error getting users from Firestore:",n);const e=ui();return e.length===0?(console.log("Falling back to DEFAULT_USERS"),mi):e}}async function po(n,e){try{const t=Le(de,xe.USERS,n);try{await hn(t,e)}catch(r){if(r instanceof Error&&r.message.includes("No document to update")){const s=mi.find(i=>i.id===n);if(s)await Oi(t,{...s,...e}),console.log("Created default user in Firestore:",n);else throw r}else throw r}}catch(t){throw console.error("Error updating user in Firestore:",t),t}}async function iI(n){try{const e=Le(de,xe.USERS,n);await Ka(e)}catch(e){throw console.error("Error deleting user from Firestore:",e),e}}async function J9(){try{const n=await ma();if(n.length===0){console.log("Seeding default users to Firestore...");for(const e of mi)await Bv(e);return Zu(mi),console.log("Default users seeded successfully"),mi}else return Zu(n),n}catch(n){console.error("Error initializing default users:",n);const e=ui();return e.length===0?(Zu(mi),mi):e}}function e$({children:n}){const[e,t]=b.useState(null),[r,s]=b.useState(!0),[i,c]=b.useState([]);b.useEffect(()=>{let I;return(async()=>{await J9();try{const M=Wt(de,xe.USERS);I=Mi(M,V=>{const L=[];V.forEach(N=>{L.push(N.data())}),c(L),Zu(L)},V=>{console.error("Error listening to users:",V),c(ui())})}catch(M){console.error("Error setting up users listener:",M),c(ui())}})(),()=>{I&&I()}},[]),b.useEffect(()=>{(async()=>{try{const k=localStorage.getItem(wr),M=localStorage.getItem(ci);if(k&&M==="true"){const V=JSON.parse(k),N=ui().find(ue=>ue.id===V.id);N&&N.status==="Active"&&t({id:N.id,email:N.email,name:N.name,role:N.role,status:N.status,createdAt:N.createdAt,lastLogin:N.lastLogin})}else{const V=sessionStorage.getItem(wr);if(V){const L=JSON.parse(V),ue=ui().find(Me=>Me.id===L.id);ue&&ue.status==="Active"&&t({id:ue.id,email:ue.email,name:ue.name,role:ue.role,status:ue.status,createdAt:ue.createdAt,lastLogin:ue.lastLogin})}}}catch(k){console.error("Error checking authentication:",k)}finally{s(!1)}})()},[]);const u=async(I,k,M=!1)=>{console.log("[Login] Attempting login for:",I);let V=await ma();console.log("[Login] Users from Firestore:",V.length,V.map(ye=>ye.email));const L=new Set(V.map(ye=>ye.email.toLowerCase()));for(const ye of mi)L.has(ye.email.toLowerCase())||(V.push(ye),console.log("[Login] Added default user:",ye.email));console.log("[Login] Final users list:",V.length,V.map(ye=>ye.email));const N=V.find(ye=>ye.email.toLowerCase()===I.toLowerCase());if(console.log("[Login] Found user:",N?.email||"NOT FOUND"),!N)throw new Error("NO_ACCOUNT:No account found with this email address. Would you like to create one?");if(N.password!==k)throw new Error("WRONG_PASSWORD:Incorrect password. Please try again.");const ue=N;if(ue.status==="Pending")throw new Error("PENDING:Your account is pending approval. Please wait for an administrator to approve your account.");if(ue.status==="Inactive")throw new Error("INACTIVE:Your account has been deactivated. Please contact an administrator.");const Me=new Date().toISOString();try{await po(ue.id,{lastLogin:Me})}catch(ye){console.warn("Could not update lastLogin in Firestore:",ye)}const pe={id:ue.id,email:ue.email,name:ue.name,role:ue.role,status:ue.status,createdAt:ue.createdAt,lastLogin:Me};t(pe),M?(localStorage.setItem(wr,JSON.stringify(pe)),localStorage.setItem(ci,"true")):(sessionStorage.setItem(wr,JSON.stringify(pe)),localStorage.removeItem(ci))},d=async(I,k,M,V)=>{if((await ma()).some(ue=>ue.email.toLowerCase()===I.toLowerCase()))throw new Error("An account with this email already exists");const N={id:`user_${Date.now()}`,email:I,password:k,name:M,phone:V,role:"Customer",status:"Pending",createdAt:new Date().toISOString()};await Bv(N)},p=async()=>{const I=new Ms;try{const M=(await Rx($v,I)).user;if(!M.email)throw new Error("No email associated with this Google account");const V=await ma();let L=V.find(N=>N.googleUserId===M.uid);if(L||(L=V.find(N=>N.email.toLowerCase()===M.email.toLowerCase())),L){if(L.status==="Pending")throw new Error("PENDING:Your account is pending approval. Please wait for an administrator to approve your account.");if(L.status==="Inactive")throw new Error("INACTIVE:Your account has been deactivated. Please contact an administrator.");const N=new Date().toISOString();await po(L.id,{lastLogin:N});const ue={id:L.id,email:L.email,name:L.name,role:L.role,status:L.status,createdAt:L.createdAt,lastLogin:N,phone:L.phone,address:L.address,googleUserId:L.googleUserId,googleEmail:L.googleEmail};t(ue),localStorage.setItem(wr,JSON.stringify(ue)),localStorage.setItem(ci,"true")}else{const N={id:`google_${M.uid}`,email:M.email,password:"",name:M.displayName||M.email.split("@")[0],role:"Customer",status:"Pending",createdAt:new Date().toISOString(),googleUserId:M.uid,googleEmail:M.email};throw await Bv(N),new Error("PENDING:Your account has been created and is pending approval. Please wait for an administrator to approve your account.")}}catch(k){throw k instanceof Error?k.message.startsWith("PENDING:")||k.message.startsWith("INACTIVE:")||k.message.includes("popup-closed-by-user")?k:k.message.includes("auth/")?new Error("Google sign-in failed. Please try again."):k:new Error("Google sign-in failed. Please try again.")}},g=()=>{t(null),localStorage.removeItem(wr),localStorage.removeItem(ci),sessionStorage.removeItem(wr)},m=b.useCallback(()=>i.length>0?i:ui(),[i]),w=b.useCallback(()=>(i.length>0?i:ui()).filter(k=>k.status==="Pending"),[i]),S=b.useCallback(async()=>{const I=await ma();c(I),Zu(I)},[]),R=b.useCallback(async I=>{await po(I,{status:"Active"})},[]),C=b.useCallback(async I=>{await iI(I)},[]),A=b.useCallback(async(I,k)=>{await po(I,{role:k}),e&&e.id===I&&t({...e,role:k})},[e]),O=b.useCallback(async(I,k)=>{await po(I,{status:k}),e&&e.id===I&&k!=="Active"&&g()},[e]),U=b.useCallback(async I=>{await iI(I),e&&e.id===I&&g()},[e]),z=b.useCallback(async I=>{if(!e)return;await po(e.id,I);const k={...e,...I};t(k),localStorage.getItem(ci)==="true"?localStorage.setItem(wr,JSON.stringify(k)):sessionStorage.setItem(wr,JSON.stringify(k))},[e]),q=b.useCallback(async(I,k)=>{if(!e)throw new Error("Not authenticated");const V=(await ma()).find(L=>L.id===e.id);if(!V||V.password!==I)throw new Error("Current password is incorrect");await po(e.id,{password:k})},[e]),W=b.useCallback(async()=>{if(!e)throw new Error("Not authenticated");const I=new Ms;try{const M=(await Rx($v,I)).user;if(!M.email)throw new Error("No email associated with this Google account");if((await ma()).find(Me=>Me.googleUserId===M.uid&&Me.id!==e.id))throw new Error("This Google account is already linked to another WMS account");await po(e.id,{googleUserId:M.uid,googleEmail:M.email});const N={...e,googleUserId:M.uid,googleEmail:M.email};t(N),localStorage.getItem(ci)==="true"?localStorage.setItem(wr,JSON.stringify(N)):sessionStorage.setItem(wr,JSON.stringify(N))}catch(k){throw k instanceof Error?k.message.includes("popup-closed-by-user")?new Error("Google sign-in was cancelled"):k.message.includes("auth/")?new Error("Google sign-in failed. Please try again."):k:new Error("Failed to link Google account. Please try again.")}},[e]),X=b.useCallback(async()=>{if(!e)throw new Error("Not authenticated");if(!e.googleUserId)throw new Error("No Google account is currently linked");await po(e.id,{googleUserId:null,googleEmail:null});const I={...e,googleUserId:void 0,googleEmail:void 0};t(I),localStorage.getItem(ci)==="true"?localStorage.setItem(wr,JSON.stringify(I)):sessionStorage.setItem(wr,JSON.stringify(I))},[e]),P={user:e,isAuthenticated:!!e,isLoading:r,login:u,loginWithGoogle:p,logout:g,register:d,getAllUsers:m,getPendingUsers:w,approveUser:R,rejectUser:C,updateUserRole:A,updateUserStatus:O,deleteUser:U,updateProfile:z,changePassword:q,linkGoogleAccount:W,unlinkGoogleAccount:X,refreshUsers:S};return v.jsx(KP.Provider,{value:P,children:n})}function Vl(){const n=b.useContext(KP);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}var t$=(n,e,t,r,s,i,c,u)=>{let d=document.documentElement,p=["light","dark"];function g(S){(Array.isArray(n)?n:[n]).forEach(R=>{let C=R==="class",A=C&&i?s.map(O=>i[O]||O):s;C?(d.classList.remove(...A),d.classList.add(i&&i[S]?i[S]:S)):d.setAttribute(R,S)}),m(S)}function m(S){u&&p.includes(S)&&(d.style.colorScheme=S)}function w(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)g(r);else try{let S=localStorage.getItem(e)||t,R=c&&S==="system"?w():S;g(R)}catch{}},aI=["light","dark"],QP="(prefers-color-scheme: dark)",n$=typeof window>"u",Bw=b.createContext(void 0),r$={setTheme:n=>{},themes:[]},YP=()=>{var n;return(n=b.useContext(Bw))!=null?n:r$},s$=n=>b.useContext(Bw)?b.createElement(b.Fragment,null,n.children):b.createElement(i$,{...n}),o$=["light","dark"],i$=({forcedTheme:n,disableTransitionOnChange:e=!1,enableSystem:t=!0,enableColorScheme:r=!0,storageKey:s="theme",themes:i=o$,defaultTheme:c=t?"system":"light",attribute:u="data-theme",value:d,children:p,nonce:g,scriptProps:m})=>{let[w,S]=b.useState(()=>c$(s,c)),[R,C]=b.useState(()=>w==="system"?jy():w),A=d?Object.values(d):i,O=b.useCallback(W=>{let X=W;if(!X)return;W==="system"&&t&&(X=jy());let P=d?d[X]:X,I=e?l$(g):null,k=document.documentElement,M=V=>{V==="class"?(k.classList.remove(...A),P&&k.classList.add(P)):V.startsWith("data-")&&(P?k.setAttribute(V,P):k.removeAttribute(V))};if(Array.isArray(u)?u.forEach(M):M(u),r){let V=aI.includes(c)?c:null,L=aI.includes(X)?X:V;k.style.colorScheme=L}I?.()},[g]),U=b.useCallback(W=>{let X=typeof W=="function"?W(w):W;S(X);try{localStorage.setItem(s,X)}catch{}},[w]),z=b.useCallback(W=>{let X=jy(W);C(X),w==="system"&&t&&!n&&O("system")},[w,n]);b.useEffect(()=>{let W=window.matchMedia(QP);return W.addListener(z),z(W),()=>W.removeListener(z)},[z]),b.useEffect(()=>{let W=X=>{X.key===s&&(X.newValue?S(X.newValue):U(c))};return window.addEventListener("storage",W),()=>window.removeEventListener("storage",W)},[U]),b.useEffect(()=>{O(n??w)},[n,w]);let q=b.useMemo(()=>({theme:w,setTheme:U,forcedTheme:n,resolvedTheme:w==="system"?R:w,themes:t?[...i,"system"]:i,systemTheme:t?R:void 0}),[w,U,n,R,t,i]);return b.createElement(Bw.Provider,{value:q},b.createElement(a$,{forcedTheme:n,storageKey:s,attribute:u,enableSystem:t,enableColorScheme:r,defaultTheme:c,value:d,themes:i,nonce:g,scriptProps:m}),p)},a$=b.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:c,themes:u,nonce:d,scriptProps:p})=>{let g=JSON.stringify([t,e,i,n,u,c,r,s]).slice(1,-1);return b.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${t$.toString()})(${g})`}})}),c$=(n,e)=>{if(n$)return;let t;try{t=localStorage.getItem(n)||void 0}catch{}return t||e},l$=n=>{let e=document.createElement("style");return n&&e.setAttribute("nonce",n),e.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(e),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(e)},1)}},jy=n=>(n||(n=window.matchMedia(QP)),n.matches?"dark":"light");function u$({currentView:n,setCurrentView:e}){const{user:t}=Vl(),{state:r,toggleSidebar:s}=Ed(),{theme:i,setTheme:c}=YP(),u=r==="collapsed",[d,p]=b.useState(!0),S=t?.role==="Customer"?[{id:"customer-dashboard",label:"Home",icon:rD},{id:"products",label:"Warehouse Inventory",icon:LD},{id:"customer-cart",label:"Inventory Orders",icon:Lp},{id:"sales-orders",label:"Order Shipment",icon:Ab}]:[{id:"dashboard",label:"Dashboard",icon:aD},{id:"inventory",label:"Inventory",icon:Vp},{id:"purchase-orders",label:"Purchase Orders",icon:r_},{id:"sales-orders",label:"Sales Orders",icon:Ab},{id:"shipments",label:"Shipments",icon:s_},{id:"suppliers",label:"WMS Suppliers",icon:tD},{id:"customers",label:"Customers",icon:qD},{id:"transactions",label:"Transactions",icon:oD},{id:"payments",label:"Payments",icon:KD}],R=[{id:"users",label:"User Management",icon:OD}],C=()=>{window.location.reload()};return v.jsxs(r4,{collapsible:"icon",children:[v.jsx(i4,{className:"h-14 border-b border-sidebar-border px-3 flex items-center",children:v.jsx(tv,{children:v.jsxs(nv,{children:[v.jsx(rv,{asChild:!0,children:v.jsxs("button",{onClick:C,className:"flex items-center gap-2 justify-start group-data-[collapsible=icon]:justify-center w-full cursor-pointer","aria-label":"Refresh application",children:[v.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-lg bg-primary hover:bg-primary/90 transition-colors",children:v.jsx(QD,{className:"h-5 w-5 text-primary-foreground"})}),v.jsx("span",{className:"font-semibold text-sidebar-foreground group-data-[collapsible=icon]:hidden",children:"WMS"})]})}),v.jsx(Qf,{side:"right",children:v.jsx("p",{children:"Refresh Application"})})]})})}),v.jsxs(l4,{children:[v.jsxs(sx,{children:[v.jsx(ox,{children:"Management"}),v.jsx(ix,{children:v.jsx(wy,{children:S.map(A=>v.jsx(uf,{children:v.jsxs(Ey,{onClick:()=>e(A.id),isActive:n===A.id,tooltip:A.label,children:[v.jsx(A.icon,{className:"h-4 w-4 shrink-0"}),v.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:A.label})]})},A.id))})})]}),(t?.role==="Admin"||t?.role==="Owner")&&v.jsxs(sx,{children:[v.jsx(ox,{children:"Administration"}),v.jsx(ix,{children:v.jsx(wy,{children:R.map(A=>v.jsx(uf,{children:v.jsxs(Ey,{onClick:()=>e(A.id),isActive:n===A.id,tooltip:A.label,children:[v.jsx(A.icon,{className:"h-4 w-4 shrink-0"}),v.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:A.label})]})},A.id))})})]})]}),v.jsx(a4,{className:"border-t border-sidebar-border p-2",children:v.jsxs(wy,{children:[v.jsx(uf,{children:v.jsxs(iv,{modal:!1,children:[v.jsx(tv,{children:v.jsxs(nv,{children:[v.jsx(rv,{asChild:!0,children:v.jsx(av,{asChild:!0,children:v.jsxs("button",{type:"button",className:"flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-sm text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground transition-colors",children:[v.jsx(ND,{className:"h-4 w-4 shrink-0"}),v.jsx("span",{className:"group-data-[collapsible=icon]:hidden flex-1 text-left",children:"Settings"}),v.jsx(U2,{className:"h-4 w-4 shrink-0 group-data-[collapsible=icon]:hidden"})]})})}),v.jsx(Qf,{side:"right",className:"group-data-[collapsible=icon]:block hidden",children:"Settings"})]})}),v.jsxs(Jf,{side:u?"right":"top",align:"start",className:"w-56",sideOffset:8,children:[v.jsx(ep,{children:"Settings"}),v.jsx(tp,{}),v.jsxs(Xc,{onSelect:A=>A.preventDefault(),className:"flex items-center justify-between cursor-pointer",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(QI,{className:"h-4 w-4"}),v.jsx("span",{children:"Notifications"})]}),v.jsx(LC,{checked:d,onCheckedChange:p})]}),v.jsxs(Xc,{onSelect:()=>c(i==="dark"?"light":"dark"),className:"cursor-pointer",children:[i==="dark"?v.jsx(jD,{className:"mr-2 h-4 w-4"}):v.jsx(yD,{className:"mr-2 h-4 w-4"}),i==="dark"?"Light Mode":"Dark Mode"]})]})]})}),v.jsx(c4,{className:"my-1"}),v.jsx(uf,{children:v.jsxs(Ey,{onClick:s,tooltip:u?"Expand Sidebar":"Collapse Sidebar",children:[u?v.jsx(bD,{className:"h-4 w-4 shrink-0"}):v.jsx(wD,{className:"h-4 w-4 shrink-0"}),v.jsx("span",{className:"group-data-[collapsible=icon]:hidden",children:"Collapse"})]})})]})}),v.jsx(s4,{})]})}function d$(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const h$=n=>{switch(n){case"success":return m$;case"info":return y$;case"warning":return g$;case"error":return v$;default:return null}},f$=Array(12).fill(0),p$=({visible:n,className:e})=>ie.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ie.createElement("div",{className:"sonner-spinner"},f$.map((t,r)=>ie.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),m$=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),g$=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),y$=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),v$=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ie.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_$=ie.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ie.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ie.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),w$=()=>{const[n,e]=ie.useState(document.hidden);return ie.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let qv=1;class E${constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...s}=e,i=typeof e?.id=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:qv++,c=this.toasts.find(d=>d.id===i),u=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),c?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...e,id:i,title:r}),{...d,...e,id:i,dismissible:u,title:r}):d):this.addToast({title:r,...s,dismissible:u,id:i}),i},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let i=r!==void 0,c;const u=s.then(async p=>{if(c=["resolve",p],ie.isValidElement(p))i=!1,this.create({id:r,type:"default",message:p});else if(x$(p)&&!p.ok){i=!1;const m=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,w=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,R=typeof m=="object"&&!ie.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:w,...R})}else if(p instanceof Error){i=!1;const m=typeof t.error=="function"?await t.error(p):t.error,w=typeof t.description=="function"?await t.description(p):t.description,R=typeof m=="object"&&!ie.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:w,...R})}else if(t.success!==void 0){i=!1;const m=typeof t.success=="function"?await t.success(p):t.success,w=typeof t.description=="function"?await t.description(p):t.description,R=typeof m=="object"&&!ie.isValidElement(m)?m:{message:m};this.create({id:r,type:"success",description:w,...R})}}).catch(async p=>{if(c=["reject",p],t.error!==void 0){i=!1;const g=typeof t.error=="function"?await t.error(p):t.error,m=typeof t.description=="function"?await t.description(p):t.description,S=typeof g=="object"&&!ie.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:m,...S})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),d=()=>new Promise((p,g)=>u.then(()=>c[0]==="reject"?g(c[1]):p(c[1])).catch(g));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(e,t)=>{const r=t?.id||qv++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const rr=new E$,b$=(n,e)=>{const t=e?.id||qv++;return rr.addToast({title:n,...e,id:t}),t},x$=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",S$=b$,I$=()=>rr.toasts,T$=()=>rr.getActiveToasts(),Mn=Object.assign(S$,{success:rr.success,info:rr.info,warning:rr.warning,error:rr.error,custom:rr.custom,message:rr.message,promise:rr.promise,dismiss:rr.dismiss,loading:rr.loading},{getHistory:I$,getToasts:T$});d$("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function _f(n){return n.label!==void 0}const C$=3,A$="24px",R$="16px",cI=4e3,P$=356,k$=14,N$=45,D$=200;function ks(...n){return n.filter(Boolean).join(" ")}function O$(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const M$=n=>{var e,t,r,s,i,c,u,d,p;const{invert:g,toast:m,unstyled:w,interacting:S,setHeights:R,visibleToasts:C,heights:A,index:O,toasts:U,expanded:z,removeToast:q,defaultRichColors:W,closeButton:X,style:P,cancelButtonStyle:I,actionButtonStyle:k,className:M="",descriptionClassName:V="",duration:L,position:N,gap:ue,expandByDefault:Me,classNames:pe,icons:ye,closeButtonAriaLabel:H="Close toast"}=n,[re,ae]=ie.useState(null),[F,Q]=ie.useState(null),[ee,le]=ie.useState(!1),[ve,be]=ie.useState(!1),[_e,Ie]=ie.useState(!1),[Ge,ft]=ie.useState(!1),[ct,me]=ie.useState(!1),[Vt,ar]=ie.useState(0),[Ya,Qs]=ie.useState(0),cr=ie.useRef(m.duration||L||cI),Po=ie.useRef(null),_t=ie.useRef(null),Lt=O===0,lr=O+1<=C,on=m.type,Cr=m.dismissible!==!1,Xa=m.className||"",hs=m.descriptionClassName||"",fs=ie.useMemo(()=>A.findIndex(qe=>qe.toastId===m.id)||0,[A,m.id]),ko=ie.useMemo(()=>{var qe;return(qe=m.closeButton)!=null?qe:X},[m.closeButton,X]),Hr=ie.useMemo(()=>m.duration||L||cI,[m.duration,L]),No=ie.useRef(0),Zn=ie.useRef(0),Wr=ie.useRef(0),Gr=ie.useRef(null),[ps,Do]=N.split("-"),Oo=ie.useMemo(()=>A.reduce((qe,St,Gt)=>Gt>=fs?qe:qe+St.height,0),[A,fs]),Qn=w$(),Mo=m.invert||g,Ar=on==="loading";Zn.current=ie.useMemo(()=>fs*ue+Oo,[fs,Oo]),ie.useEffect(()=>{cr.current=Hr},[Hr]),ie.useEffect(()=>{le(!0)},[]),ie.useEffect(()=>{const qe=_t.current;if(qe){const St=qe.getBoundingClientRect().height;return Qs(St),R(Gt=>[{toastId:m.id,height:St,position:m.position},...Gt]),()=>R(Gt=>Gt.filter(pn=>pn.toastId!==m.id))}},[R,m.id]),ie.useLayoutEffect(()=>{if(!ee)return;const qe=_t.current,St=qe.style.height;qe.style.height="auto";const Gt=qe.getBoundingClientRect().height;qe.style.height=St,Qs(Gt),R(pn=>pn.find($t=>$t.toastId===m.id)?pn.map($t=>$t.toastId===m.id?{...$t,height:Gt}:$t):[{toastId:m.id,height:Gt,position:m.position},...pn])},[ee,m.title,m.description,R,m.id,m.jsx,m.action,m.cancel]);const zn=ie.useCallback(()=>{be(!0),ar(Zn.current),R(qe=>qe.filter(St=>St.toastId!==m.id)),setTimeout(()=>{q(m)},D$)},[m,q,R,Zn]);ie.useEffect(()=>{if(m.promise&&on==="loading"||m.duration===1/0||m.type==="loading")return;let qe;return z||S||Qn?(()=>{if(Wr.current<No.current){const pn=new Date().getTime()-No.current;cr.current=cr.current-pn}Wr.current=new Date().getTime()})():(()=>{cr.current!==1/0&&(No.current=new Date().getTime(),qe=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),zn()},cr.current))})(),()=>clearTimeout(qe)},[z,S,m,on,Qn,zn]),ie.useEffect(()=>{m.delete&&(zn(),m.onDismiss==null||m.onDismiss.call(m,m))},[zn,m.delete]);function Kr(){var qe;if(ye?.loading){var St;return ie.createElement("div",{className:ks(pe?.loader,m==null||(St=m.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":on==="loading"},ye.loading)}return ie.createElement(p$,{className:ks(pe?.loader,m==null||(qe=m.classNames)==null?void 0:qe.loader),visible:on==="loading"})}const Zr=m.icon||ye?.[on]||h$(on);var At,Vo;return ie.createElement("li",{tabIndex:0,ref:_t,className:ks(M,Xa,pe?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,pe?.default,pe?.[on],m==null||(t=m.classNames)==null?void 0:t[on]),"data-sonner-toast":"","data-rich-colors":(At=m.richColors)!=null?At:W,"data-styled":!(m.jsx||m.unstyled||w),"data-mounted":ee,"data-promise":!!m.promise,"data-swiped":ct,"data-removed":ve,"data-visible":lr,"data-y-position":ps,"data-x-position":Do,"data-index":O,"data-front":Lt,"data-swiping":_e,"data-dismissible":Cr,"data-type":on,"data-invert":Mo,"data-swipe-out":Ge,"data-swipe-direction":F,"data-expanded":!!(z||Me&&ee),"data-testid":m.testId,style:{"--index":O,"--toasts-before":O,"--z-index":U.length-O,"--offset":`${ve?Vt:Zn.current}px`,"--initial-height":Me?"auto":`${Ya}px`,...P,...m.style},onDragEnd:()=>{Ie(!1),ae(null),Gr.current=null},onPointerDown:qe=>{qe.button!==2&&(Ar||!Cr||(Po.current=new Date,ar(Zn.current),qe.target.setPointerCapture(qe.pointerId),qe.target.tagName!=="BUTTON"&&(Ie(!0),Gr.current={x:qe.clientX,y:qe.clientY})))},onPointerUp:()=>{var qe,St,Gt;if(Ge||!Cr)return;Gr.current=null;const pn=Number(((qe=_t.current)==null?void 0:qe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),$n=Number(((St=_t.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$t=new Date().getTime()-((Gt=Po.current)==null?void 0:Gt.getTime()),Yt=re==="x"?pn:$n,ur=Math.abs(Yt)/$t;if(Math.abs(Yt)>=N$||ur>.11){ar(Zn.current),m.onDismiss==null||m.onDismiss.call(m,m),Q(re==="x"?pn>0?"right":"left":$n>0?"down":"up"),zn(),ft(!0);return}else{var Xt,An;(Xt=_t.current)==null||Xt.style.setProperty("--swipe-amount-x","0px"),(An=_t.current)==null||An.style.setProperty("--swipe-amount-y","0px")}me(!1),Ie(!1),ae(null)},onPointerMove:qe=>{var St,Gt,pn;if(!Gr.current||!Cr||((St=window.getSelection())==null?void 0:St.toString().length)>0)return;const $t=qe.clientY-Gr.current.y,Yt=qe.clientX-Gr.current.x;var ur;const Xt=(ur=n.swipeDirections)!=null?ur:O$(N);!re&&(Math.abs(Yt)>1||Math.abs($t)>1)&&ae(Math.abs(Yt)>Math.abs($t)?"x":"y");let An={x:0,y:0};const Rr=mn=>1/(1.5+Math.abs(mn)/20);if(re==="y"){if(Xt.includes("top")||Xt.includes("bottom"))if(Xt.includes("top")&&$t<0||Xt.includes("bottom")&&$t>0)An.y=$t;else{const mn=$t*Rr($t);An.y=Math.abs(mn)<Math.abs($t)?mn:$t}}else if(re==="x"&&(Xt.includes("left")||Xt.includes("right")))if(Xt.includes("left")&&Yt<0||Xt.includes("right")&&Yt>0)An.x=Yt;else{const mn=Yt*Rr(Yt);An.x=Math.abs(mn)<Math.abs(Yt)?mn:Yt}(Math.abs(An.x)>0||Math.abs(An.y)>0)&&me(!0),(Gt=_t.current)==null||Gt.style.setProperty("--swipe-amount-x",`${An.x}px`),(pn=_t.current)==null||pn.style.setProperty("--swipe-amount-y",`${An.y}px`)}},ko&&!m.jsx&&on!=="loading"?ie.createElement("button",{"aria-label":H,"data-disabled":Ar,"data-close-button":!0,onClick:Ar||!Cr?()=>{}:()=>{zn(),m.onDismiss==null||m.onDismiss.call(m,m)},className:ks(pe?.closeButton,m==null||(r=m.classNames)==null?void 0:r.closeButton)},(Vo=ye?.close)!=null?Vo:_$):null,(on||m.icon||m.promise)&&m.icon!==null&&(ye?.[on]!==null||m.icon)?ie.createElement("div",{"data-icon":"",className:ks(pe?.icon,m==null||(s=m.classNames)==null?void 0:s.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Kr():null,m.type!=="loading"?Zr:null):null,ie.createElement("div",{"data-content":"",className:ks(pe?.content,m==null||(i=m.classNames)==null?void 0:i.content)},ie.createElement("div",{"data-title":"",className:ks(pe?.title,m==null||(c=m.classNames)==null?void 0:c.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?ie.createElement("div",{"data-description":"",className:ks(V,hs,pe?.description,m==null||(u=m.classNames)==null?void 0:u.description)},typeof m.description=="function"?m.description():m.description):null),ie.isValidElement(m.cancel)?m.cancel:m.cancel&&_f(m.cancel)?ie.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||I,onClick:qe=>{_f(m.cancel)&&Cr&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,qe),zn())},className:ks(pe?.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,ie.isValidElement(m.action)?m.action:m.action&&_f(m.action)?ie.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||k,onClick:qe=>{_f(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,qe),!qe.defaultPrevented&&zn())},className:ks(pe?.actionButton,m==null||(p=m.classNames)==null?void 0:p.actionButton)},m.action.label):null)};function lI(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function V$(n,e){const t={};return[n,e].forEach((r,s)=>{const i=s===1,c=i?"--mobile-offset":"--offset",u=i?R$:A$;function d(p){["top","right","bottom","left"].forEach(g=>{t[`${c}-${g}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?d(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?t[`${c}-${p}`]=u:t[`${c}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):d(u)}),t}const L$=ie.forwardRef(function(e,t){const{id:r,invert:s,position:i="bottom-right",hotkey:c=["altKey","KeyT"],expand:u,closeButton:d,className:p,offset:g,mobileOffset:m,theme:w="light",richColors:S,duration:R,style:C,visibleToasts:A=C$,toastOptions:O,dir:U=lI(),gap:z=k$,icons:q,containerAriaLabel:W="Notifications"}=e,[X,P]=ie.useState([]),I=ie.useMemo(()=>r?X.filter(ee=>ee.toasterId===r):X.filter(ee=>!ee.toasterId),[X,r]),k=ie.useMemo(()=>Array.from(new Set([i].concat(I.filter(ee=>ee.position).map(ee=>ee.position)))),[I,i]),[M,V]=ie.useState([]),[L,N]=ie.useState(!1),[ue,Me]=ie.useState(!1),[pe,ye]=ie.useState(w!=="system"?w:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),H=ie.useRef(null),re=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),ae=ie.useRef(null),F=ie.useRef(!1),Q=ie.useCallback(ee=>{P(le=>{var ve;return(ve=le.find(be=>be.id===ee.id))!=null&&ve.delete||rr.dismiss(ee.id),le.filter(({id:be})=>be!==ee.id)})},[]);return ie.useEffect(()=>rr.subscribe(ee=>{if(ee.dismiss){requestAnimationFrame(()=>{P(le=>le.map(ve=>ve.id===ee.id?{...ve,delete:!0}:ve))});return}setTimeout(()=>{c1.flushSync(()=>{P(le=>{const ve=le.findIndex(be=>be.id===ee.id);return ve!==-1?[...le.slice(0,ve),{...le[ve],...ee},...le.slice(ve+1)]:[ee,...le]})})})}),[X]),ie.useEffect(()=>{if(w!=="system"){ye(w);return}if(w==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ye("dark"):ye("light")),typeof window>"u")return;const ee=window.matchMedia("(prefers-color-scheme: dark)");try{ee.addEventListener("change",({matches:le})=>{ye(le?"dark":"light")})}catch{ee.addListener(({matches:ve})=>{try{ye(ve?"dark":"light")}catch(be){console.error(be)}})}},[w]),ie.useEffect(()=>{X.length<=1&&N(!1)},[X]),ie.useEffect(()=>{const ee=le=>{var ve;if(c.every(Ie=>le[Ie]||le.code===Ie)){var _e;N(!0),(_e=H.current)==null||_e.focus()}le.code==="Escape"&&(document.activeElement===H.current||(ve=H.current)!=null&&ve.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",ee),()=>document.removeEventListener("keydown",ee)},[c]),ie.useEffect(()=>{if(H.current)return()=>{ae.current&&(ae.current.focus({preventScroll:!0}),ae.current=null,F.current=!1)}},[H.current]),ie.createElement("section",{ref:t,"aria-label":`${W} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((ee,le)=>{var ve;const[be,_e]=ee.split("-");return I.length?ie.createElement("ol",{key:ee,dir:U==="auto"?lI():U,tabIndex:-1,ref:H,className:p,"data-sonner-toaster":!0,"data-sonner-theme":pe,"data-y-position":be,"data-x-position":_e,style:{"--front-toast-height":`${((ve=M[0])==null?void 0:ve.height)||0}px`,"--width":`${P$}px`,"--gap":`${z}px`,...C,...V$(g,m)},onBlur:Ie=>{F.current&&!Ie.currentTarget.contains(Ie.relatedTarget)&&(F.current=!1,ae.current&&(ae.current.focus({preventScroll:!0}),ae.current=null))},onFocus:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||F.current||(F.current=!0,ae.current=Ie.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{ue||N(!1)},onDragEnd:()=>N(!1),onPointerDown:Ie=>{Ie.target instanceof HTMLElement&&Ie.target.dataset.dismissible==="false"||Me(!0)},onPointerUp:()=>Me(!1)},I.filter(Ie=>!Ie.position&&le===0||Ie.position===ee).map((Ie,Ge)=>{var ft,ct;return ie.createElement(M$,{key:Ie.id,icons:q,index:Ge,toast:Ie,defaultRichColors:S,duration:(ft=O?.duration)!=null?ft:R,className:O?.className,descriptionClassName:O?.descriptionClassName,invert:s,visibleToasts:A,closeButton:(ct=O?.closeButton)!=null?ct:d,interacting:ue,position:ee,style:O?.style,unstyled:O?.unstyled,classNames:O?.classNames,cancelButtonStyle:O?.cancelButtonStyle,actionButtonStyle:O?.actionButtonStyle,closeButtonAriaLabel:O?.closeButtonAriaLabel,removeToast:Q,toasts:I.filter(me=>me.position==Ie.position),heights:M.filter(me=>me.position==Ie.position),setHeights:V,expandByDefault:u,gap:z,expanded:L,swipeDirections:e.swipeDirections})})):null}))}),uI=({...n})=>{const{theme:e="system"}=YP();return v.jsx(L$,{theme:e,className:"toaster group",position:"top-right",richColors:!0,closeButton:!0,duration:4e3,toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",success:"group-[.toaster]:border-green-500/50 group-[.toaster]:bg-green-50 dark:group-[.toaster]:bg-green-950/30 group-[.toaster]:text-green-700 dark:group-[.toaster]:text-green-400",error:"group-[.toaster]:border-red-500/50 group-[.toaster]:bg-red-50 dark:group-[.toaster]:bg-red-950/30 group-[.toaster]:text-red-700 dark:group-[.toaster]:text-red-400",warning:"group-[.toaster]:border-yellow-500/50 group-[.toaster]:bg-yellow-50 dark:group-[.toaster]:bg-yellow-950/30 group-[.toaster]:text-yellow-700 dark:group-[.toaster]:text-yellow-400",info:"group-[.toaster]:border-blue-500/50 group-[.toaster]:bg-blue-50 dark:group-[.toaster]:bg-blue-950/30 group-[.toaster]:text-blue-700 dark:group-[.toaster]:text-blue-400"}},style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...n})};function XP({className:n,...e}){return v.jsx("div",{"data-slot":"card",className:ze("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",n),...e})}function JP({className:n,...e}){return v.jsx("div",{"data-slot":"card-header",className:ze("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",n),...e})}function ek({className:n,...e}){return v.jsx("h4",{"data-slot":"card-title",className:ze("leading-none",n),...e})}function tk({className:n,...e}){return v.jsx("p",{"data-slot":"card-description",className:ze("text-muted-foreground",n),...e})}function nk({className:n,...e}){return v.jsx("div",{"data-slot":"card-content",className:ze("px-6 [&:last-child]:pb-6",n),...e})}function BW({className:n,...e}){return v.jsx("div",{"data-slot":"card-footer",className:ze("flex items-center px-6 pb-6 [.border-t]:pt-6",n),...e})}class dI extends b.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Error caught by boundary:",e,t),this.props.onError?.(e,t),this.setState({errorInfo:t})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:v.jsx("div",{className:"flex items-center justify-center min-h-[400px] p-4",children:v.jsxs(XP,{className:"max-w-lg w-full",children:[v.jsxs(JP,{children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx(zD,{className:"h-6 w-6 text-red-500"}),v.jsx(ek,{children:"Something went wrong"})]}),v.jsx(tk,{children:"An unexpected error occurred. Please try refreshing the page or contact support if the problem persists."})]}),v.jsxs(nk,{className:"space-y-4",children:[this.state.error&&v.jsx("div",{className:"rounded-md bg-red-50 dark:bg-red-950 p-4",children:v.jsx("p",{className:"text-sm font-mono text-red-800 dark:text-red-200",children:this.state.error.message})}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs(Ds,{onClick:this.handleReset,className:"flex-1",children:[v.jsx(CD,{className:"h-4 w-4 mr-2"}),"Try Again"]}),v.jsx(Ds,{variant:"outline",onClick:()=>window.location.reload(),className:"flex-1",children:"Reload Page"})]}),!1]})]})}):this.props.children}}var F$="Label",rk=b.forwardRef((n,e)=>v.jsx(ut.label,{...n,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(n.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));rk.displayName=F$;var j$=rk;function da({className:n,...e}){return v.jsx(j$,{"data-slot":"label",className:ze("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",n),...e})}var Im="Checkbox",[U$]=Gs(Im),[z$,qw]=U$(Im);function $$(n){const{__scopeCheckbox:e,checked:t,children:r,defaultChecked:s,disabled:i,form:c,name:u,onCheckedChange:d,required:p,value:g="on",internal_do_not_use_render:m}=n,[w,S]=Tl({prop:t,defaultProp:s??!1,onChange:d,caller:Im}),[R,C]=b.useState(null),[A,O]=b.useState(null),U=b.useRef(!1),z=R?!!c||!!R.closest("form"):!0,q={checked:w,disabled:i,setChecked:S,control:R,setControl:C,name:u,form:c,value:g,hasConsumerStoppedPropagationRef:U,required:p,defaultChecked:Si(s)?!1:s,isFormControl:z,bubbleInput:A,setBubbleInput:O};return v.jsx(z$,{scope:e,...q,children:B$(m)?m(q):r})}var sk="CheckboxTrigger",ok=b.forwardRef(({__scopeCheckbox:n,onKeyDown:e,onClick:t,...r},s)=>{const{control:i,value:c,disabled:u,checked:d,required:p,setControl:g,setChecked:m,hasConsumerStoppedPropagationRef:w,isFormControl:S,bubbleInput:R}=qw(sk,n),C=xt(s,g),A=b.useRef(d);return b.useEffect(()=>{const O=i?.form;if(O){const U=()=>m(A.current);return O.addEventListener("reset",U),()=>O.removeEventListener("reset",U)}},[i,m]),v.jsx(ut.button,{type:"button",role:"checkbox","aria-checked":Si(d)?"mixed":d,"aria-required":p,"data-state":dk(d),"data-disabled":u?"":void 0,disabled:u,value:c,...r,ref:C,onKeyDown:Fe(e,O=>{O.key==="Enter"&&O.preventDefault()}),onClick:Fe(t,O=>{m(U=>Si(U)?!0:!U),R&&S&&(w.current=O.isPropagationStopped(),w.current||O.stopPropagation())})})});ok.displayName=sk;var ik=b.forwardRef((n,e)=>{const{__scopeCheckbox:t,name:r,checked:s,defaultChecked:i,required:c,disabled:u,value:d,onCheckedChange:p,form:g,...m}=n;return v.jsx($$,{__scopeCheckbox:t,checked:s,defaultChecked:i,disabled:u,required:c,onCheckedChange:p,name:r,form:g,value:d,internal_do_not_use_render:({isFormControl:w})=>v.jsxs(v.Fragment,{children:[v.jsx(ok,{...m,ref:e,__scopeCheckbox:t}),w&&v.jsx(uk,{__scopeCheckbox:t})]})})});ik.displayName=Im;var ak="CheckboxIndicator",ck=b.forwardRef((n,e)=>{const{__scopeCheckbox:t,forceMount:r,...s}=n,i=qw(ak,t);return v.jsx(Gn,{present:r||Si(i.checked)||i.checked===!0,children:v.jsx(ut.span,{"data-state":dk(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...n.style}})})});ck.displayName=ak;var lk="CheckboxBubbleInput",uk=b.forwardRef(({__scopeCheckbox:n,...e},t)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:c,required:u,disabled:d,name:p,value:g,form:m,bubbleInput:w,setBubbleInput:S}=qw(lk,n),R=xt(t,S),C=PC(i),A=x_(r);b.useEffect(()=>{const U=w;if(!U)return;const z=window.HTMLInputElement.prototype,W=Object.getOwnPropertyDescriptor(z,"checked").set,X=!s.current;if(C!==i&&W){const P=new Event("click",{bubbles:X});U.indeterminate=Si(i),W.call(U,Si(i)?!1:i),U.dispatchEvent(P)}},[w,C,i,s]);const O=b.useRef(Si(i)?!1:i);return v.jsx(ut.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??O.current,required:u,disabled:d,name:p,value:g,form:m,...e,tabIndex:-1,ref:R,style:{...e.style,...A,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});uk.displayName=lk;function B$(n){return typeof n=="function"}function Si(n){return n==="indeterminate"}function dk(n){return Si(n)?"indeterminate":n?"checked":"unchecked"}function hI({className:n,...e}){return v.jsx(ik,{"data-slot":"checkbox",className:ze("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),...e,children:v.jsx(ck,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:v.jsx(n_,{className:"size-3.5"})})})}function se(n,e,t){function r(u,d){var p;Object.defineProperty(u,"_zod",{value:u._zod??{},enumerable:!1}),(p=u._zod).traits??(p.traits=new Set),u._zod.traits.add(n),e(u,d);for(const g in c.prototype)g in u||Object.defineProperty(u,g,{value:c.prototype[g].bind(u)});u._zod.constr=c,u._zod.def=d}const s=t?.Parent??Object;class i extends s{}Object.defineProperty(i,"name",{value:n});function c(u){var d;const p=t?.Parent?new i:this;r(p,u),(d=p._zod).deferred??(d.deferred=[]);for(const g of p._zod.deferred)g();return p}return Object.defineProperty(c,"init",{value:r}),Object.defineProperty(c,Symbol.hasInstance,{value:u=>t?.Parent&&u instanceof t.Parent?!0:u?._zod?.traits?.has(n)}),Object.defineProperty(c,"name",{value:n}),c}class rl extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class hk extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const fk={};function $a(n){return fk}function q$(n){const e=Object.values(n).filter(r=>typeof r=="number");return Object.entries(n).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function Hv(n,e){return typeof e=="bigint"?e.toString():e}function Hw(n){return{get value(){{const e=n();return Object.defineProperty(this,"value",{value:e}),e}}}}function Ww(n){return n==null}function Gw(n){const e=n.startsWith("^")?1:0,t=n.endsWith("$")?n.length-1:n.length;return n.slice(e,t)}function H$(n,e){const t=(n.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const d=r.match(/\d?e-(\d?)/);d?.[1]&&(s=Number.parseInt(d[1]))}const i=t>s?t:s,c=Number.parseInt(n.toFixed(i).replace(".","")),u=Number.parseInt(e.toFixed(i).replace(".",""));return c%u/10**i}const fI=Symbol("evaluating");function Ct(n,e,t){let r;Object.defineProperty(n,e,{get(){if(r!==fI)return r===void 0&&(r=fI,r=t()),r},set(s){Object.defineProperty(n,e,{value:s})},configurable:!0})}function Za(n,e,t){Object.defineProperty(n,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function Qa(...n){const e={};for(const t of n){const r=Object.getOwnPropertyDescriptors(t);Object.assign(e,r)}return Object.defineProperties({},e)}function pI(n){return JSON.stringify(n)}const pk="captureStackTrace"in Error?Error.captureStackTrace:(...n)=>{};function Cp(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)}const W$=Hw(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const n=Function;return new n(""),!0}catch{return!1}});function yd(n){if(Cp(n)===!1)return!1;const e=n.constructor;if(e===void 0)return!0;const t=e.prototype;return!(Cp(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function mk(n){return yd(n)?{...n}:Array.isArray(n)?[...n]:n}const G$=new Set(["string","number","symbol"]);function Tm(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Vi(n,e,t){const r=new n._zod.constr(e??n._zod.def);return(!e||t?.parent)&&(r._zod.parent=n),r}function je(n){const e=n;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function K$(n){return Object.keys(n).filter(e=>n[e]._zod.optin==="optional"&&n[e]._zod.optout==="optional")}const Z$={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Q$(n,e){const t=n._zod.def,r=Qa(n._zod.def,{get shape(){const s={};for(const i in e){if(!(i in t.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&(s[i]=t.shape[i])}return Za(this,"shape",s),s},checks:[]});return Vi(n,r)}function Y$(n,e){const t=n._zod.def,r=Qa(n._zod.def,{get shape(){const s={...n._zod.def.shape};for(const i in e){if(!(i in t.shape))throw new Error(`Unrecognized key: "${i}"`);e[i]&&delete s[i]}return Za(this,"shape",s),s},checks:[]});return Vi(n,r)}function X$(n,e){if(!yd(e))throw new Error("Invalid input to extend: expected a plain object");const t=n._zod.def.checks;if(t&&t.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=Qa(n._zod.def,{get shape(){const i={...n._zod.def.shape,...e};return Za(this,"shape",i),i},checks:[]});return Vi(n,s)}function J$(n,e){if(!yd(e))throw new Error("Invalid input to safeExtend: expected a plain object");const t={...n._zod.def,get shape(){const r={...n._zod.def.shape,...e};return Za(this,"shape",r),r},checks:n._zod.def.checks};return Vi(n,t)}function eB(n,e){const t=Qa(n._zod.def,{get shape(){const r={...n._zod.def.shape,...e._zod.def.shape};return Za(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Vi(n,t)}function tB(n,e,t){const r=Qa(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};if(t)for(const c in t){if(!(c in s))throw new Error(`Unrecognized key: "${c}"`);t[c]&&(i[c]=n?new n({type:"optional",innerType:s[c]}):s[c])}else for(const c in s)i[c]=n?new n({type:"optional",innerType:s[c]}):s[c];return Za(this,"shape",i),i},checks:[]});return Vi(e,r)}function nB(n,e,t){const r=Qa(e._zod.def,{get shape(){const s=e._zod.def.shape,i={...s};if(t)for(const c in t){if(!(c in i))throw new Error(`Unrecognized key: "${c}"`);t[c]&&(i[c]=new n({type:"nonoptional",innerType:s[c]}))}else for(const c in s)i[c]=new n({type:"nonoptional",innerType:s[c]});return Za(this,"shape",i),i},checks:[]});return Vi(e,r)}function Zc(n,e=0){if(n.aborted===!0)return!0;for(let t=e;t<n.issues.length;t++)if(n.issues[t]?.continue!==!0)return!0;return!1}function gk(n,e){return e.map(t=>{var r;return(r=t).path??(r.path=[]),t.path.unshift(n),t})}function wf(n){return typeof n=="string"?n:n?.message}function Ba(n,e,t){const r={...n,path:n.path??[]};if(!n.message){const s=wf(n.inst?._zod.def?.error?.(n))??wf(e?.error?.(n))??wf(t.customError?.(n))??wf(t.localeError?.(n))??"Invalid input";r.message=s}return delete r.inst,delete r.continue,e?.reportInput||delete r.input,r}function Kw(n){return Array.isArray(n)?"array":typeof n=="string"?"string":"unknown"}function vd(...n){const[e,t,r]=n;return typeof e=="string"?{message:e,code:"custom",input:t,inst:r}:{...e}}const yk=(n,e)=>{n.name="$ZodError",Object.defineProperty(n,"_zod",{value:n._zod,enumerable:!1}),Object.defineProperty(n,"issues",{value:e,enumerable:!1}),n.message=JSON.stringify(e,Hv,2),Object.defineProperty(n,"toString",{value:()=>n.message,enumerable:!1})},vk=se("$ZodError",yk),_k=se("$ZodError",yk,{Parent:Error});function rB(n,e=t=>t.message){const t={},r=[];for(const s of n.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:t}}function sB(n,e=t=>t.message){const t={_errors:[]},r=s=>{for(const i of s.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(c=>r({issues:c}));else if(i.code==="invalid_key")r({issues:i.issues});else if(i.code==="invalid_element")r({issues:i.issues});else if(i.path.length===0)t._errors.push(e(i));else{let c=t,u=0;for(;u<i.path.length;){const d=i.path[u];u===i.path.length-1?(c[d]=c[d]||{_errors:[]},c[d]._errors.push(e(i))):c[d]=c[d]||{_errors:[]},c=c[d],u++}}};return r(n),t}const Zw=n=>(e,t,r,s)=>{const i=r?Object.assign(r,{async:!1}):{async:!1},c=e._zod.run({value:t,issues:[]},i);if(c instanceof Promise)throw new rl;if(c.issues.length){const u=new(s?.Err??n)(c.issues.map(d=>Ba(d,i,$a())));throw pk(u,s?.callee),u}return c.value},Qw=n=>async(e,t,r,s)=>{const i=r?Object.assign(r,{async:!0}):{async:!0};let c=e._zod.run({value:t,issues:[]},i);if(c instanceof Promise&&(c=await c),c.issues.length){const u=new(s?.Err??n)(c.issues.map(d=>Ba(d,i,$a())));throw pk(u,s?.callee),u}return c.value},Cm=n=>(e,t,r)=>{const s=r?{...r,async:!1}:{async:!1},i=e._zod.run({value:t,issues:[]},s);if(i instanceof Promise)throw new rl;return i.issues.length?{success:!1,error:new(n??vk)(i.issues.map(c=>Ba(c,s,$a())))}:{success:!0,data:i.value}},oB=Cm(_k),Am=n=>async(e,t,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let i=e._zod.run({value:t,issues:[]},s);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new n(i.issues.map(c=>Ba(c,s,$a())))}:{success:!0,data:i.value}},iB=Am(_k),aB=n=>(e,t,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Zw(n)(e,t,s)},cB=n=>(e,t,r)=>Zw(n)(e,t,r),lB=n=>async(e,t,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Qw(n)(e,t,s)},uB=n=>async(e,t,r)=>Qw(n)(e,t,r),dB=n=>(e,t,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Cm(n)(e,t,s)},hB=n=>(e,t,r)=>Cm(n)(e,t,r),fB=n=>async(e,t,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Am(n)(e,t,s)},pB=n=>async(e,t,r)=>Am(n)(e,t,r),mB=/^[cC][^\s-]{8,}$/,gB=/^[0-9a-z]+$/,yB=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,vB=/^[0-9a-vA-V]{20}$/,_B=/^[A-Za-z0-9]{27}$/,wB=/^[a-zA-Z0-9_-]{21}$/,EB=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,bB=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,mI=n=>n?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${n}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,xB=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,SB="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function IB(){return new RegExp(SB,"u")}const TB=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,CB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,AB=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,RB=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,PB=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,wk=/^[A-Za-z0-9_-]*$/,kB=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,NB=/^\+(?:[0-9]){6,14}[0-9]$/,Ek="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",DB=new RegExp(`^${Ek}$`);function bk(n){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof n.precision=="number"?n.precision===-1?`${e}`:n.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${n.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function OB(n){return new RegExp(`^${bk(n)}$`)}function MB(n){const e=bk({precision:n.precision}),t=["Z"];n.local&&t.push(""),n.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${t.join("|")})`;return new RegExp(`^${Ek}T(?:${r})$`)}const VB=n=>{const e=n?`[\\s\\S]{${n?.minimum??0},${n?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},LB=/^-?\d+$/,FB=/^-?\d+(?:\.\d+)?/,jB=/^(?:true|false)$/i,UB=/^[^A-Z]*$/,zB=/^[^a-z]*$/,ir=se("$ZodCheck",(n,e)=>{var t;n._zod??(n._zod={}),n._zod.def=e,(t=n._zod).onattach??(t.onattach=[])}),xk={number:"number",bigint:"bigint",object:"date"},Sk=se("$ZodCheckLessThan",(n,e)=>{ir.init(n,e);const t=xk[typeof e.value];n._zod.onattach.push(r=>{const s=r._zod.bag,i=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<i&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),n._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:t,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),Ik=se("$ZodCheckGreaterThan",(n,e)=>{ir.init(n,e);const t=xk[typeof e.value];n._zod.onattach.push(r=>{const s=r._zod.bag,i=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>i&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),n._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:t,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:n,continue:!e.abort})}}),$B=se("$ZodCheckMultipleOf",(n,e)=>{ir.init(n,e),n._zod.onattach.push(t=>{var r;(r=t._zod.bag).multipleOf??(r.multipleOf=e.value)}),n._zod.check=t=>{if(typeof t.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof t.value=="bigint"?t.value%e.value===BigInt(0):H$(t.value,e.value)===0)||t.issues.push({origin:typeof t.value,code:"not_multiple_of",divisor:e.value,input:t.value,inst:n,continue:!e.abort})}}),BB=se("$ZodCheckNumberFormat",(n,e)=>{ir.init(n,e),e.format=e.format||"float64";const t=e.format?.includes("int"),r=t?"int":"number",[s,i]=Z$[e.format];n._zod.onattach.push(c=>{const u=c._zod.bag;u.format=e.format,u.minimum=s,u.maximum=i,t&&(u.pattern=LB)}),n._zod.check=c=>{const u=c.value;if(t){if(!Number.isInteger(u)){c.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:u,inst:n});return}if(!Number.isSafeInteger(u)){u>0?c.issues.push({input:u,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:r,continue:!e.abort}):c.issues.push({input:u,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:n,origin:r,continue:!e.abort});return}}u<s&&c.issues.push({origin:"number",input:u,code:"too_small",minimum:s,inclusive:!0,inst:n,continue:!e.abort}),u>i&&c.issues.push({origin:"number",input:u,code:"too_big",maximum:i,inst:n})}}),qB=se("$ZodCheckMaxLength",(n,e)=>{var t;ir.init(n,e),(t=n._zod.def).when??(t.when=r=>{const s=r.value;return!Ww(s)&&s.length!==void 0}),n._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),n._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const c=Kw(s);r.issues.push({origin:c,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:n,continue:!e.abort})}}),HB=se("$ZodCheckMinLength",(n,e)=>{var t;ir.init(n,e),(t=n._zod.def).when??(t.when=r=>{const s=r.value;return!Ww(s)&&s.length!==void 0}),n._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),n._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const c=Kw(s);r.issues.push({origin:c,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:n,continue:!e.abort})}}),WB=se("$ZodCheckLengthEquals",(n,e)=>{var t;ir.init(n,e),(t=n._zod.def).when??(t.when=r=>{const s=r.value;return!Ww(s)&&s.length!==void 0}),n._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),n._zod.check=r=>{const s=r.value,i=s.length;if(i===e.length)return;const c=Kw(s),u=i>e.length;r.issues.push({origin:c,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:n,continue:!e.abort})}}),Rm=se("$ZodCheckStringFormat",(n,e)=>{var t,r;ir.init(n,e),n._zod.onattach.push(s=>{const i=s._zod.bag;i.format=e.format,e.pattern&&(i.patterns??(i.patterns=new Set),i.patterns.add(e.pattern))}),e.pattern?(t=n._zod).check??(t.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:n,continue:!e.abort})}):(r=n._zod).check??(r.check=()=>{})}),GB=se("$ZodCheckRegex",(n,e)=>{Rm.init(n,e),n._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:n,continue:!e.abort})}}),KB=se("$ZodCheckLowerCase",(n,e)=>{e.pattern??(e.pattern=UB),Rm.init(n,e)}),ZB=se("$ZodCheckUpperCase",(n,e)=>{e.pattern??(e.pattern=zB),Rm.init(n,e)}),QB=se("$ZodCheckIncludes",(n,e)=>{ir.init(n,e);const t=Tm(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=r,n._zod.onattach.push(s=>{const i=s._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(r)}),n._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:n,continue:!e.abort})}}),YB=se("$ZodCheckStartsWith",(n,e)=>{ir.init(n,e);const t=new RegExp(`^${Tm(e.prefix)}.*`);e.pattern??(e.pattern=t),n._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),n._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:n,continue:!e.abort})}}),XB=se("$ZodCheckEndsWith",(n,e)=>{ir.init(n,e);const t=new RegExp(`.*${Tm(e.suffix)}$`);e.pattern??(e.pattern=t),n._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(t)}),n._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:n,continue:!e.abort})}}),JB=se("$ZodCheckOverwrite",(n,e)=>{ir.init(n,e),n._zod.check=t=>{t.value=e.tx(t.value)}});class e8{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(c=>c),s=Math.min(...r.map(c=>c.length-c.trimStart().length)),i=r.map(c=>c.slice(s)).map(c=>" ".repeat(this.indent*2)+c);for(const c of i)this.content.push(c)}compile(){const e=Function,t=this?.args,s=[...(this?.content??[""]).map(i=>`  ${i}`)];return new e(...t,s.join(`
`))}}const t8={major:4,minor:1,patch:12},Qt=se("$ZodType",(n,e)=>{var t;n??(n={}),n._zod.def=e,n._zod.bag=n._zod.bag||{},n._zod.version=t8;const r=[...n._zod.def.checks??[]];n._zod.traits.has("$ZodCheck")&&r.unshift(n);for(const s of r)for(const i of s._zod.onattach)i(n);if(r.length===0)(t=n._zod).deferred??(t.deferred=[]),n._zod.deferred?.push(()=>{n._zod.run=n._zod.parse});else{const s=(c,u,d)=>{let p=Zc(c),g;for(const m of u){if(m._zod.def.when){if(!m._zod.def.when(c))continue}else if(p)continue;const w=c.issues.length,S=m._zod.check(c);if(S instanceof Promise&&d?.async===!1)throw new rl;if(g||S instanceof Promise)g=(g??Promise.resolve()).then(async()=>{await S,c.issues.length!==w&&(p||(p=Zc(c,w)))});else{if(c.issues.length===w)continue;p||(p=Zc(c,w))}}return g?g.then(()=>c):c},i=(c,u,d)=>{if(Zc(c))return c.aborted=!0,c;const p=s(u,r,d);if(p instanceof Promise){if(d.async===!1)throw new rl;return p.then(g=>n._zod.parse(g,d))}return n._zod.parse(p,d)};n._zod.run=(c,u)=>{if(u.skipChecks)return n._zod.parse(c,u);if(u.direction==="backward"){const p=n._zod.parse({value:c.value,issues:[]},{...u,skipChecks:!0});return p instanceof Promise?p.then(g=>i(g,c,u)):i(p,c,u)}const d=n._zod.parse(c,u);if(d instanceof Promise){if(u.async===!1)throw new rl;return d.then(p=>s(p,r,u))}return s(d,r,u)}}n["~standard"]={validate:s=>{try{const i=oB(n,s);return i.success?{value:i.data}:{issues:i.error?.issues}}catch{return iB(n,s).then(c=>c.success?{value:c.data}:{issues:c.error?.issues})}},vendor:"zod",version:1}}),Yw=se("$ZodString",(n,e)=>{Qt.init(n,e),n._zod.pattern=[...n?._zod.bag?.patterns??[]].pop()??VB(n._zod.bag),n._zod.parse=(t,r)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:n}),t}}),Mt=se("$ZodStringFormat",(n,e)=>{Rm.init(n,e),Yw.init(n,e)}),n8=se("$ZodGUID",(n,e)=>{e.pattern??(e.pattern=bB),Mt.init(n,e)}),r8=se("$ZodUUID",(n,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=mI(r))}else e.pattern??(e.pattern=mI());Mt.init(n,e)}),s8=se("$ZodEmail",(n,e)=>{e.pattern??(e.pattern=xB),Mt.init(n,e)}),o8=se("$ZodURL",(n,e)=>{Mt.init(n,e),n._zod.check=t=>{try{const r=t.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:kB.source,input:t.value,inst:n,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:n,continue:!e.abort})),e.normalize?t.value=s.href:t.value=r;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:n,continue:!e.abort})}}}),i8=se("$ZodEmoji",(n,e)=>{e.pattern??(e.pattern=IB()),Mt.init(n,e)}),a8=se("$ZodNanoID",(n,e)=>{e.pattern??(e.pattern=wB),Mt.init(n,e)}),c8=se("$ZodCUID",(n,e)=>{e.pattern??(e.pattern=mB),Mt.init(n,e)}),l8=se("$ZodCUID2",(n,e)=>{e.pattern??(e.pattern=gB),Mt.init(n,e)}),u8=se("$ZodULID",(n,e)=>{e.pattern??(e.pattern=yB),Mt.init(n,e)}),d8=se("$ZodXID",(n,e)=>{e.pattern??(e.pattern=vB),Mt.init(n,e)}),h8=se("$ZodKSUID",(n,e)=>{e.pattern??(e.pattern=_B),Mt.init(n,e)}),f8=se("$ZodISODateTime",(n,e)=>{e.pattern??(e.pattern=MB(e)),Mt.init(n,e)}),p8=se("$ZodISODate",(n,e)=>{e.pattern??(e.pattern=DB),Mt.init(n,e)}),m8=se("$ZodISOTime",(n,e)=>{e.pattern??(e.pattern=OB(e)),Mt.init(n,e)}),g8=se("$ZodISODuration",(n,e)=>{e.pattern??(e.pattern=EB),Mt.init(n,e)}),y8=se("$ZodIPv4",(n,e)=>{e.pattern??(e.pattern=TB),Mt.init(n,e),n._zod.onattach.push(t=>{const r=t._zod.bag;r.format="ipv4"})}),v8=se("$ZodIPv6",(n,e)=>{e.pattern??(e.pattern=CB),Mt.init(n,e),n._zod.onattach.push(t=>{const r=t._zod.bag;r.format="ipv6"}),n._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:n,continue:!e.abort})}}}),_8=se("$ZodCIDRv4",(n,e)=>{e.pattern??(e.pattern=AB),Mt.init(n,e)}),w8=se("$ZodCIDRv6",(n,e)=>{e.pattern??(e.pattern=RB),Mt.init(n,e),n._zod.check=t=>{const r=t.value.split("/");try{if(r.length!==2)throw new Error;const[s,i]=r;if(!i)throw new Error;const c=Number(i);if(`${c}`!==i)throw new Error;if(c<0||c>128)throw new Error;new URL(`http://[${s}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:n,continue:!e.abort})}}});function Tk(n){if(n==="")return!0;if(n.length%4!==0)return!1;try{return atob(n),!0}catch{return!1}}const E8=se("$ZodBase64",(n,e)=>{e.pattern??(e.pattern=PB),Mt.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64"}),n._zod.check=t=>{Tk(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:n,continue:!e.abort})}});function b8(n){if(!wk.test(n))return!1;const e=n.replace(/[-_]/g,r=>r==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return Tk(t)}const x8=se("$ZodBase64URL",(n,e)=>{e.pattern??(e.pattern=wk),Mt.init(n,e),n._zod.onattach.push(t=>{t._zod.bag.contentEncoding="base64url"}),n._zod.check=t=>{b8(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:n,continue:!e.abort})}}),S8=se("$ZodE164",(n,e)=>{e.pattern??(e.pattern=NB),Mt.init(n,e)});function I8(n,e=null){try{const t=n.split(".");if(t.length!==3)return!1;const[r]=t;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const T8=se("$ZodJWT",(n,e)=>{Mt.init(n,e),n._zod.check=t=>{I8(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:n,continue:!e.abort})}}),Ck=se("$ZodNumber",(n,e)=>{Qt.init(n,e),n._zod.pattern=n._zod.bag.pattern??FB,n._zod.parse=(t,r)=>{if(e.coerce)try{t.value=Number(t.value)}catch{}const s=t.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return t;const i=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return t.issues.push({expected:"number",code:"invalid_type",input:s,inst:n,...i?{received:i}:{}}),t}}),C8=se("$ZodNumber",(n,e)=>{BB.init(n,e),Ck.init(n,e)}),A8=se("$ZodBoolean",(n,e)=>{Qt.init(n,e),n._zod.pattern=jB,n._zod.parse=(t,r)=>{if(e.coerce)try{t.value=!!t.value}catch{}const s=t.value;return typeof s=="boolean"||t.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:n}),t}}),R8=se("$ZodUnknown",(n,e)=>{Qt.init(n,e),n._zod.parse=t=>t}),P8=se("$ZodNever",(n,e)=>{Qt.init(n,e),n._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:n}),t)});function gI(n,e,t){n.issues.length&&e.issues.push(...gk(t,n.issues)),e.value[t]=n.value}const k8=se("$ZodArray",(n,e)=>{Qt.init(n,e),n._zod.parse=(t,r)=>{const s=t.value;if(!Array.isArray(s))return t.issues.push({expected:"array",code:"invalid_type",input:s,inst:n}),t;t.value=Array(s.length);const i=[];for(let c=0;c<s.length;c++){const u=s[c],d=e.element._zod.run({value:u,issues:[]},r);d instanceof Promise?i.push(d.then(p=>gI(p,t,c))):gI(d,t,c)}return i.length?Promise.all(i).then(()=>t):t}});function Ap(n,e,t,r){n.issues.length&&e.issues.push(...gk(t,n.issues)),n.value===void 0?t in r&&(e.value[t]=void 0):e.value[t]=n.value}function Ak(n){const e=Object.keys(n.shape);for(const r of e)if(!n.shape?.[r]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${r}": expected a Zod schema`);const t=K$(n.shape);return{...n,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(t)}}function Rk(n,e,t,r,s,i){const c=[],u=s.keySet,d=s.catchall._zod,p=d.def.type;for(const g of Object.keys(e)){if(u.has(g))continue;if(p==="never"){c.push(g);continue}const m=d.run({value:e[g],issues:[]},r);m instanceof Promise?n.push(m.then(w=>Ap(w,t,g,e))):Ap(m,t,g,e)}return c.length&&t.issues.push({code:"unrecognized_keys",keys:c,input:e,inst:i}),n.length?Promise.all(n).then(()=>t):t}const N8=se("$ZodObject",(n,e)=>{if(Qt.init(n,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const d={...u};return Object.defineProperty(e,"shape",{value:d}),d}})}const r=Hw(()=>Ak(e));Ct(n._zod,"propValues",()=>{const u=e.shape,d={};for(const p in u){const g=u[p]._zod;if(g.values){d[p]??(d[p]=new Set);for(const m of g.values)d[p].add(m)}}return d});const s=Cp,i=e.catchall;let c;n._zod.parse=(u,d)=>{c??(c=r.value);const p=u.value;if(!s(p))return u.issues.push({expected:"object",code:"invalid_type",input:p,inst:n}),u;u.value={};const g=[],m=c.shape;for(const w of c.keys){const R=m[w]._zod.run({value:p[w],issues:[]},d);R instanceof Promise?g.push(R.then(C=>Ap(C,u,w,p))):Ap(R,u,w,p)}return i?Rk(g,p,u,d,r.value,n):g.length?Promise.all(g).then(()=>u):u}}),D8=se("$ZodObjectJIT",(n,e)=>{N8.init(n,e);const t=n._zod.parse,r=Hw(()=>Ak(e)),s=w=>{const S=new e8(["shape","payload","ctx"]),R=r.value,C=z=>{const q=pI(z);return`shape[${q}]._zod.run({ value: input[${q}], issues: [] }, ctx)`};S.write("const input = payload.value;");const A=Object.create(null);let O=0;for(const z of R.keys)A[z]=`key_${O++}`;S.write("const newResult = {};");for(const z of R.keys){const q=A[z],W=pI(z);S.write(`const ${q} = ${C(z)};`),S.write(`
        if (${q}.issues.length) {
          payload.issues = payload.issues.concat(${q}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${W}, ...iss.path] : [${W}]
          })));
        }
        
        
        if (${q}.value === undefined) {
          if (${W} in input) {
            newResult[${W}] = undefined;
          }
        } else {
          newResult[${W}] = ${q}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const U=S.compile();return(z,q)=>U(w,z,q)};let i;const c=Cp,u=!fk.jitless,p=u&&W$.value,g=e.catchall;let m;n._zod.parse=(w,S)=>{m??(m=r.value);const R=w.value;return c(R)?u&&p&&S?.async===!1&&S.jitless!==!0?(i||(i=s(e.shape)),w=i(w,S),g?Rk([],R,w,S,m,n):w):t(w,S):(w.issues.push({expected:"object",code:"invalid_type",input:R,inst:n}),w)}});function yI(n,e,t,r){for(const i of n)if(i.issues.length===0)return e.value=i.value,e;const s=n.filter(i=>!Zc(i));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:n.map(i=>i.issues.map(c=>Ba(c,r,$a())))}),e)}const O8=se("$ZodUnion",(n,e)=>{Qt.init(n,e),Ct(n._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Ct(n._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Ct(n._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),Ct(n._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(i=>i._zod.pattern);return new RegExp(`^(${s.map(i=>Gw(i.source)).join("|")})$`)}});const t=e.options.length===1,r=e.options[0]._zod.run;n._zod.parse=(s,i)=>{if(t)return r(s,i);let c=!1;const u=[];for(const d of e.options){const p=d._zod.run({value:s.value,issues:[]},i);if(p instanceof Promise)u.push(p),c=!0;else{if(p.issues.length===0)return p;u.push(p)}}return c?Promise.all(u).then(d=>yI(d,s,n,i)):yI(u,s,n,i)}}),M8=se("$ZodIntersection",(n,e)=>{Qt.init(n,e),n._zod.parse=(t,r)=>{const s=t.value,i=e.left._zod.run({value:s,issues:[]},r),c=e.right._zod.run({value:s,issues:[]},r);return i instanceof Promise||c instanceof Promise?Promise.all([i,c]).then(([d,p])=>vI(t,d,p)):vI(t,i,c)}});function Wv(n,e){if(n===e)return{valid:!0,data:n};if(n instanceof Date&&e instanceof Date&&+n==+e)return{valid:!0,data:n};if(yd(n)&&yd(e)){const t=Object.keys(e),r=Object.keys(n).filter(i=>t.indexOf(i)!==-1),s={...n,...e};for(const i of r){const c=Wv(n[i],e[i]);if(!c.valid)return{valid:!1,mergeErrorPath:[i,...c.mergeErrorPath]};s[i]=c.data}return{valid:!0,data:s}}if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return{valid:!1,mergeErrorPath:[]};const t=[];for(let r=0;r<n.length;r++){const s=n[r],i=e[r],c=Wv(s,i);if(!c.valid)return{valid:!1,mergeErrorPath:[r,...c.mergeErrorPath]};t.push(c.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function vI(n,e,t){if(e.issues.length&&n.issues.push(...e.issues),t.issues.length&&n.issues.push(...t.issues),Zc(n))return n;const r=Wv(e.value,t.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return n.value=r.data,n}const V8=se("$ZodEnum",(n,e)=>{Qt.init(n,e);const t=q$(e.entries),r=new Set(t);n._zod.values=r,n._zod.pattern=new RegExp(`^(${t.filter(s=>G$.has(typeof s)).map(s=>typeof s=="string"?Tm(s):s.toString()).join("|")})$`),n._zod.parse=(s,i)=>{const c=s.value;return r.has(c)||s.issues.push({code:"invalid_value",values:t,input:c,inst:n}),s}}),L8=se("$ZodTransform",(n,e)=>{Qt.init(n,e),n._zod.parse=(t,r)=>{if(r.direction==="backward")throw new hk(n.constructor.name);const s=e.transform(t.value,t);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(c=>(t.value=c,t));if(s instanceof Promise)throw new rl;return t.value=s,t}});function _I(n,e){return n.issues.length&&e===void 0?{issues:[],value:void 0}:n}const F8=se("$ZodOptional",(n,e)=>{Qt.init(n,e),n._zod.optin="optional",n._zod.optout="optional",Ct(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),Ct(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${Gw(t.source)})?$`):void 0}),n._zod.parse=(t,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(t,r);return s instanceof Promise?s.then(i=>_I(i,t.value)):_I(s,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,r)}}),j8=se("$ZodNullable",(n,e)=>{Qt.init(n,e),Ct(n._zod,"optin",()=>e.innerType._zod.optin),Ct(n._zod,"optout",()=>e.innerType._zod.optout),Ct(n._zod,"pattern",()=>{const t=e.innerType._zod.pattern;return t?new RegExp(`^(${Gw(t.source)}|null)$`):void 0}),Ct(n._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),n._zod.parse=(t,r)=>t.value===null?t:e.innerType._zod.run(t,r)}),U8=se("$ZodDefault",(n,e)=>{Qt.init(n,e),n._zod.optin="optional",Ct(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>{if(r.direction==="backward")return e.innerType._zod.run(t,r);if(t.value===void 0)return t.value=e.defaultValue,t;const s=e.innerType._zod.run(t,r);return s instanceof Promise?s.then(i=>wI(i,e)):wI(s,e)}});function wI(n,e){return n.value===void 0&&(n.value=e.defaultValue),n}const z8=se("$ZodPrefault",(n,e)=>{Qt.init(n,e),n._zod.optin="optional",Ct(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>(r.direction==="backward"||t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,r))}),$8=se("$ZodNonOptional",(n,e)=>{Qt.init(n,e),Ct(n._zod,"values",()=>{const t=e.innerType._zod.values;return t?new Set([...t].filter(r=>r!==void 0)):void 0}),n._zod.parse=(t,r)=>{const s=e.innerType._zod.run(t,r);return s instanceof Promise?s.then(i=>EI(i,n)):EI(s,n)}});function EI(n,e){return!n.issues.length&&n.value===void 0&&n.issues.push({code:"invalid_type",expected:"nonoptional",input:n.value,inst:e}),n}const B8=se("$ZodCatch",(n,e)=>{Qt.init(n,e),Ct(n._zod,"optin",()=>e.innerType._zod.optin),Ct(n._zod,"optout",()=>e.innerType._zod.optout),Ct(n._zod,"values",()=>e.innerType._zod.values),n._zod.parse=(t,r)=>{if(r.direction==="backward")return e.innerType._zod.run(t,r);const s=e.innerType._zod.run(t,r);return s instanceof Promise?s.then(i=>(t.value=i.value,i.issues.length&&(t.value=e.catchValue({...t,error:{issues:i.issues.map(c=>Ba(c,r,$a()))},input:t.value}),t.issues=[]),t)):(t.value=s.value,s.issues.length&&(t.value=e.catchValue({...t,error:{issues:s.issues.map(i=>Ba(i,r,$a()))},input:t.value}),t.issues=[]),t)}}),q8=se("$ZodPipe",(n,e)=>{Qt.init(n,e),Ct(n._zod,"values",()=>e.in._zod.values),Ct(n._zod,"optin",()=>e.in._zod.optin),Ct(n._zod,"optout",()=>e.out._zod.optout),Ct(n._zod,"propValues",()=>e.in._zod.propValues),n._zod.parse=(t,r)=>{if(r.direction==="backward"){const i=e.out._zod.run(t,r);return i instanceof Promise?i.then(c=>Ef(c,e.in,r)):Ef(i,e.in,r)}const s=e.in._zod.run(t,r);return s instanceof Promise?s.then(i=>Ef(i,e.out,r)):Ef(s,e.out,r)}});function Ef(n,e,t){return n.issues.length?(n.aborted=!0,n):e._zod.run({value:n.value,issues:n.issues},t)}const H8=se("$ZodReadonly",(n,e)=>{Qt.init(n,e),Ct(n._zod,"propValues",()=>e.innerType._zod.propValues),Ct(n._zod,"values",()=>e.innerType._zod.values),Ct(n._zod,"optin",()=>e.innerType._zod.optin),Ct(n._zod,"optout",()=>e.innerType._zod.optout),n._zod.parse=(t,r)=>{if(r.direction==="backward")return e.innerType._zod.run(t,r);const s=e.innerType._zod.run(t,r);return s instanceof Promise?s.then(bI):bI(s)}});function bI(n){return n.value=Object.freeze(n.value),n}const W8=se("$ZodCustom",(n,e)=>{ir.init(n,e),Qt.init(n,e),n._zod.parse=(t,r)=>t,n._zod.check=t=>{const r=t.value,s=e.fn(r);if(s instanceof Promise)return s.then(i=>xI(i,t,r,n));xI(s,t,r,n)}});function xI(n,e,t,r){if(!n){const s={code:"custom",input:t,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(vd(s))}}class G8{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function K8(){return new G8}const bf=K8();function Z8(n,e){return new n({type:"string",...je(e)})}function Q8(n,e){return new n({type:"string",format:"email",check:"string_format",abort:!1,...je(e)})}function SI(n,e){return new n({type:"string",format:"guid",check:"string_format",abort:!1,...je(e)})}function Y8(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,...je(e)})}function X8(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...je(e)})}function J8(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...je(e)})}function e7(n,e){return new n({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...je(e)})}function t7(n,e){return new n({type:"string",format:"url",check:"string_format",abort:!1,...je(e)})}function n7(n,e){return new n({type:"string",format:"emoji",check:"string_format",abort:!1,...je(e)})}function r7(n,e){return new n({type:"string",format:"nanoid",check:"string_format",abort:!1,...je(e)})}function s7(n,e){return new n({type:"string",format:"cuid",check:"string_format",abort:!1,...je(e)})}function o7(n,e){return new n({type:"string",format:"cuid2",check:"string_format",abort:!1,...je(e)})}function i7(n,e){return new n({type:"string",format:"ulid",check:"string_format",abort:!1,...je(e)})}function a7(n,e){return new n({type:"string",format:"xid",check:"string_format",abort:!1,...je(e)})}function c7(n,e){return new n({type:"string",format:"ksuid",check:"string_format",abort:!1,...je(e)})}function l7(n,e){return new n({type:"string",format:"ipv4",check:"string_format",abort:!1,...je(e)})}function u7(n,e){return new n({type:"string",format:"ipv6",check:"string_format",abort:!1,...je(e)})}function d7(n,e){return new n({type:"string",format:"cidrv4",check:"string_format",abort:!1,...je(e)})}function h7(n,e){return new n({type:"string",format:"cidrv6",check:"string_format",abort:!1,...je(e)})}function f7(n,e){return new n({type:"string",format:"base64",check:"string_format",abort:!1,...je(e)})}function p7(n,e){return new n({type:"string",format:"base64url",check:"string_format",abort:!1,...je(e)})}function m7(n,e){return new n({type:"string",format:"e164",check:"string_format",abort:!1,...je(e)})}function g7(n,e){return new n({type:"string",format:"jwt",check:"string_format",abort:!1,...je(e)})}function y7(n,e){return new n({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...je(e)})}function v7(n,e){return new n({type:"string",format:"date",check:"string_format",...je(e)})}function _7(n,e){return new n({type:"string",format:"time",check:"string_format",precision:null,...je(e)})}function w7(n,e){return new n({type:"string",format:"duration",check:"string_format",...je(e)})}function E7(n,e){return new n({type:"number",checks:[],...je(e)})}function b7(n,e){return new n({type:"number",coerce:!0,checks:[],...je(e)})}function x7(n,e){return new n({type:"number",check:"number_format",abort:!1,format:"safeint",...je(e)})}function S7(n,e){return new n({type:"boolean",...je(e)})}function I7(n){return new n({type:"unknown"})}function T7(n,e){return new n({type:"never",...je(e)})}function II(n,e){return new Sk({check:"less_than",...je(e),value:n,inclusive:!1})}function Uy(n,e){return new Sk({check:"less_than",...je(e),value:n,inclusive:!0})}function TI(n,e){return new Ik({check:"greater_than",...je(e),value:n,inclusive:!1})}function zy(n,e){return new Ik({check:"greater_than",...je(e),value:n,inclusive:!0})}function CI(n,e){return new $B({check:"multiple_of",...je(e),value:n})}function Pk(n,e){return new qB({check:"max_length",...je(e),maximum:n})}function Rp(n,e){return new HB({check:"min_length",...je(e),minimum:n})}function kk(n,e){return new WB({check:"length_equals",...je(e),length:n})}function C7(n,e){return new GB({check:"string_format",format:"regex",...je(e),pattern:n})}function A7(n){return new KB({check:"string_format",format:"lowercase",...je(n)})}function R7(n){return new ZB({check:"string_format",format:"uppercase",...je(n)})}function P7(n,e){return new QB({check:"string_format",format:"includes",...je(e),includes:n})}function k7(n,e){return new YB({check:"string_format",format:"starts_with",...je(e),prefix:n})}function N7(n,e){return new XB({check:"string_format",format:"ends_with",...je(e),suffix:n})}function Hd(n){return new JB({check:"overwrite",tx:n})}function D7(n){return Hd(e=>e.normalize(n))}function O7(){return Hd(n=>n.trim())}function M7(){return Hd(n=>n.toLowerCase())}function V7(){return Hd(n=>n.toUpperCase())}function L7(n,e,t){return new n({type:"array",element:e,...je(t)})}function F7(n,e,t){return new n({type:"custom",check:"custom",fn:e,...je(t)})}function j7(n){const e=U7(t=>(t.addIssue=r=>{if(typeof r=="string")t.issues.push(vd(r,t.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=t.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),t.issues.push(vd(s))}},n(t.value,t)));return e}function U7(n,e){const t=new ir({check:"custom",...je(e)});return t._zod.check=n,t}const z7=se("ZodISODateTime",(n,e)=>{f8.init(n,e),zt.init(n,e)});function $7(n){return y7(z7,n)}const B7=se("ZodISODate",(n,e)=>{p8.init(n,e),zt.init(n,e)});function q7(n){return v7(B7,n)}const H7=se("ZodISOTime",(n,e)=>{m8.init(n,e),zt.init(n,e)});function W7(n){return _7(H7,n)}const G7=se("ZodISODuration",(n,e)=>{g8.init(n,e),zt.init(n,e)});function K7(n){return w7(G7,n)}const Z7=(n,e)=>{vk.init(n,e),n.name="ZodError",Object.defineProperties(n,{format:{value:t=>sB(n,t)},flatten:{value:t=>rB(n,t)},addIssue:{value:t=>{n.issues.push(t),n.message=JSON.stringify(n.issues,Hv,2)}},addIssues:{value:t=>{n.issues.push(...t),n.message=JSON.stringify(n.issues,Hv,2)}},isEmpty:{get(){return n.issues.length===0}}})},Br=se("ZodError",Z7,{Parent:Error}),Q7=Zw(Br),Y7=Qw(Br),X7=Cm(Br),J7=Am(Br),eq=aB(Br),tq=cB(Br),nq=lB(Br),rq=uB(Br),sq=dB(Br),oq=hB(Br),iq=fB(Br),aq=pB(Br),sn=se("ZodType",(n,e)=>(Qt.init(n,e),n.def=e,n.type=e.type,Object.defineProperty(n,"_def",{value:e}),n.check=(...t)=>n.clone(Qa(e,{checks:[...e.checks??[],...t.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),n.clone=(t,r)=>Vi(n,t,r),n.brand=()=>n,n.register=((t,r)=>(t.add(n,r),n)),n.parse=(t,r)=>Q7(n,t,r,{callee:n.parse}),n.safeParse=(t,r)=>X7(n,t,r),n.parseAsync=async(t,r)=>Y7(n,t,r,{callee:n.parseAsync}),n.safeParseAsync=async(t,r)=>J7(n,t,r),n.spa=n.safeParseAsync,n.encode=(t,r)=>eq(n,t,r),n.decode=(t,r)=>tq(n,t,r),n.encodeAsync=async(t,r)=>nq(n,t,r),n.decodeAsync=async(t,r)=>rq(n,t,r),n.safeEncode=(t,r)=>sq(n,t,r),n.safeDecode=(t,r)=>oq(n,t,r),n.safeEncodeAsync=async(t,r)=>iq(n,t,r),n.safeDecodeAsync=async(t,r)=>aq(n,t,r),n.refine=(t,r)=>n.check(Xq(t,r)),n.superRefine=t=>n.check(Jq(t)),n.overwrite=t=>n.check(Hd(t)),n.optional=()=>kI(n),n.nullable=()=>NI(n),n.nullish=()=>kI(NI(n)),n.nonoptional=t=>Hq(n,t),n.array=()=>Dk(n),n.or=t=>Mq([n,t]),n.and=t=>Lq(n,t),n.transform=t=>DI(n,jq(t)),n.default=t=>$q(n,t),n.prefault=t=>qq(n,t),n.catch=t=>Gq(n,t),n.pipe=t=>DI(n,t),n.readonly=()=>Qq(n),n.describe=t=>{const r=n.clone();return bf.add(r,{description:t}),r},Object.defineProperty(n,"description",{get(){return bf.get(n)?.description},configurable:!0}),n.meta=(...t)=>{if(t.length===0)return bf.get(n);const r=n.clone();return bf.add(r,t[0]),r},n.isOptional=()=>n.safeParse(void 0).success,n.isNullable=()=>n.safeParse(null).success,n)),Nk=se("_ZodString",(n,e)=>{Yw.init(n,e),sn.init(n,e);const t=n._zod.bag;n.format=t.format??null,n.minLength=t.minimum??null,n.maxLength=t.maximum??null,n.regex=(...r)=>n.check(C7(...r)),n.includes=(...r)=>n.check(P7(...r)),n.startsWith=(...r)=>n.check(k7(...r)),n.endsWith=(...r)=>n.check(N7(...r)),n.min=(...r)=>n.check(Rp(...r)),n.max=(...r)=>n.check(Pk(...r)),n.length=(...r)=>n.check(kk(...r)),n.nonempty=(...r)=>n.check(Rp(1,...r)),n.lowercase=r=>n.check(A7(r)),n.uppercase=r=>n.check(R7(r)),n.trim=()=>n.check(O7()),n.normalize=(...r)=>n.check(D7(...r)),n.toLowerCase=()=>n.check(M7()),n.toUpperCase=()=>n.check(V7())}),cq=se("ZodString",(n,e)=>{Yw.init(n,e),Nk.init(n,e),n.email=t=>n.check(Q8(lq,t)),n.url=t=>n.check(t7(uq,t)),n.jwt=t=>n.check(g7(Iq,t)),n.emoji=t=>n.check(n7(dq,t)),n.guid=t=>n.check(SI(AI,t)),n.uuid=t=>n.check(Y8(xf,t)),n.uuidv4=t=>n.check(X8(xf,t)),n.uuidv6=t=>n.check(J8(xf,t)),n.uuidv7=t=>n.check(e7(xf,t)),n.nanoid=t=>n.check(r7(hq,t)),n.guid=t=>n.check(SI(AI,t)),n.cuid=t=>n.check(s7(fq,t)),n.cuid2=t=>n.check(o7(pq,t)),n.ulid=t=>n.check(i7(mq,t)),n.base64=t=>n.check(f7(bq,t)),n.base64url=t=>n.check(p7(xq,t)),n.xid=t=>n.check(a7(gq,t)),n.ksuid=t=>n.check(c7(yq,t)),n.ipv4=t=>n.check(l7(vq,t)),n.ipv6=t=>n.check(u7(_q,t)),n.cidrv4=t=>n.check(d7(wq,t)),n.cidrv6=t=>n.check(h7(Eq,t)),n.e164=t=>n.check(m7(Sq,t)),n.datetime=t=>n.check($7(t)),n.date=t=>n.check(q7(t)),n.time=t=>n.check(W7(t)),n.duration=t=>n.check(K7(t))});function st(n){return Z8(cq,n)}const zt=se("ZodStringFormat",(n,e)=>{Mt.init(n,e),Nk.init(n,e)}),lq=se("ZodEmail",(n,e)=>{s8.init(n,e),zt.init(n,e)}),AI=se("ZodGUID",(n,e)=>{n8.init(n,e),zt.init(n,e)}),xf=se("ZodUUID",(n,e)=>{r8.init(n,e),zt.init(n,e)}),uq=se("ZodURL",(n,e)=>{o8.init(n,e),zt.init(n,e)}),dq=se("ZodEmoji",(n,e)=>{i8.init(n,e),zt.init(n,e)}),hq=se("ZodNanoID",(n,e)=>{a8.init(n,e),zt.init(n,e)}),fq=se("ZodCUID",(n,e)=>{c8.init(n,e),zt.init(n,e)}),pq=se("ZodCUID2",(n,e)=>{l8.init(n,e),zt.init(n,e)}),mq=se("ZodULID",(n,e)=>{u8.init(n,e),zt.init(n,e)}),gq=se("ZodXID",(n,e)=>{d8.init(n,e),zt.init(n,e)}),yq=se("ZodKSUID",(n,e)=>{h8.init(n,e),zt.init(n,e)}),vq=se("ZodIPv4",(n,e)=>{y8.init(n,e),zt.init(n,e)}),_q=se("ZodIPv6",(n,e)=>{v8.init(n,e),zt.init(n,e)}),wq=se("ZodCIDRv4",(n,e)=>{_8.init(n,e),zt.init(n,e)}),Eq=se("ZodCIDRv6",(n,e)=>{w8.init(n,e),zt.init(n,e)}),bq=se("ZodBase64",(n,e)=>{E8.init(n,e),zt.init(n,e)}),xq=se("ZodBase64URL",(n,e)=>{x8.init(n,e),zt.init(n,e)}),Sq=se("ZodE164",(n,e)=>{S8.init(n,e),zt.init(n,e)}),Iq=se("ZodJWT",(n,e)=>{T8.init(n,e),zt.init(n,e)}),Xw=se("ZodNumber",(n,e)=>{Ck.init(n,e),sn.init(n,e),n.gt=(r,s)=>n.check(TI(r,s)),n.gte=(r,s)=>n.check(zy(r,s)),n.min=(r,s)=>n.check(zy(r,s)),n.lt=(r,s)=>n.check(II(r,s)),n.lte=(r,s)=>n.check(Uy(r,s)),n.max=(r,s)=>n.check(Uy(r,s)),n.int=r=>n.check(RI(r)),n.safe=r=>n.check(RI(r)),n.positive=r=>n.check(TI(0,r)),n.nonnegative=r=>n.check(zy(0,r)),n.negative=r=>n.check(II(0,r)),n.nonpositive=r=>n.check(Uy(0,r)),n.multipleOf=(r,s)=>n.check(CI(r,s)),n.step=(r,s)=>n.check(CI(r,s)),n.finite=()=>n;const t=n._zod.bag;n.minValue=Math.max(t.minimum??Number.NEGATIVE_INFINITY,t.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,n.maxValue=Math.min(t.maximum??Number.POSITIVE_INFINITY,t.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,n.isInt=(t.format??"").includes("int")||Number.isSafeInteger(t.multipleOf??.5),n.isFinite=!0,n.format=t.format??null});function $y(n){return E7(Xw,n)}const Tq=se("ZodNumberFormat",(n,e)=>{C8.init(n,e),Xw.init(n,e)});function RI(n){return x7(Tq,n)}const Cq=se("ZodBoolean",(n,e)=>{A8.init(n,e),sn.init(n,e)});function Aq(n){return S7(Cq,n)}const Rq=se("ZodUnknown",(n,e)=>{R8.init(n,e),sn.init(n,e)});function PI(){return I7(Rq)}const Pq=se("ZodNever",(n,e)=>{P8.init(n,e),sn.init(n,e)});function kq(n){return T7(Pq,n)}const Nq=se("ZodArray",(n,e)=>{k8.init(n,e),sn.init(n,e),n.element=e.element,n.min=(t,r)=>n.check(Rp(t,r)),n.nonempty=t=>n.check(Rp(1,t)),n.max=(t,r)=>n.check(Pk(t,r)),n.length=(t,r)=>n.check(kk(t,r)),n.unwrap=()=>n.element});function Dk(n,e){return L7(Nq,n,e)}const Dq=se("ZodObject",(n,e)=>{D8.init(n,e),sn.init(n,e),Ct(n,"shape",()=>e.shape),n.keyof=()=>Jw(Object.keys(n._zod.def.shape)),n.catchall=t=>n.clone({...n._zod.def,catchall:t}),n.passthrough=()=>n.clone({...n._zod.def,catchall:PI()}),n.loose=()=>n.clone({...n._zod.def,catchall:PI()}),n.strict=()=>n.clone({...n._zod.def,catchall:kq()}),n.strip=()=>n.clone({...n._zod.def,catchall:void 0}),n.extend=t=>X$(n,t),n.safeExtend=t=>J$(n,t),n.merge=t=>eB(n,t),n.pick=t=>Q$(n,t),n.omit=t=>Y$(n,t),n.partial=(...t)=>tB(Ok,n,t[0]),n.required=(...t)=>nB(Mk,n,t[0])});function Li(n,e){const t={type:"object",shape:n??{},...je(e)};return new Dq(t)}const Oq=se("ZodUnion",(n,e)=>{O8.init(n,e),sn.init(n,e),n.options=e.options});function Mq(n,e){return new Oq({type:"union",options:n,...je(e)})}const Vq=se("ZodIntersection",(n,e)=>{M8.init(n,e),sn.init(n,e)});function Lq(n,e){return new Vq({type:"intersection",left:n,right:e})}const Gv=se("ZodEnum",(n,e)=>{V8.init(n,e),sn.init(n,e),n.enum=e.entries,n.options=Object.values(e.entries);const t=new Set(Object.keys(e.entries));n.extract=(r,s)=>{const i={};for(const c of r)if(t.has(c))i[c]=e.entries[c];else throw new Error(`Key ${c} not found in enum`);return new Gv({...e,checks:[],...je(s),entries:i})},n.exclude=(r,s)=>{const i={...e.entries};for(const c of r)if(t.has(c))delete i[c];else throw new Error(`Key ${c} not found in enum`);return new Gv({...e,checks:[],...je(s),entries:i})}});function Jw(n,e){const t=Array.isArray(n)?Object.fromEntries(n.map(r=>[r,r])):n;return new Gv({type:"enum",entries:t,...je(e)})}const Fq=se("ZodTransform",(n,e)=>{L8.init(n,e),sn.init(n,e),n._zod.parse=(t,r)=>{if(r.direction==="backward")throw new hk(n.constructor.name);t.addIssue=i=>{if(typeof i=="string")t.issues.push(vd(i,t.value,e));else{const c=i;c.fatal&&(c.continue=!1),c.code??(c.code="custom"),c.input??(c.input=t.value),c.inst??(c.inst=n),t.issues.push(vd(c))}};const s=e.transform(t.value,t);return s instanceof Promise?s.then(i=>(t.value=i,t)):(t.value=s,t)}});function jq(n){return new Fq({type:"transform",transform:n})}const Ok=se("ZodOptional",(n,e)=>{F8.init(n,e),sn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function kI(n){return new Ok({type:"optional",innerType:n})}const Uq=se("ZodNullable",(n,e)=>{j8.init(n,e),sn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function NI(n){return new Uq({type:"nullable",innerType:n})}const zq=se("ZodDefault",(n,e)=>{U8.init(n,e),sn.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeDefault=n.unwrap});function $q(n,e){return new zq({type:"default",innerType:n,get defaultValue(){return typeof e=="function"?e():mk(e)}})}const Bq=se("ZodPrefault",(n,e)=>{z8.init(n,e),sn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function qq(n,e){return new Bq({type:"prefault",innerType:n,get defaultValue(){return typeof e=="function"?e():mk(e)}})}const Mk=se("ZodNonOptional",(n,e)=>{$8.init(n,e),sn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function Hq(n,e){return new Mk({type:"nonoptional",innerType:n,...je(e)})}const Wq=se("ZodCatch",(n,e)=>{B8.init(n,e),sn.init(n,e),n.unwrap=()=>n._zod.def.innerType,n.removeCatch=n.unwrap});function Gq(n,e){return new Wq({type:"catch",innerType:n,catchValue:typeof e=="function"?e:()=>e})}const Kq=se("ZodPipe",(n,e)=>{q8.init(n,e),sn.init(n,e),n.in=e.in,n.out=e.out});function DI(n,e){return new Kq({type:"pipe",in:n,out:e})}const Zq=se("ZodReadonly",(n,e)=>{H8.init(n,e),sn.init(n,e),n.unwrap=()=>n._zod.def.innerType});function Qq(n){return new Zq({type:"readonly",innerType:n})}const Yq=se("ZodCustom",(n,e)=>{W8.init(n,e),sn.init(n,e)});function Xq(n,e={}){return F7(Yq,n,e)}function Jq(n){return j7(n)}function yi(n){return b7(Xw,n)}const Vk=8,Kv=`Password must be at least ${Vk} characters`,Lk=st().min(1,"Password is required").min(Vk,Kv),OI=Li({email:st().min(1,"Email is required").email("Please enter a valid email address"),password:st().min(1,"Password is required")}),eH=st().min(1,"Phone number is required").regex(/^\d{11}$/,"Phone number must be exactly 11 digits (e.g., 09123456789)"),MI=Li({name:st().min(1,"Name is required").min(2,"Name must be at least 2 characters"),email:st().min(1,"Email is required").email("Please enter a valid email address"),phone:eH,password:Lk,confirmPassword:st().min(1,"Please confirm your password")}).refine(n=>n.password===n.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});Li({currentPassword:st().min(1,"Current password is required"),newPassword:Lk,confirmPassword:st().min(1,"Please confirm your new password")}).refine(n=>n.newPassword===n.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]});const qW=Li({name:st().min(1,"Item name is required").min(3,"Item name must be at least 3 characters").max(100,"Item name must be less than 100 characters"),category:st().min(1,"Category is required"),subcategory:st().optional(),quantity:yi().int("Quantity must be a whole number").min(0,"Quantity cannot be negative"),location:st().min(1,"Location is required").regex(/^[A-Z]-\d+$/,"Location must be in format A-12 (Letter-Number)"),brand:st().min(1,"Brand is required").min(2,"Brand must be at least 2 characters").max(100,"Brand must be less than 100 characters"),pricePerPiece:yi().positive("Price per piece must be a positive number").max(1e6,"Price per piece seems too high"),supplierId:st().min(1,"Supplier is required").regex(/^SUP-\d+$/,"Supplier ID must be in format SUP-001"),quantityPurchased:yi().int("Quantity purchased must be a whole number").min(0,"Quantity purchased cannot be negative"),quantitySold:yi().int("Quantity sold must be a whole number").min(0,"Quantity sold cannot be negative"),reorderRequired:Aq()});Li({name:st().min(1,"Company name is required").min(2,"Company name must be at least 2 characters").max(100,"Company name must be less than 100 characters"),contact:st().min(1,"Contact person is required").min(2,"Contact name must be at least 2 characters"),email:st().min(1,"Email is required").email("Please enter a valid email address"),phone:st().min(1,"Phone number is required"),category:st().min(1,"Category is required"),status:Jw(["Active","Inactive"],{errorMap:()=>({message:"Please select a valid status"})}).optional(),country:st().max(100,"Country must be less than 100 characters").optional(),city:st().max(100,"City must be less than 100 characters").optional(),address:st().max(200,"Address must be less than 200 characters").optional(),purchases:yi().min(0,"Purchases cannot be negative").optional(),payments:yi().min(0,"Payments cannot be negative").optional()});Li({name:st().min(1,"Customer name is required").min(2,"Customer name must be at least 2 characters").max(100,"Customer name must be less than 100 characters"),contact:st().min(1,"Contact person is required").min(2,"Contact name must be at least 2 characters"),email:st().min(1,"Email is required").email("Please enter a valid email address"),phone:st().min(1,"Phone number is required"),category:st().min(1,"Category is required"),status:Jw(["Active","Inactive"],{errorMap:()=>({message:"Please select a valid status"})}).optional(),country:st().max(100,"Country must be less than 100 characters").optional(),city:st().max(100,"City must be less than 100 characters").optional(),address:st().max(200,"Address must be less than 200 characters").optional(),purchases:yi().min(0,"Purchases cannot be negative").optional(),payments:yi().min(0,"Payments cannot be negative").optional()});const tH=Li({inventoryItemId:st().min(1,"Item is required"),itemName:st().min(1,"Item name is required"),quantity:$y().int("Quantity must be a whole number").min(1,"Quantity must be at least 1"),unitPrice:$y().positive("Unit price must be positive"),totalPrice:$y().positive("Total price must be positive")});Li({supplierId:st().min(1,"Supplier is required").regex(/^SUP-\d+$/,"Invalid supplier ID format"),supplierName:st().min(1,"Supplier name is required"),items:Dk(tH).min(1,"At least one item is required"),expectedDeliveryDate:st().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be in YYYY-MM-DD format").refine(n=>{const e=new Date(n),t=new Date;return t.setHours(0,0,0,0),e>=t},"Expected delivery date must be today or in the future"),notes:st().optional()});function Fk({...n}){return v.jsx(U1,{"data-slot":"dialog",...n})}function HW({...n}){return v.jsx(iV,{"data-slot":"dialog-trigger",...n})}function nH({...n}){return v.jsx(z1,{"data-slot":"dialog-portal",...n})}function rH({className:n,...e}){return v.jsx(f_,{"data-slot":"dialog-overlay",className:ze("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",n),...e})}function jk({className:n,children:e,...t}){return v.jsxs(nH,{"data-slot":"dialog-portal",children:[v.jsx(rH,{}),v.jsxs(p_,{"data-slot":"dialog-content",className:ze("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] max-h-[calc(100vh-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-4 sm:p-6 shadow-lg duration-200 sm:max-w-lg overflow-y-auto",n),...t,children:[e,v.jsxs($1,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[v.jsx(o_,{}),v.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function sH({className:n,...e}){return v.jsx("div",{"data-slot":"dialog-header",className:ze("flex flex-col gap-2 text-center sm:text-left",n),...e})}function oH({className:n,...e}){return v.jsx("div",{"data-slot":"dialog-footer",className:ze("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",n),...e})}function iH({className:n,...e}){return v.jsx(m_,{"data-slot":"dialog-title",className:ze("text-lg leading-none font-semibold",n),...e})}function aH({className:n,...e}){return v.jsx(g_,{"data-slot":"dialog-description",className:ze("text-muted-foreground text-sm",n),...e})}function cH(n,[e,t]){return Math.min(t,Math.max(e,n))}function lH(n,e){return b.useReducer((t,r)=>e[t][r]??t,n)}var e0="ScrollArea",[Uk]=Gs(e0),[uH,qr]=Uk(e0),zk=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,type:r="hover",dir:s,scrollHideDelay:i=600,...c}=n,[u,d]=b.useState(null),[p,g]=b.useState(null),[m,w]=b.useState(null),[S,R]=b.useState(null),[C,A]=b.useState(null),[O,U]=b.useState(0),[z,q]=b.useState(0),[W,X]=b.useState(!1),[P,I]=b.useState(!1),k=xt(e,V=>d(V)),M=A_(s);return v.jsx(uH,{scope:t,type:r,dir:M,scrollHideDelay:i,scrollArea:u,viewport:p,onViewportChange:g,content:m,onContentChange:w,scrollbarX:S,onScrollbarXChange:R,scrollbarXEnabled:W,onScrollbarXEnabledChange:X,scrollbarY:C,onScrollbarYChange:A,scrollbarYEnabled:P,onScrollbarYEnabledChange:I,onCornerWidthChange:U,onCornerHeightChange:q,children:v.jsx(ut.div,{dir:M,...c,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":O+"px","--radix-scroll-area-corner-height":z+"px",...n.style}})})});zk.displayName=e0;var $k="ScrollAreaViewport",Bk=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,children:r,nonce:s,...i}=n,c=qr($k,t),u=b.useRef(null),d=xt(e,u,c.onViewportChange);return v.jsxs(v.Fragment,{children:[v.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),v.jsx(ut.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...n.style},children:v.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Bk.displayName=$k;var Zs="ScrollAreaScrollbar",t0=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=qr(Zs,n.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:c}=s,u=n.orientation==="horizontal";return b.useEffect(()=>(u?i(!0):c(!0),()=>{u?i(!1):c(!1)}),[u,i,c]),s.type==="hover"?v.jsx(dH,{...r,ref:e,forceMount:t}):s.type==="scroll"?v.jsx(hH,{...r,ref:e,forceMount:t}):s.type==="auto"?v.jsx(qk,{...r,ref:e,forceMount:t}):s.type==="always"?v.jsx(n0,{...r,ref:e}):null});t0.displayName=Zs;var dH=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=qr(Zs,n.__scopeScrollArea),[i,c]=b.useState(!1);return b.useEffect(()=>{const u=s.scrollArea;let d=0;if(u){const p=()=>{window.clearTimeout(d),c(!0)},g=()=>{d=window.setTimeout(()=>c(!1),s.scrollHideDelay)};return u.addEventListener("pointerenter",p),u.addEventListener("pointerleave",g),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",p),u.removeEventListener("pointerleave",g)}}},[s.scrollArea,s.scrollHideDelay]),v.jsx(Gn,{present:t||i,children:v.jsx(qk,{"data-state":i?"visible":"hidden",...r,ref:e})})}),hH=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=qr(Zs,n.__scopeScrollArea),i=n.orientation==="horizontal",c=km(()=>d("SCROLL_END"),100),[u,d]=lH("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return b.useEffect(()=>{if(u==="idle"){const p=window.setTimeout(()=>d("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(p)}},[u,s.scrollHideDelay,d]),b.useEffect(()=>{const p=s.viewport,g=i?"scrollLeft":"scrollTop";if(p){let m=p[g];const w=()=>{const S=p[g];m!==S&&(d("SCROLL"),c()),m=S};return p.addEventListener("scroll",w),()=>p.removeEventListener("scroll",w)}},[s.viewport,i,d,c]),v.jsx(Gn,{present:t||u!=="hidden",children:v.jsx(n0,{"data-state":u==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Fe(n.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:Fe(n.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),qk=b.forwardRef((n,e)=>{const t=qr(Zs,n.__scopeScrollArea),{forceMount:r,...s}=n,[i,c]=b.useState(!1),u=n.orientation==="horizontal",d=km(()=>{if(t.viewport){const p=t.viewport.offsetWidth<t.viewport.scrollWidth,g=t.viewport.offsetHeight<t.viewport.scrollHeight;c(u?p:g)}},10);return xl(t.viewport,d),xl(t.content,d),v.jsx(Gn,{present:r||i,children:v.jsx(n0,{"data-state":i?"visible":"hidden",...s,ref:e})})}),n0=b.forwardRef((n,e)=>{const{orientation:t="vertical",...r}=n,s=qr(Zs,n.__scopeScrollArea),i=b.useRef(null),c=b.useRef(0),[u,d]=b.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),p=Zk(u.viewport,u.content),g={...r,sizes:u,onSizesChange:d,hasThumb:p>0&&p<1,onThumbChange:w=>i.current=w,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:w=>c.current=w};function m(w,S){return vH(w,c.current,u,S)}return t==="horizontal"?v.jsx(fH,{...g,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const w=s.viewport.scrollLeft,S=VI(w,u,s.dir);i.current.style.transform=`translate3d(${S}px, 0, 0)`}},onWheelScroll:w=>{s.viewport&&(s.viewport.scrollLeft=w)},onDragScroll:w=>{s.viewport&&(s.viewport.scrollLeft=m(w,s.dir))}}):t==="vertical"?v.jsx(pH,{...g,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const w=s.viewport.scrollTop,S=VI(w,u);i.current.style.transform=`translate3d(0, ${S}px, 0)`}},onWheelScroll:w=>{s.viewport&&(s.viewport.scrollTop=w)},onDragScroll:w=>{s.viewport&&(s.viewport.scrollTop=m(w))}}):null}),fH=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=qr(Zs,n.__scopeScrollArea),[c,u]=b.useState(),d=b.useRef(null),p=xt(e,d,i.onScrollbarXChange);return b.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),v.jsx(Wk,{"data-orientation":"horizontal",...s,ref:p,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Pm(t)+"px",...n.style},onThumbPointerDown:g=>n.onThumbPointerDown(g.x),onDragScroll:g=>n.onDragScroll(g.x),onWheelScroll:(g,m)=>{if(i.viewport){const w=i.viewport.scrollLeft+g.deltaX;n.onWheelScroll(w),Yk(w,m)&&g.preventDefault()}},onResize:()=>{d.current&&i.viewport&&c&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:kp(c.paddingLeft),paddingEnd:kp(c.paddingRight)}})}})}),pH=b.forwardRef((n,e)=>{const{sizes:t,onSizesChange:r,...s}=n,i=qr(Zs,n.__scopeScrollArea),[c,u]=b.useState(),d=b.useRef(null),p=xt(e,d,i.onScrollbarYChange);return b.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),v.jsx(Wk,{"data-orientation":"vertical",...s,ref:p,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Pm(t)+"px",...n.style},onThumbPointerDown:g=>n.onThumbPointerDown(g.y),onDragScroll:g=>n.onDragScroll(g.y),onWheelScroll:(g,m)=>{if(i.viewport){const w=i.viewport.scrollTop+g.deltaY;n.onWheelScroll(w),Yk(w,m)&&g.preventDefault()}},onResize:()=>{d.current&&i.viewport&&c&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:kp(c.paddingTop),paddingEnd:kp(c.paddingBottom)}})}})}),[mH,Hk]=Uk(Zs),Wk=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:p,onWheelScroll:g,onResize:m,...w}=n,S=qr(Zs,t),[R,C]=b.useState(null),A=xt(e,k=>C(k)),O=b.useRef(null),U=b.useRef(""),z=S.viewport,q=r.content-r.viewport,W=Ln(g),X=Ln(d),P=km(m,10);function I(k){if(O.current){const M=k.clientX-O.current.left,V=k.clientY-O.current.top;p({x:M,y:V})}}return b.useEffect(()=>{const k=M=>{const V=M.target;R?.contains(V)&&W(M,q)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[z,R,q,W]),b.useEffect(X,[r,X]),xl(R,P),xl(S.content,P),v.jsx(mH,{scope:t,scrollbar:R,hasThumb:s,onThumbChange:Ln(i),onThumbPointerUp:Ln(c),onThumbPositionChange:X,onThumbPointerDown:Ln(u),children:v.jsx(ut.div,{...w,ref:A,style:{position:"absolute",...w.style},onPointerDown:Fe(n.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),O.current=R.getBoundingClientRect(),U.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S.viewport&&(S.viewport.style.scrollBehavior="auto"),I(k))}),onPointerMove:Fe(n.onPointerMove,I),onPointerUp:Fe(n.onPointerUp,k=>{const M=k.target;M.hasPointerCapture(k.pointerId)&&M.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=U.current,S.viewport&&(S.viewport.style.scrollBehavior=""),O.current=null})})})}),Pp="ScrollAreaThumb",Gk=b.forwardRef((n,e)=>{const{forceMount:t,...r}=n,s=Hk(Pp,n.__scopeScrollArea);return v.jsx(Gn,{present:t||s.hasThumb,children:v.jsx(gH,{ref:e,...r})})}),gH=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,style:r,...s}=n,i=qr(Pp,t),c=Hk(Pp,t),{onThumbPositionChange:u}=c,d=xt(e,m=>c.onThumbChange(m)),p=b.useRef(void 0),g=km(()=>{p.current&&(p.current(),p.current=void 0)},100);return b.useEffect(()=>{const m=i.viewport;if(m){const w=()=>{if(g(),!p.current){const S=_H(m,u);p.current=S,u()}};return u(),m.addEventListener("scroll",w),()=>m.removeEventListener("scroll",w)}},[i.viewport,g,u]),v.jsx(ut.div,{"data-state":c.hasThumb?"visible":"hidden",...s,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Fe(n.onPointerDownCapture,m=>{const S=m.target.getBoundingClientRect(),R=m.clientX-S.left,C=m.clientY-S.top;c.onThumbPointerDown({x:R,y:C})}),onPointerUp:Fe(n.onPointerUp,c.onThumbPointerUp)})});Gk.displayName=Pp;var r0="ScrollAreaCorner",Kk=b.forwardRef((n,e)=>{const t=qr(r0,n.__scopeScrollArea),r=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&r?v.jsx(yH,{...n,ref:e}):null});Kk.displayName=r0;var yH=b.forwardRef((n,e)=>{const{__scopeScrollArea:t,...r}=n,s=qr(r0,t),[i,c]=b.useState(0),[u,d]=b.useState(0),p=!!(i&&u);return xl(s.scrollbarX,()=>{const g=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(g),d(g)}),xl(s.scrollbarY,()=>{const g=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(g),c(g)}),p?v.jsx(ut.div,{...r,ref:e,style:{width:i,height:u,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function kp(n){return n?parseInt(n,10):0}function Zk(n,e){const t=n/e;return isNaN(t)?0:t}function Pm(n){const e=Zk(n.viewport,n.content),t=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,r=(n.scrollbar.size-t)*e;return Math.max(r,18)}function vH(n,e,t,r="ltr"){const s=Pm(t),i=s/2,c=e||i,u=s-c,d=t.scrollbar.paddingStart+c,p=t.scrollbar.size-t.scrollbar.paddingEnd-u,g=t.content-t.viewport,m=r==="ltr"?[0,g]:[g*-1,0];return Qk([d,p],m)(n)}function VI(n,e,t="ltr"){const r=Pm(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,c=e.content-e.viewport,u=i-r,d=t==="ltr"?[0,c]:[c*-1,0],p=cH(n,d);return Qk([0,c],[0,u])(p)}function Qk(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function Yk(n,e){return n>0&&n<e}var _H=(n,e=()=>{})=>{let t={left:n.scrollLeft,top:n.scrollTop},r=0;return(function s(){const i={left:n.scrollLeft,top:n.scrollTop},c=t.left!==i.left,u=t.top!==i.top;(c||u)&&e(),t=i,r=window.requestAnimationFrame(s)})(),()=>window.cancelAnimationFrame(r)};function km(n,e){const t=Ln(n),r=b.useRef(0);return b.useEffect(()=>()=>window.clearTimeout(r.current),[]),b.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(t,e)},[t,e])}function xl(n,e){const t=Ln(e);_o(()=>{let r=0;if(n){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(t)});return s.observe(n),()=>{window.cancelAnimationFrame(r),s.unobserve(n)}}},[n,t])}var Xk=zk,wH=Bk,EH=Kk;const Nm=b.forwardRef(({className:n,children:e,...t},r)=>v.jsxs(Xk,{ref:r,className:ze("relative overflow-hidden",n),...t,children:[v.jsx(wH,{className:"h-full w-full rounded-[inherit]",children:e}),v.jsx(Jk,{}),v.jsx(EH,{})]}));Nm.displayName=Xk.displayName;const Jk=b.forwardRef(({className:n,orientation:e="vertical",...t},r)=>v.jsx(t0,{ref:r,orientation:e,className:ze("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...t,children:v.jsx(Gk,{className:"relative flex-1 rounded-full bg-border"})}));Jk.displayName=t0.displayName;function bH({open:n,onOpenChange:e}){return v.jsx(Fk,{open:n,onOpenChange:e,children:v.jsxs(jk,{className:"max-w-2xl max-h-[80vh]",children:[v.jsxs(sH,{children:[v.jsx(iH,{children:"Terms and Conditions"}),v.jsx(aH,{children:"Please read these terms carefully before using our Warehouse Management System."})]}),v.jsx(Nm,{className:"h-[400px] pr-4",children:v.jsxs("div",{className:"space-y-4 text-sm text-muted-foreground",children:[v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"1. Acceptance of Terms"}),v.jsx("p",{children:'By accessing and using this Warehouse Management System ("WMS"), you accept and agree to be bound by the terms and provisions of this agreement. If you do not agree to these terms, please do not use this system.'})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"2. User Accounts"}),v.jsx("p",{children:"You are responsible for maintaining the confidentiality of your account credentials. You agree to notify the system administrator immediately of any unauthorized use of your account. You are responsible for all activities that occur under your account."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"3. Acceptable Use"}),v.jsx("p",{children:"You agree to use this system only for lawful purposes and in accordance with these Terms. You agree not to:"}),v.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[v.jsx("li",{children:"Use the system in any way that violates any applicable laws or regulations"}),v.jsx("li",{children:"Attempt to gain unauthorized access to other user accounts or system resources"}),v.jsx("li",{children:"Introduce any viruses, malware, or other harmful code"}),v.jsx("li",{children:"Interfere with or disrupt the system's operation"}),v.jsx("li",{children:"Share your login credentials with unauthorized parties"})]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"4. Data Privacy"}),v.jsx("p",{children:"Your use of this system is also governed by our Privacy Policy. By using this system, you consent to the collection and use of information as described in our Privacy Policy. We are committed to protecting your personal information and business data."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"5. System Availability"}),v.jsx("p",{children:"While we strive to maintain high availability, we do not guarantee uninterrupted access to the system. We may perform maintenance, updates, or experience technical issues that temporarily affect system availability."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"6. Intellectual Property"}),v.jsx("p",{children:"All content, features, and functionality of this system are owned by the system provider and are protected by intellectual property laws. You may not copy, modify, or distribute any part of the system without prior written consent."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"7. Limitation of Liability"}),v.jsx("p",{children:"To the maximum extent permitted by law, the system provider shall not be liable for any indirect, incidental, special, consequential, or punitive damages resulting from your use of or inability to use the system."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"8. Changes to Terms"}),v.jsx("p",{children:"We reserve the right to modify these terms at any time. We will notify users of any material changes. Your continued use of the system after such modifications constitutes acceptance of the updated terms."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"9. Termination"}),v.jsx("p",{children:"We may terminate or suspend your account and access to the system immediately, without prior notice, for conduct that we believe violates these Terms or is harmful to other users or the system."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"10. Contact Information"}),v.jsx("p",{children:"If you have any questions about these Terms, please contact the system administrator."})]}),v.jsx("p",{className:"text-xs text-muted-foreground pt-4 border-t",children:"Last updated: December 2024"})]})}),v.jsx(oH,{children:v.jsx(Ds,{onClick:()=>e(!1),children:"Close"})})]})})}function xH({className:n}){return v.jsxs("svg",{className:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),v.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),v.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),v.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]})}function SH(){const{login:n,register:e,loginWithGoogle:t}=Vl(),[r,s]=b.useState("login"),[i,c]=b.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",rememberMe:!1,acceptTerms:!1}),[u,d]=b.useState({}),[p,g]=b.useState(!1),[m,w]=b.useState(!1),[S,R]=b.useState(!1),[C,A]=b.useState(!1),O=()=>{c({name:"",email:"",phone:"",password:"",confirmPassword:"",rememberMe:!1,acceptTerms:!1}),d({})},U=P=>{s(P),O()};function z(P,I){try{const k=r==="login"?OI:MI,M=r==="login"?{email:P==="email"?I:i.email,password:P==="password"?I:i.password}:{name:P==="name"?I:i.name,email:P==="email"?I:i.email,phone:P==="phone"?I:i.phone,password:P==="password"?I:i.password,confirmPassword:P==="confirmPassword"?I:i.confirmPassword},V=k.safeParse(M);if(!V.success&&V.error?.errors){const L=V.error.errors.find(N=>N.path[0]===P);d(L?N=>({...N,[P]:L.message}):N=>{const ue={...N};return delete ue[P],ue})}else d(L=>{const N={...L};return delete N[P],N})}catch(k){console.error("Validation error:",k)}}function q(){try{const P=r==="login"?OI:MI,I=r==="login"?{email:i.email,password:i.password}:{name:i.name,email:i.email,phone:i.phone,password:i.password,confirmPassword:i.confirmPassword},k=P.safeParse(I);if(!k.success&&k.error?.errors){const M={};return k.error.errors.forEach(V=>{const L=V.path.join(".");M[L]=V.message}),d(M),Object.values(M)[0]}return r==="register"&&!i.acceptTerms?(d(M=>({...M,acceptTerms:"You must accept the Terms and Conditions"})),"You must accept the Terms and Conditions to create an account"):(d({}),null)}catch(P){return console.error("Form validation error:",P),null}}async function W(P){P.preventDefault();const I=q();if(I){Mn.error(I);return}w(!0);try{r==="login"?(await n(i.email,i.password,i.rememberMe),Mn.success("Welcome back!")):(await e(i.email,i.password,i.name,i.phone),Mn.success("Registration successful! Your account is pending approval by an administrator."),U("login"))}catch(k){if(k instanceof Error){const M=k.message;if(M.startsWith("NO_ACCOUNT:")){const V=M.replace("NO_ACCOUNT:","");Mn.error(V,{action:{label:"Sign Up",onClick:()=>U("register")},duration:8e3})}else M.startsWith("WRONG_PASSWORD:")?Mn.error(M.replace("WRONG_PASSWORD:","")):M.startsWith("PENDING:")?Mn.warning(M.replace("PENDING:",""),{duration:6e3}):M.startsWith("INACTIVE:")?Mn.error(M.replace("INACTIVE:",""),{duration:6e3}):Mn.error(M)}else Mn.error("An error occurred. Please try again.")}finally{w(!1)}}async function X(){R(!0);try{await t(),Mn.success("Welcome!")}catch(P){if(P instanceof Error){const I=P.message;I.startsWith("PENDING:")?Mn.warning(I.replace("PENDING:",""),{duration:6e3}):I.startsWith("INACTIVE:")?Mn.error(I.replace("INACTIVE:",""),{duration:6e3}):I.includes("popup-closed-by-user")||Mn.error(I)}else Mn.error("Google sign-in failed. Please try again.")}finally{R(!1)}}return v.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-4",children:[v.jsxs(XP,{className:"w-full max-w-[360px] shadow-xl mx-auto",children:[v.jsxs(JP,{className:"space-y-4 text-center",children:[v.jsx("div",{className:"flex justify-center",children:v.jsx("div",{className:"h-16 w-16 rounded-full bg-primary/10 flex items-center justify-center",children:v.jsx(Vp,{className:"h-8 w-8 text-primary"})})}),v.jsxs("div",{children:[v.jsx(ek,{className:"text-2xl font-bold",children:r==="login"?"Welcome Back":"Create Account"}),v.jsx(tk,{className:"mt-2",children:r==="login"?"Sign in to your Warehouse Management System":"Register for a new account (requires admin approval)"})]})]}),v.jsx(nk,{children:v.jsxs("form",{onSubmit:W,className:"space-y-4",children:[r==="register"&&v.jsxs("div",{className:"space-y-2",children:[v.jsx(da,{htmlFor:"name",children:"Full Name *"}),v.jsxs("div",{className:"relative",children:[v.jsx(qy,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),v.jsx(Bc,{id:"name",type:"text",placeholder:"John Doe",value:i.name,onChange:P=>{c({...i,name:P.target.value}),z("name",P.target.value)},className:`pl-9 ${u.name?"border-red-500":""}`,disabled:m,autoComplete:"name"})]}),u.name&&v.jsx("p",{className:"text-sm text-red-500",children:u.name})]}),r==="register"&&v.jsxs("div",{className:"space-y-2",children:[v.jsx(da,{htmlFor:"phone",children:"Phone Number *"}),v.jsxs("div",{className:"relative",children:[v.jsx(SD,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),v.jsx(Bc,{id:"phone",type:"tel",placeholder:"09123456789",value:i.phone,onChange:P=>{const I=P.target.value.replace(/\D/g,"").slice(0,11);c({...i,phone:I}),z("phone",I)},className:`pl-9 ${u.phone?"border-red-500":""}`,disabled:m,autoComplete:"tel",maxLength:11})]}),u.phone?v.jsx("p",{className:"text-sm text-red-500",children:u.phone}):v.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be exactly 11 digits (e.g., 09123456789)"})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(da,{htmlFor:"email",children:"Email"}),v.jsxs("div",{className:"relative",children:[v.jsx(fD,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),v.jsx(Bc,{id:"email",type:"email",placeholder:"admin@wms.com",value:i.email,onChange:P=>{c({...i,email:P.target.value}),z("email",P.target.value)},className:`pl-9 ${u.email?"border-red-500":""}`,disabled:m,autoComplete:"off"})]}),u.email&&v.jsx("p",{className:"text-sm text-red-500",children:u.email})]}),v.jsxs("div",{className:"space-y-2",children:[v.jsx(da,{htmlFor:"password",children:"Password"}),v.jsxs("div",{className:"relative",children:[v.jsx(Cb,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),v.jsx(Bc,{id:"password",type:p?"text":"password",placeholder:r==="register"?`Min ${Kv.split(" ").pop()} characters`:"Enter your password",value:i.password,onChange:P=>{c({...i,password:P.target.value}),z("password",P.target.value)},className:`pl-9 pr-9 ${u.password?"border-red-500":""}`,disabled:m,autoComplete:r==="login"?"current-password":"new-password"}),v.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",disabled:m,tabIndex:-1,children:p?v.jsx(Y2,{className:"h-4 w-4"}):v.jsx(J2,{className:"h-4 w-4"})})]}),u.password?v.jsx("p",{className:"text-sm text-red-500",children:u.password}):r==="register"&&v.jsx("p",{className:"text-xs text-muted-foreground",children:Kv})]}),r==="register"&&v.jsxs("div",{className:"space-y-2",children:[v.jsx(da,{htmlFor:"confirmPassword",children:"Confirm Password"}),v.jsxs("div",{className:"relative",children:[v.jsx(Cb,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),v.jsx(Bc,{id:"confirmPassword",type:p?"text":"password",placeholder:"Confirm your password",value:i.confirmPassword,onChange:P=>{c({...i,confirmPassword:P.target.value}),z("confirmPassword",P.target.value)},className:`pl-9 ${u.confirmPassword?"border-red-500":""}`,disabled:m,autoComplete:"new-password"})]}),u.confirmPassword&&v.jsx("p",{className:"text-sm text-red-500",children:u.confirmPassword})]}),r==="login"&&v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsx(hI,{id:"remember",checked:i.rememberMe,onCheckedChange:P=>c({...i,rememberMe:P}),disabled:m}),v.jsx(da,{htmlFor:"remember",className:"text-sm font-normal cursor-pointer",children:"Remember me"})]}),v.jsx("button",{type:"button",className:"text-sm text-primary hover:underline",disabled:m,onClick:()=>Mn.info("Password reset feature coming soon!"),children:"Forgot password?"})]}),r==="register"&&v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex items-start space-x-2",children:[v.jsx(hI,{id:"acceptTerms",checked:i.acceptTerms,onCheckedChange:P=>{c({...i,acceptTerms:P}),P&&d(I=>{const{acceptTerms:k,...M}=I;return M})},disabled:m,className:u.acceptTerms?"border-red-500":""}),v.jsxs(da,{htmlFor:"acceptTerms",className:`text-sm font-normal cursor-pointer leading-tight ${u.acceptTerms?"text-red-500":""}`,children:["I agree to the"," ",v.jsx("button",{type:"button",className:"text-primary hover:underline font-medium",onClick:()=>A(!0),children:"Terms and Conditions"})]})]}),u.acceptTerms&&v.jsx("p",{className:"text-sm text-red-500",children:u.acceptTerms})]}),v.jsx(Ds,{type:"submit",className:"w-full",disabled:m||S,children:m?v.jsxs(v.Fragment,{children:[v.jsx(Qu,{className:"mr-2 h-4 w-4 animate-spin"}),r==="login"?"Signing in...":"Creating account..."]}):r==="login"?"Sign In":"Create Account"}),v.jsxs("div",{className:"relative",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("span",{className:"w-full border-t"})}),v.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:v.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),v.jsx(Ds,{type:"button",variant:"outline",className:"w-full",onClick:X,disabled:m||S,children:S?v.jsxs(v.Fragment,{children:[v.jsx(Qu,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in with Google..."]}):v.jsxs(v.Fragment,{children:[v.jsx(xH,{className:"mr-2 h-4 w-4"}),"Sign in with Google"]})}),v.jsx("div",{className:"text-center text-sm",children:r==="login"?v.jsxs("p",{className:"text-muted-foreground",children:["Don't have an account?"," ",v.jsx("button",{type:"button",className:"text-primary hover:underline font-medium",onClick:()=>U("register"),disabled:m,children:"Sign up"})]}):v.jsxs("p",{className:"text-muted-foreground",children:["Already have an account?"," ",v.jsx("button",{type:"button",className:"text-primary hover:underline font-medium",onClick:()=>U("login"),disabled:m,children:"Sign in"})]})}),r==="register"&&v.jsx("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-lg",children:v.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:[v.jsx("strong",{children:"Note:"})," New accounts require administrator approval before you can access the system. You will be notified once your account is approved."]})})]})})]}),v.jsx(bH,{open:C,onOpenChange:A})]})}const eN=b.createContext(null);function IH({children:n}){const[e,t]=b.useState([]),r=b.useCallback((w,S=1)=>{t(R=>{const C=R.findIndex(O=>O.inventoryItemId===w.id);if(C>=0){const O=[...R],U=Math.min(O[C].quantity+S,O[C].availableStock);return O[C]={...O[C],quantity:U,totalPrice:U*O[C].unitPrice},O}const A={inventoryItemId:w.id,itemName:w.name,quantity:Math.min(S,w.quantity),unitPrice:w.pricePerPiece,totalPrice:Math.min(S,w.quantity)*w.pricePerPiece,availableStock:w.quantity,imageUrl:w.photoUrl,brand:w.brand,category:w.category};return[...R,A]})},[]),s=b.useCallback(w=>{t(S=>S.filter(R=>R.inventoryItemId!==w))},[]),i=b.useCallback((w,S)=>{if(S<=0){s(w);return}t(R=>R.map(C=>{if(C.inventoryItemId===w){const A=Math.min(S,C.availableStock);return{...C,quantity:A,totalPrice:A*C.unitPrice}}return C}))},[s]),c=b.useCallback(()=>{t([])},[]),u=b.useMemo(()=>e.reduce((w,S)=>w+S.totalPrice,0),[e]),d=b.useMemo(()=>e.reduce((w,S)=>w+S.quantity,0),[e]),p=b.useCallback(w=>e.some(S=>S.inventoryItemId===w),[e]),g=b.useCallback(w=>e.find(S=>S.inventoryItemId===w),[e]),m={cart:e,addToCart:r,removeFromCart:s,updateQuantity:i,clearCart:c,cartTotal:u,itemCount:d,isInCart:p,getCartItem:g};return v.jsx(eN.Provider,{value:m,children:n})}function WW(){const n=b.useContext(eN);if(!n)throw new Error("useCart must be used within a CartProvider");return n}const LI="wms_error_logs",FI=100;function Zv(n,e){const t={message:n?.message??String(n),stack:n?.stack,componentStack:e?.componentStack,timestamp:Date.now()};try{const r=localStorage.getItem(LI),s=r?JSON.parse(r):[];s.unshift(t),s.length>FI&&(s.length=FI),localStorage.setItem(LI,JSON.stringify(s))}catch{}}const TH=Mp("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Np({className:n,variant:e,asChild:t=!1,...r}){const s=t?Op:"span";return v.jsx(s,{"data-slot":"badge",className:ze(TH({variant:e}),n),...r})}function Dm(n){const e={};for(const t of Object.keys(n))n[t]!==void 0&&(e[t]=n[t]);return e}function Wd(n,e,t){return n<=0?"Critical":t!==void 0&&n<=t||e?"Low Stock":"In Stock"}async function CH(){const n=await Tr(Wt(de,xe.INVENTORY));let e=0;return n.forEach(t=>{const s=t.id.match(/INV-(\d+)/);if(s){const i=parseInt(s[1],10);i>e&&(e=i)}}),`INV-${String(e+1).padStart(3,"0")}`}async function GW(){const n=await Tr(Wt(de,xe.INVENTORY)),e=[];return n.forEach(t=>{const r=t.data();e.push({id:t.id,name:r.name,category:r.category,subcategory:r.subcategory,quantity:r.quantity||0,location:r.location,status:r.status||Wd(r.quantity||0,r.reorderRequired||!1,r.reorderLevel),brand:r.brand||"",pricePerPiece:r.pricePerPiece||0,supplierId:r.supplierId||"",quantityPurchased:r.quantityPurchased||0,quantitySold:r.quantitySold||0,reorderRequired:r.reorderRequired||!1,reorderLevel:r.reorderLevel,photoUrl:r.photoUrl,description:r.description,archived:r.archived||!1,archivedAt:r.archivedAt})}),e}function AH(n,e){return Mi(Wt(de,xe.INVENTORY),t=>{const r=[];t.forEach(s=>{const i=s.data();r.push({id:s.id,name:i.name,category:i.category,subcategory:i.subcategory,quantity:i.quantity||0,location:i.location,status:i.status||Wd(i.quantity||0,i.reorderRequired||!1,i.reorderLevel),brand:i.brand||"",pricePerPiece:i.pricePerPiece||0,supplierId:i.supplierId||"",quantityPurchased:i.quantityPurchased||0,quantitySold:i.quantitySold||0,reorderRequired:i.reorderRequired||!1,reorderLevel:i.reorderLevel,photoUrl:i.photoUrl,description:i.description,archived:i.archived||!1,archivedAt:i.archivedAt})}),n(r)},e)}async function KW(n){const e=n.id&&n.id.trim()!==""?n.id:await CH(),t=Math.max(0,Math.floor(n.quantity)),r=Math.max(0,Math.floor(n.quantityPurchased)),s=Math.max(0,Math.floor(n.quantitySold)),i=n.reorderLevel!==void 0?Math.max(0,Math.floor(n.reorderLevel)):void 0,c=i!==void 0&&t<=i?!0:n.reorderRequired,u=Wd(t,c,i),d={id:e,name:n.name.trim(),category:n.category,subcategory:n.subcategory,quantity:t,location:n.location.trim(),status:u,brand:n.brand.trim(),pricePerPiece:n.pricePerPiece,supplierId:n.supplierId.trim(),quantityPurchased:r,quantitySold:s,reorderRequired:c,reorderLevel:i,photoUrl:n.photoUrl,description:n.description};if((await Qe(Le(de,xe.INVENTORY,e))).exists())throw new Error(`Item with id ${e} already exists`);const g=Dm(d);return await Oi(Le(de,xe.INVENTORY,e),g),d}async function ZW(n){const e=Le(de,xe.INVENTORY,n.id),t=await Qe(e);if(!t.exists())throw new Error("Item not found");const r=t.data(),s=n.quantity!==void 0?Math.max(0,Math.floor(n.quantity)):r.quantity,i=n.quantityPurchased!==void 0?Math.max(0,Math.floor(n.quantityPurchased)):r.quantityPurchased,c=n.quantitySold!==void 0?Math.max(0,Math.floor(n.quantitySold)):r.quantitySold,u=n.reorderLevel!==void 0?Math.max(0,Math.floor(n.reorderLevel)):r.reorderLevel;let d=n.reorderRequired!==void 0?n.reorderRequired:r.reorderRequired;u!==void 0&&s<=u&&(d=!0);const p={...r,...n,quantity:s,quantityPurchased:i,quantitySold:c,reorderRequired:d,reorderLevel:u,status:Wd(s,d,u)},g=Dm(p);return await hn(e,g),p}async function RH(n){const e=Le(de,xe.INVENTORY,n);if(!(await Qe(e)).exists())throw new Error("Item not found");await Ka(e)}async function QW(n){const e=Le(de,xe.INVENTORY,n),t=await Qe(e);if(!t.exists())throw new Error("Item not found");const s={...t.data(),id:n,archived:!0,archivedAt:new Date().toISOString()};return await hn(e,{archived:!0,archivedAt:new Date().toISOString()}),s}async function YW(n){const e=Le(de,xe.INVENTORY,n),t=await Qe(e);if(!t.exists())throw new Error("Item not found");const s={...t.data(),id:n,archived:!1,archivedAt:void 0};return await hn(e,{archived:!1,archivedAt:null}),s}async function XW(n){await RH(n)}async function JW(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.INVENTORY,s);if(!(await Qe(i)).exists()){t.push(`Item ${s} not found`);continue}e.update(i,{archived:!0,archivedAt:new Date().toISOString()}),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function eG(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.INVENTORY,s);if(!(await Qe(i)).exists()){t.push(`Item ${s} not found`);continue}e.update(i,{archived:!1,archivedAt:null}),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function PH(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.INVENTORY,s);if(!(await Qe(i)).exists()){t.push(`Item ${s} not found`);continue}e.delete(i),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function tG(n){return PH(n)}async function nG(n,e){const t=Cn(de),r=[];let s=0;for(const i of n){const c=Le(de,xe.INVENTORY,i),u=await Qe(c);if(!u.exists()){r.push(`Item ${i} not found`);continue}const d=u.data(),p=e.quantity!==void 0?Math.max(0,Math.floor(e.quantity)):d.quantity,g=e.reorderRequired!==void 0?e.reorderRequired:d.reorderRequired,m=Wd(p,g);t.update(c,{...e,status:m}),s++}return await t.commit(),{success:r.length===0,successCount:s,failedCount:r.length,errors:r.length>0?r:void 0}}async function kH(){const n=Wt(de,xe.WMS_SUPPLIERS),e=await Tr(n);let t=0;return e.forEach(r=>{const i=r.id.match(/^SUP-(\d+)$/);if(i){const c=parseInt(i[1],10);c>t&&(t=c)}}),`SUP-${String(t+1).padStart(3,"0")}`}function NH(n,e){const t=Wt(de,xe.WMS_SUPPLIERS);return Mi(t,r=>{const s=[];r.forEach(i=>{const c=i.data();s.push({id:i.id,name:c.name||"",contact:c.contact||"",email:c.email||"",phone:c.phone||"",category:c.category||"",status:c.status||"Active",country:c.country||"",city:c.city||"",address:c.address||"",purchases:c.purchases||0,payments:c.payments||0,balance:c.balance||0,archived:c.archived||!1,archivedAt:c.archivedAt})}),n(s)},e)}async function rG(){const n=Wt(de,xe.WMS_SUPPLIERS),e=await Tr(n),t=[];return e.forEach(r=>{const s=r.data();t.push({id:r.id,name:s.name||"",contact:s.contact||"",email:s.email||"",phone:s.phone||"",category:s.category||"",status:s.status||"Active",country:s.country||"",city:s.city||"",address:s.address||"",purchases:s.purchases||0,payments:s.payments||0,balance:s.balance||0,archived:s.archived||!1,archivedAt:s.archivedAt})}),t}async function sG(n){const e=n.id&&n.id.trim()!==""?n.id:await kH();if((await Qe(Le(de,xe.WMS_SUPPLIERS,e))).exists())throw new Error(`Supplier with id ${e} already exists`);const r=n.purchases??0,s=n.payments??0,i=r-s,c={id:e,name:n.name.trim(),contact:n.contact.trim(),email:n.email.trim(),phone:n.phone.trim(),category:n.category.trim(),status:n.status??"Active",country:n.country?.trim()??"",city:n.city?.trim()??"",address:n.address?.trim()??"",purchases:r,payments:s,balance:i},u=Dm(c);return await Oi(Le(de,xe.WMS_SUPPLIERS,e),u),c}async function oG(n){const e=Le(de,xe.WMS_SUPPLIERS,n.id),t=await Qe(e);if(!t.exists())throw new Error("Supplier not found");const r=t.data(),s=n.purchases!==void 0?n.purchases:r.purchases,i=n.payments!==void 0?n.payments:r.payments,c=s-i,u={...r,...n,purchases:s,payments:i,balance:c},d=Dm(u);return await hn(e,d),u}async function DH(n){const e=Le(de,xe.WMS_SUPPLIERS,n);if(!(await Qe(e)).exists())throw new Error("Supplier not found");await Ka(e)}async function iG(n){const e=Le(de,xe.WMS_SUPPLIERS,n),t=await Qe(e);if(!t.exists())throw new Error("Supplier not found");const s={...t.data(),archived:!0,archivedAt:new Date().toISOString()};return await hn(e,{archived:!0,archivedAt:s.archivedAt}),s}async function aG(n){const e=Le(de,xe.WMS_SUPPLIERS,n),t=await Qe(e);if(!t.exists())throw new Error("Supplier not found");const s={...t.data(),archived:!1,archivedAt:void 0};return await hn(e,{archived:!1,archivedAt:null}),s}async function cG(n){await DH(n)}async function lG(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.WMS_SUPPLIERS,s);if(!(await Qe(i)).exists()){t.push(`Supplier ${s} not found`);continue}e.update(i,{archived:!0,archivedAt:new Date().toISOString()}),r++}return await e.commit(),{successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function uG(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.WMS_SUPPLIERS,s);if(!(await Qe(i)).exists()){t.push(`Supplier ${s} not found`);continue}e.update(i,{archived:!1,archivedAt:null}),r++}return await e.commit(),{successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function dG(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.WMS_SUPPLIERS,s);if(!(await Qe(i)).exists()){t.push(`Supplier ${s} not found`);continue}e.delete(i),r++}return await e.commit(),{successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}function Qv(n){const e={};for(const t of Object.keys(n))n[t]!==void 0&&(e[t]=n[t]);return e}async function OH(){const n=await Tr(Wt(de,xe.SALES_ORDERS));let e=0;return n.forEach(t=>{const s=t.id.match(/SO-(\d+)/);if(s){const i=parseInt(s[1],10);i>e&&(e=i)}}),`SO-${String(e+1).padStart(3,"0")}`}async function hG(){const n=await Tr(Wt(de,xe.SALES_ORDERS)),e=[];return n.forEach(t=>{const r=t.data();e.push({id:t.id,soDate:r.soDate||"",customerId:r.customerId||"",customerName:r.customerName||"",customerCountry:r.customerCountry||"",customerCity:r.customerCity||"",deliveryAddress:r.deliveryAddress||"",invoiceNumber:r.invoiceNumber||"",items:r.items||[],totalAmount:r.totalAmount||0,totalReceived:r.totalReceived||0,amountPaid:r.amountPaid||0,soBalance:r.soBalance||0,receiptStatus:r.receiptStatus||"Unpaid",shippingStatus:r.shippingStatus||"Pending",createdBy:r.createdBy||"",createdDate:r.createdDate||"",notes:r.notes||"",expectedDeliveryDate:r.expectedDeliveryDate||"",archived:r.archived||!1,archivedAt:r.archivedAt})}),e}function MH(n,e){return Mi(Wt(de,xe.SALES_ORDERS),t=>{const r=[];t.forEach(s=>{const i=s.data();r.push({id:s.id,soDate:i.soDate||"",customerId:i.customerId||"",customerName:i.customerName||"",customerCountry:i.customerCountry||"",customerCity:i.customerCity||"",deliveryAddress:i.deliveryAddress||"",invoiceNumber:i.invoiceNumber||"",items:i.items||[],totalAmount:i.totalAmount||0,totalReceived:i.totalReceived||0,amountPaid:i.amountPaid||0,soBalance:i.soBalance||0,receiptStatus:i.receiptStatus||"Unpaid",shippingStatus:i.shippingStatus||"Pending",createdBy:i.createdBy||"",createdDate:i.createdDate||"",notes:i.notes||"",expectedDeliveryDate:i.expectedDeliveryDate||"",archived:i.archived||!1,archivedAt:i.archivedAt})}),n(r)},t=>{console.error("Sales orders subscription error:",t),e?.(t)})}async function fG(n){const e=n.id&&n.id.trim()!==""?n.id:await OH();if((await Qe(Le(de,xe.SALES_ORDERS,e))).exists())throw new Error(`Sales Order with id ${e} already exists`);const r=n.items.reduce((g,m)=>g+m.totalPrice,0),s=n.totalReceived??0,i=n.amountPaid??0,c=r-s,u=n.soDate??new Date().toISOString().split("T")[0];let d=n.receiptStatus??"Unpaid";n.receiptStatus||(s>=r?d="Paid":s>0&&(d="Partially Paid"));const p={id:e,soDate:u,customerId:n.customerId,customerName:n.customerName,customerCountry:n.customerCountry??"",customerCity:n.customerCity??"",deliveryAddress:n.deliveryAddress??"",invoiceNumber:n.invoiceNumber??"",items:n.items.map(g=>({...g,quantityShipped:0})),totalAmount:r,totalReceived:s,amountPaid:i,soBalance:c,receiptStatus:d,shippingStatus:n.shippingStatus??"Pending",createdBy:n.createdBy,createdDate:u,notes:n.notes??"",expectedDeliveryDate:n.expectedDeliveryDate??""};return await Oi(Le(de,xe.SALES_ORDERS,e),Qv(p)),p}async function pG(n){const e=Le(de,xe.SALES_ORDERS,n.id),t=await Qe(e);if(!t.exists())throw new Error("Sales Order not found");const r=t.data(),s={...r,...Qv(n)};return n.items&&(s.totalAmount=n.items.reduce((i,c)=>i+c.totalPrice,0)),s.soBalance=s.totalAmount-s.totalReceived,n.totalReceived!==void 0&&n.receiptStatus===void 0&&(s.totalReceived>=s.totalAmount&&s.totalAmount>0?s.receiptStatus="Paid":s.totalReceived>0?s.receiptStatus="Partially Paid":r.receiptStatus!=="Overdue"&&(s.receiptStatus="Unpaid")),await hn(e,Qv(s)),s}async function VH(n){const e=Le(de,xe.SALES_ORDERS,n);if(!(await Qe(e)).exists())throw new Error("Sales Order not found");await Ka(e)}async function mG(n){const e=Le(de,xe.SALES_ORDERS,n),t=await Qe(e);if(!t.exists())throw new Error("Sales Order not found");const s={...t.data(),archived:!0,archivedAt:new Date().toISOString()};return await hn(e,{archived:!0,archivedAt:s.archivedAt}),s}async function gG(n){const e=Le(de,xe.SALES_ORDERS,n),t=await Qe(e);if(!t.exists())throw new Error("Sales Order not found");const s={...t.data(),archived:!1,archivedAt:void 0};return await hn(e,{archived:!1,archivedAt:null}),s}async function yG(n){await VH(n)}async function vG(n){const e=Cn(de),t=[];let r=0;const s=new Date().toISOString();for(const i of n){const c=Le(de,xe.SALES_ORDERS,i);if(!(await Qe(c)).exists()){t.push(`Sales Order ${i} not found`);continue}e.update(c,{archived:!0,archivedAt:s}),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function _G(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.SALES_ORDERS,s);if(!(await Qe(i)).exists()){t.push(`Sales Order ${s} not found`);continue}e.update(i,{archived:!1,archivedAt:null}),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function wG(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.SALES_ORDERS,s);if(!(await Qe(i)).exists()){t.push(`Sales Order ${s} not found`);continue}e.delete(i),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}function Yv(n){const e={};for(const t of Object.keys(n))n[t]!==void 0&&(e[t]=n[t]);return e}async function LH(){const n=await Tr(Wt(de,xe.CUSTOMERS));let e=0;return n.forEach(t=>{const s=t.id.match(/CUST-(\d+)/);if(s){const i=parseInt(s[1],10);i>e&&(e=i)}}),`CUST-${String(e+1).padStart(3,"0")}`}async function EG(){const n=await Tr(Wt(de,xe.CUSTOMERS)),e=[];return n.forEach(t=>{const r=t.data();e.push({id:t.id,name:r.name||"",contact:r.contact||"",email:r.email||"",phone:r.phone||"",category:r.category||"",status:r.status||"Active",country:r.country||"",city:r.city||"",address:r.address||"",purchases:r.purchases||0,payments:r.payments||0,balance:r.balance||0,archived:r.archived||!1,archivedAt:r.archivedAt})}),e}function FH(n,e){return Mi(Wt(de,xe.CUSTOMERS),t=>{const r=[];t.forEach(s=>{const i=s.data();r.push({id:s.id,name:i.name||"",contact:i.contact||"",email:i.email||"",phone:i.phone||"",category:i.category||"",status:i.status||"Active",country:i.country||"",city:i.city||"",address:i.address||"",purchases:i.purchases||0,payments:i.payments||0,balance:i.balance||0,archived:i.archived||!1,archivedAt:i.archivedAt})}),n(r)},t=>{console.error("Customers subscription error:",t),e?.(t)})}async function bG(n){const e=n.id&&n.id.trim()!==""?n.id:await LH();if((await Qe(Le(de,xe.CUSTOMERS,e))).exists())throw new Error(`Customer with id ${e} already exists`);const r=n.purchases??0,s=n.payments??0,i=r-s,c={id:e,name:n.name,contact:n.contact||"",email:n.email,phone:n.phone||"",category:n.category||"",status:n.status??"Active",country:n.country??"",city:n.city??"",address:n.address??"",purchases:r,payments:s,balance:i};return await Oi(Le(de,xe.CUSTOMERS,e),Yv(c)),c}async function xG(n){const e=Le(de,xe.CUSTOMERS,n.id),t=await Qe(e);if(!t.exists())throw new Error("Customer not found");const s={...t.data(),...Yv(n)};return(n.purchases!==void 0||n.payments!==void 0)&&(s.balance=s.purchases-s.payments),await hn(e,Yv(s)),s}async function jH(n){const e=Le(de,xe.CUSTOMERS,n);if(!(await Qe(e)).exists())throw new Error("Customer not found");await Ka(e)}async function SG(n){const e=Le(de,xe.CUSTOMERS,n),t=await Qe(e);if(!t.exists())throw new Error("Customer not found");const s={...t.data(),archived:!0,archivedAt:new Date().toISOString()};return await hn(e,{archived:!0,archivedAt:s.archivedAt}),s}async function IG(n){const e=Le(de,xe.CUSTOMERS,n),t=await Qe(e);if(!t.exists())throw new Error("Customer not found");const s={...t.data(),archived:!1,archivedAt:void 0};return await hn(e,{archived:!1,archivedAt:null}),s}async function TG(n){await jH(n)}async function CG(n){const e=Cn(de),t=[];let r=0;const s=new Date().toISOString();for(const i of n){const c=Le(de,xe.CUSTOMERS,i);if(!(await Qe(c)).exists()){t.push(`Customer ${i} not found`);continue}e.update(c,{archived:!0,archivedAt:s}),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function AG(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.CUSTOMERS,s);if(!(await Qe(i)).exists()){t.push(`Customer ${s} not found`);continue}e.update(i,{archived:!1,archivedAt:null}),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function RG(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.CUSTOMERS,s);if(!(await Qe(i)).exists()){t.push(`Customer ${s} not found`);continue}e.delete(i),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}function Xv(n){const e={};for(const t of Object.keys(n))n[t]!==void 0&&(e[t]=n[t]);return e}async function UH(){const n=await Tr(Wt(de,xe.SHIPMENTS));let e=0;return n.forEach(t=>{const s=t.id.match(/SHIP-(\d+)/);if(s){const i=parseInt(s[1],10);i>e&&(e=i)}}),`SHIP-${String(e+1).padStart(4,"0")}`}async function PG(){const n=await Tr(Wt(de,xe.SHIPMENTS)),e=[];return n.forEach(t=>{const r=t.data();e.push({id:t.id,salesOrderId:r.salesOrderId||"",destination:r.destination||"",carrier:r.carrier||"",status:r.status||"Pending",eta:r.eta||"",archived:r.archived||!1,archivedAt:r.archivedAt})}),e}function zH(n,e){return Mi(Wt(de,xe.SHIPMENTS),t=>{const r=[];t.forEach(s=>{const i=s.data();r.push({id:s.id,salesOrderId:i.salesOrderId||"",destination:i.destination||"",carrier:i.carrier||"",status:i.status||"Pending",eta:i.eta||"",archived:i.archived||!1,archivedAt:i.archivedAt})}),n(r)},t=>{console.error("Shipments subscription error:",t),e?.(t)})}async function kG(n){const e=n.id&&n.id.trim()!==""?n.id:await UH();if((await Qe(Le(de,xe.SHIPMENTS,e))).exists())throw new Error(`Shipment with id ${e} already exists`);const r={id:e,salesOrderId:n.salesOrderId,destination:n.destination,carrier:n.carrier,status:n.status??"Pending",eta:n.eta};return await Oi(Le(de,xe.SHIPMENTS,e),Xv(r)),r}async function NG(n){const e=Le(de,xe.SHIPMENTS,n.id),t=await Qe(e);if(!t.exists())throw new Error("Shipment not found");const s={...t.data(),...Xv(n)};return await hn(e,Xv(s)),s}async function $H(n){const e=Le(de,xe.SHIPMENTS,n);if(!(await Qe(e)).exists())throw new Error("Shipment not found");await Ka(e)}async function DG(n){await $H(n)}async function OG(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.SHIPMENTS,s);if(!(await Qe(i)).exists()){t.push(`Shipment ${s} not found`);continue}e.delete(i),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}function Jv(n){const e={};for(const t of Object.keys(n))n[t]!==void 0&&(e[t]=n[t]);return e}async function BH(){const n=await Tr(Wt(de,xe.PAYMENT_TRANSACTIONS));let e=0;return n.forEach(t=>{const s=t.id.match(/TRX-(\d+)/);if(s){const i=parseInt(s[1],10);i>e&&(e=i)}}),`TRX-${String(e+1).padStart(3,"0")}`}async function MG(){const n=await Tr(Wt(de,xe.PAYMENT_TRANSACTIONS)),e=[];return n.forEach(t=>{const r=t.data();e.push({id:t.id,trxDate:r.trxDate||"",supplierId:r.supplierId||"",supplierName:r.supplierName||"",country:r.country||"",city:r.city||"",poId:r.poId||"",billNumber:r.billNumber||"",paymentMode:r.paymentMode||"Cash",amountPaid:r.amountPaid||0,notes:r.notes||"",createdAt:r.createdAt||"",createdBy:r.createdBy||"",updatedAt:r.updatedAt,archived:r.archived||!1,archivedAt:r.archivedAt})}),e}function qH(n,e){return Mi(Wt(de,xe.PAYMENT_TRANSACTIONS),t=>{const r=[];t.forEach(s=>{const i=s.data();r.push({id:s.id,trxDate:i.trxDate||"",supplierId:i.supplierId||"",supplierName:i.supplierName||"",country:i.country||"",city:i.city||"",poId:i.poId||"",billNumber:i.billNumber||"",paymentMode:i.paymentMode||"Cash",amountPaid:i.amountPaid||0,notes:i.notes||"",createdAt:i.createdAt||"",createdBy:i.createdBy||"",updatedAt:i.updatedAt,archived:i.archived||!1,archivedAt:i.archivedAt})}),n(r)},t=>{console.error("Payments subscription error:",t),e?.(t)})}async function VG(n){const e=n.id&&n.id.trim()!==""?n.id:await BH();if((await Qe(Le(de,xe.PAYMENT_TRANSACTIONS,e))).exists())throw new Error(`Payment with id ${e} already exists`);const r={id:e,trxDate:n.trxDate,supplierId:n.supplierId,supplierName:n.supplierName,country:n.country??"",city:n.city??"",poId:n.poId,billNumber:n.billNumber??"",paymentMode:n.paymentMode,amountPaid:n.amountPaid,notes:n.notes??"",createdAt:new Date().toISOString(),createdBy:n.createdBy};return await Oi(Le(de,xe.PAYMENT_TRANSACTIONS,e),Jv(r)),r}async function LG(n){const e=Le(de,xe.PAYMENT_TRANSACTIONS,n.id),t=await Qe(e);if(!t.exists())throw new Error("Payment not found");const s={...t.data(),...Jv(n),updatedAt:new Date().toISOString()};return await hn(e,Jv(s)),s}async function HH(n){const e=Le(de,xe.PAYMENT_TRANSACTIONS,n);if(!(await Qe(e)).exists())throw new Error("Payment not found");await Ka(e)}async function FG(n){const e=Le(de,xe.PAYMENT_TRANSACTIONS,n),t=await Qe(e);if(!t.exists())throw new Error("Payment not found");const s={...t.data(),archived:!0,archivedAt:new Date().toISOString()};return await hn(e,{archived:!0,archivedAt:s.archivedAt}),s}async function jG(n){const e=Le(de,xe.PAYMENT_TRANSACTIONS,n),t=await Qe(e);if(!t.exists())throw new Error("Payment not found");const s={...t.data(),archived:!1,archivedAt:void 0};return await hn(e,{archived:!1,archivedAt:null}),s}async function UG(n){await HH(n)}async function zG(n){const e=Cn(de),t=[];let r=0;const s=new Date().toISOString();for(const i of n){const c=Le(de,xe.PAYMENT_TRANSACTIONS,i);if(!(await Qe(c)).exists()){t.push(`Payment ${i} not found`);continue}e.update(c,{archived:!0,archivedAt:s}),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function $G(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.PAYMENT_TRANSACTIONS,s);if(!(await Qe(i)).exists()){t.push(`Payment ${s} not found`);continue}e.update(i,{archived:!1,archivedAt:null}),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}async function BG(n){const e=Cn(de),t=[];let r=0;for(const s of n){const i=Le(de,xe.PAYMENT_TRANSACTIONS,s);if(!(await Qe(i)).exists()){t.push(`Payment ${s} not found`);continue}e.delete(i),r++}return await e.commit(),{success:t.length===0,successCount:r,failedCount:t.length,errors:t.length>0?t:void 0}}const tN=b.createContext(void 0);function WH({children:n}){const[e,t]=b.useState(null),[r,s]=b.useState(null),[i,c]=b.useState(null),[u,d]=b.useState(null),[p,g]=b.useState(null),[m,w]=b.useState(null),[S,R]=b.useState({inventory:!0,shipments:!0,suppliers:!0,salesOrders:!0,customers:!0,payments:!0}),C=b.useRef(null),A=b.useRef(null),O=b.useRef(null),U=b.useRef(null),z=b.useRef(null),q=b.useRef(null);b.useEffect(()=>(C.current=AH(L=>{t(L),R(N=>({...N,inventory:!1}))},L=>{console.error("Firebase inventory subscription error:",L),R(N=>({...N,inventory:!1}))}),()=>{C.current&&C.current()}),[]),b.useEffect(()=>(A.current=NH(L=>{c(L),R(N=>({...N,suppliers:!1}))},L=>{console.error("Firebase suppliers subscription error:",L),R(N=>({...N,suppliers:!1}))}),()=>{A.current&&A.current()}),[]),b.useEffect(()=>(O.current=MH(L=>{d(L),R(N=>({...N,salesOrders:!1}))},L=>{console.error("Firebase sales orders subscription error:",L),R(N=>({...N,salesOrders:!1}))}),()=>{O.current&&O.current()}),[]),b.useEffect(()=>(U.current=FH(L=>{g(L),R(N=>({...N,customers:!1}))},L=>{console.error("Firebase customers subscription error:",L),R(N=>({...N,customers:!1}))}),()=>{U.current&&U.current()}),[]),b.useEffect(()=>(z.current=zH(L=>{s(L),R(N=>({...N,shipments:!1}))},L=>{console.error("Firebase shipments subscription error:",L),R(N=>({...N,shipments:!1}))}),()=>{z.current&&z.current()}),[]),b.useEffect(()=>(q.current=qH(L=>{w(L),R(N=>({...N,payments:!1}))},L=>{console.error("Firebase payments subscription error:",L),R(N=>({...N,payments:!1}))}),()=>{q.current&&q.current()}),[]);async function W(){}async function X(){}async function P(){}async function I(){}async function k(){}async function M(){}const V={inventory:e,shipments:r,suppliers:i,salesOrders:u,customers:p,payments:m,isLoading:S,setInventory:t,setShipments:s,setSuppliers:c,setSalesOrders:d,setCustomers:g,setPayments:w,refreshInventory:W,refreshShipments:X,refreshSuppliers:P,refreshSalesOrders:I,refreshCustomers:k,refreshPayments:M};return v.jsx(tN.Provider,{value:V,children:n})}function s0(){const n=b.useContext(tN);if(n===void 0)throw new Error("useAppContext must be used within an AppProvider");return n}function qG(){const{inventory:n,isLoading:e,setInventory:t,refreshInventory:r}=s0();return{inventory:n,isLoading:e.inventory,setInventory:t,refreshInventory:r}}function HG(){const{suppliers:n,isLoading:e,setSuppliers:t,refreshSuppliers:r}=s0();return{suppliers:n,isLoading:e.suppliers,setSuppliers:t,refreshSuppliers:r}}const Je={INVENTORY:"wms_inventory",SUPPLIERS:"wms_suppliers",CUSTOMERS:"wms_customers",SHIPMENTS:"wms_shipments",PURCHASE_ORDERS:"wms_purchase_orders",SALES_ORDERS:"wms_sales_orders",CASH_BANK:"wms_cash_bank",PAYMENTS:"wms_payments",CATEGORIES:"wms_categories"};function ht(n,e){try{const t=JSON.stringify(e);localStorage.setItem(n,t)}catch(t){console.error(`Failed to save to localStorage (${n}):`,t)}}function Ro(n,e){try{const t=localStorage.getItem(n);return t===null?e:JSON.parse(t)}catch(t){return console.error(`Failed to load from localStorage (${n}):`,t),e}}const GH=[{id:"INV-001",name:"Laptop Computer",category:"Electronics",quantity:145,location:"A-12",status:"In Stock",brand:"Dell",pricePerPiece:899.99,supplierId:"SUP-001",quantityPurchased:200,quantitySold:55,reorderRequired:!1,description:"15.6-inch display, Intel Core i7 processor, 16GB RAM, 512GB SSD. Perfect for business and professional use with long battery life and lightweight design."},{id:"INV-002",name:"Office Chair",category:"Furniture",quantity:23,location:"B-08",status:"Low Stock",brand:"Herman Miller",pricePerPiece:549,supplierId:"SUP-002",quantityPurchased:100,quantitySold:77,reorderRequired:!0,description:"Ergonomic office chair with adjustable lumbar support, armrests, and seat height. Breathable mesh back for all-day comfort."},{id:"INV-003",name:"Standing Desk",category:"Furniture",quantity:67,location:"B-05",status:"In Stock",brand:"Uplift",pricePerPiece:799,supplierId:"SUP-002",quantityPurchased:120,quantitySold:53,reorderRequired:!1,description:"Electric height-adjustable standing desk with memory presets. 60x30 inch bamboo top with cable management system."},{id:"INV-004",name:"Wireless Mouse",category:"Electronics",quantity:8,location:"A-15",status:"Critical",brand:"Logitech",pricePerPiece:29.99,supplierId:"SUP-003",quantityPurchased:150,quantitySold:142,reorderRequired:!0,description:"Ergonomic wireless mouse with customizable buttons and long battery life. 2.4GHz wireless connection with USB receiver."},{id:"INV-005",name:"USB-C Cable",category:"Electronics",quantity:234,location:"A-20",status:"In Stock",brand:"Anker",pricePerPiece:12.99,supplierId:"SUP-001",quantityPurchased:500,quantitySold:266,reorderRequired:!1,description:"Premium braided USB-C to USB-C cable, 6ft length. Supports fast charging up to 100W and data transfer speeds up to 480Mbps."},{id:"INV-006",name:'Monitor 27"',category:"Electronics",quantity:89,location:"A-10",status:"In Stock",brand:"LG",pricePerPiece:349.99,supplierId:"SUP-003",quantityPurchased:150,quantitySold:61,reorderRequired:!1,description:"27-inch 4K UHD IPS display with HDR10 support. USB-C connectivity with 65W power delivery. Ideal for creative professionals."},{id:"INV-007",name:"Keyboard Mechanical",category:"Electronics",quantity:156,location:"A-14",status:"In Stock",brand:"Corsair",pricePerPiece:129.99,supplierId:"SUP-001",quantityPurchased:250,quantitySold:94,reorderRequired:!1,description:"Full-size mechanical keyboard with Cherry MX Brown switches. RGB backlighting with dedicated media controls and USB passthrough."},{id:"INV-008",name:"Filing Cabinet",category:"Furniture",quantity:34,location:"B-03",status:"In Stock",brand:"Steelcase",pricePerPiece:299,supplierId:"SUP-002",quantityPurchased:60,quantitySold:26,reorderRequired:!1,description:"4-drawer vertical filing cabinet with full-extension drawers. Built-in lock for security. Holds letter and legal size documents."}],KH=[],ZH=[],QH=[],YH=[],XH=[];function JH(n){return n.map(e=>{if(e.quantityPurchased===void 0||e.quantitySold===void 0||e.reorderRequired===void 0){const{reorderLevel:r,maintainStockAt:s,minimumStock:i,...c}=e,u=e.quantityPurchased??Math.floor(e.quantity*1.5),d=e.quantitySold??Math.floor(u-e.quantity),p=e.reorderRequired??e.quantity<=(e.minimumStock??e.reorderLevel??20);return{...c,brand:e.brand||"Unknown",pricePerPiece:e.pricePerPiece??0,supplierId:e.supplierId||"SUP-001",quantityPurchased:u,quantitySold:d,reorderRequired:p}}return e})}function eW(n){return n.map(e=>{const t=e.totalAmount??0,r=e.totalPaid??0,s=e.poDate??e.createdDate??new Date().toISOString().split("T")[0];return{...e,poDate:s,supplierCountry:e.supplierCountry??"",supplierCity:e.supplierCity??"",billNumber:e.billNumber??"",items:e.items??[],totalAmount:t,totalPaid:r,poBalance:e.poBalance??t-r,status:e.status??"Draft",shippingStatus:e.shippingStatus??"Pending",createdDate:e.createdDate??s}})}function tW(n){return n.map(e=>({...e,country:e.country??"",city:e.city??"",address:e.address??"",purchases:e.purchases??0,payments:e.payments??0,balance:e.balance??(e.purchases??0)-(e.payments??0)}))}function nW(n){return n.map(e=>({...e,country:e.country??"",city:e.city??"",address:e.address??"",purchases:e.purchases??0,payments:e.payments??0,balance:e.balance??(e.purchases??0)-(e.payments??0)}))}function rW(n){return n.map(e=>{const t=e.totalAmount??0,r=e.totalReceived??0,s=e.amountPaid??0,i=e.soDate??e.createdDate??new Date().toISOString().split("T")[0];return{...e,soDate:i,customerCountry:e.customerCountry??"",customerCity:e.customerCity??"",invoiceNumber:e.invoiceNumber??"",items:e.items??[],totalAmount:t,totalReceived:r,amountPaid:s,soBalance:e.soBalance??t-r,receiptStatus:e.receiptStatus??"Unpaid",shippingStatus:e.shippingStatus??"Pending",createdDate:e.createdDate??i,archived:e.archived??!1}})}const sW=[{name:"Electronics",subcategories:["Phones","Laptops","Tablets","Accessories","Monitors"]},{name:"Furniture",subcategories:["Desks","Chairs","Cabinets","Shelving"]},{name:"Clothing",subcategories:["Shirts","Pants","Shoes","Accessories"]},{name:"Food & Beverages",subcategories:["Beverages","Snacks","Canned Goods","Fresh Produce"]}];let mo=JH(Ro(Je.INVENTORY,GH)),nN=tW(Ro(Je.SUPPLIERS,KH)),rN=nW(Ro(Je.CUSTOMERS,ZH));Ro(Je.SHIPMENTS,QH);let Ae=eW(Ro(Je.PURCHASE_ORDERS,YH)),sN=rW(Ro(Je.SALES_ORDERS,XH)),Fr=Ro(Je.CATEGORIES,sW);ht(Je.INVENTORY,mo);ht(Je.SUPPLIERS,nN);ht(Je.CUSTOMERS,rN);ht(Je.PURCHASE_ORDERS,Ae);ht(Je.SALES_ORDERS,sN);ht(Je.CATEGORIES,Fr);function oW(n,e){return n<=0?"Critical":e?"Low Stock":"In Stock"}function iW(){const e=Ae.map(t=>Number(t.id.replace(/[^0-9]/g,""))||0).reduce((t,r)=>Math.max(t,r),0)+1;return`PO-${String(e).padStart(3,"0")}`}function vt(n,e=150){return new Promise(t=>setTimeout(()=>t(n),e))}async function WG(){return vt([...mo])}async function GG(){return vt([...nN])}async function KG(){return vt([...rN])}async function aW(){return vt([...Ae])}async function ZG(n){const e=n.id&&n.id.trim()!==""?n.id:iW();if(Ae.some(c=>c.id===e))throw new Error(`Purchase Order with id ${e} already exists`);const t=n.items.reduce((c,u)=>c+u.totalPrice,0),r=n.totalPaid??0,s=n.poDate??new Date().toISOString().split("T")[0],i={id:e,poDate:s,supplierId:n.supplierId,supplierName:n.supplierName,supplierCountry:n.supplierCountry??"",supplierCity:n.supplierCity??"",billNumber:n.billNumber??"",items:n.items.map(c=>({...c,quantityReceived:0})),totalAmount:t,totalPaid:r,poBalance:t-r,status:"Draft",shippingStatus:"Pending",createdBy:n.createdBy,createdDate:s,approvedBy:null,approvedDate:null,receivedDate:null,notes:n.notes??"",expectedDeliveryDate:n.expectedDeliveryDate};return Ae=[i,...Ae],ht(Je.PURCHASE_ORDERS,Ae),vt(i)}async function QG(n){const e=Ae.findIndex(s=>s.id===n.id);if(e===-1)throw new Error("Purchase Order not found");const r={...Ae[e],...n};return n.items&&(r.totalAmount=n.items.reduce((s,i)=>s+i.totalPrice,0)),(n.items!==void 0||n.totalPaid!==void 0)&&(r.poBalance=r.totalAmount-r.totalPaid),Ae[e]=r,ht(Je.PURCHASE_ORDERS,Ae),vt(r)}async function YG(n){const e=Ae.findIndex(r=>r.id===n);if(e===-1)throw new Error("Purchase Order not found");const t=Ae[e];if(t.status!=="Draft")throw new Error("Only Draft purchase orders can be submitted for approval");return Ae[e]={...t,status:"Pending Approval"},ht(Je.PURCHASE_ORDERS,Ae),vt(Ae[e])}async function XG(n,e){const t=Ae.findIndex(s=>s.id===n);if(t===-1)throw new Error("Purchase Order not found");const r=Ae[t];if(r.status!=="Pending Approval")throw new Error("Only Pending Approval purchase orders can be approved");return Ae[t]={...r,status:"Approved",approvedBy:e,approvedDate:new Date().toISOString().split("T")[0]},ht(Je.PURCHASE_ORDERS,Ae),vt(Ae[t])}async function JG(n,e){const t=Ae.findIndex(s=>s.id===n);if(t===-1)throw new Error("Purchase Order not found");const r=Ae[t];if(r.status!=="Pending Approval")throw new Error("Only Pending Approval purchase orders can be rejected");return Ae[t]={...r,status:"Rejected",approvedBy:e,approvedDate:new Date().toISOString().split("T")[0]},ht(Je.PURCHASE_ORDERS,Ae),vt(Ae[t])}async function eK(n){const e=Ae.findIndex(r=>r.id===n);if(e===-1)throw new Error("Purchase Order not found");const t=Ae[e];if(t.status!=="Approved")throw new Error("Only Approved purchase orders can be marked as ordered");return Ae[e]={...t,status:"Ordered"},ht(Je.PURCHASE_ORDERS,Ae),vt(Ae[e])}async function tK(n){const e=Ae.findIndex(r=>r.id===n);if(e===-1)throw new Error("Purchase Order not found");const t=Ae[e];if(["Received","Cancelled"].includes(t.status))throw new Error("Cannot cancel received or already cancelled purchase orders");return Ae[e]={...t,status:"Cancelled"},ht(Je.PURCHASE_ORDERS,Ae),vt(Ae[e])}async function nK(n,e,t){const r=Ae.findIndex(m=>m.id===n);if(r===-1)throw new Error("Purchase Order not found");const s=Ae[r];if(!["Ordered","Partially Received"].includes(s.status))throw new Error("Can only receive items for Ordered or Partially Received purchase orders");const i=[],c=s.items.map(m=>{const w=e.find(A=>A.inventoryItemId===m.inventoryItemId);if(!w)return m;const R=(m.quantityReceived??0)+w.quantityReceived;if(R>m.quantity)throw new Error(`Cannot receive more than ordered quantity for ${m.itemName}`);const C=mo.findIndex(A=>A.id===m.inventoryItemId);if(C!==-1){const A=mo[C].quantity,O=A+w.quantityReceived;mo[C]={...mo[C],quantity:O,status:oW(O,mo[C].reorderLevel,mo[C].maintainStockAt)},i.push({itemId:m.inventoryItemId,itemName:m.itemName,previousQty:A,newQty:O})}return{...m,quantityReceived:R}}),u=c.every(m=>(m.quantityReceived??0)>=m.quantity),d=c.some(m=>(m.quantityReceived??0)>0);let p=s.status,g=s.receivedDate;return u?(p="Received",g=new Date().toISOString().split("T")[0]):d&&(p="Partially Received"),Ae[r]={...s,items:c,status:p,receivedDate:g,actualCost:t??s.actualCost},ht(Je.PURCHASE_ORDERS,Ae),ht(Je.INVENTORY,mo),vt({purchaseOrder:Ae[r],inventoryUpdates:i})}async function rK(n){const e=Ae.findIndex(t=>t.id===n);if(e===-1)throw new Error("Purchase Order not found");return Ae[e]={...Ae[e],archived:!0,archivedAt:new Date().toISOString()},ht(Je.PURCHASE_ORDERS,Ae),vt(Ae[e])}async function sK(n){const e=Ae.findIndex(t=>t.id===n);if(e===-1)throw new Error("Purchase Order not found");return Ae[e]={...Ae[e],archived:!1,archivedAt:void 0},ht(Je.PURCHASE_ORDERS,Ae),vt(Ae[e])}async function oK(n){const e=Ae.findIndex(t=>t.id===n);if(e===-1)throw new Error("Purchase Order not found");Ae.splice(e,1),ht(Je.PURCHASE_ORDERS,Ae),await vt(void 0)}async function iK(n){const e=[];let t=0;for(const r of n){const s=Ae.findIndex(i=>i.id===r);s===-1?e.push(`PO ${r} not found`):(Ae[s]={...Ae[s],archived:!0,archivedAt:new Date().toISOString()},t++)}return ht(Je.PURCHASE_ORDERS,Ae),vt({success:e.length===0,successCount:t,failedCount:e.length,errors:e})}async function aK(n){const e=[];let t=0;for(const r of n){const s=Ae.findIndex(i=>i.id===r);s===-1?e.push(`PO ${r} not found`):(Ae[s]={...Ae[s],archived:!1,archivedAt:void 0},t++)}return ht(Je.PURCHASE_ORDERS,Ae),vt({success:e.length===0,successCount:t,failedCount:e.length,errors:e})}async function cK(n){const e=[];let t=0;for(const r of n){const s=Ae.findIndex(i=>i.id===r);s===-1?e.push(`PO ${r} not found`):(Ae.splice(s,1),t++)}return ht(Je.PURCHASE_ORDERS,Ae),vt({success:e.length===0,successCount:t,failedCount:e.length,errors:e})}async function lK(){return vt([...sN])}async function uK(){return vt([...Fr])}async function dK(n){if(Fr.find(r=>r.name.toLowerCase()===n.toLowerCase()))throw new Error(`Category "${n}" already exists`);const t={name:n,subcategories:[]};return Fr=[...Fr,t],ht(Je.CATEGORIES,Fr),vt(t)}async function hK(n,e){const t=Fr.findIndex(i=>i.name===n);if(t===-1)throw new Error(`Category "${n}" not found`);const r=Fr[t];if(r.subcategories.some(i=>i.toLowerCase()===e.toLowerCase()))throw new Error(`Subcategory "${e}" already exists in "${n}"`);const s={...r,subcategories:[...r.subcategories,e]};return Fr=[...Fr.slice(0,t),s,...Fr.slice(t+1)],ht(Je.CATEGORIES,Fr),vt(s)}const cW=[{id:"TRX-001",trxDate:"2025-10-10",customerId:"CUS-001",customerName:"Acme Corp",country:"United States",city:"San Francisco",soId:"SO-001",invoiceNumber:"INV-2025-0501",paymentMode:"Bank Transfer",amountReceived:14699.8,notes:"Full payment for SO-001",createdAt:"2025-10-10T10:30:00Z",createdBy:"1",archived:!1},{id:"TRX-002",trxDate:"2025-10-20",customerId:"CUS-003",customerName:"Global Solutions",country:"United Kingdom",city:"London",soId:"SO-002",invoiceNumber:"INV-2025-0502",paymentMode:"Credit Card",amountReceived:12e3,notes:"Partial payment for SO-002",createdAt:"2025-10-20T14:15:00Z",createdBy:"1",archived:!1},{id:"TRX-003",trxDate:"2025-11-05",customerId:"CUS-004",customerName:"Beta Systems",country:"Canada",city:"Toronto",soId:"SO-004",invoiceNumber:"INV-2025-0504",paymentMode:"Bank Transfer",amountReceived:7188,notes:"Full payment for furniture order",createdAt:"2025-11-05T09:00:00Z",createdBy:"1",archived:!1},{id:"TRX-004",trxDate:"2025-09-20",customerId:"CUS-003",customerName:"Global Solutions",country:"United Kingdom",city:"London",soId:"SO-005",invoiceNumber:"INV-2025-0495",paymentMode:"Check",amountReceived:3e3,notes:"Partial payment - overdue balance",createdAt:"2025-09-20T11:45:00Z",createdBy:"1",archived:!1},{id:"TRX-005",trxDate:"2025-11-01",customerId:"CUS-002",customerName:"TechStart Inc",country:"United States",city:"Austin",soId:"SO-003",invoiceNumber:"INV-2025-0503",paymentMode:"Cash",amountReceived:500,notes:"Deposit for order",createdAt:"2025-11-01T16:30:00Z",createdBy:"2",archived:!1},{id:"TRX-006",trxDate:"2025-10-25",customerId:"CUS-001",customerName:"Acme Corp",country:"United States",city:"San Francisco",soId:"SO-001",invoiceNumber:"INV-2025-0501",paymentMode:"Online Payment",amountReceived:2500,notes:"Additional payment for extended warranty",createdAt:"2025-10-25T13:00:00Z",createdBy:"1",archived:!1},{id:"TRX-007",trxDate:"2025-11-10",customerId:"CUS-004",customerName:"Beta Systems",country:"Canada",city:"Toronto",soId:"SO-004",invoiceNumber:"INV-2025-0504",paymentMode:"Credit Card",amountReceived:1500,notes:"Additional items added to order",createdAt:"2025-11-10T10:00:00Z",createdBy:"1",archived:!1},{id:"TRX-008",trxDate:"2025-10-15",customerId:"CUS-005",customerName:"Metro Supplies",country:"United States",city:"New York",soId:"SO-003",invoiceNumber:"INV-2025-0499",paymentMode:"Bank Transfer",amountReceived:850,notes:"Final payment clearing balance",createdAt:"2025-10-15T09:30:00Z",createdBy:"1",archived:!1}];let nt=Ro(Je.CASH_BANK,cW);nt=nt.map(n=>({...n,archived:n.archived??!1}));ht(Je.CASH_BANK,nt);function lW(){const n=nt.map(t=>{const r=t.id.match(/^TRX-(\d+)$/);return r?parseInt(r[1],10):0}),e=n.length>0?Math.max(...n):0;return`TRX-${String(e+1).padStart(3,"0")}`}async function fK(){return vt([...nt])}async function pK(n){const e=n.id||lW(),t=new Date().toISOString(),r={id:e,trxDate:n.trxDate,customerId:n.customerId,customerName:n.customerName,country:n.country||"",city:n.city||"",soId:n.soId,invoiceNumber:n.invoiceNumber||"",paymentMode:n.paymentMode,amountReceived:n.amountReceived,notes:n.notes,createdAt:t,createdBy:n.createdBy,archived:!1};return nt=[...nt,r],ht(Je.CASH_BANK,nt),vt(r)}async function mK(n){const e=nt.findIndex(s=>s.id===n.id);if(e===-1)throw new Error(`Cash/Bank transaction with ID ${n.id} not found`);const t=nt[e],r={...t,trxDate:n.trxDate??t.trxDate,customerId:n.customerId??t.customerId,customerName:n.customerName??t.customerName,country:n.country??t.country,city:n.city??t.city,soId:n.soId??t.soId,invoiceNumber:n.invoiceNumber??t.invoiceNumber,paymentMode:n.paymentMode??t.paymentMode,amountReceived:n.amountReceived??t.amountReceived,notes:n.notes??t.notes,updatedAt:new Date().toISOString()};return nt=[...nt.slice(0,e),r,...nt.slice(e+1)],ht(Je.CASH_BANK,nt),vt(r)}async function gK(n){const e=nt.findIndex(r=>r.id===n);if(e===-1)throw new Error(`Cash/Bank transaction with ID ${n} not found`);const t={...nt[e],archived:!0,archivedAt:new Date().toISOString()};return nt=[...nt.slice(0,e),t,...nt.slice(e+1)],ht(Je.CASH_BANK,nt),vt(t)}async function yK(n){const e=nt.findIndex(r=>r.id===n);if(e===-1)throw new Error(`Cash/Bank transaction with ID ${n} not found`);const t={...nt[e],archived:!1,archivedAt:void 0};return nt=[...nt.slice(0,e),t,...nt.slice(e+1)],ht(Je.CASH_BANK,nt),vt(t)}async function vK(n){if(nt.findIndex(t=>t.id===n)===-1)throw new Error(`Cash/Bank transaction with ID ${n} not found`);return nt=nt.filter(t=>t.id!==n),ht(Je.CASH_BANK,nt),vt(void 0)}async function _K(n){const e=new Date().toISOString(),t=[];return nt=nt.map(r=>{if(n.includes(r.id)){const s={...r,archived:!0,archivedAt:e};return t.push(s),s}return r}),ht(Je.CASH_BANK,nt),vt(t)}async function wK(n){const e=[];return nt=nt.map(t=>{if(n.includes(t.id)){const r={...t,archived:!1,archivedAt:void 0};return e.push(r),r}return t}),ht(Je.CASH_BANK,nt),vt(e)}async function EK(n){return nt=nt.filter(e=>!n.includes(e.id)),ht(Je.CASH_BANK,nt),vt(void 0)}const uW=[{id:"TRX-001",trxDate:"2025-10-05",supplierId:"SUP-001",supplierName:"TechSource LLC",country:"United States",city:"San Francisco",poId:"PO-001",billNumber:"INV-2025-0142",paymentMode:"Bank Transfer",amountPaid:57998.5,notes:"Full payment for PO-001 - Q4 restock",createdAt:"2025-10-05T10:00:00Z",createdBy:"1",archived:!1},{id:"TRX-002",trxDate:"2025-10-20",supplierId:"SUP-002",supplierName:"FurniCraft Industries",country:"United States",city:"Grand Rapids",poId:"PO-002",billNumber:"FC-INV-4521",paymentMode:"Check",amountPaid:16225,notes:"50% deposit for office furniture",createdAt:"2025-10-20T14:30:00Z",createdBy:"1",archived:!1},{id:"TRX-003",trxDate:"2025-11-05",supplierId:"SUP-002",supplierName:"FurniCraft Industries",country:"United States",city:"Grand Rapids",poId:"PO-005",billNumber:"FC-INV-4590",paymentMode:"Bank Transfer",amountPaid:4485,notes:"Full payment for filing cabinets",createdAt:"2025-11-05T09:15:00Z",createdBy:"1",archived:!1},{id:"TRX-004",trxDate:"2025-09-28",supplierId:"SUP-003",supplierName:"Global Electronics Co",country:"China",city:"Shenzhen",poId:"PO-001",billNumber:"GE-2025-789",paymentMode:"Credit Card",amountPaid:25e3,notes:"Partial payment for electronics shipment",createdAt:"2025-09-28T11:00:00Z",createdBy:"1",archived:!1},{id:"TRX-005",trxDate:"2025-10-30",supplierId:"SUP-003",supplierName:"Global Electronics Co",country:"China",city:"Shenzhen",poId:"PO-001",billNumber:"GE-2025-789",paymentMode:"Bank Transfer",amountPaid:25e3,notes:"Final payment for electronics shipment",createdAt:"2025-10-30T15:45:00Z",createdBy:"1",archived:!1},{id:"TRX-006",trxDate:"2025-11-02",supplierId:"SUP-005",supplierName:"Premium Parts Ltd",country:"United Kingdom",city:"London",poId:"PO-003",billNumber:"PP-UK-2025-456",paymentMode:"Online Payment",amountPaid:15e3,notes:"Payment for premium components",createdAt:"2025-11-02T08:30:00Z",createdBy:"2",archived:!1},{id:"TRX-007",trxDate:"2025-10-12",supplierId:"SUP-001",supplierName:"TechSource LLC",country:"United States",city:"San Francisco",poId:"PO-004",billNumber:"TS-INV-2025-234",paymentMode:"Cash",amountPaid:3500,notes:"Advance payment for monitor order",createdAt:"2025-10-12T13:20:00Z",createdBy:"1",archived:!1},{id:"TRX-008",trxDate:"2025-11-08",supplierId:"SUP-002",supplierName:"FurniCraft Industries",country:"United States",city:"Grand Rapids",poId:"PO-002",billNumber:"FC-INV-4521",paymentMode:"Bank Transfer",amountPaid:8e3,notes:"Second installment for furniture order",createdAt:"2025-11-08T10:00:00Z",createdBy:"1",archived:!1}];let e_=Ro(Je.PAYMENTS,uW);e_=e_.map(n=>({...n,archived:n.archived??!1}));ht(Je.PAYMENTS,e_);function dW(n,e=300){const[t,r]=b.useState(n);return b.useEffect(()=>{const s=setTimeout(()=>{r(n)},e);return()=>{clearTimeout(s)}},[n,e]),t}const ku="wms_recent_searches",hW=10,Sf=2,Nu=10,By={inventory:{name:"Inventory",icon:Vp,view:"inventory"},orders:{name:"Orders",icon:Lp,view:"orders"},"purchase-orders":{name:"Purchase Orders",icon:r_,view:"purchase-orders"},shipments:{name:"Shipments",icon:s_,view:"shipments"},suppliers:{name:"WMS Suppliers",icon:YI,view:"suppliers"}},fW=[{syntax:"status:critical",description:"Filter by status"},{syntax:"category:electronics",description:"Filter by category"},{syntax:"module:inventory",description:"Search in specific module"},{syntax:"supplier:ABC Corp",description:"Filter by supplier"},{syntax:"location:warehouse-a",description:"Filter by location"},{syntax:"price:>100",description:"Numeric range filter"}];function pW({open:n,onOpenChange:e,onNavigate:t}){const[r,s]=b.useState(""),[i,c]=b.useState(0),[u,d]=b.useState(!1),[p,g]=b.useState([]),[m,w]=b.useState(!1),[S,R]=b.useState([]),C=b.useRef(null),A=b.useRef(null),{inventory:O,orders:U,shipments:z,suppliers:q}=s0(),{user:W}=Vl(),X=dW(r,300);b.useEffect(()=>{if(W){const F=localStorage.getItem(ku);if(F)try{const Q=JSON.parse(F);R(Q[W.id]||[])}catch{R([])}}},[W]),b.useEffect(()=>{n?(aW().then(g).catch(console.error),C.current?.focus()):(s(""),c(0),w(!1))},[n]);const P=b.useCallback(F=>{if(!W||F.length<Sf)return;const Q=localStorage.getItem(ku);let ee={};if(Q)try{ee=JSON.parse(Q)}catch{}const ve=(ee[W.id]||[]).filter(_e=>_e!==F),be=[F,...ve].slice(0,hW);ee[W.id]=be,localStorage.setItem(ku,JSON.stringify(ee)),R(be)},[W]),I=b.useCallback(()=>{if(!W)return;const F=localStorage.getItem(ku);let Q={};if(F)try{Q=JSON.parse(F)}catch{}delete Q[W.id],localStorage.setItem(ku,JSON.stringify(Q)),R([])},[W]),k=b.useCallback(F=>{const Q=[];let ee=F;const le=/(\w+):([<>=]*)([^\s]+)/g;let ve;for(;(ve=le.exec(F))!==null;){const[be,_e,Ie,Ge]=ve;Q.push({key:_e.toLowerCase(),value:Ge,operator:Ie}),ee=ee.replace(be,"").trim()}return{filters:Q,cleanQuery:ee}},[]),M=b.useMemo(()=>{if(X.length<Sf)return[];d(!0);const{filters:F,cleanQuery:Q}=k(X),ee=Q.toLowerCase(),le=[],ve=F.find(ct=>ct.key==="module")?.value.toLowerCase(),be=F.find(ct=>ct.key==="status")?.value.toLowerCase(),_e=F.find(ct=>ct.key==="category")?.value.toLowerCase(),Ie=F.find(ct=>ct.key==="supplier")?.value.toLowerCase(),Ge=F.find(ct=>ct.key==="location")?.value.toLowerCase(),ft=F.find(ct=>ct.key==="price");return(!ve||ve==="inventory")&&(O||[]).filter(me=>{if(be&&me.status.toLowerCase()!==be||_e&&me.category.toLowerCase()!==_e||Ge&&!me.location.toLowerCase().includes(Ge))return!1;if(ft){const Vt=me.pricePerPiece,ar=parseFloat(ft.value);if(ft.operator===">"&&Vt<=ar||ft.operator==="<"&&Vt>=ar)return!1}return Q?me.id.toLowerCase().includes(ee)||me.name.toLowerCase().includes(ee)||me.brand.toLowerCase().includes(ee)||me.category.toLowerCase().includes(ee)||me.location.toLowerCase().includes(ee):!0}).slice(0,Nu).forEach(me=>{const Vt=[];me.id.toLowerCase().includes(ee)&&Vt.push("ID"),me.name.toLowerCase().includes(ee)&&Vt.push("Name"),me.brand.toLowerCase().includes(ee)&&Vt.push("Brand"),le.push({id:me.id,title:me.name,subtitle:`${me.id}  ${me.brand}  ${me.category}  ${me.location}`,module:"inventory",moduleName:"Inventory",icon:Vp,matchedFields:Vt})}),(!ve||ve==="orders")&&(U||[]).filter(me=>be&&me.status.toLowerCase()!==be?!1:Q?me.id.toLowerCase().includes(ee)||me.customer.toLowerCase().includes(ee)||me.status.toLowerCase().includes(ee):!0).slice(0,Nu).forEach(me=>{le.push({id:me.id,title:me.customer,subtitle:`${me.id}  ${me.status}  ${me.total}`,module:"orders",moduleName:"Orders",icon:Lp,matchedFields:[]})}),(!ve||ve==="purchase-orders"||ve==="po")&&p.filter(me=>be&&me.status.toLowerCase().replace(/\s/g,"-")!==be||Ie&&!me.supplierName.toLowerCase().includes(Ie)?!1:Q?me.id.toLowerCase().includes(ee)||me.supplierName.toLowerCase().includes(ee)||me.status.toLowerCase().includes(ee):!0).slice(0,Nu).forEach(me=>{le.push({id:me.id,title:`${me.id} - ${me.supplierName}`,subtitle:`${me.status}  ${me.totalAmount.toLocaleString()}`,module:"purchase-orders",moduleName:"Purchase Orders",icon:r_,matchedFields:[]})}),(!ve||ve==="shipments")&&(z||[]).filter(me=>be&&me.status.toLowerCase().replace(/\s/g,"-")!==be?!1:Q?me.id.toLowerCase().includes(ee)||me.orderId.toLowerCase().includes(ee)||me.destination.toLowerCase().includes(ee)||me.carrier.toLowerCase().includes(ee):!0).slice(0,Nu).forEach(me=>{le.push({id:me.id,title:`${me.id}  ${me.destination}`,subtitle:`Order: ${me.orderId}  ${me.carrier}  ${me.status}`,module:"shipments",moduleName:"Shipments",icon:s_,matchedFields:[]})}),(!ve||ve==="suppliers")&&(q||[]).filter(me=>be&&me.status.toLowerCase()!==be||_e&&!me.category.toLowerCase().includes(_e)?!1:Q?me.id.toLowerCase().includes(ee)||me.name.toLowerCase().includes(ee)||me.contact.toLowerCase().includes(ee)||me.email.toLowerCase().includes(ee)||me.category.toLowerCase().includes(ee):!0).slice(0,Nu).forEach(me=>{le.push({id:me.id,title:me.name,subtitle:`${me.id}  ${me.contact}  ${me.category}`,module:"suppliers",moduleName:"WMS Suppliers",icon:YI,matchedFields:[]})}),d(!1),le},[X,O,U,p,z,q,k]),V=b.useMemo(()=>{const F={inventory:[],orders:[],"purchase-orders":[],shipments:[],suppliers:[]};return M.forEach(Q=>{F[Q.module].push(Q)}),F},[M]),L=b.useMemo(()=>Object.values(V).flat(),[V]),N=b.useMemo(()=>k(r).filters,[r,k]),ue=b.useCallback(F=>{P(r),t(By[F.module].view,F.id),e(!1)},[r,P,t,e]),Me=b.useCallback(F=>{s(F)},[]),pe=b.useCallback(F=>{const Q=new RegExp(`${F}:[^\\s]+\\s*`,"gi");s(ee=>ee.replace(Q,"").trim())},[]),ye=b.useCallback(F=>{switch(F.key){case"ArrowDown":F.preventDefault(),c(Q=>Math.min(Q+1,L.length-1));break;case"ArrowUp":F.preventDefault(),c(Q=>Math.max(Q-1,0));break;case"Enter":F.preventDefault(),L[i]&&ue(L[i]);break;case"Escape":F.preventDefault(),e(!1);break}},[L,i,ue,e]);b.useEffect(()=>{c(0)},[L]);const H=(F,Q)=>{if(!Q||Q.length<Sf)return F;const{cleanQuery:ee}=k(Q);if(!ee)return F;const le=new RegExp(`(${ee.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return F.split(le).map((be,_e)=>le.test(be)?v.jsx("mark",{className:"bg-yellow-200 dark:bg-yellow-800 rounded px-0.5",children:be},_e):be)},re=r.length===0&&S.length>0,ae=r.length>=Sf&&M.length===0&&!u;return v.jsx(Fk,{open:n,onOpenChange:e,children:v.jsxs(jk,{className:"max-w-2xl p-0 gap-0 overflow-hidden",children:[v.jsxs("div",{className:"flex items-center border-b px-4 py-3 gap-3",children:[v.jsx(qf,{className:"h-5 w-5 text-muted-foreground shrink-0"}),v.jsx(Bc,{ref:C,value:r,onChange:F=>s(F.target.value),onKeyDown:ye,placeholder:"Search across all modules... (type ? for help)",className:"border-0 focus-visible:ring-0 p-0 h-auto text-base","aria-label":"Global search"}),u&&v.jsx(Qu,{className:"h-4 w-4 animate-spin text-muted-foreground"}),v.jsx("button",{onClick:()=>w(!m),className:"p-1 hover:bg-muted rounded",title:"Show filter syntax help",children:v.jsx($2,{className:"h-4 w-4 text-muted-foreground"})})]}),N.length>0&&v.jsx("div",{className:"flex flex-wrap gap-2 px-4 py-2 border-b bg-muted/30",children:N.map((F,Q)=>v.jsxs(Np,{variant:"secondary",className:"gap-1 pr-1",children:[v.jsxs("span",{className:"font-medium",children:[F.key,":"]}),v.jsxs("span",{children:[F.operator||"",F.value]}),v.jsx("button",{onClick:()=>pe(F.key),className:"ml-1 hover:bg-muted rounded-full p-0.5",children:v.jsx(o_,{className:"h-3 w-3"})})]},Q))}),m&&v.jsxs("div",{className:"px-4 py-3 border-b bg-blue-50 dark:bg-blue-950/30",children:[v.jsx("p",{className:"text-sm font-medium mb-2",children:"Filter Syntax:"}),v.jsx("div",{className:"grid grid-cols-2 gap-2 text-sm",children:fW.map((F,Q)=>v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("code",{className:"bg-muted px-1.5 py-0.5 rounded text-xs",children:F.syntax}),v.jsx("span",{className:"text-muted-foreground",children:F.description})]},Q))})]}),v.jsxs(Nm,{className:"max-h-[400px]",ref:A,children:[re&&v.jsxs("div",{className:"p-2",children:[v.jsxs("div",{className:"flex items-center justify-between px-2 py-1 mb-1",children:[v.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Recent Searches"}),v.jsx("button",{onClick:I,className:"text-xs text-muted-foreground hover:text-foreground",children:"Clear all"})]}),S.map((F,Q)=>v.jsxs("button",{onClick:()=>Me(F),className:"flex items-center gap-3 w-full px-3 py-2 text-left hover:bg-muted rounded-md transition-colors",children:[v.jsx(G2,{className:"h-4 w-4 text-muted-foreground"}),v.jsx("span",{className:"text-sm",children:F})]},Q))]}),ae&&v.jsxs("div",{className:"p-8 text-center",children:[v.jsx(RD,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),v.jsxs("p",{className:"text-muted-foreground",children:['No results found for "',r,'"']}),v.jsxs("p",{className:"text-sm text-muted-foreground/70 mt-1",children:["Try different keywords or use filters like ",v.jsx("code",{className:"bg-muted px-1 rounded",children:"status:active"})]})]}),M.length>0&&v.jsx("div",{className:"p-2",children:Object.entries(V).filter(([,F])=>F.length>0).map(([F,Q])=>v.jsxs("div",{className:"mb-4 last:mb-0",children:[v.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 mb-1",children:[(()=>{const ee=By[F].icon;return v.jsx(ee,{className:"h-4 w-4 text-muted-foreground"})})(),v.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:By[F].name}),v.jsx(Np,{variant:"secondary",className:"h-5 px-1.5 text-xs",children:Q.length})]}),Q.map((ee,le)=>{const be=L.indexOf(ee)===i;return v.jsxs("button",{onClick:()=>ue(ee),className:ze("flex items-start gap-3 w-full px-3 py-2 text-left rounded-md transition-colors",be?"bg-primary/10 text-primary":"hover:bg-muted"),children:[v.jsx(ee.icon,{className:"h-4 w-4 mt-0.5 shrink-0"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("div",{className:"font-medium text-sm truncate",children:H(ee.title,r)}),v.jsx("div",{className:"text-xs text-muted-foreground truncate",children:H(ee.subtitle,r)})]})]},ee.id)})]},F))}),r.length===0&&S.length===0&&v.jsxs("div",{className:"p-8 text-center",children:[v.jsx(qf,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),v.jsx("p",{className:"text-muted-foreground",children:"Start typing to search across all modules"}),v.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Search inventory, orders, purchase orders, shipments, and WMS suppliers"})]})]}),v.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-t bg-muted/30 text-xs text-muted-foreground",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border text-[10px]",children:""}),v.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border text-[10px]",children:""}),"to navigate"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border text-[10px]",children:"Enter"}),"to select"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("kbd",{className:"px-1.5 py-0.5 bg-muted rounded border text-[10px]",children:"Esc"}),"to close"]})]}),v.jsxs("span",{children:[M.length," result",M.length!==1?"s":""]})]})]})})}function mW(){const[n,e]=b.useState(!1);return b.useEffect(()=>{const t=r=>{(r.metaKey||r.ctrlKey)&&r.key==="k"&&(r.preventDefault(),e(s=>!s))};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[]),{open:n,setOpen:e}}const oN=b.createContext(void 0);function gW({children:n}){const{user:e}=Vl(),[t,r]=b.useState([]),[s,i]=b.useState(!0),c=e?.role==="Owner"||e?.role==="Admin";b.useEffect(()=>{if(!c){r([]),i(!1);return}const m=Wt(de,xe.NOTIFICATIONS),w=W9(m,G9("createdAt","desc")),S=Mi(w,R=>{const C=[];R.forEach(A=>{const O=A.data();e?.role&&O.targetRoles?.includes(e.role)&&C.push({id:A.id,type:O.type,title:O.title,message:O.message,salesOrderId:O.salesOrderId,customerName:O.customerName,createdBy:O.createdBy,createdAt:O.createdAt?.toDate?.()?.toISOString()||O.createdAt,read:O.read||!1,readAt:O.readAt?.toDate?.()?.toISOString()||O.readAt,targetRoles:O.targetRoles})}),r(C),i(!1)},R=>{console.error("Error fetching notifications:",R),i(!1)});return()=>S()},[c,e?.role]);const u=t.filter(m=>!m.read).length,d=b.useCallback(async m=>{try{const w=Le(de,xe.NOTIFICATIONS,m);await hn(w,{read:!0,readAt:mt.now()})}catch(w){console.error("Error marking notification as read:",w)}},[]),p=b.useCallback(async()=>{try{const m=t.filter(w=>!w.read);await Promise.all(m.map(w=>{const S=Le(de,xe.NOTIFICATIONS,w.id);return hn(S,{read:!0,readAt:mt.now()})}))}catch(m){console.error("Error marking all notifications as read:",m)}},[t]),g=b.useCallback(async m=>{try{const w=Wt(de,xe.NOTIFICATIONS);await Q9(w,{...m,createdAt:mt.now(),read:!1})}catch(w){console.error("Error creating notification:",w)}},[]);return v.jsx(oN.Provider,{value:{notifications:t,unreadCount:u,markAsRead:d,markAllAsRead:p,createNotification:g,isLoading:s},children:n})}function yW(){const n=b.useContext(oN);if(n===void 0)throw new Error("useNotifications must be used within a NotificationsProvider");return n}function vW({setCurrentView:n,setCommandPaletteOpen:e}){const{user:t,logout:r}=Vl(),{notifications:s,unreadCount:i,markAsRead:c,markAllAsRead:u}=yW(),{toggleSidebar:d,isMobile:p}=Ed(),g=t?.role==="Owner"||t?.role==="Admin",m=S=>{const R=new Date(S),A=new Date().getTime()-R.getTime(),O=Math.floor(A/6e4),U=Math.floor(A/36e5),z=Math.floor(A/864e5);return O<1?"Just now":O<60?`${O}m ago`:U<24?`${U}h ago`:`${z}d ago`},w=()=>{r(),Mn.success("Logged out successfully")};return v.jsxs("header",{className:"shrink-0 z-50 flex h-14 items-center gap-2 sm:gap-4 border-b bg-background px-3 sm:px-6",children:[p&&v.jsx(Ds,{variant:"ghost",size:"icon",className:"shrink-0 md:hidden",onClick:d,"aria-label":"Toggle menu",children:v.jsx(mD,{className:"h-5 w-5"})}),v.jsxs("div",{className:"min-w-0 flex-1",children:[v.jsxs("h1",{className:"text-sm font-semibold truncate sm:text-base",children:[v.jsx("span",{className:"hidden lg:inline",children:"Warehouse Management System "}),v.jsx("span",{className:"lg:hidden",children:"WMS"})]}),v.jsx("p",{className:"text-xs text-muted-foreground truncate lg:hidden",children:"Inventory & Supply Chain"})]}),v.jsxs(Ds,{variant:"outline",className:"hidden sm:flex w-64 justify-start text-muted-foreground gap-2",onClick:()=>e(!0),children:[v.jsx(qf,{className:"h-4 w-4 shrink-0"}),v.jsx("span",{className:"truncate",children:"Search everything..."}),v.jsxs("kbd",{className:"ml-auto pointer-events-none hidden h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium md:inline-flex",children:[v.jsx(Z2,{className:"h-3 w-3"}),"K"]})]}),v.jsxs(Ds,{variant:"outline",size:"icon",className:"sm:hidden shrink-0",onClick:()=>e(!0),children:[v.jsx(qf,{className:"h-4 w-4"}),v.jsx("span",{className:"sr-only",children:"Search"})]}),g&&v.jsxs(iv,{modal:!1,children:[v.jsx(av,{asChild:!0,children:v.jsxs(Ds,{variant:"ghost",size:"icon",className:"relative shrink-0",children:[v.jsx(QI,{className:"h-5 w-5"}),i>0&&v.jsx(Np,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:i>9?"9+":i}),v.jsx("span",{className:"sr-only",children:"Notifications"})]})}),v.jsxs(Jf,{align:"end",className:"w-80",sideOffset:8,children:[v.jsxs(ep,{className:"flex items-center justify-between",children:[v.jsx("span",{children:"Notifications"}),i>0&&v.jsxs(Ds,{variant:"ghost",size:"sm",className:"h-auto py-1 px-2 text-xs",onClick:S=>{S.preventDefault(),u()},children:[v.jsx(n_,{className:"h-3 w-3 mr-1"}),"Mark all read"]})]}),v.jsx(tp,{}),v.jsx(Nm,{className:"h-[300px]",children:s.length===0?v.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No notifications yet"}):s.slice(0,10).map(S=>v.jsx(Xc,{className:`flex flex-col items-start gap-1 p-3 cursor-pointer ${S.read?"":"bg-accent/50"}`,onSelect:()=>c(S.id),children:v.jsxs("div",{className:"flex items-start gap-2 w-full",children:[v.jsx(Lp,{className:"h-4 w-4 mt-0.5 text-primary shrink-0"}),v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("p",{className:"text-sm font-medium truncate",children:S.title}),v.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:S.message}),v.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[S.salesOrderId&&v.jsx(Np,{variant:"outline",className:"text-xs",children:S.salesOrderId}),v.jsx("span",{className:"text-xs text-muted-foreground",children:m(S.createdAt)})]})]}),!S.read&&v.jsx("div",{className:"h-2 w-2 rounded-full bg-primary shrink-0"})]})},S.id))})]})]}),t&&v.jsxs(iv,{modal:!1,children:[v.jsx(av,{asChild:!0,children:v.jsxs("button",{type:"button",className:"flex items-center gap-2 px-2 py-1.5 rounded-md hover:bg-accent hover:text-accent-foreground transition-colors",children:[v.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-primary/10",children:v.jsx(qy,{className:"h-4 w-4 text-primary"})}),v.jsxs("div",{className:"hidden md:flex flex-col items-start text-left",children:[v.jsx("span",{className:"text-sm font-medium truncate max-w-[120px]",children:t.name}),v.jsx("span",{className:"text-xs text-muted-foreground",children:t.role})]}),v.jsx(V2,{className:"h-4 w-4 text-muted-foreground hidden md:block"})]})}),v.jsxs(Jf,{align:"end",className:"w-56",sideOffset:8,children:[v.jsx(ep,{className:"font-normal",children:v.jsxs("div",{className:"flex flex-col space-y-1",children:[v.jsx("p",{className:"text-sm font-medium leading-none",children:t.name}),v.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:t.email})]})}),v.jsx(tp,{}),v.jsxs(Xc,{onSelect:()=>n("profile"),children:[v.jsx(qy,{className:"mr-2 h-4 w-4"}),"View Profile"]}),v.jsxs(Xc,{onSelect:w,className:"text-red-600 dark:text-red-400 focus:text-red-600 dark:focus:text-red-400",children:[v.jsx(dD,{className:"mr-2 h-4 w-4"}),"Logout"]})]})]})]})}const jI=ie.lazy(()=>or(()=>import("./dashboard-D2eLsofP.js"),__vite__mapDeps([0,1,2,3,4])).then(n=>({default:n.Dashboard}))),_W=ie.lazy(()=>or(()=>import("./inventory-view-B_2yXRJp.js"),__vite__mapDeps([5,6,7,1,8,9,10,11,2,12,13,3,14,15,16,17,18,19,20,21,22])).then(n=>({default:n.InventoryView}))),wW=ie.lazy(()=>or(()=>import("./purchase-orders-view-CcTBxFr2.js"),__vite__mapDeps([23,6,24,7,1,8,9,2,12,19,13,3,16,4,25,17])).then(n=>({default:n.PurchaseOrdersView}))),EW=ie.lazy(()=>or(()=>import("./sales-orders-view-D5Zz0PQo.js"),__vite__mapDeps([26,2,7,1,8,6,9,24,27,14,21,28,16,29,13,25,20,30,18,31,32,22,3,19,17])).then(n=>({default:n.SalesOrdersView}))),bW=ie.lazy(()=>or(()=>import("./shipments-view-BgWlI4bK.js"),__vite__mapDeps([33,6,7,1,8,9,30,10,11,2,12,34,3,16,17,18])).then(n=>({default:n.ShipmentsView}))),xW=ie.lazy(()=>or(()=>import("./suppliers-view-eAl7pt88.js"),__vite__mapDeps([35,6,7,1,8,9,10,11,2,12,34,13,16,17,22,20,21,18,3,15])).then(n=>({default:n.SuppliersView}))),SW=ie.lazy(()=>or(()=>import("./customers-view-jAtVQHUm.js"),__vite__mapDeps([36,6,7,1,8,9,10,11,2,12,34,13,16,17,15,18])).then(n=>({default:n.CustomersView}))),IW=ie.lazy(()=>or(()=>import("./user-management-view-BA8ycHwD.js"),__vite__mapDeps([37,6,2,11,16,4,38])).then(n=>({default:n.UserManagementView}))),TW=ie.lazy(()=>or(()=>import("./admin-profile-view-Bz8UrEHz.js"),__vite__mapDeps([39,17,38,34,18,30])).then(n=>({default:n.AdminProfileView}))),CW=ie.lazy(()=>or(()=>import("./cash-bank-view-3OE7aPzR.js"),__vite__mapDeps([40,2,7,1,8,6,9,24,13,31,32,16,25,17])).then(n=>({default:n.CashBankView}))),AW=ie.lazy(()=>or(()=>import("./payments-view-C3KM3or0.js"),__vite__mapDeps([41,2,7,1,8,6,9,24,13,31,32,16,25,17])).then(n=>({default:n.PaymentsView}))),RW=ie.lazy(()=>or(()=>import("./customer-dashboard-09GUL1IY.js"),__vite__mapDeps([42,27,21,14,28,8])).then(n=>({default:n.CustomerDashboard}))),PW=ie.lazy(()=>or(()=>import("./products-catalog-view-DgvfoDIx.js"),__vite__mapDeps([43,14,21])).then(n=>({default:n.ProductsCatalogView}))),kW=ie.lazy(()=>or(()=>import("./customer-cart-view-CNakm6sF.js"),__vite__mapDeps([44,9,25,20,30,18,31,29,4,14,28,8,16])).then(n=>({default:n.CustomerCartView}))),NW=["dashboard","inventory","purchase-orders","sales-orders","shipments","suppliers","customers","transactions","payments","users","profile","customer-dashboard","products","customer-cart"];function UI(){const n=window.location.hash.slice(1);return n&&NW.includes(n)?n:"dashboard"}function DW(){const{isAuthenticated:n,isLoading:e,user:t}=Vl(),[r,s]=b.useState(UI),[i,c]=b.useState(null),[u,d]=b.useState(void 0),{open:p,setOpen:g}=mW();b.useEffect(()=>{t?.role==="Customer"&&["dashboard","inventory","purchase-orders","suppliers","customers","transactions","payments","users"].includes(r)&&s("customer-dashboard")},[t?.role,r]),b.useEffect(()=>{const A=r==="dashboard"?"":`#${r}`;window.location.hash!==A&&window.location.hash!==`#${r}`&&window.history.replaceState(null,"",A||window.location.pathname)},[r]),b.useEffect(()=>{const A=()=>{const O=UI();s(O)};return window.addEventListener("hashchange",A),()=>window.removeEventListener("hashchange",A)},[]);const m=b.useCallback((A,O=!1)=>{s(A),O&&A!=="dashboard"&&c(A)},[]),w=b.useCallback((A,O)=>{s(A),d(O)},[]),S=b.useCallback(()=>{c(null)},[]),R=b.useCallback(()=>{d(void 0)},[]);if(e)return v.jsx("div",{className:"flex h-screen w-full items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx(Qu,{className:"h-8 w-8 animate-spin mx-auto text-primary"}),v.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]})});if(!n)return v.jsxs(dI,{onError:Zv,children:[v.jsx(SH,{}),v.jsx(uI,{})]});const C=()=>{switch(r){case"dashboard":return v.jsx(jI,{navigateToView:m});case"inventory":return v.jsx(_W,{initialOpenDialog:i==="inventory",onDialogOpened:S,initialItemId:u,onItemDialogOpened:R});case"purchase-orders":return v.jsx(wW,{initialOpenDialog:i==="purchase-orders",onDialogOpened:S});case"sales-orders":return v.jsx(EW,{});case"shipments":return v.jsx(bW,{initialOpenDialog:i==="shipments",onDialogOpened:S});case"suppliers":return v.jsx(xW,{initialOpenDialog:i==="suppliers",onDialogOpened:S,initialSupplierId:u,onSupplierDialogOpened:R});case"customers":return v.jsx(SW,{initialOpenDialog:i==="customers",onDialogOpened:S,initialCustomerId:u,onCustomerDialogOpened:R});case"transactions":return v.jsx(CW,{});case"payments":return v.jsx(AW,{});case"users":return v.jsx(IW,{});case"profile":return v.jsx(TW,{});case"customer-dashboard":return v.jsx(RW,{navigateToView:m});case"products":return v.jsx(PW,{navigateToView:m});case"customer-cart":return v.jsx(kW,{navigateToView:m});default:return v.jsx(jI,{navigateToView:m})}};return v.jsx(dI,{onError:Zv,children:v.jsx(IH,{children:v.jsxs(n4,{children:[v.jsx(u$,{currentView:r,setCurrentView:s}),v.jsxs(o4,{className:"flex flex-col bg-muted/30 h-screen overflow-hidden",children:[v.jsx(vW,{setCurrentView:s,setCommandPaletteOpen:g}),v.jsx("div",{className:"flex-1 overflow-y-auto overflow-x-hidden p-3 sm:p-4 md:p-6",children:v.jsx(b.Suspense,{fallback:v.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[v.jsx(Qu,{className:"h-4 w-4 animate-spin"})," Loading..."]}),children:C()})})]}),v.jsx(pW,{open:p,onOpenChange:g,onNavigate:w}),v.jsx(uI,{})]})})})}const zI="wms_favorites",$I="wms_saved_searches",iN=b.createContext(void 0),OW=[{id:"ql-1",label:"Low Stock Items",entityType:"inventory",filters:{status:"Low Stock"},icon:"alert"},{id:"ql-2",label:"Critical Stock",entityType:"inventory",filters:{status:"Critical"},icon:"alert-circle"},{id:"ql-3",label:"Pending Orders",entityType:"orders",filters:{status:"Pending"},icon:"clock"},{id:"ql-4",label:"Processing Orders",entityType:"orders",filters:{status:"Processing"},icon:"loader"},{id:"ql-5",label:"In Transit Shipments",entityType:"shipments",filters:{status:"In Transit"},icon:"truck"},{id:"ql-6",label:"Active WMS Suppliers",entityType:"suppliers",filters:{status:"Active"},icon:"users"}];function MW({children:n}){const[e,t]=b.useState([]),[r,s]=b.useState([]),[i]=b.useState(OW);b.useEffect(()=>{try{const C=localStorage.getItem(zI);C&&t(JSON.parse(C));const A=localStorage.getItem($I);A&&s(JSON.parse(A))}catch(C){console.error("Failed to load favorites from localStorage:",C)}},[]),b.useEffect(()=>{try{localStorage.setItem(zI,JSON.stringify(e))}catch(C){console.error("Failed to save favorites to localStorage:",C)}},[e]),b.useEffect(()=>{try{localStorage.setItem($I,JSON.stringify(r))}catch(C){console.error("Failed to save searches to localStorage:",C)}},[r]);const c=b.useCallback((C,A,O)=>{t(U=>U.some(W=>W.entityType===C&&W.entityId===A)?U:[{id:`fav-${C}-${A}-${Date.now()}`,entityType:C,entityId:A,entityName:O,favoritedAt:new Date().toISOString()},...U])},[]),u=b.useCallback((C,A)=>{t(O=>O.filter(U=>!(U.entityType===C&&U.entityId===A)))},[]),d=b.useCallback((C,A,O)=>{t(U=>U.some(q=>q.entityType===C&&q.entityId===A)?U.filter(q=>!(q.entityType===C&&q.entityId===A)):[{id:`fav-${C}-${A}-${Date.now()}`,entityType:C,entityId:A,entityName:O,favoritedAt:new Date().toISOString()},...U])},[]),p=b.useCallback((C,A)=>e.some(O=>O.entityType===C&&O.entityId===A),[e]),g=b.useCallback(C=>e.filter(A=>A.entityType===C),[e]),m=b.useCallback((C=10)=>[...e].sort((A,O)=>new Date(O.favoritedAt).getTime()-new Date(A.favoritedAt).getTime()).slice(0,C),[e]),w=b.useCallback((C,A,O,U)=>{const z={id:`search-${Date.now()}`,name:C,entityType:A,searchTerm:O,filters:U||{},createdAt:new Date().toISOString()};s(q=>[z,...q])},[]),S=b.useCallback(C=>{s(A=>A.filter(O=>O.id!==C))},[]),R=b.useCallback(C=>r.filter(A=>A.entityType===C),[r]);return v.jsx(iN.Provider,{value:{favorites:e,savedSearches:r,quickLinks:i,addFavorite:c,removeFavorite:u,toggleFavorite:d,isFavorite:p,getFavoritesByType:g,getRecentFavorites:m,saveSearch:w,deleteSearch:S,getSearchesByType:R},children:n})}function bK(){const n=b.useContext(iN);if(!n)throw new Error("useFavorites must be used within a FavoritesProvider");return n}const VW=s$;E2.createRoot(document.getElementById("root")).render(v.jsx(VW,{attribute:"class",defaultTheme:"system",enableSystem:!0,children:v.jsx(e$,{children:v.jsx(gW,{children:v.jsx(MW,{children:v.jsx(WH,{children:v.jsx(DW,{})})})})})}));window.addEventListener("error",n=>{const e=n.error instanceof Error?n.error:new Error(String(n.message));Zv(e)});export{HW as $,iH as A,Ds as B,XP as C,Fk as D,aH as E,oH as F,qG as G,HG as H,Bc as I,bK as J,uK as K,da as L,dW as M,ZW as N,sG as O,Vp as P,KW as Q,ie as R,Lp as S,zD as T,YI as U,PH as V,JW as W,eG as X,tG as Y,nG as Z,G2 as _,LW as a,gG as a$,Qu as a0,o_ as a1,qf as a2,iv as a3,av as a4,Jf as a5,ep as a6,tp as a7,MF as a8,hI as a9,Gs as aA,ba as aB,ut as aC,NT as aD,b4 as aE,x4 as aF,Fe as aG,Gn as aH,jO as aI,BW as aJ,yW as aK,hG as aL,EG as aM,GW as aN,PG as aO,fK as aP,Ab as aQ,qy as aR,qD as aS,fD as aT,SD as aU,pK as aV,pG as aW,xG as aX,kG as aY,fG as aZ,_G as a_,J2 as aa,Nm as ab,QD as ac,dK as ad,hK as ae,YW as af,QW as ag,XW as ah,qW as ai,n_ as aj,ZG as ak,aK as al,QG as am,YG as an,XG as ao,JG as ap,eK as aq,tK as ar,sK as as,oK as at,rK as au,nK as av,cK as aw,iK as ax,A_ as ay,Tl as az,KI as b,xt as b$,mG as b0,yG as b1,wG as b2,vG as b3,xe as b4,rG as b5,hn as b6,Le as b7,de as b8,$W as b9,Kv as bA,Y2 as bB,oD as bC,KG as bD,wK as bE,_K as bF,yK as bG,vK as bH,mK as bI,gK as bJ,EK as bK,KD as bL,MG as bM,GG as bN,VG as bO,$G as bP,zG as bQ,jG as bR,UG as bS,LG as bT,FG as bU,BG as bV,F2 as bW,V2 as bX,Wp as bY,mT as bZ,PT as b_,Oi as ba,Wt as bb,W9 as bc,zW as bd,Tr as be,NG as bf,OG as bg,DG as bh,WG as bi,oG as bj,lG as bk,uG as bl,dG as bm,aG as bn,cG as bo,iG as bp,CG as bq,AG as br,RG as bs,bG as bt,IG as bu,TG as bv,SG as bw,OD as bx,Cb as by,Vk as bz,Xe as c,gT as c0,_o as c1,jp as c2,a_ as c3,PC as c4,AL as c5,Ln as c6,x1 as c7,p1 as c8,l_ as c9,sl as ca,c_ as cb,Fp as cc,yT as cd,cH as ce,vT as cf,U2 as cg,WW as ch,rD as ci,LC as cj,ze as d,Mp as e,HI as f,BI as g,Dp as h,Vl as i,v as j,XD as k,aW as l,lK as m,CD as n,JP as o,ek as p,nk as q,b as r,s_ as s,r_ as t,s0 as u,tk as v,Np as w,Mn as x,jk as y,sH as z};
