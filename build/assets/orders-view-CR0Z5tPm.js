import{N as bs,i as ys,r as n,Q as Ss,aj as ws,ak as Pe,z as c,al as Ds,am as Cs,j as e,C as v,p as H,q as U,S as Ee,s as N,x as Os,d as T,y as C,w as ks,D as Ie,a1 as Ae,B as b,A as Be,E as Le,F as $e,G as Ke,H as j,I as y,J as Ve,a3 as Fs,a2 as te,o as Ts,aa as Re,ab as Ps,an as Es,ao as Is}from"./index-6JZfzpLY.js";import{S as re,a as ae,b as le,c as ne,d as z,T as He,e as As,f as Bs,g as Ue,h as Me,i as L,j as Ls,k as O}from"./sortable-table-head-DhfKlRfv.js";import{u as $s,a as Ks,P as Vs,F as Rs,B as Hs,b as Us,T as Ms,E as qs,c as zs}from"./bulk-delete-dialog-DASlA85G.js";import{D as Gs}from"./date-range-filter-Yvm1x4t8.js";import{F as Ys}from"./favorite-button-DuykMUYL.js";import{u as Js}from"./useTableSort-Bqng_9Rq.js";import{c as Qs}from"./permissions-BqDqHH54.js";import{E as qe}from"./editable-cell-DoCaPcLu.js";import{D as Ws}from"./dollar-sign-DUxysRub.js";import{T as Xs}from"./trending-up-Bxsj8OzM.js";import{S as _s}from"./star-BgxS9XpV.js";import"./skeleton-CBqSKy8m.js";import"./calendar-D2O00zIJ.js";const ie=["Pending","Processing","Shipped","Delivered"];function ht({initialOpenDialog:de,onDialogOpened:ce}){const{isFavorite:oe,getFavoritesByType:me}=bs(),{user:ue}=ys(),k=ue?Qs(ue.role):!1,[P,he]=n.useState(""),[o,F]=n.useState("all"),[h,G]=n.useState(""),[x,Y]=n.useState(""),[E,xe]=n.useState(!1),[ge,S]=n.useState(null),[ze,pe]=n.useState(!0),[$,K]=n.useState(!1),[J,M]=n.useState(null),[a,g]=n.useState({id:"",customer:"",items:"",total:"",status:"Pending",date:""}),Q=Ss(P,300);n.useEffect(()=>{(async()=>{pe(!0);const s=await ws();S(s),pe(!1)})()},[]),n.useEffect(()=>{de&&!$&&(K(!0),ce?.())},[de,ce,$]);const m=n.useMemo(()=>ge??[],[ge]),u=n.useMemo(()=>{const s=m.length,r=m.filter(l=>l.status==="Pending").length,t=m.filter(l=>l.status==="Processing").length,d=m.filter(l=>l.status==="Shipped").length,p=m.filter(l=>l.status==="Delivered").length,D=l=>{const i=l.replace(/[â‚±,\s]/g,"");return parseFloat(i)||0},R=m.reduce((l,i)=>l+D(i.total),0),ms=s>0?R/s:0,Fe=new Date,us=new Date(Fe.getTime()-10080*60*1e3),Te=new Date(Fe.getTime()-720*60*60*1e3),hs=m.filter(l=>{try{return new Date(l.date)>=us}catch{return!1}}).length,xs=m.filter(l=>{try{return new Date(l.date)>=Te}catch{return!1}}).length,gs=m.filter(l=>{try{return new Date(l.date)>=Te}catch{return!1}}).reduce((l,i)=>l+D(i.total),0),ps=m.reduce((l,i)=>(l[i.customer]=(l[i.customer]||0)+1,l),{}),js=Object.entries(ps).sort((l,i)=>i[1]-l[1]).slice(0,5).map(([l,i])=>({name:l,count:i})),fs=m.reduce((l,i)=>(l[i.customer]=(l[i.customer]||0)+D(i.total),l),{}),se=Object.entries(fs).sort((l,i)=>i[1]-l[1])[0],vs=s>0?Math.round(p/s*100):0,Ns=t+d;return{totalOrders:s,pendingOrders:r,processingOrders:t,shippedOrders:d,deliveredOrders:p,inProgressOrders:Ns,totalRevenue:R,averageOrderValue:ms,recentOrders7Days:hs,recentOrders30Days:xs,recentRevenue:gs,topCustomers:js,topCustomerByValue:se?{name:se[0],value:se[1]}:null,fulfillmentRate:vs}},[m]),W=n.useMemo(()=>m.filter(s=>{if(E&&!oe("orders",s.id)||o!=="all"&&s.status!==o)return!1;if(Q){const r=Q.toLowerCase();if(!(s.id.toLowerCase().includes(r)||s.customer.toLowerCase().includes(r)))return!1}if(h||x)try{const r=new Date(s.date);if(h){const t=new Date(h);if(r<t)return!1}if(x){const t=new Date(x);if(t.setHours(23,59,59,999),r>t)return!1}}catch{return!1}return!0}),[m,Q,o,h,x,E,oe]),{sortedData:Ge,sortConfig:I,requestSort:A,getSortDirection:B}=Js(W),{currentPage:je,totalPages:Ye,paginatedData:fe,goToPage:Je,totalItems:Qe,itemsPerPage:We}=$s(Ge,25),{selectedIds:q,selectedItems:ve,selectionCount:Ne,isAllSelected:Xe,isPartiallySelected:_e,hasSelection:X,toggleItem:Ze,toggleAll:_,deselectAll:f,isSelected:es}=Ks(fe),[be,ye]=n.useState(!1),[ss,Se]=n.useState(!1),[ts,Z]=n.useState(!1),[Zs,rs]=n.useState(!1);n.useEffect(()=>{f()},[je,f]),n.useEffect(()=>{const s=r=>{(r.metaKey||r.ctrlKey)&&r.key==="a"&&!$&&!J&&(r.preventDefault(),_()),r.key==="Escape"&&X&&f()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[_,f,X,$,J]);function ee(){g({id:"",customer:"",items:"",total:"",status:"Pending",date:new Date().toISOString().split("T")[0]})}function we(){G(""),Y("")}function as(){he(""),F("all"),G(""),Y(""),xe(!1)}function De(){return a.customer.trim()?(typeof a.total=="string"?a.total.trim():String(a.total))?a.date.trim()?(Number(a.items)||0)<0?"Items cannot be negative":null:"Date is required":"Total is required":"Customer is required"}const Ce=s=>{const r=String(s).trim();return`â‚±${(parseFloat(r.replace(/[â‚±,\s]/g,""))||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`};async function ls(){const s=De();if(s){c.error(s);return}try{const r=Number(a.items)||0,t=Ce(a.total),d=await Es({customer:a.customer,items:r,total:t,status:a.status,date:a.date});S(p=>[d,...p??[]]),K(!1),ee(),c.success("Order created successfully")}catch(r){c.error(r?.message||"Failed to create order")}}async function ns(){const s=De();if(s){c.error(s);return}if(!a.id){c.error("Missing order id");return}try{const r=Number(a.items)||0,t=Ce(a.total),d=await Pe({id:a.id,customer:a.customer,items:r,total:t,status:a.status,date:a.date});S(p=>(p??[]).map(D=>D.id===d.id?d:D)),M(null),c.success("Order updated successfully")}catch(r){c.error(r?.message||"Failed to update order")}}async function is(s){try{await Is(s),S(r=>(r??[]).filter(t=>t.id!==s)),M(null),c.success("Order deleted successfully")}catch(r){c.error(r?.message||"Failed to delete order")}}const Oe=n.useCallback(async(s,r,t)=>{try{const d={[r]:t},p=await Pe({id:s,...d});S(D=>(D??[]).map(R=>R.id===s?p:R)),c.success(`${r.charAt(0).toUpperCase()+r.slice(1)} updated`)}catch(d){throw c.error(d?.message||"Failed to update"),d}},[S]),V=s=>{switch(s){case"Delivered":return"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-200";case"Shipped":return"bg-blue-500/15 text-blue-700 dark:text-blue-400 border-blue-200";case"Processing":return"bg-amber-500/15 text-amber-700 dark:text-amber-400 border-amber-200";case"Pending":return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200";default:return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200"}},w=s=>{switch(s){case"Delivered":return"âœ“";case"Shipped":return"ðŸšš";case"Processing":return"â³";case"Pending":return"â—‹";default:return"â—‹"}},ke=s=>`â‚±${s.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,ds=n.useCallback(async()=>{ye(!0);try{const s=Array.from(q),r=await Ds(s);S(t=>t?.filter(d=>!s.includes(d.id))??[]),r.failedCount>0?c.warning(`Deleted ${r.successCount} orders. ${r.failedCount} failed.`):c.success(`Successfully deleted ${r.successCount} order${r.successCount!==1?"s":""}`),f()}catch(s){c.error(s?.message||"Failed to delete orders")}finally{ye(!1),Z(!1)}},[q,f]),cs=n.useCallback(async s=>{Se(!0);try{const r=Array.from(q),t=await Cs(r,s);S(d=>d&&d.map(p=>r.includes(p.id)?{...p,status:s}:p)),t.failedCount>0?c.warning(`Updated ${t.successCount} orders. ${t.failedCount} failed.`):c.success(`Successfully updated ${t.successCount} order${t.successCount!==1?"s":""}`),f()}catch(r){c.error(r?.message||"Failed to update orders")}finally{Se(!1),rs(!1)}},[q,f]),os=n.useMemo(()=>ve.map(s=>`${s.id} - ${s.customer}`),[ve]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(v,{className:"relative overflow-hidden",children:[e.jsxs(H,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.totalOrders}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.recentOrders7Days," new this week"]})]})]}),e.jsxs(v,{className:"relative overflow-hidden",children:[e.jsxs(H,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx(Ws,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:ke(u.totalRevenue)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Avg: ",ke(u.averageOrderValue)," per order"]})]})]}),e.jsxs(v,{className:"relative overflow-hidden",children:[e.jsxs(H,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),e.jsx(Os,{className:"h-4 w-4 text-amber-600"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:u.pendingOrders}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.processingOrders," processing, ",u.shippedOrders," shipped"]})]})]}),e.jsxs(v,{className:"relative overflow-hidden",children:[e.jsxs(H,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Fulfillment Rate"}),e.jsx(Xs,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[u.fulfillmentRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.deliveredOrders," delivered of ",u.totalOrders," total"]})]})]})]}),e.jsxs("div",{className:"grid gap-3 grid-cols-2 md:grid-cols-4",children:[e.jsx(v,{className:T("cursor-pointer transition-all hover:shadow-md border-l-4",o==="Pending"?"ring-2 ring-primary":"","border-l-slate-400"),onClick:()=>F(o==="Pending"?"all":"Pending"),children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:u.pendingOrders})]}),e.jsx(C,{variant:"outline",className:V("Pending"),children:w("Pending")})]})})}),e.jsx(v,{className:T("cursor-pointer transition-all hover:shadow-md border-l-4",o==="Processing"?"ring-2 ring-primary":"","border-l-amber-400"),onClick:()=>F(o==="Processing"?"all":"Processing"),children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Processing"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:u.processingOrders})]}),e.jsx(C,{variant:"outline",className:V("Processing"),children:w("Processing")})]})})}),e.jsx(v,{className:T("cursor-pointer transition-all hover:shadow-md border-l-4",o==="Shipped"?"ring-2 ring-primary":"","border-l-blue-400"),onClick:()=>F(o==="Shipped"?"all":"Shipped"),children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Shipped"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:u.shippedOrders})]}),e.jsx(C,{variant:"outline",className:V("Shipped"),children:w("Shipped")})]})})}),e.jsx(v,{className:T("cursor-pointer transition-all hover:shadow-md border-l-4",o==="Delivered"?"ring-2 ring-primary":"","border-l-emerald-400"),onClick:()=>F(o==="Delivered"?"all":"Delivered"),children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Delivered"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:u.deliveredOrders})]}),e.jsx(C,{variant:"outline",className:V("Delivered"),children:w("Delivered")})]})})})]}),e.jsxs(v,{children:[e.jsx(H,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-xl",children:"Order Management"}),e.jsx(ks,{className:"mt-1",children:"Manage and track all customer orders"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(Ie,{open:$,onOpenChange:s=>{K(s),s||ee()},children:[e.jsx(Ae,{asChild:!0,children:e.jsxs(b,{onClick:()=>ee(),disabled:!k,title:k?void 0:"You don't have permission to add orders",children:[e.jsx(Vs,{className:"h-4 w-4 mr-2"}),"Add Order"]})}),e.jsxs(Be,{className:"sm:max-w-[500px]",children:[e.jsxs(Le,{children:[e.jsx($e,{children:"Create New Order"}),e.jsx(Ke,{children:"Enter the details for the new customer order."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"customer",children:"Customer Name *"}),e.jsx(y,{id:"customer",placeholder:"Enter customer name",value:a.customer,onChange:s=>g({...a,customer:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"items",children:"Number of Items"}),e.jsx(y,{id:"items",type:"number",min:"0",placeholder:"0",value:a.items,onChange:s=>g({...a,items:s.target.value===""?"":s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"total",children:"Order Total (â‚±) *"}),e.jsx(y,{id:"total",type:"number",min:"0",step:"0.01",placeholder:"0.00",value:a.total,onChange:s=>g({...a,total:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"status",children:"Order Status"}),e.jsxs(re,{value:a.status,onValueChange:s=>g({...a,status:s}),children:[e.jsx(ae,{children:e.jsx(le,{placeholder:"Select status"})}),e.jsx(ne,{children:ie.map(s=>e.jsx(z,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:w(s)}),s]})},s))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"date",children:"Order Date *"}),e.jsx(y,{id:"date",type:"date",value:a.date,onChange:s=>g({...a,date:s.target.value})})]})]})]}),e.jsxs(Ve,{children:[e.jsx(b,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),e.jsx(b,{onClick:ls,children:"Create Order"})]})]})]})})]})}),e.jsxs(N,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Fs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(y,{placeholder:"Search by order ID or customer name...",value:P,onChange:s=>he(s.target.value),className:"pl-9"})]}),e.jsxs(re,{value:o,onValueChange:F,children:[e.jsxs(ae,{className:"w-full sm:w-[180px]",children:[e.jsx(Rs,{className:"h-4 w-4 mr-2"}),e.jsx(le,{placeholder:"Filter by status"})]}),e.jsxs(ne,{children:[e.jsx(z,{value:"all",children:"All Statuses"}),ie.map(s=>e.jsx(z,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:w(s)}),s]})},s))]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(Gs,{fromDate:h,toDate:x,onFromDateChange:G,onToDateChange:Y,onClear:we,label:"Filter by Order Date"}),e.jsxs(b,{variant:E?"default":"outline",size:"sm",onClick:()=>xe(!E),className:"gap-1",children:[e.jsx(_s,{className:T("h-4 w-4",E&&"fill-current")}),"Favorites",me("orders").length>0&&e.jsx(C,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:me("orders").length})]}),(P||o!=="all"||h||x||E)&&e.jsxs(b,{variant:"ghost",size:"sm",onClick:as,className:"text-muted-foreground hover:text-foreground",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"Clear All"]})]}),(o!=="all"||h||x)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[o!=="all"&&e.jsxs(C,{variant:"secondary",className:"gap-1",children:["Status: ",o,e.jsx("button",{onClick:()=>F("all"),className:"ml-1 hover:bg-secondary-foreground/20 rounded-full p-0.5",children:e.jsx(te,{className:"h-3 w-3"})})]}),(h||x)&&e.jsxs(C,{variant:"secondary",className:"gap-1",children:["Date: ",h||"..."," to ",x||"...",e.jsx("button",{onClick:we,className:"ml-1 hover:bg-secondary-foreground/20 rounded-full p-0.5",children:e.jsx(te,{className:"h-3 w-3"})})]})]})]}),X&&k&&e.jsx(Hs,{selectionCount:Ne,onClearSelection:f,isLoading:be||ss,actions:[{id:"delete",label:"Delete",icon:e.jsx(He,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>Z(!0)}],actionGroups:[{id:"status-update",label:"Update Status",icon:e.jsx(Ts,{className:"h-4 w-4 mr-1"}),options:[{value:"Pending",label:"Pending"},{value:"Processing",label:"Processing"},{value:"Shipped",label:"Shipped"},{value:"Delivered",label:"Delivered"}],onSelect:s=>cs(s)}],className:"mb-4"}),e.jsx(Us,{open:ts,onOpenChange:Z,itemCount:Ne,itemType:"order",itemNames:os,onConfirm:ds,isLoading:be}),ze?e.jsx(Ms,{rows:8}):W.length===0?e.jsx(qs,{icon:Ee,title:"No orders found",description:P||h||x?"Try adjusting your search or date filters":"Get started by creating your first order",actionLabel:P||h||x?void 0:"Create Order",onAction:P||h||x?void 0:()=>K(!0)}):e.jsxs("div",{className:"rounded-md border",children:[e.jsxs(As,{children:[e.jsx(Bs,{children:e.jsxs(Ue,{children:[e.jsx(Me,{className:"w-12",children:e.jsx(Re,{checked:Xe,ref:s=>{s&&(s.indeterminate=_e)},onCheckedChange:_,"aria-label":"Select all orders"})}),e.jsx(L,{sortKey:"id",currentSortKey:I.key,sortDirection:B("id"),onSort:s=>A(s),children:"Order ID"}),e.jsx(L,{sortKey:"customer",currentSortKey:I.key,sortDirection:B("customer"),onSort:s=>A(s),children:"Customer"}),e.jsx(L,{sortKey:"items",currentSortKey:I.key,sortDirection:B("items"),onSort:s=>A(s),children:"Items"}),e.jsx(L,{sortKey:"total",currentSortKey:I.key,sortDirection:B("total"),onSort:s=>A(s),children:"Total"}),e.jsx(L,{sortKey:"status",currentSortKey:I.key,sortDirection:B("status"),onSort:s=>A(s),children:"Status"}),e.jsx(L,{sortKey:"date",currentSortKey:I.key,sortDirection:B("date"),onSort:s=>A(s),children:"Date"}),e.jsx(Me,{children:"Actions"})]})}),e.jsx(Ls,{children:fe.map(s=>{const r=es(s.id);return e.jsxs(Ue,{className:T("transition-colors hover:bg-muted/50",r&&"bg-primary/5 hover:bg-primary/10"),children:[e.jsx(O,{children:e.jsx(Re,{checked:r,onCheckedChange:()=>Ze(s.id),"aria-label":`Select order ${s.id}`})}),e.jsx(O,{children:e.jsx("span",{className:"font-mono text-sm font-medium",children:s.id})}),e.jsx(O,{children:e.jsx(qe,{value:s.customer,type:"text",onSave:t=>Oe(s.id,"customer",t),disabled:!k})}),e.jsx(O,{children:e.jsx(qe,{value:s.items,type:"number",min:0,step:1,onSave:t=>Oe(s.id,"items",t),disabled:!k})}),e.jsx(O,{children:e.jsx("span",{className:"font-medium text-emerald-600",children:s.total})}),e.jsx(O,{children:e.jsxs(C,{variant:"outline",className:T("font-medium border transition-colors",V(s.status)),children:[e.jsx("span",{className:"mr-1",children:w(s.status)}),s.status]})}),e.jsx(O,{children:e.jsx("span",{className:"text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"})})}),e.jsx(O,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ys,{entityType:"orders",entityId:s.id,entityName:`${s.id} - ${s.customer}`}),e.jsxs(Ie,{open:J===s.id,onOpenChange:t=>{M(t?s.id:null),t&&g({...s})},children:[e.jsx(Ae,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"sm",disabled:!k,title:k?void 0:"You don't have permission to edit orders",children:e.jsx(Ps,{className:"h-4 w-4"})})}),e.jsxs(Be,{className:"sm:max-w-[500px]",children:[e.jsxs(Le,{children:[e.jsx($e,{children:"Edit Order"}),e.jsxs(Ke,{children:["Order ID: ",e.jsx("span",{className:"font-mono font-medium",children:s.id})]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"edit-customer",children:"Customer Name"}),e.jsx(y,{id:"edit-customer",value:a.customer,onChange:t=>g({...a,customer:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"edit-items",children:"Number of Items"}),e.jsx(y,{id:"edit-items",type:"number",min:"0",value:a.items,onChange:t=>g({...a,items:t.target.value===""?"":t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"edit-total",children:"Order Total (â‚±)"}),e.jsx(y,{id:"edit-total",type:"number",min:"0",step:"0.01",value:typeof a.total=="string"?a.total.replace(/[â‚±,\s]/g,""):a.total,onChange:t=>g({...a,total:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"edit-status",children:"Order Status"}),e.jsxs(re,{value:a.status,onValueChange:t=>g({...a,status:t}),children:[e.jsx(ae,{children:e.jsx(le,{placeholder:"Select status"})}),e.jsx(ne,{children:ie.map(t=>e.jsx(z,{value:t,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:w(t)}),t]})},t))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(j,{htmlFor:"edit-date",children:"Order Date"}),e.jsx(y,{id:"edit-date",type:"date",value:a.date,onChange:t=>g({...a,date:t.target.value})})]})]})]}),e.jsxs(Ve,{className:"flex-col sm:flex-row gap-2",children:[e.jsxs(b,{variant:"destructive",onClick:()=>is(s.id),className:"sm:mr-auto",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Delete Order"]}),e.jsx(b,{variant:"outline",onClick:()=>M(null),children:"Cancel"}),e.jsx(b,{onClick:ns,children:"Save Changes"})]})]})]})]})})]},s.id)})})]}),W.length>0&&e.jsx(zs,{currentPage:je,totalPages:Ye,onPageChange:Je,itemsPerPage:We,totalItems:Qe})]})]})]})]})}export{ht as OrdersView};
