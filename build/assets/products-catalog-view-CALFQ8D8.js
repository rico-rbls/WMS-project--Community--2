import{c as B,ch as E,r,j as e,B as n,S as f,C as g,q as j,a2 as U,I as F,P as H,w as m,aa as Q,aI as k,D as V,y as _,z as G,A as K,x as I,aN as R,K as W}from"./index-CH-aQ2d4.js";import{I as L}from"./image-Av7DRRqB.js";import{T as P}from"./tag-hX9faXUT.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],J=B("layers",Y);function p(x){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(x)}function se({navigateToView:x}){const{addToCart:N,getCartItem:y,itemCount:v,cartTotal:D}=E(),[w,O]=r.useState([]),[b,A]=r.useState([]),[q,z]=r.useState(!0),[c,M]=r.useState(""),[o,C]=r.useState("all"),[t,u]=r.useState(null);r.useEffect(()=>{async function s(){try{const[a,l]=await Promise.all([R(),W()]);O(a),A(l)}catch{I.error("Failed to load products")}finally{z(!1)}}s()},[]);const i=r.useMemo(()=>w.filter(s=>!s.archived),[w]),T=r.useMemo(()=>b.map(s=>({id:s.name,name:s.name})),[b]),h=r.useMemo(()=>i.filter(s=>{const a=!c||s.name.toLowerCase().includes(c.toLowerCase())||s.brand.toLowerCase().includes(c.toLowerCase())||s.description?.toLowerCase().includes(c.toLowerCase()),l=o==="all"||s.category===o;return a&&l}),[i,c,o]),S=s=>s.quantity<=0?"Out of Stock":s.quantity<=(s.reorderLevel??10)?"Low Stock":"In Stock";return q?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading products..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Warehouse Inventory"}),e.jsxs("p",{className:"text-muted-foreground",children:["Browse our complete inventory of ",i.length," items"]})]}),v>0&&e.jsxs(n,{onClick:()=>x("customer-cart"),children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"View Order (",v,") - ",p(D)]})]}),e.jsx(g,{children:e.jsx(j,{className:"py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(F,{placeholder:"Search products, brands...",value:c,onChange:s=>M(s.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(n,{variant:o==="all"?"default":"outline",size:"sm",onClick:()=>C("all"),children:"All"}),T.map(s=>e.jsx(n,{variant:o===s.id?"default":"outline",size:"sm",onClick:()=>C(s.id),children:s.name},s.id))]})]})})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",h.length," of ",i.length," products"]}),h.length===0?e.jsx(g,{children:e.jsx(j,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(H,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"font-medium",children:"No products found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your search or filters"})]})})}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 sm:gap-4",children:h.map(s=>{const a=S(s),d=!!y(s.id);return e.jsxs(g,{className:"group overflow-hidden hover:shadow-md transition-all",children:[e.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted flex items-center justify-center relative overflow-hidden cursor-pointer",onClick:()=>u(s),children:[s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(L,{className:"h-6 w-6 sm:h-10 sm:w-10 mb-1"}),e.jsx("span",{className:"text-[10px] sm:text-xs",children:"No image"})]}),e.jsx(m,{className:`absolute top-1 right-1 sm:top-2 sm:right-2 text-[10px] sm:text-xs ${a==="In Stock"?"bg-green-500/90":a==="Low Stock"?"bg-amber-500/90":"bg-red-500/90"}`,children:a==="Out of Stock"?"Out":a==="Low Stock"?"Low":"In Stock"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs(n,{size:"sm",variant:"secondary",className:"gap-1",children:[e.jsx(Q,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"View Details"})]})})]}),e.jsxs(j,{className:"p-2 sm:p-4",children:[e.jsx("h4",{className:"font-semibold text-xs sm:text-base line-clamp-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mt-0.5 sm:mt-1",children:[e.jsx(P,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-muted-foreground"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground line-clamp-1",children:s.brand})]}),e.jsx("p",{className:"text-[10px] sm:text-sm text-muted-foreground line-clamp-2 mt-1 sm:mt-2 min-h-[1.5rem] sm:min-h-[2.5rem] hidden sm:block",children:s.description||`Quality ${s.brand} product.`}),e.jsx(k,{className:"my-1.5 sm:my-3"}),e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsx("span",{className:`text-sm sm:text-lg font-bold ${a==="Out of Stock"?"text-muted-foreground":"text-primary"}`,children:p(s.pricePerPiece)}),a==="Out of Stock"?e.jsx(n,{size:"sm",variant:"outline",disabled:!0,className:"opacity-60 h-7 sm:h-9 text-[10px] sm:text-sm px-2 sm:px-3",children:"Out"}):e.jsxs(n,{size:"sm",onClick:$=>{$.stopPropagation(),N(s)},className:"gap-1 h-7 sm:h-9 text-[10px] sm:text-sm px-2 sm:px-3",variant:d?"secondary":"default",children:[e.jsx(f,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:d?"Add More":"Add"})]})]})]})]},s.id)})}),e.jsx(V,{open:!!t,onOpenChange:s=>!s&&u(null),children:e.jsx(_,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:t&&(()=>{const s=S(t),a=y(t.id),l=!!a,d=t.quantity-(a?.quantity||0);return e.jsxs(e.Fragment,{children:[e.jsx(G,{children:e.jsx(K,{className:"text-xl",children:t.name})}),e.jsx("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted rounded-lg flex items-center justify-center overflow-hidden",children:t.photoUrl?e.jsx("img",{src:t.photoUrl,alt:t.name,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(L,{className:"h-16 w-16 mb-2"}),e.jsx("span",{className:"text-sm",children:"No image available"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(m,{variant:"secondary",className:"gap-1",children:[e.jsx(P,{className:"h-3 w-3"}),t.brand]}),e.jsxs(m,{variant:"outline",className:"gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),t.category]}),e.jsx(m,{className:`${s==="In Stock"?"bg-green-500":s==="Low Stock"?"bg-amber-500":"bg-red-500"}`,children:s})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Description"}),e.jsx("p",{className:"text-sm",children:t.description||`Quality ${t.brand} product. Great value for your money.`})]}),s!=="Out of Stock"&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.quantity," units available"]}),e.jsx(k,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("p",{className:`text-2xl font-bold ${s==="Out of Stock"?"text-muted-foreground":"text-primary"}`,children:p(t.pricePerPiece)})]}),s==="Out of Stock"?e.jsx(n,{disabled:!0,variant:"outline",className:"opacity-60",children:"Out of Stock"}):e.jsxs(n,{onClick:()=>{N(t),I.success(`Added ${t.name} to cart`),u(null)},disabled:d<=0,className:"gap-2",variant:l?"secondary":"default",children:[e.jsx(f,{className:"h-4 w-4"}),l?"Add More":"Add to Cart"]})]}),l&&e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["You have ",a.quantity," in your cart"]})]})]})})()})})]})}export{se as ProductsCatalogView};
