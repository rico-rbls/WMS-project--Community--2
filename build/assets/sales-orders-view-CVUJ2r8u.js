import{c as zt,r as d,aA as Vt,aB as _t,j as e,aC as Ut,aD as Ht,aE as as,aF as Ks,aG as Kt,aH as Gt,aI as ms,aJ as Qt,d as J,i as Gs,C as P,o as T,p as R,v as Fs,q as S,aK as G,w as K,aL as Ls,B as x,a2 as Qs,I as g,ab as Wt,P as ts,S as ge,x as v,aM as Jt,M as Yt,m as xs,aN as Xt,aO as Zt,aP as ea,aQ as sa,s as Pe,T as ta,aR as aa,aS as us,_ as Xe,aT as Bs,aU as ra,D as $e,y as Ee,z as Me,A as ze,E as Ve,L as w,F as Ze,$ as ia,a1 as na,aa as la,aV as ca,aW as hs,aX as da,aY as oa,aZ as qs,a_ as ma,a$ as xa,b0 as ua,b1 as ha,b2 as ja,b3 as pa}from"./index-Dd4T-HZH.js";import{g as ga,h as js}from"./permissions-DeuZZz56.js";import{u as va,a as Na,T as fa,E as ps,P as $s,F as ya,B as ba,S as wa}from"./select-all-banner-AkiRbpeR.js";import{T as Ie,e as ke,f as Q,g as p,i as Oe,j as u,S as me,a as xe,b as ue,c as he,d as W,h as de}from"./sortable-table-head-DzwcuLmR.js";import{u as Ca,D as Sa}from"./printable-receipt-BzL7esjx.js";import{C as ys}from"./circle-check-Lnoy0EfQ.js";import{S as Da,A as Pa}from"./sparkles-C9Nc-25V.js";import{I as Ia}from"./image-CUGLe68K.js";import{T as ka}from"./tag-CgyZ14_Z.js";import{M as Es}from"./minus-CQbbzIqP.js";import{P as ae}from"./plus-D2NFl2oS.js";import{T as pe}from"./trash-2-D9R5o6DI.js";import{A as Oa}from"./arrow-left-BueXqf_O.js";import{D as gs,A as _e,a as Ms}from"./dollar-sign-D0Yf3lBy.js";import{P as Aa}from"./printer-CnrWvTbr.js";import{H as Ta}from"./hash-B8lu59FS.js";import{C as vs}from"./calendar-vZQ1q_ty.js";import{F as zs}from"./file-text-CCV1uMI5.js";import{M as Ns}from"./map-pin-DamO76va.js";import{B as Vs}from"./banknote-CAF23-VJ.js";import{C as fs}from"./credit-card-DqTLb26S.js";import{B as _s}from"./building-2-ClivrqrA.js";import{P as Ra}from"./phone-BjrVhowF.js";import{T as Us}from"./trending-up-B1XMkyiZ.js";import{C as Hs}from"./circle-alert-CFX6F-IM.js";import"./skeleton-DDqJGUbP.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],La=zt("history",Fa);var rs="Tabs",[Ba]=Ut(rs,[Ks]),Ws=Ks(),[qa,bs]=Ba(rs),Js=d.forwardRef((n,y)=>{const{__scopeTabs:q,value:m,onValueChange:F,defaultValue:N,orientation:O="horizontal",dir:E,activationMode:_="automatic",...A}=n,D=Vt(E),[M,z]=_t({prop:m,onChange:F,defaultProp:N??"",caller:rs});return e.jsx(qa,{scope:q,baseId:Ht(),value:M,onValueChange:z,orientation:O,dir:D,activationMode:_,children:e.jsx(as.div,{dir:D,"data-orientation":O,...A,ref:y})})});Js.displayName=rs;var Ys="TabsList",Xs=d.forwardRef((n,y)=>{const{__scopeTabs:q,loop:m=!0,...F}=n,N=bs(Ys,q),O=Ws(q);return e.jsx(Kt,{asChild:!0,...O,orientation:N.orientation,dir:N.dir,loop:m,children:e.jsx(as.div,{role:"tablist","aria-orientation":N.orientation,...F,ref:y})})});Xs.displayName=Ys;var Zs="TabsTrigger",et=d.forwardRef((n,y)=>{const{__scopeTabs:q,value:m,disabled:F=!1,...N}=n,O=bs(Zs,q),E=Ws(q),_=at(O.baseId,m),A=rt(O.baseId,m),D=m===O.value;return e.jsx(Gt,{asChild:!0,...E,focusable:!F,active:D,children:e.jsx(as.button,{type:"button",role:"tab","aria-selected":D,"aria-controls":A,"data-state":D?"active":"inactive","data-disabled":F?"":void 0,disabled:F,id:_,...N,ref:y,onMouseDown:ms(n.onMouseDown,M=>{!F&&M.button===0&&M.ctrlKey===!1?O.onValueChange(m):M.preventDefault()}),onKeyDown:ms(n.onKeyDown,M=>{[" ","Enter"].includes(M.key)&&O.onValueChange(m)}),onFocus:ms(n.onFocus,()=>{const M=O.activationMode!=="manual";!D&&!F&&M&&O.onValueChange(m)})})})});et.displayName=Zs;var st="TabsContent",tt=d.forwardRef((n,y)=>{const{__scopeTabs:q,value:m,forceMount:F,children:N,...O}=n,E=bs(st,q),_=at(E.baseId,m),A=rt(E.baseId,m),D=m===E.value,M=d.useRef(D);return d.useEffect(()=>{const z=requestAnimationFrame(()=>M.current=!1);return()=>cancelAnimationFrame(z)},[]),e.jsx(Qt,{present:F||D,children:({present:z})=>e.jsx(as.div,{"data-state":D?"active":"inactive","data-orientation":E.orientation,role:"tabpanel","aria-labelledby":_,hidden:!z,id:A,tabIndex:0,...O,ref:y,style:{...n.style,animationDuration:M.current?"0s":void 0},children:z&&N})})});tt.displayName=st;function at(n,y){return`${n}-trigger-${y}`}function rt(n,y){return`${n}-content-${y}`}var $a=Js,Ea=Xs,Ma=et,za=tt;function Va({className:n,...y}){return e.jsx($a,{"data-slot":"tabs",className:J("flex flex-col gap-2",n),...y})}function _a({className:n,...y}){return e.jsx(Ea,{"data-slot":"tabs-list",className:J("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",n),...y})}function es({className:n,...y}){return e.jsx(Ma,{"data-slot":"tabs-trigger",className:J("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...y})}function ss({className:n,...y}){return e.jsx(za,{"data-slot":"tabs-content",className:J("flex-1 outline-none",n),...y})}const je=n=>`₱${n.toLocaleString("en-PH",{minimumFractionDigits:2})}`,Ua={Books:"Books & Literature",Clothing:"Fashion & Apparel",Electronics:"Electronics & Gadgets",Food:"Food & Beverages",Furniture:"Home & Furniture",Health:"Health & Wellness",Sports:"Sports & Outdoors",Toys:"Toys & Games",Other:"Other Products"};function Ha(n){let y="In Stock";return n.quantity<=0?y="Out of Stock":n.quantity<=(n.reorderLevel??10)&&(y="Low Stock"),{id:n.id,name:n.name,description:n.description||`Quality ${n.brand} ${n.name} in the ${n.category} category.`,category:Ua[n.category]||n.category,brand:n.brand,price:n.pricePerPiece,availability:y,imageUrl:n.photoUrl,maxQuantity:n.quantity}}function Ka({inventoryData:n,customersData:y,onSubmitOrder:q,onCancel:m}){const{user:F}=Gs(),[N,O]=d.useState([]),[E,_]=d.useState(""),[A,D]=d.useState("all"),[M,z]=d.useState(""),[Ue,He]=d.useState(0),[Ke,Ae]=d.useState(!1),[Z,is]=d.useState(null),ve=d.useMemo(()=>F?.email?y.find(r=>r.email===F.email):null,[F?.email,y]),te=d.useMemo(()=>n.filter(r=>!r.archived).map(Ha),[n]),Ge=d.useMemo(()=>[...new Set(te.map(h=>h.category))].sort(),[te]),ee=d.useMemo(()=>te.filter(r=>{const h=!E||r.name.toLowerCase().includes(E.toLowerCase())||r.brand.toLowerCase().includes(E.toLowerCase())||r.description.toLowerCase().includes(E.toLowerCase()),I=A==="all"||r.category===A;return h&&I}),[te,E,A]),re=d.useMemo(()=>N.reduce((r,h)=>r+h.totalPrice,0),[N]),Ne=d.useMemo(()=>N.reduce((r,h)=>r+h.quantity,0),[N]),$=r=>{const h=N.findIndex(I=>I.inventoryItemId===r.id);if(h>=0){const I=[...N],U=Math.min(I[h].quantity+1,r.maxQuantity);I[h]={...I[h],quantity:U,totalPrice:U*I[h].unitPrice},O(I)}else O([...N,{inventoryItemId:r.id,itemName:r.name,quantity:1,unitPrice:r.price,totalPrice:r.price,availableStock:r.maxQuantity}]);v.success(`Added ${r.name} to cart`)},oe=(r,h)=>{const I=[...N],U=I[r].quantity+h;U<=0?I.splice(r,1):U<=I[r].availableStock&&(I[r]={...I[r],quantity:U,totalPrice:U*I[r].unitPrice}),O(I)},Te=r=>{const h=[...N];h.splice(r,1),O(h)},fe=async()=>{if(N.length===0){v.error("Please add items to your cart");return}Ae(!0);try{const r=await q({items:N.map(({availableStock:h,...I})=>I),notes:M,amountPaid:Ue,customerName:ve?.name||F?.displayName||F?.email||"Customer",customerId:ve?.id||"",customerCountry:ve?.country||"",customerCity:ve?.city||""});is(r),v.success("Order placed successfully!")}catch(r){v.error(r instanceof Error?r.message:"Failed to place order")}finally{Ae(!1)}};return Z?e.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(P,{className:"border-green-200 bg-green-50/50",children:[e.jsxs(T,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ys,{className:"h-10 w-10 text-green-600"})}),e.jsx(R,{className:"text-2xl text-green-800",children:"Order Confirmed!"}),e.jsx(Fs,{className:"text-green-700",children:"Thank you for your order"})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Order ID"}),e.jsx("span",{className:"font-mono font-semibold",children:Z.id})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date"}),e.jsx("span",{children:new Date(Z.soDate).toLocaleDateString()})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Items"}),e.jsxs("span",{children:[Z.items.length," item(s)"]})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),e.jsx("span",{className:"font-semibold text-lg",children:je(Z.totalAmount)})]}),Z.amountPaid>0&&e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Paid"}),e.jsx("span",{className:"text-green-600",children:je(Z.amountPaid)})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(K,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Order Items"}),e.jsx("div",{className:"space-y-2",children:Z.items.map((r,h)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[r.itemName," × ",r.quantity]}),e.jsx("span",{children:je(r.totalPrice)})]},h))})]})]}),e.jsx(Ls,{children:e.jsx(x,{className:"w-full",onClick:m,children:"Continue Shopping"})})]})})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.jsxs(P,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Da,{className:"h-5 w-5 text-primary"}),"Shop Products"]}),e.jsxs(Fs,{children:[ee.length," product",ee.length!==1?"s":""," available"]})]}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{placeholder:"Search products, brands...",value:E,onChange:r=>_(r.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(x,{variant:A==="all"?"default":"outline",size:"sm",className:"text-xs h-7",onClick:()=>D("all"),children:"All Products"}),Ge.map(r=>e.jsx(x,{variant:A===r?"default":"outline",size:"sm",className:"text-xs h-7",onClick:()=>D(r),children:r},r))]})]})}),e.jsx(S,{children:e.jsx(Wt,{className:"h-[450px]",children:ee.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(ts,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No products found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or category filter"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:ee.map(r=>{const h=N.find(I=>I.inventoryItemId===r.id);return e.jsxs("div",{className:"group border rounded-xl overflow-hidden hover:border-primary/50 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted flex items-center justify-center relative overflow-hidden",children:[r.imageUrl?e.jsx("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(Ia,{className:"h-12 w-12 mb-1"}),e.jsx("span",{className:"text-xs",children:"No image"})]}),e.jsx(K,{variant:r.availability==="Out of Stock"?"destructive":r.availability==="Low Stock"?"secondary":"default",className:`absolute top-2 right-2 text-xs ${r.availability==="In Stock"?"bg-green-500/90":r.availability==="Low Stock"?"bg-amber-500/90 text-white":r.availability==="Out of Stock"?"bg-red-500/90":""}`,children:r.availability})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsx("h4",{className:"font-semibold line-clamp-1",children:r.name})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ka,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:r.brand})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 min-h-[2.5rem]",children:r.description}),e.jsx(G,{className:"my-3"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xl font-bold ${r.availability==="Out of Stock"?"text-muted-foreground":"text-primary"}`,children:je(r.price)}),r.availability==="Out of Stock"?e.jsx(x,{size:"sm",variant:"outline",disabled:!0,className:"gap-1 opacity-60",children:"Out of Stock"}):h?e.jsxs("div",{className:"flex items-center gap-1.5 bg-accent rounded-lg p-1",children:[e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>oe(N.indexOf(h),-1),children:e.jsx(Es,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center font-semibold text-sm",children:h.quantity}),e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>oe(N.indexOf(h),1),disabled:h.quantity>=r.maxQuantity,children:e.jsx(ae,{className:"h-3 w-3"})})]}):e.jsxs(x,{size:"sm",onClick:()=>$(r),className:"gap-1",children:[e.jsx(ge,{className:"h-4 w-4"}),"Add to Cart"]})]})]})]},r.id)})})})})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs(P,{className:"sticky top-4",children:[e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5"}),"Your Cart",Ne>0&&e.jsxs(K,{variant:"secondary",className:"ml-auto",children:[Ne," item",Ne!==1?"s":""]})]})}),e.jsx(S,{children:N.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ge,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Your cart is empty"}),e.jsx("p",{className:"text-sm",children:"Add products to get started"})]}):e.jsx("div",{className:"space-y-3",children:N.map((r,h)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-accent/30",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:r.itemName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[je(r.unitPrice)," each"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>oe(h,-1),children:e.jsx(Es,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center text-sm",children:r.quantity}),e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>oe(h,1),disabled:r.quantity>=r.availableStock,children:e.jsx(ae,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-right w-20",children:e.jsx("p",{className:"font-medium",children:je(r.totalPrice)})}),e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>Te(h),children:e.jsx(pe,{className:"h-3 w-3"})})]},r.inventoryItemId))})}),N.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsxs(S,{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Special Instructions (optional)"}),e.jsx(g,{placeholder:"Any special requests...",value:M,onChange:r=>z(r.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Amount to Pay Now (optional)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",placeholder:"0.00",value:Ue||"",onChange:r=>He(parseFloat(r.target.value)||0)})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-primary",children:je(re)})]})]}),e.jsxs(Ls,{className:"flex flex-col gap-2",children:[e.jsx(x,{className:"w-full",size:"lg",onClick:fe,disabled:Ke,children:Ke?"Placing Order...":e.jsxs(e.Fragment,{children:["Place Order",e.jsx(Pa,{className:"ml-2 h-4 w-4"})]})}),e.jsx(x,{variant:"ghost",className:"w-full",onClick:m,children:"Cancel"})]})]})]})})]})}const Ga=["Unpaid","Partially Paid","Paid","Overdue"],Qa=["Pending","Processing","Shipped","In Transit","Out for Delivery","Delivered","Failed","Returned"],C=n=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(n);function yr(){const{user:n}=Gs(),{createNotification:y}=Jt(),q=n?ga(n.id):"Viewer",m=q==="Customer",F=m||js(q,"purchase_orders:create");!m&&js(q,"purchase_orders:update");const N=!m&&js(q,"purchase_orders:delete"),O=q==="Owner"||q==="Admin",{printReceipt:E}=Ca(),[_,A]=d.useState(null),[D,M]=d.useState([]),[z,Ue]=d.useState([]),[He,Ke]=d.useState([]),[Ae,Z]=d.useState([]),[is,ve]=d.useState(!0),[te,Ge]=d.useState(""),ee=Yt(te,300),[re,Ne]=d.useState("all"),[$,oe]=d.useState(!1),[Te,fe]=d.useState(!1),[r,h]=d.useState(null),[I,U]=d.useState(!1),[H,ws]=d.useState(null),[Re,ns]=d.useState("asc"),[i,Fe]=d.useState(null),[it,ls]=d.useState(!1),[nt,ye]=d.useState(!1),[lt,be]=d.useState(!1),[Y,Le]=d.useState({paymentMode:"Cash",amountReceived:0,notes:""}),[ie,Qe]=d.useState({carrier:"",eta:"",destination:""}),[l,L]=d.useState({soDate:new Date().toISOString().split("T")[0],customerId:"",customerName:"",customerCountry:"",customerCity:"",invoiceNumber:"",items:[],expectedDeliveryDate:"",notes:"",totalReceived:0,amountPaid:0,shippingStatus:"Pending"}),We=d.useCallback(async()=>{try{const[s,t,a,o,f]=await Promise.all([xs(),Xt(),Zt(),ea(),sa()]);A(s),M(t),Ue(a),Ke(o),Z(f)}catch{v.error("Failed to load data")}finally{ve(!1)}},[]);d.useEffect(()=>{We()},[We]),d.useEffect(()=>{if(Te&&m&&n?.email&&D.length>0){const s=D.find(t=>t.email===n.email);L(s?t=>({...t,customerId:s.id,customerName:s.name,customerCountry:s.country??"",customerCity:s.city??""}):t=>({...t,customerName:n.displayName||n.email||"Customer"}))}},[Te,m,n?.email,n?.displayName,D]);const we=_??[],X=d.useMemo(()=>we.filter(s=>{if(m&&n?.email&&s.createdBy!==n.email)return!1;const t=s.archived===!0;if($!==t)return!1;const a=!ee||s.id.toLowerCase().includes(ee.toLowerCase())||s.customerName.toLowerCase().includes(ee.toLowerCase())||s.items.some(f=>f.itemName.toLowerCase().includes(ee.toLowerCase())),o=re==="all"||s.receiptStatus===re;return a&&o}),[we,ee,re,$,m,n?.email]),Cs=d.useMemo(()=>H?[...X].sort((s,t)=>{const a=s[H],o=t[H];if(a==null&&o==null)return 0;if(a==null)return 1;if(o==null)return-1;if(typeof a=="number"&&typeof o=="number")return Re==="asc"?a-o:o-a;const f=String(a).toLowerCase(),j=String(o).toLowerCase();return Re==="asc"?f.localeCompare(j):j.localeCompare(f)}):X,[X,H,Re]),{currentPage:Ss,totalPages:ct,paginatedData:cs,goToPage:dt,itemsPerPage:ot,totalItems:mt}=va(Cs,10),{selectedIds:Je,isSelected:xt,toggleItem:ut,toggleAll:ht,selectAllPages:jt,deselectAll:Be,isAllSelected:pt,isAllPageSelected:gt,isAllPagesSelected:vt,isPartiallySelected:Nt,selectionCount:ds,hasSelection:ft,totalItemCount:Ds,pageItemCount:Ps}=Na(cs,Cs),se=d.useMemo(()=>{const s=we.filter(B=>!B.archived),t=s.length,a=s.reduce((B,ce)=>B+ce.totalAmount,0),o=s.reduce((B,ce)=>B+ce.totalReceived,0),f=s.filter(B=>B.receiptStatus==="Paid").length,j=s.filter(B=>B.receiptStatus==="Unpaid").length,b=s.filter(B=>B.receiptStatus==="Partially Paid").length,V=s.filter(B=>B.receiptStatus==="Overdue").length,c=s.filter(B=>B.shippingStatus==="Delivered").length,k=new Date;k.setDate(k.getDate()-7);const De=s.filter(B=>new Date(B.createdDate)>=k).length;return{totalSOs:t,totalValue:a,totalReceived:o,outstandingBalance:a-o,paidCount:f,unpaidCount:j,partiallyPaidCount:b,overdueCount:V,deliveredCount:c,newThisWeek:De,avgOrderValue:t>0?a/t:0,collectionRate:a>0?Math.round(o/a*100):0}},[we]),ne=s=>{const t=s;H===t?Re==="asc"?ns("desc"):(ws(null),ns("asc")):(ws(t),ns("asc"))},le=s=>H===s?Re:null,yt=s=>{const t=z.find(a=>a.id===s);return{itemId:t?.id??s,itemType:t?.brand??"-",itemCategory:t?.category??"-",itemSubcategory:t?.subcategory??"-"}},Is=s=>{Fe(s)},bt=()=>{Fe(null)};d.useEffect(()=>{if(i&&_){const s=_.find(t=>t.id===i.id);s&&JSON.stringify(s)!==JSON.stringify(i)?Fe(s):s||Fe(null)}},[_,i]);const Ye=s=>{const t={Unpaid:{variant:"outline",className:"border-amber-500 text-amber-600 bg-amber-50 dark:bg-amber-950/30"},"Partially Paid":{variant:"outline",className:"border-yellow-500 text-yellow-600 bg-yellow-50 dark:bg-yellow-950/30"},Paid:{variant:"default",className:"bg-green-600"},Overdue:{variant:"destructive"}},{variant:a,className:o}=t[s];return e.jsxs(K,{variant:a,className:J("gap-1",o),children:[s==="Paid"&&e.jsx(ys,{className:"h-3 w-3"}),s==="Unpaid"&&e.jsx(Xe,{className:"h-3 w-3"}),s==="Partially Paid"&&e.jsx(gs,{className:"h-3 w-3"}),s==="Overdue"&&e.jsx(Hs,{className:"h-3 w-3"}),s]})},ks=d.useCallback(s=>D.find(t=>t.id===s),[D]),wt=d.useCallback(s=>_?_.filter(t=>t.customerId===s&&!t.archived):[],[_]),Ct=d.useCallback(s=>Ae.filter(t=>t.soId===s&&!t.archived),[Ae]),St=d.useCallback(s=>He.filter(t=>t.salesOrderId===s&&!t.archived),[He]),os=d.useCallback(s=>z.find(t=>t.id===s),[z]),Dt=d.useCallback(s=>{const t=[];return s.forEach(a=>{const o=os(a.inventoryItemId);o&&o.quantity<a.quantity&&t.push({itemName:a.itemName,requested:a.quantity,available:o.quantity})}),t},[os]),Pt=async()=>{if(!i||Y.amountReceived<=0){v.error("Please enter a valid payment amount");return}const s=ks(i.customerId);try{await ca({trxDate:new Date().toISOString().split("T")[0],customerId:i.customerId,customerName:i.customerName,country:i.customerCountry,city:i.customerCity,soId:i.id,invoiceNumber:i.invoiceNumber,paymentMode:Y.paymentMode,amountReceived:Y.amountReceived,notes:Y.notes,createdBy:n?.displayName||n?.email||"Unknown"});const t=(i.totalReceived||0)+Y.amountReceived,a=i.totalAmount-t,o=a<=0?"Paid":a<i.totalAmount?"Partially Paid":"Unpaid";await hs({id:i.id,totalReceived:t,receiptStatus:o}),s&&await da({id:s.id,payments:(s.payments||0)+Y.amountReceived}),v.success(`Payment of ${C(Y.amountReceived)} recorded successfully`),ye(!1),Le({paymentMode:"Cash",amountReceived:0,notes:""}),We()}catch{v.error("Failed to record payment")}},It=async()=>{if(!i||!ie.carrier){v.error("Please fill in shipment details");return}try{await oa({salesOrderId:i.id,destination:ie.destination||i.deliveryAddress||`${i.customerCity}, ${i.customerCountry}`,carrier:ie.carrier,status:"Pending",eta:ie.eta}),await hs({id:i.id,shippingStatus:"Processing"}),v.success("Shipment created successfully"),be(!1),Qe({carrier:"",eta:"",destination:""}),We()}catch{v.error("Failed to create shipment")}},qe=()=>{const s=m&&n?.displayName?n.displayName:"";L({soDate:new Date().toISOString().split("T")[0],customerId:"",customerName:s,customerCountry:"",customerCity:"",invoiceNumber:"",items:[],expectedDeliveryDate:"",notes:"",totalReceived:0,amountPaid:0,shippingStatus:"Pending"})},Os=()=>{L(s=>({...s,items:[...s.items,{inventoryItemId:"",itemName:"",quantity:1,unitPrice:0,totalPrice:0}]}))},As=s=>{L(t=>({...t,items:t.items.filter((a,o)=>o!==s)}))},Ce=(s,t,a)=>{L(o=>{const f=[...o.items];if(t==="inventoryItemId"){const j=z.find(b=>b.id===a);j&&(f[s]={...f[s],inventoryItemId:j.id,itemName:j.name,unitPrice:j.pricePerPiece,totalPrice:f[s].quantity*j.pricePerPiece})}else if(t==="quantity"){const j=Number(a)||0;f[s]={...f[s],quantity:j,totalPrice:j*f[s].unitPrice}}else if(t==="unitPrice"){const j=Number(a)||0;f[s]={...f[s],unitPrice:j,totalPrice:f[s].quantity*j}}return{...o,items:f}})},Ts=s=>{const t=D.find(a=>a.id===s);L(a=>({...a,customerId:s,customerName:t?.name??"",customerCountry:t?.country??"",customerCity:t?.city??""}))},kt=async()=>{const s=!m&&!l.expectedDeliveryDate;if(!l.customerId||l.items.length===0||s){v.error("Please fill in all required fields");return}try{const t=await qs({soDate:l.soDate,customerId:l.customerId,customerName:l.customerName,customerCountry:l.customerCountry,customerCity:l.customerCity,invoiceNumber:l.invoiceNumber,items:l.items.map(a=>({...a,quantityShipped:0})),expectedDeliveryDate:l.expectedDeliveryDate||void 0,notes:l.notes,createdBy:n?.email??n?.id??"unknown",totalReceived:m?0:l.totalReceived,amountPaid:l.amountPaid});if(A(a=>[t,...a??[]]),v.success(`Sales Order ${t.id} created successfully`),m&&n?.email){const a=l.items.reduce((o,f)=>o+f.totalPrice,0);await y({type:"new_sales_order",title:"New Sales Order Created",message:`${n.name||n.email} created order ${t.id} for ${l.customerName} - ${C(a)}`,salesOrderId:t.id,customerName:l.customerName,createdBy:n.email,targetRoles:["Owner","Admin"]})}fe(!1),qe()}catch(t){v.error(t instanceof Error?t.message:"Failed to create sales order")}},Ot=async s=>{const t=await qs({soDate:new Date().toISOString().split("T")[0],customerId:s.customerId,customerName:s.customerName,customerCountry:s.customerCountry,customerCity:s.customerCity,invoiceNumber:"",items:s.items.map(a=>({...a,quantityShipped:0})),expectedDeliveryDate:void 0,notes:s.notes,createdBy:n?.email??n?.id??"unknown",totalReceived:0,amountPaid:s.amountPaid});if(A(a=>[t,...a??[]]),n?.email){const a=s.items.reduce((o,f)=>o+f.totalPrice,0);await y({type:"new_sales_order",title:"New Customer Order",message:`${n.displayName||n.email} placed order ${t.id} - ${C(a)}`,salesOrderId:t.id,customerName:s.customerName,createdBy:n.email,targetRoles:["Owner","Admin"]})}return t},At=async s=>{const t=!m&&!l.expectedDeliveryDate;if(!l.customerId||l.items.length===0||t){v.error("Please fill in all required fields");return}try{const a=we.find(j=>j.id===s),o=new Map(a?.items?.map(j=>[j.inventoryItemId,j.quantityShipped??0])??[]),f=await hs({id:s,soDate:l.soDate,customerId:l.customerId,customerName:l.customerName,customerCountry:l.customerCountry,customerCity:l.customerCity,invoiceNumber:l.invoiceNumber,items:l.items.map(j=>({...j,quantityShipped:o.get(j.inventoryItemId)??0})),expectedDeliveryDate:m?a?.expectedDeliveryDate:l.expectedDeliveryDate,notes:l.notes,totalReceived:m?a?.totalReceived:l.totalReceived,amountPaid:l.amountPaid,shippingStatus:m?a?.shippingStatus:l.shippingStatus});A(j=>j?.map(b=>b.id===s?f:b)??[]),v.success(`Sales Order ${s} updated successfully`),h(null),qe()}catch(a){v.error(a instanceof Error?a.message:"Failed to update sales order")}},Tt=async s=>{try{await ha(s),A(t=>t?.filter(a=>a.id!==s)??[]),v.success(`Sales Order ${s} deleted`),h(null)}catch(t){v.error(t instanceof Error?t.message:"Failed to delete sales order")}},Rt=async s=>{try{await ua(s),A(t=>t?.map(a=>a.id===s?{...a,archived:!0}:a)??[]),v.success(`Sales Order ${s} archived`)}catch(t){v.error(t instanceof Error?t.message:"Failed to archive sales order")}},Ft=async s=>{try{await xa(s),A(t=>t?.map(a=>a.id===s?{...a,archived:!1}:a)??[]),v.success(`Sales Order ${s} restored`)}catch(t){v.error(t instanceof Error?t.message:"Failed to restore sales order")}},Lt=async()=>{try{const s=await pa(Array.from(Je));s.success?v.success(`${s.successCount} sales orders archived`):v.warning(`${s.successCount} archived, ${s.failedCount} failed`);const t=await xs();A(t),Be(),U(!1)}catch{v.error("Failed to archive sales orders")}},Bt=async()=>{try{const s=await ma(Array.from(Je));s.success?v.success(`${s.successCount} sales orders restored`):v.warning(`${s.successCount} restored, ${s.failedCount} failed`);const t=await xs();A(t),Be()}catch{v.error("Failed to restore sales orders")}},Rs=async()=>{try{const s=await ja(Array.from(Je));s.success?v.success(`${s.successCount} sales orders permanently deleted`):v.warning(`${s.successCount} deleted, ${s.failedCount} failed`),A(t=>t?.filter(a=>!Je.has(a.id))??[]),Be(),U(!1)}catch{v.error("Failed to permanently delete sales orders")}},qt=s=>{L({soDate:s.soDate??s.createdDate,customerId:s.customerId,customerName:s.customerName,customerCountry:s.customerCountry??"",customerCity:s.customerCity??"",invoiceNumber:s.invoiceNumber??"",items:(s.items??[]).map(t=>({inventoryItemId:t.inventoryItemId,itemName:t.itemName,quantity:t.quantity,unitPrice:t.unitPrice,totalPrice:t.totalPrice})),expectedDeliveryDate:s.expectedDeliveryDate??"",notes:s.notes??"",totalReceived:s.totalReceived??0,amountPaid:s.amountPaid??0,shippingStatus:s.shippingStatus??"Pending"}),h(s.id)},$t=()=>{const s=["Date","SO ID","Customer ID","Customer Name","Invoice #","Country","City","Items","Total Amount","Total Received","SO Balance","Receipt Status","Shipping Status","Expected Delivery","Notes"],t=X.map(b=>[b.soDate??b.createdDate,b.id,b.customerId,b.customerName,b.invoiceNumber??"",b.customerCountry??"",b.customerCity??"",(b.items??[]).map(V=>`${V.itemName} (${V.quantity})`).join("; "),(b.totalAmount??0).toFixed(2),(b.totalReceived??0).toFixed(2),(b.soBalance??b.totalAmount??0).toFixed(2),b.receiptStatus,b.shippingStatus??"Pending",b.expectedDeliveryDate??"",b.notes??""]),a=[s,...t].map(b=>b.map(V=>`"${V}"`).join(",")).join(`
`),o=new Blob([a],{type:"text/csv"}),f=URL.createObjectURL(o),j=document.createElement("a");j.href=f,j.download=`sales-orders-${new Date().toISOString().split("T")[0]}.csv`,j.click(),URL.revokeObjectURL(f),v.success("Sales orders exported to CSV")},Et=()=>{Ge(""),Ne("all"),oe(!1)},Se=d.useMemo(()=>l.items.reduce((s,t)=>s+t.totalPrice,0),[l.items]),Mt=s=>{const t={type:"sales-order",documentNumber:s.id,documentDate:s.soDate??s.createdDate,partyType:"Customer",partyName:s.customerName,partyCity:s.customerCity,partyCountry:s.customerCountry,referenceNumber:s.invoiceNumber,referenceLabel:"Invoice No.",items:s.items?.map(a=>({description:a.itemName,quantity:a.quantity,unitPrice:a.unitPrice,total:a.totalPrice}))||[],totalAmount:s.totalAmount??0,amountPaid:s.totalReceived??0,balance:s.soBalance??s.totalAmount-s.totalReceived??0,status:`${s.receiptStatus} / ${s.shippingStatus}`,expectedDeliveryDate:s.expectedDeliveryDate,notes:s.notes,createdBy:s.createdBy};E(t)};if(is)return e.jsx("div",{className:"p-6",children:e.jsx(fa,{rows:8})});if(i){const s=new Date(i.soDate||i.createdDate||new Date),t=c=>{switch(c){case"Delivered":return"bg-green-600";case"Shipped":case"In Transit":case"Out for Delivery":return"bg-blue-600";case"Failed":case"Returned":return"bg-red-600";default:return"bg-amber-600"}},a=ks(i.customerId),o=wt(i.customerId),f=Ct(i.id),j=St(i.id),b=Dt(i.items);f.reduce((c,k)=>c+k.amountReceived,0);const V=i.totalAmount-(i.totalReceived||0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:bt,children:[e.jsx(Oa,{className:"h-4 w-4 mr-1"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Order Details - ",i.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.customerName," • Created by ",i.createdBy]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap print:hidden",children:[!m&&V>0&&e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>ye(!0),children:[e.jsx(gs,{className:"h-4 w-4 mr-1"}),"Record Payment"]}),!m&&i.shippingStatus==="Pending"&&j.length===0&&e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>be(!0),children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Create Shipment"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>Mt(i),children:[e.jsx(Aa,{className:"h-4 w-4 mr-2"}),"Print"]})]})]}),b.length>0&&!m&&e.jsx(P,{className:"border-amber-300 bg-amber-50 dark:bg-amber-950/30",children:e.jsx(S,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ta,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Low Stock Warning"}),e.jsx("ul",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1 space-y-1",children:b.map((c,k)=>e.jsxs("li",{children:[c.itemName,": Requested ",c.requested,", Available ",c.available]},k))})]})]})})}),e.jsxs(P,{className:"print:shadow-none print:border-none",id:"order-receipt",children:[e.jsx(T,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(aa,{className:"h-5 w-5 text-primary"}),e.jsx(R,{className:"text-lg",children:"Sales Order Receipt"})]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ta,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Order ID"}),e.jsx("p",{className:"font-mono font-medium text-xs sm:text-sm",children:i.id})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Date & Time"}),e.jsxs("p",{className:"font-medium text-xs sm:text-sm",children:[s.toLocaleDateString()," ",s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(us,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Customer"}),e.jsx("p",{className:"font-medium text-xs sm:text-sm",children:i.customerName})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Invoice #"}),e.jsx("p",{className:"font-medium text-xs sm:text-sm",children:i.invoiceNumber||"N/A"})]})]})]}),(i.customerCity||i.customerCountry)&&e.jsxs("div",{className:"flex items-start gap-2 bg-muted/50 rounded-lg p-3",children:[e.jsx(Ns,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Customer Location"}),e.jsx("p",{className:"text-sm",children:[i.customerCity,i.customerCountry].filter(Boolean).join(", ")})]})]}),i.deliveryAddress&&e.jsxs("div",{className:"flex items-start gap-2 bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsx(Pe,{className:"h-4 w-4 text-blue-600 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery Address"}),e.jsx("p",{className:"text-sm",children:i.deliveryAddress})]})]}),e.jsx(G,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Items Ordered (",i.items?.length||0,")"]}),!i.items||i.items.length===0?e.jsx(ps,{icon:ge,title:"No line items",description:"This sales order has no line items"}):e.jsx("div",{className:"space-y-2 bg-muted/30 rounded-lg p-3",children:i.items.map((c,k)=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("p",{className:"font-medium line-clamp-1",children:c.itemName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[C(c.unitPrice)," × ",c.quantity]})]}),e.jsx("p",{className:"font-medium shrink-0",children:C(c.totalPrice)})]},k))})]}),e.jsx(G,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsx("span",{children:C(i.totalAmount??0)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("span",{className:"text-green-600",children:"Free"})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-primary",children:C(i.totalAmount??0)})]}),(i.amountPaid??0)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Paid"}),e.jsx("span",{className:"text-green-600",children:C(i.amountPaid??0)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[e.jsx("span",{className:"text-muted-foreground",children:"Balance Due"}),e.jsx("span",{className:"text-amber-600",children:C((i.totalAmount??0)-(i.amountPaid??0))})]})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vs,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"font-medium text-sm",children:"Payment"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(K,{variant:"secondary",className:"gap-1",children:[e.jsx(Vs,{className:"h-3 w-3"}),"Cash on Delivery"]}),Ye(i.receiptStatus)]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Pe,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-sm",children:"Shipping"})]}),e.jsxs(K,{className:`gap-1 ${t(i.shippingStatus||"Pending")}`,children:[i.shippingStatus==="Delivered"?e.jsx(ys,{className:"h-3 w-3"}):e.jsx(Xe,{className:"h-3 w-3"}),i.shippingStatus??"Pending"]})]})]}),i.notes&&e.jsxs("div",{className:"text-sm bg-muted/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-muted-foreground mb-1 font-medium",children:"Order Notes:"}),e.jsx("p",{className:"italic",children:i.notes})]}),i.expectedDeliveryDate&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Expected Delivery: ",new Date(i.expectedDeliveryDate).toLocaleDateString()]})]})]}),!m&&e.jsxs(Va,{defaultValue:"items",className:"print:hidden",children:[e.jsxs(_a,{className:"grid w-full grid-cols-4 h-auto",children:[e.jsxs(es,{value:"items",className:"text-xs sm:text-sm py-2",children:[e.jsx(ts,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"Items"]}),e.jsxs(es,{value:"customer",className:"text-xs sm:text-sm py-2",children:[e.jsx(us,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"Customer"]}),e.jsxs(es,{value:"payments",className:"text-xs sm:text-sm py-2",children:[e.jsx(fs,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"Payments"]}),e.jsxs(es,{value:"shipments",className:"text-xs sm:text-sm py-2",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"Shipments"]})]}),e.jsx(ss,{value:"items",className:"mt-4",children:e.jsxs(P,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Line Items & Inventory"]})}),e.jsx(S,{children:i.items&&i.items.length>0&&e.jsx("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxs(Ie,{children:[e.jsx(ke,{children:e.jsxs(Q,{children:[e.jsx(p,{children:"Item"}),e.jsx(p,{children:"Category"}),e.jsx(p,{className:"text-right",children:"Qty"}),e.jsx(p,{className:"text-right",children:"Stock"}),e.jsx(p,{className:"text-right",children:"Unit Price"}),e.jsx(p,{className:"text-right",children:"Total"})]})}),e.jsx(Oe,{children:i.items.map((c,k)=>{const De=os(c.inventoryItemId),B=yt(c.inventoryItemId),ce=De?De.quantity>=c.quantity?"ok":De.quantity>0?"low":"out":"unknown";return e.jsxs(Q,{children:[e.jsx(u,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.itemName}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:B.itemId})]})}),e.jsx(u,{className:"text-muted-foreground",children:B.itemCategory}),e.jsx(u,{className:"text-right",children:c.quantity}),e.jsx(u,{className:"text-right",children:e.jsx(K,{variant:ce==="ok"?"default":ce==="low"?"secondary":"destructive",className:ce==="ok"?"bg-green-600":ce==="low"?"bg-amber-500":"",children:De?.quantity??"N/A"})}),e.jsx(u,{className:"text-right",children:C(c.unitPrice)}),e.jsx(u,{className:"text-right font-medium",children:C(c.totalPrice)})]},k)})})]})})})]})}),e.jsx(ss,{value:"customer",className:"mt-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(P,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(_s,{className:"h-4 w-4"}),"Customer Profile"]})}),e.jsx(S,{className:"space-y-3",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(us,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.name}),e.jsx(K,{variant:a.status==="Active"?"default":"secondary",className:a.status==="Active"?"bg-green-600":"",children:a.status})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"grid gap-2 text-sm",children:[a.contact&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:a.contact})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:a.email})]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ra,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:a.phone})]}),(a.city||a.country)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:[a.city,a.country].filter(Boolean).join(", ")})]}),a.address&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_s,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsx("span",{children:a.address})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Purchases"}),e.jsx("p",{className:"font-semibold text-sm",children:C(a.purchases||0)})]}),e.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Payments"}),e.jsx("p",{className:"font-semibold text-sm text-green-600",children:C(a.payments||0)})]}),e.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Balance"}),e.jsx("p",{className:J("font-semibold text-sm",(a.balance||0)>0?"text-amber-600":"text-green-600"),children:C(a.balance||0)})]})]})]}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"Customer not found"})})]}),e.jsxs(P,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(La,{className:"h-4 w-4"}),"Order History (",o.length,")"]})}),e.jsx(S,{children:o.length>0?e.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[o.slice(0,10).map(c=>e.jsx("div",{className:J("p-2 rounded border text-sm cursor-pointer hover:bg-muted/50",c.id===i.id&&"bg-primary/10 border-primary"),onClick:()=>c.id!==i.id&&Fe(c),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.id}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(c.soDate||c.createdDate).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:C(c.totalAmount)}),Ye(c.receiptStatus)]})]})},c.id)),o.length>10&&e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["+",o.length-10," more orders"]})]}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No order history"})})]})]})}),e.jsx(ss,{value:"payments",className:"mt-4",children:e.jsxs(P,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Payment History"]}),V>0&&e.jsxs(x,{size:"sm",onClick:()=>ye(!0),children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"Record Payment"]})]})}),e.jsxs(S,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Order Total"}),e.jsx("p",{className:"font-bold text-lg",children:C(i.totalAmount)})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950/30 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Paid"}),e.jsx("p",{className:"font-bold text-lg text-green-600",children:C(i.totalReceived||0)})]}),e.jsxs("div",{className:J("p-3 rounded-lg text-center",V>0?"bg-amber-50 dark:bg-amber-950/30":"bg-green-50 dark:bg-green-950/30"),children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Balance Due"}),e.jsx("p",{className:J("font-bold text-lg",V>0?"text-amber-600":"text-green-600"),children:C(V)})]})]}),f.length>0?e.jsx("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxs(Ie,{children:[e.jsx(ke,{children:e.jsxs(Q,{children:[e.jsx(p,{children:"Date"}),e.jsx(p,{children:"Transaction ID"}),e.jsx(p,{children:"Method"}),e.jsx(p,{className:"text-right",children:"Amount"})]})}),e.jsx(Oe,{children:f.map(c=>e.jsxs(Q,{children:[e.jsx(u,{children:new Date(c.trxDate).toLocaleDateString()}),e.jsx(u,{className:"font-mono text-sm",children:c.id}),e.jsx(u,{children:e.jsx(K,{variant:"outline",children:c.paymentMode})}),e.jsx(u,{className:"text-right font-medium text-green-600",children:C(c.amountReceived)})]},c.id))})]})}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(fs,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No payments recorded yet"}),V>0&&e.jsx(x,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>ye(!0),children:"Record First Payment"})]})]})]})}),e.jsx(ss,{value:"shipments",className:"mt-4",children:e.jsxs(P,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(Pe,{className:"h-4 w-4"}),"Shipment Tracking"]}),j.length===0&&e.jsxs(x,{size:"sm",onClick:()=>be(!0),children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"Create Shipment"]})]})}),e.jsxs(S,{children:[(i.deliveryAddress||i.customerCity)&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ns,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery Address"}),e.jsx("p",{className:"text-sm",children:i.deliveryAddress||`${i.customerCity}, ${i.customerCountry}`})]})]})}),j.length>0?e.jsx("div",{className:"space-y-3",children:j.map(c=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.id}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Carrier: ",c.carrier]})]}),e.jsx(K,{className:t(c.status),children:c.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Destination"}),e.jsx("p",{children:c.destination})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"ETA"}),e.jsx("p",{children:c.eta?new Date(c.eta).toLocaleDateString():"TBD"})]})]})]},c.id))}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(Pe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No shipments created yet"}),e.jsx(x,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>be(!0),children:"Create Shipment"})]})]})]})})]}),!m&&e.jsx(P,{className:"print:hidden",children:e.jsx(S,{className:"py-3",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Bs,{className:"h-3 w-3"}),"Created by: ",i.createdBy]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"h-3 w-3"}),"Created: ",new Date(i.createdDate).toLocaleString()]})]})})}),e.jsx($e,{open:nt,onOpenChange:ye,children:e.jsxs(Ee,{className:"sm:max-w-md",children:[e.jsxs(Me,{children:[e.jsx(ze,{children:"Record Payment"}),e.jsxs(Ve,{children:["Record a payment for order ",i.id,". Balance due: ",C(V)]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Payment Method"}),e.jsxs(me,{value:Y.paymentMode,onValueChange:c=>Le(k=>({...k,paymentMode:c})),children:[e.jsx(xe,{children:e.jsx(ue,{})}),e.jsxs(he,{children:[e.jsx(W,{value:"Cash",children:"Cash"}),e.jsx(W,{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx(W,{value:"Credit Card",children:"Credit Card"}),e.jsx(W,{value:"Check",children:"Check"}),e.jsx(W,{value:"Online Payment",children:"Online Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Amount Received"}),e.jsx(g,{type:"number",min:"0",step:"0.01",max:V,value:Y.amountReceived||"",onChange:c=>Le(k=>({...k,amountReceived:parseFloat(c.target.value)||0})),placeholder:"0.00"}),e.jsx("div",{className:"flex gap-2 mt-2",children:e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:()=>Le(c=>({...c,amountReceived:V})),children:"Full Amount"})})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Notes (Optional)"}),e.jsx(g,{value:Y.notes,onChange:c=>Le(k=>({...k,notes:c.target.value})),placeholder:"Payment notes..."})]})]}),e.jsxs(Ze,{children:[e.jsx(x,{variant:"outline",onClick:()=>ye(!1),children:"Cancel"}),e.jsx(x,{onClick:Pt,disabled:Y.amountReceived<=0,children:"Record Payment"})]})]})}),e.jsx($e,{open:lt,onOpenChange:be,children:e.jsxs(Ee,{className:"sm:max-w-md",children:[e.jsxs(Me,{children:[e.jsx(ze,{children:"Create Shipment"}),e.jsxs(Ve,{children:["Create a shipment for order ",i.id]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Carrier"}),e.jsx(g,{value:ie.carrier,onChange:c=>Qe(k=>({...k,carrier:c.target.value})),placeholder:"e.g., FedEx, UPS, LBC"})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Destination"}),e.jsx(g,{value:ie.destination,onChange:c=>Qe(k=>({...k,destination:c.target.value})),placeholder:i.deliveryAddress||`${i.customerCity}, ${i.customerCountry}`})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Estimated Arrival (Optional)"}),e.jsx(g,{type:"date",value:ie.eta,onChange:c=>Qe(k=>({...k,eta:c.target.value}))})]})]}),e.jsxs(Ze,{children:[e.jsx(x,{variant:"outline",onClick:()=>be(!1),children:"Cancel"}),e.jsx(x,{onClick:It,disabled:!ie.carrier,children:"Create Shipment"})]})]})})]})}return m&&it?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Place New Order"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse products and add them to your cart"})]})}),e.jsx(Ka,{inventoryData:z,customersData:D,onSubmitOrder:Ot,onCancel:()=>ls(!1)})]}):m?e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"My Orders"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"View and track your orders"})]}),e.jsxs(x,{onClick:()=>ls(!0),className:"w-full sm:w-auto",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Place New Order"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(P,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx(ge,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(S,{children:e.jsx("div",{className:"text-2xl font-bold",children:X.length})})]}),e.jsxs(P,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Pending"}),e.jsx(Xe,{className:"h-4 w-4 text-amber-600"})]}),e.jsx(S,{children:e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:X.filter(s=>s.shippingStatus==="Pending"||s.shippingStatus==="Processing").length})})]}),e.jsxs(P,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Delivered"}),e.jsx(Us,{className:"h-4 w-4 text-green-600"})]}),e.jsx(S,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:X.filter(s=>s.shippingStatus==="Delivered").length})})]})]}),e.jsxs(P,{children:[e.jsx(T,{children:e.jsx(R,{children:"Order History"})}),e.jsxs(S,{children:[X.length===0?e.jsx(ps,{icon:ge,title:"No orders yet",description:"Place your first order to get started",action:e.jsxs(x,{onClick:()=>ls(!0),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Place New Order"]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs(Ie,{children:[e.jsx(ke,{children:e.jsxs(Q,{children:[e.jsx(p,{className:"whitespace-nowrap",children:"Order ID"}),e.jsx(p,{className:"whitespace-nowrap",children:"Date"}),e.jsx(p,{className:"whitespace-nowrap",children:"Items"}),e.jsx(p,{className:"text-right whitespace-nowrap",children:"Total"}),e.jsx(p,{className:"text-right whitespace-nowrap hidden sm:table-cell",children:"Paid"}),e.jsx(p,{className:"whitespace-nowrap",children:"Payment"}),e.jsx(p,{className:"whitespace-nowrap",children:"Shipping"})]})}),e.jsx(Oe,{children:cs.map(s=>e.jsxs(Q,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Is(s),children:[e.jsx(u,{className:"font-medium font-mono text-xs sm:text-sm whitespace-nowrap",children:s.id}),e.jsx(u,{className:"whitespace-nowrap text-xs sm:text-sm",children:s.soDate??s.createdDate}),e.jsx(u,{className:"whitespace-nowrap",children:e.jsxs("span",{className:"text-muted-foreground text-xs sm:text-sm",children:[s.items.length," item",s.items.length!==1?"s":""]})}),e.jsx(u,{className:"text-right font-medium whitespace-nowrap text-xs sm:text-sm",children:C(s.totalAmount)}),e.jsx(u,{className:"text-right text-green-600 hidden sm:table-cell",children:C(s.amountPaid??0)}),e.jsx(u,{children:e.jsx(K,{variant:s.receiptStatus==="Paid"?"default":s.receiptStatus==="Partially Paid"?"secondary":s.receiptStatus==="Overdue"?"destructive":"outline",className:s.receiptStatus==="Paid"?"bg-green-600":s.receiptStatus==="Partially Paid"?"bg-amber-500":s.receiptStatus==="Overdue"?"bg-red-600":"",children:s.receiptStatus??"Unpaid"})}),e.jsx(u,{children:e.jsx(K,{variant:s.shippingStatus==="Delivered"?"default":s.shippingStatus==="Shipped"||s.shippingStatus==="In Transit"||s.shippingStatus==="Out for Delivery"?"secondary":s.shippingStatus==="Failed"||s.shippingStatus==="Returned"?"destructive":"outline",className:s.shippingStatus==="Delivered"?"bg-green-600":s.shippingStatus==="Out for Delivery"?"bg-blue-600":s.shippingStatus==="In Transit"?"bg-blue-500":s.shippingStatus==="Shipped"?"bg-cyan-600":s.shippingStatus==="Processing"?"bg-amber-500":"",children:s.shippingStatus??"Pending"})})]},s.id))})]})}),X.length>0&&e.jsx("div",{className:"mt-4",children:e.jsx($s,{totalItems:X.length,pageSize,currentPage:Ss,onPageChange:setCurrentPage,onPageSizeChange:setPageSize})})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Sales Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage customer orders, track payments, and monitor delivery status"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(P,{className:"relative overflow-hidden",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Total SOs"}),e.jsx(zs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold",children:se.totalSOs}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[se.newThisWeek," new this week"]})]})]}),e.jsxs(P,{className:"relative overflow-hidden",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Total Value"}),e.jsx(gs,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:C(se.totalValue)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Avg: ",C(se.avgOrderValue)," per SO"]})]})]}),e.jsxs(P,{className:"relative overflow-hidden",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Outstanding"}),e.jsx(Xe,{className:"h-4 w-4 text-amber-600"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:C(se.outstandingBalance)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[se.unpaidCount," unpaid, ",se.overdueCount," overdue"]})]})]}),e.jsxs(P,{className:"relative overflow-hidden",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Collection Rate"}),e.jsx(Us,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(S,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[se.collectionRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[se.paidCount," paid of ",se.totalSOs," total"]})]})]})]}),e.jsxs(P,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Sales Orders"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage customer sales orders"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:$t,children:[e.jsx(Sa,{className:"h-4 w-4 mr-1"}),"Export CSV"]}),F&&e.jsxs($e,{open:Te,onOpenChange:fe,children:[e.jsx(ia,{asChild:!0,children:e.jsxs(x,{size:"sm",children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"Create SO"]})}),e.jsxs(Ee,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Me,{children:[e.jsx(ze,{children:"Create Sales Order"}),e.jsx(Ve,{children:"Create a new sales order for a customer"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs(P,{children:[e.jsx(T,{className:"pb-3",children:e.jsx(R,{className:"text-base",children:"Sales Order Information"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"SO Date *"}),e.jsx(g,{type:"date",value:l.soDate,onChange:s=>L(t=>({...t,soDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Customer *"}),m?e.jsx(g,{value:n?.displayName||n?.email||"Customer",disabled:!0,className:"bg-muted"}):e.jsxs(me,{value:l.customerId,onValueChange:Ts,children:[e.jsx(xe,{children:e.jsx(ue,{placeholder:"Select customer"})}),e.jsx(he,{children:D.filter(s=>s.status==="Active").map(s=>e.jsx(W,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Customer ID"}),e.jsx(g,{value:l.customerId,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Country"}),e.jsx(g,{value:l.customerCountry,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"City"}),e.jsx(g,{value:l.customerCity,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Invoice #"}),e.jsx(g,{value:l.invoiceNumber,onChange:s=>L(t=>({...t,invoiceNumber:s.target.value})),placeholder:"INV-2025-0001"})]})]}),!m&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Expected Delivery Date *"}),e.jsx(g,{type:"date",value:l.expectedDeliveryDate,onChange:s=>L(t=>({...t,expectedDeliveryDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Total Received (₱)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",value:l.totalReceived,onChange:s=>L(t=>({...t,totalReceived:parseFloat(s.target.value)||0}))})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Amount Paid (₱)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",value:l.amountPaid,onChange:s=>L(t=>({...t,amountPaid:parseFloat(s.target.value)||0})),placeholder:"Enter amount paid"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Notes"}),e.jsx(g,{value:l.notes,onChange:s=>L(t=>({...t,notes:s.target.value})),placeholder:"Additional notes..."})]})]})]}),e.jsxs(P,{children:[e.jsxs(T,{className:"pb-3 flex flex-row items-center justify-between",children:[e.jsx(R,{className:"text-base",children:"Line Items"}),e.jsxs(x,{size:"sm",variant:"outline",onClick:Os,children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsxs(S,{children:[l.items.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No items added. Click "Add Item" to add line items.'}):e.jsxs(Ie,{children:[e.jsx(ke,{children:e.jsxs(Q,{children:[e.jsx(p,{children:"Item"}),e.jsx(p,{className:"w-24",children:"Qty"}),e.jsx(p,{className:"w-32",children:"Unit Price"}),e.jsx(p,{className:"w-32 text-right",children:"Total"}),e.jsx(p,{className:"w-12"})]})}),e.jsx(Oe,{children:l.items.map((s,t)=>e.jsxs(Q,{children:[e.jsx(u,{children:e.jsxs(me,{value:s.inventoryItemId,onValueChange:a=>Ce(t,"inventoryItemId",a),children:[e.jsx(xe,{children:e.jsx(ue,{placeholder:"Select item"})}),e.jsx(he,{children:z.map(a=>e.jsx(W,{value:a.id,children:a.name},a.id))})]})}),e.jsx(u,{children:e.jsx(g,{type:"number",min:"1",value:s.quantity,onChange:a=>Ce(t,"quantity",a.target.value)})}),e.jsx(u,{children:e.jsx(g,{type:"number",min:"0",step:"0.01",value:s.unitPrice,onChange:a=>Ce(t,"unitPrice",a.target.value)})}),e.jsxs(u,{className:"text-right font-medium",children:["₱",s.totalPrice.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(u,{children:e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>As(t),children:e.jsx(pe,{className:"h-4 w-4 text-destructive"})})})]},t))})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Grand Total:"}),e.jsxs("span",{className:"ml-2 text-xl font-bold",children:["₱",Se.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"SO Balance:"}),e.jsxs("span",{className:J("ml-2 text-xl font-bold",Se-l.totalReceived>0?"text-orange-600":"text-green-600"),children:["₱",(Se-l.totalReceived).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]})]}),e.jsxs(Ze,{children:[e.jsx(x,{variant:"outline",onClick:()=>{fe(!1),qe()},children:"Cancel"}),e.jsx(x,{onClick:kt,children:"Create Sales Order"})]})]})]})]})]})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Qs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{placeholder:"Search SO ID, customer, or items...",value:te,onChange:s=>Ge(s.target.value),className:"pl-10"})]}),e.jsxs(me,{value:re,onValueChange:Ne,children:[e.jsxs(xe,{className:"w-48",children:[e.jsx(ya,{className:"h-4 w-4 mr-2"}),e.jsx(ue,{placeholder:"Filter by status"})]}),e.jsxs(he,{children:[e.jsx(W,{value:"all",children:"All Statuses"}),Ga.map(s=>e.jsx(W,{value:s,children:s},s))]})]}),e.jsxs(x,{variant:$?"default":"outline",size:"sm",onClick:()=>oe(!$),className:$?"bg-orange-500 hover:bg-orange-600 text-white":"",children:[e.jsx(_e,{className:"h-4 w-4 mr-1"}),$?"Viewing Archived":"View Archived"]}),(te||re!=="all"||$)&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:Et,className:"text-muted-foreground",children:[e.jsx(na,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]}),ft&&N&&e.jsx(ba,{selectionCount:ds,onClearSelection:Be,actions:$?[{id:"restore",label:"Restore",icon:e.jsx(Ms,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:Bt},...O?[{id:"permanent-delete",label:"Permanently Delete",icon:e.jsx(pe,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>U(!0)}]:[]]:[{id:"archive",label:"Archive",icon:e.jsx(_e,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:()=>U(!0)}]}),X.length===0?e.jsx(ps,{icon:$?_e:ge,title:$?"No archived sales orders":"No sales orders found",description:$?"Archived sales orders will appear here":te||re!=="all"?"Try adjusting your search or filters":"Create your first sales order to get started",actionLabel:!$&&F?"Create SO":void 0,onAction:!$&&F?()=>fe(!0):void 0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx(wa,{pageItemCount:Ps,totalItemCount:Ds,isAllPagesSelected:vt,show:gt&&Ds>Ps,onSelectAllPages:jt,onClearSelection:Be,itemLabel:"orders"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ie,{children:[e.jsx(ke,{children:e.jsxs(Q,{children:[N&&e.jsx(p,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:pt,ref:s=>{s&&(s.indeterminate=Nt)},onChange:()=>ht(),className:"h-4 w-4"})}),e.jsx(de,{sortKey:"soDate",currentSortKey:H,sortDirection:le("soDate"),onSort:ne,children:"Date"}),e.jsx(de,{sortKey:"id",currentSortKey:H,sortDirection:le("id"),onSort:ne,children:"SO ID"}),e.jsx(p,{children:"Customer ID"}),e.jsx(de,{sortKey:"customerName",currentSortKey:H,sortDirection:le("customerName"),onSort:ne,children:"Customer Name"}),e.jsx(p,{children:"Invoice #"}),e.jsx(p,{children:"Country"}),e.jsx(p,{children:"City"}),e.jsx(de,{sortKey:"totalAmount",currentSortKey:H,sortDirection:le("totalAmount"),onSort:ne,className:"text-right",children:"Total Amount"}),e.jsx(de,{sortKey:"totalReceived",currentSortKey:H,sortDirection:le("totalReceived"),onSort:ne,className:"text-right",children:"Total Received"}),e.jsx(de,{sortKey:"soBalance",currentSortKey:H,sortDirection:le("soBalance"),onSort:ne,className:"text-right",children:"SO Balance"}),e.jsx(de,{sortKey:"receiptStatus",currentSortKey:H,sortDirection:le("receiptStatus"),onSort:ne,children:"Receipt Status"}),e.jsx(de,{sortKey:"shippingStatus",currentSortKey:H,sortDirection:le("shippingStatus"),onSort:ne,children:"Shipping"}),e.jsx(p,{children:"Actions"})]})}),e.jsx(Oe,{children:cs.map(s=>e.jsxs(Q,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>qt(s),children:[N&&e.jsx(u,{onClick:t=>t.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:xt(s.id),onChange:()=>ut(s.id),className:"h-4 w-4"})}),e.jsx(u,{className:"whitespace-nowrap",children:s.soDate??s.createdDate}),e.jsx(u,{className:"font-medium",children:s.id}),e.jsx(u,{className:"text-muted-foreground",children:s.customerId}),e.jsx(u,{children:s.customerName}),e.jsx(u,{className:"text-muted-foreground",children:s.invoiceNumber||"-"}),e.jsx(u,{children:s.customerCountry||"-"}),e.jsx(u,{children:s.customerCity||"-"}),e.jsxs(u,{className:"text-right font-medium",children:["₱",(s.totalAmount??0).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsxs(u,{className:"text-right",children:["₱",(s.totalReceived??0).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(u,{className:"text-right font-medium",children:e.jsxs("span",{className:J((s.soBalance??s.totalAmount??0)>0?"text-orange-600":"text-green-600"),children:["₱",(s.soBalance??s.totalAmount??0).toLocaleString(void 0,{minimumFractionDigits:2})]})}),e.jsx(u,{children:Ye(s.receiptStatus)}),e.jsx(u,{children:e.jsx(K,{variant:s.shippingStatus==="Delivered"?"default":s.shippingStatus==="In Transit"||s.shippingStatus==="Shipped"?"secondary":s.shippingStatus==="Failed"||s.shippingStatus==="Returned"?"destructive":"outline",children:s.shippingStatus??"Pending"})}),e.jsx(u,{onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{size:"sm",variant:"outline",onClick:()=>Is(s),title:"View Details",children:e.jsx(la,{className:"h-4 w-4"})}),$?e.jsx(x,{size:"sm",variant:"outline",onClick:()=>Ft(s.id),title:"Restore",children:e.jsx(Ms,{className:"h-4 w-4"})}):e.jsx(x,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>Rt(s.id),title:"Archive",children:e.jsx(_e,{className:"h-4 w-4"})})]})})]},s.id))})]})})]}),e.jsx($s,{currentPage:Ss,totalPages:ct,itemsPerPage:ot,onPageChange:dt,totalItems:mt})]}),r&&e.jsx($e,{open:!!r,onOpenChange:s=>{s||(h(null),qe())},children:e.jsxs(Ee,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Me,{children:[e.jsxs(ze,{children:["Edit Sales Order - ",r]}),e.jsx(Ve,{children:"Update sales order details"})]}),e.jsx("div",{className:"space-y-6 py-4",children:(()=>{const s=we.find(t=>t.id===r);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Receipt Status:"}),s&&Ye(s.receiptStatus),e.jsx("span",{className:"text-sm text-muted-foreground ml-4",children:"Shipping:"}),e.jsx(K,{variant:s?.shippingStatus==="Delivered"?"default":s?.shippingStatus==="In Transit"||s?.shippingStatus==="Shipped"?"secondary":s?.shippingStatus==="Failed"||s?.shippingStatus==="Returned"?"destructive":"outline",children:s?.shippingStatus??"Pending"})]}),e.jsxs(P,{children:[e.jsx(T,{className:"pb-3",children:e.jsx(R,{className:"text-base",children:"Sales Order Information"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"SO Date"}),e.jsx(g,{type:"date",value:l.soDate,onChange:t=>L(a=>({...a,soDate:t.target.value})),disabled:m,className:m?"bg-muted":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Customer"}),m?e.jsx(g,{value:l.customerName||n?.displayName||n?.email||"Customer",disabled:!0,className:"bg-muted"}):e.jsxs(me,{value:l.customerId,onValueChange:Ts,children:[e.jsx(xe,{children:e.jsx(ue,{placeholder:"Select customer"})}),e.jsx(he,{children:D.map(t=>e.jsx(W,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Customer ID"}),e.jsx(g,{value:l.customerId,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Country"}),e.jsx(g,{value:l.customerCountry,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"City"}),e.jsx(g,{value:l.customerCity,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Invoice #"}),e.jsx(g,{value:l.invoiceNumber,onChange:t=>L(a=>({...a,invoiceNumber:t.target.value})),disabled:m,className:m?"bg-muted":""})]})]}),!m&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Expected Delivery Date"}),e.jsx(g,{type:"date",value:l.expectedDeliveryDate,onChange:t=>L(a=>({...a,expectedDeliveryDate:t.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Total Received (₱)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",value:l.totalReceived,onChange:t=>L(a=>({...a,totalReceived:parseFloat(t.target.value)||0}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Shipping Status"}),e.jsxs(me,{value:l.shippingStatus,onValueChange:t=>L(a=>({...a,shippingStatus:t})),children:[e.jsx(xe,{children:e.jsx(ue,{})}),e.jsx(he,{children:Qa.map(t=>e.jsx(W,{value:t,children:t},t))})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Amount Paid (₱)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",value:l.amountPaid,onChange:t=>L(a=>({...a,amountPaid:parseFloat(t.target.value)||0})),placeholder:"Enter amount paid"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Notes"}),e.jsx(g,{value:l.notes,onChange:t=>L(a=>({...a,notes:t.target.value})),placeholder:"Optional notes..."})]})]})]}),e.jsxs(P,{children:[e.jsxs(T,{className:"pb-3 flex flex-row items-center justify-between",children:[e.jsx(R,{className:"text-base",children:"Line Items"}),e.jsxs(x,{size:"sm",variant:"outline",onClick:Os,children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsxs(S,{children:[l.items.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No items added."}):e.jsxs(Ie,{children:[e.jsx(ke,{children:e.jsxs(Q,{children:[e.jsx(p,{children:"Item"}),e.jsx(p,{className:"w-24",children:"Qty"}),e.jsx(p,{className:"w-32",children:"Unit Price"}),e.jsx(p,{className:"w-32 text-right",children:"Total"}),e.jsx(p,{className:"w-12"})]})}),e.jsx(Oe,{children:l.items.map((t,a)=>e.jsxs(Q,{children:[e.jsx(u,{children:e.jsxs(me,{value:t.inventoryItemId,onValueChange:o=>Ce(a,"inventoryItemId",o),children:[e.jsx(xe,{children:e.jsx(ue,{placeholder:"Select item"})}),e.jsx(he,{children:z.map(o=>e.jsx(W,{value:o.id,children:o.name},o.id))})]})}),e.jsx(u,{children:e.jsx(g,{type:"number",min:"1",value:t.quantity,onChange:o=>Ce(a,"quantity",o.target.value)})}),e.jsx(u,{children:e.jsx(g,{type:"number",min:"0",step:"0.01",value:t.unitPrice,onChange:o=>Ce(a,"unitPrice",o.target.value)})}),e.jsxs(u,{className:"text-right font-medium",children:["₱",t.totalPrice.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(u,{children:e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>As(a),children:e.jsx(pe,{className:"h-4 w-4 text-destructive"})})})]},a))})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Grand Total:"}),e.jsxs("span",{className:"ml-2 text-xl font-bold",children:["₱",Se.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"SO Balance:"}),e.jsxs("span",{className:J("ml-2 text-xl font-bold",Se-l.totalReceived>0?"text-orange-600":"text-green-600"),children:["₱",(Se-l.totalReceived).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]})]}),e.jsxs(Ze,{className:"gap-2",children:[N&&e.jsxs(x,{variant:"destructive",onClick:()=>Tt(r),children:[e.jsx(pe,{className:"h-4 w-4 mr-1"}),"Delete"]}),e.jsx(x,{variant:"outline",onClick:()=>{h(null),qe()},children:"Cancel"}),e.jsx(x,{onClick:()=>At(r),children:"Save Changes"})]})]})})()})]})})]})]}),e.jsx($e,{open:I,onOpenChange:U,children:e.jsxs(Ee,{className:"max-w-md",children:[e.jsxs(Me,{children:[e.jsxs(ze,{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-5 w-5 text-destructive"}),"Delete ",ds," Sales Order",ds!==1?"s":""]}),e.jsx(Ve,{children:$?"These sales orders are already archived. This action will permanently remove them from the system.":"Choose how you want to delete the selected sales orders:"})]}),$?e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(pe,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This cannot be undone. All data will be permanently removed."})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(x,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),e.jsx(x,{variant:"destructive",onClick:Rs,children:"Permanently Delete All"})]})]}):e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border rounded-md hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_e,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Archive"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Move to archive. Sales orders can be restored later."})]}),e.jsx(x,{variant:"secondary",size:"sm",onClick:Lt,children:"Archive"})]})}),O&&e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(pe,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Delete Permanently"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be undone. Data will be permanently removed."})]}),e.jsx(x,{variant:"destructive",size:"sm",onClick:Rs,children:"Delete"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(x,{variant:"outline",onClick:()=>U(!1),children:"Cancel"})})]})]})})]})}export{yr as SalesOrdersView};
