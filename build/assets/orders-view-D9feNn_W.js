import{F as Ss,i as Ds,r as n,G as ws,a7 as Cs,a8 as Pe,J as c,a9 as Os,aa as ks,j as e,C as v,m as M,n as U,S as Ae,o as N,W as Fs,d as A,t as O,s as Ts,D as Ie,X as Be,B as y,v as Ee,w as Le,x as $e,y as Ke,L as p,I as b,z as Ve,Z as Ps,Y as ae,ab as As,_ as Re,$ as Is,ac as Bs,ad as Es}from"./index-BLGqWry5.js";import{S as le,a as ne,b as ie,c as de,d as Y,T as Me,e as Ls,f as $s,g as Ue,h as He,i as L,j as Ks,k}from"./sortable-table-head-B9kVZBaL.js";import{u as Vs,a as Rs,P as Ms,F as Us,B as Hs,b as qs,T as zs,E as Gs,d as qe,c as Ys}from"./editable-cell-BZajczmv.js";import{D as Ws}from"./date-range-filter-CJJP2GYU.js";import{S as Xs,F as _s}from"./save-search-dialog-B7k2G7Vc.js";import{u as Js}from"./useTableSort-BklVnTEt.js";import{c as Zs}from"./permissions-BqDqHH54.js";import{D as Qs}from"./dollar-sign-P9gxf_Dd.js";import{T as et}from"./trending-up-C0CSjYAC.js";import{S as st}from"./star-DSN5bCqa.js";import"./skeleton-C2Epv68x.js";import"./calendar-B2cGvycC.js";const oe=["Pending","Processing","Shipped","Delivered"];function gt({initialOpenDialog:ce,onDialogOpened:ue}){const{isFavorite:me,getFavoritesByType:he}=Ss(),{user:xe}=Ds(),F=xe?Zs(xe.role):!1,[T,W]=n.useState(""),[d,P]=n.useState("all"),[u,H]=n.useState(""),[m,q]=n.useState(""),[S,X]=n.useState(!1),[ge,D]=n.useState(null),[ze,fe]=n.useState(!0),[$,K]=n.useState(!1),[_,z]=n.useState(null),[a,g]=n.useState({id:"",customer:"",items:"",total:"",status:"Pending",date:""}),J=ws(T,300);n.useEffect(()=>{(async()=>{fe(!0);const s=await Cs();D(s),fe(!1)})()},[]),n.useEffect(()=>{ce&&!$&&(K(!0),ue?.())},[ce,ue,$]);const h=n.useMemo(()=>ge??[],[ge]),x=n.useMemo(()=>{const s=h.length,r=h.filter(l=>l.status==="Pending").length,t=h.filter(l=>l.status==="Processing").length,o=h.filter(l=>l.status==="Shipped").length,f=h.filter(l=>l.status==="Delivered").length,C=l=>{const i=l.replace(/[â‚±,\s]/g,"");return parseFloat(i)||0},R=h.reduce((l,i)=>l+C(i.total),0),hs=s>0?R/s:0,Fe=new Date,xs=new Date(Fe.getTime()-10080*60*1e3),Te=new Date(Fe.getTime()-720*60*60*1e3),gs=h.filter(l=>{try{return new Date(l.date)>=xs}catch{return!1}}).length,fs=h.filter(l=>{try{return new Date(l.date)>=Te}catch{return!1}}).length,ps=h.filter(l=>{try{return new Date(l.date)>=Te}catch{return!1}}).reduce((l,i)=>l+C(i.total),0),js=h.reduce((l,i)=>(l[i.customer]=(l[i.customer]||0)+1,l),{}),vs=Object.entries(js).sort((l,i)=>i[1]-l[1]).slice(0,5).map(([l,i])=>({name:l,count:i})),Ns=h.reduce((l,i)=>(l[i.customer]=(l[i.customer]||0)+C(i.total),l),{}),re=Object.entries(Ns).sort((l,i)=>i[1]-l[1])[0],ys=s>0?Math.round(f/s*100):0,bs=t+o;return{totalOrders:s,pendingOrders:r,processingOrders:t,shippedOrders:o,deliveredOrders:f,inProgressOrders:bs,totalRevenue:R,averageOrderValue:hs,recentOrders7Days:gs,recentOrders30Days:fs,recentRevenue:ps,topCustomers:vs,topCustomerByValue:re?{name:re[0],value:re[1]}:null,fulfillmentRate:ys}},[h]),Z=n.useMemo(()=>h.filter(s=>{if(S&&!me("orders",s.id)||d!=="all"&&s.status!==d)return!1;if(J){const r=J.toLowerCase();if(!(s.id.toLowerCase().includes(r)||s.customer.toLowerCase().includes(r)))return!1}if(u||m)try{const r=new Date(s.date);if(u){const t=new Date(u);if(r<t)return!1}if(m){const t=new Date(m);if(t.setHours(23,59,59,999),r>t)return!1}}catch{return!1}return!0}),[h,J,d,u,m,S,me]),Ge=n.useCallback(s=>{s.searchTerm&&W(s.searchTerm),s.filters.fromDate&&typeof s.filters.fromDate=="string"&&H(s.filters.fromDate),s.filters.toDate&&typeof s.filters.toDate=="string"&&q(s.filters.toDate),s.filters.favoritesOnly==="true"&&X(!0)},[]),Ye=n.useMemo(()=>{const s={};return d!=="all"&&(s.status=d),u&&(s.fromDate=u),m&&(s.toDate=m),S&&(s.favoritesOnly="true"),s},[d,u,m,S]),{sortedData:We,sortConfig:I,requestSort:B,getSortDirection:E}=Js(Z),{currentPage:pe,totalPages:Xe,paginatedData:je,goToPage:_e,totalItems:Je,itemsPerPage:Ze}=Vs(We,25),{selectedIds:G,selectedItems:ve,selectionCount:Ne,isAllSelected:Qe,isPartiallySelected:es,hasSelection:Q,toggleItem:ss,toggleAll:ee,deselectAll:j,isSelected:ts}=Rs(je),[ye,be]=n.useState(!1),[rs,Se]=n.useState(!1),[as,se]=n.useState(!1),[tt,ls]=n.useState(!1);n.useEffect(()=>{j()},[pe,j]),n.useEffect(()=>{const s=r=>{(r.metaKey||r.ctrlKey)&&r.key==="a"&&!$&&!_&&(r.preventDefault(),ee()),r.key==="Escape"&&Q&&j()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[ee,j,Q,$,_]);function te(){g({id:"",customer:"",items:"",total:"",status:"Pending",date:new Date().toISOString().split("T")[0]})}function De(){H(""),q("")}function ns(){W(""),P("all"),H(""),q(""),X(!1)}function we(){return a.customer.trim()?(typeof a.total=="string"?a.total.trim():String(a.total))?a.date.trim()?(Number(a.items)||0)<0?"Items cannot be negative":null:"Date is required":"Total is required":"Customer is required"}const Ce=s=>{const r=String(s).trim();return`â‚±${(parseFloat(r.replace(/[â‚±,\s]/g,""))||0).toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`};async function is(){const s=we();if(s){c.error(s);return}try{const r=Number(a.items)||0,t=Ce(a.total),o=await Bs({customer:a.customer,items:r,total:t,status:a.status,date:a.date});D(f=>[o,...f??[]]),K(!1),te(),c.success("Order created successfully")}catch(r){c.error(r?.message||"Failed to create order")}}async function ds(){const s=we();if(s){c.error(s);return}if(!a.id){c.error("Missing order id");return}try{const r=Number(a.items)||0,t=Ce(a.total),o=await Pe({id:a.id,customer:a.customer,items:r,total:t,status:a.status,date:a.date});D(f=>(f??[]).map(C=>C.id===o.id?o:C)),z(null),c.success("Order updated successfully")}catch(r){c.error(r?.message||"Failed to update order")}}async function os(s){try{await Es(s),D(r=>(r??[]).filter(t=>t.id!==s)),z(null),c.success("Order deleted successfully")}catch(r){c.error(r?.message||"Failed to delete order")}}const Oe=n.useCallback(async(s,r,t)=>{try{const o={[r]:t},f=await Pe({id:s,...o});D(C=>(C??[]).map(R=>R.id===s?f:R)),c.success(`${r.charAt(0).toUpperCase()+r.slice(1)} updated`)}catch(o){throw c.error(o?.message||"Failed to update"),o}},[D]),V=s=>{switch(s){case"Delivered":return"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-200";case"Shipped":return"bg-blue-500/15 text-blue-700 dark:text-blue-400 border-blue-200";case"Processing":return"bg-amber-500/15 text-amber-700 dark:text-amber-400 border-amber-200";case"Pending":return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200";default:return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200"}},w=s=>{switch(s){case"Delivered":return"âœ“";case"Shipped":return"ðŸšš";case"Processing":return"â³";case"Pending":return"â—‹";default:return"â—‹"}},ke=s=>`â‚±${s.toLocaleString("en-PH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,cs=n.useCallback(async()=>{be(!0);try{const s=Array.from(G),r=await Os(s);D(t=>t?.filter(o=>!s.includes(o.id))??[]),r.failedCount>0?c.warning(`Deleted ${r.successCount} orders. ${r.failedCount} failed.`):c.success(`Successfully deleted ${r.successCount} order${r.successCount!==1?"s":""}`),j()}catch(s){c.error(s?.message||"Failed to delete orders")}finally{be(!1),se(!1)}},[G,j]),us=n.useCallback(async s=>{Se(!0);try{const r=Array.from(G),t=await ks(r,s);D(o=>o&&o.map(f=>r.includes(f.id)?{...f,status:s}:f)),t.failedCount>0?c.warning(`Updated ${t.successCount} orders. ${t.failedCount} failed.`):c.success(`Successfully updated ${t.successCount} order${t.successCount!==1?"s":""}`),j()}catch(r){c.error(r?.message||"Failed to update orders")}finally{Se(!1),ls(!1)}},[G,j]),ms=n.useMemo(()=>ve.map(s=>`${s.id} - ${s.customer}`),[ve]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(v,{className:"relative overflow-hidden",children:[e.jsxs(M,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold",children:x.totalOrders}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[x.recentOrders7Days," new this week"]})]})]}),e.jsxs(v,{className:"relative overflow-hidden",children:[e.jsxs(M,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx(Qs,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:ke(x.totalRevenue)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Avg: ",ke(x.averageOrderValue)," per order"]})]})]}),e.jsxs(v,{className:"relative overflow-hidden",children:[e.jsxs(M,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Pending Orders"}),e.jsx(Fs,{className:"h-4 w-4 text-amber-600"})]}),e.jsxs(N,{children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:x.pendingOrders}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[x.processingOrders," processing, ",x.shippedOrders," shipped"]})]})]}),e.jsxs(v,{className:"relative overflow-hidden",children:[e.jsxs(M,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Fulfillment Rate"}),e.jsx(et,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[x.fulfillmentRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[x.deliveredOrders," delivered of ",x.totalOrders," total"]})]})]})]}),e.jsxs("div",{className:"grid gap-3 grid-cols-2 md:grid-cols-4",children:[e.jsx(v,{className:A("cursor-pointer transition-all hover:shadow-md border-l-4",d==="Pending"?"ring-2 ring-primary":"","border-l-slate-400"),onClick:()=>P(d==="Pending"?"all":"Pending"),children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:x.pendingOrders})]}),e.jsx(O,{variant:"outline",className:V("Pending"),children:w("Pending")})]})})}),e.jsx(v,{className:A("cursor-pointer transition-all hover:shadow-md border-l-4",d==="Processing"?"ring-2 ring-primary":"","border-l-amber-400"),onClick:()=>P(d==="Processing"?"all":"Processing"),children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Processing"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:x.processingOrders})]}),e.jsx(O,{variant:"outline",className:V("Processing"),children:w("Processing")})]})})}),e.jsx(v,{className:A("cursor-pointer transition-all hover:shadow-md border-l-4",d==="Shipped"?"ring-2 ring-primary":"","border-l-blue-400"),onClick:()=>P(d==="Shipped"?"all":"Shipped"),children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Shipped"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:x.shippedOrders})]}),e.jsx(O,{variant:"outline",className:V("Shipped"),children:w("Shipped")})]})})}),e.jsx(v,{className:A("cursor-pointer transition-all hover:shadow-md border-l-4",d==="Delivered"?"ring-2 ring-primary":"","border-l-emerald-400"),onClick:()=>P(d==="Delivered"?"all":"Delivered"),children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Delivered"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:x.deliveredOrders})]}),e.jsx(O,{variant:"outline",className:V("Delivered"),children:w("Delivered")})]})})})]}),e.jsxs(v,{children:[e.jsx(M,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-xl",children:"Order Management"}),e.jsx(Ts,{className:"mt-1",children:"Manage and track all customer orders"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(Ie,{open:$,onOpenChange:s=>{K(s),s||te()},children:[e.jsx(Be,{asChild:!0,children:e.jsxs(y,{onClick:()=>te(),disabled:!F,title:F?void 0:"You don't have permission to add orders",children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),"Add Order"]})}),e.jsxs(Ee,{className:"sm:max-w-[500px]",children:[e.jsxs(Le,{children:[e.jsx($e,{children:"Create New Order"}),e.jsx(Ke,{children:"Enter the details for the new customer order."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"customer",children:"Customer Name *"}),e.jsx(b,{id:"customer",placeholder:"Enter customer name",value:a.customer,onChange:s=>g({...a,customer:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"items",children:"Number of Items"}),e.jsx(b,{id:"items",type:"number",min:"0",placeholder:"0",value:a.items,onChange:s=>g({...a,items:s.target.value===""?"":s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"total",children:"Order Total (â‚±) *"}),e.jsx(b,{id:"total",type:"number",min:"0",step:"0.01",placeholder:"0.00",value:a.total,onChange:s=>g({...a,total:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"status",children:"Order Status"}),e.jsxs(le,{value:a.status,onValueChange:s=>g({...a,status:s}),children:[e.jsx(ne,{children:e.jsx(ie,{placeholder:"Select status"})}),e.jsx(de,{children:oe.map(s=>e.jsx(Y,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:w(s)}),s]})},s))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"date",children:"Order Date *"}),e.jsx(b,{id:"date",type:"date",value:a.date,onChange:s=>g({...a,date:s.target.value})})]})]})]}),e.jsxs(Ve,{children:[e.jsx(y,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),e.jsx(y,{onClick:is,children:"Create Order"})]})]})]})})]})}),e.jsxs(N,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ps,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(b,{placeholder:"Search by order ID or customer name...",value:T,onChange:s=>W(s.target.value),className:"pl-9"})]}),e.jsxs(le,{value:d,onValueChange:P,children:[e.jsxs(ne,{className:"w-full sm:w-[180px]",children:[e.jsx(Us,{className:"h-4 w-4 mr-2"}),e.jsx(ie,{placeholder:"Filter by status"})]}),e.jsxs(de,{children:[e.jsx(Y,{value:"all",children:"All Statuses"}),oe.map(s=>e.jsx(Y,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:w(s)}),s]})},s))]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(Ws,{fromDate:u,toDate:m,onFromDateChange:H,onToDateChange:q,onClear:De,label:"Filter by Order Date"}),e.jsxs(y,{variant:S?"default":"outline",size:"sm",onClick:()=>X(!S),className:"gap-1",children:[e.jsx(st,{className:A("h-4 w-4",S&&"fill-current")}),"Favorites",he("orders").length>0&&e.jsx(O,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:he("orders").length})]}),e.jsx(Xs,{entityType:"orders",currentSearchTerm:T,currentFilters:Ye,onApplySearch:Ge}),(T||d!=="all"||u||m||S)&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:ns,className:"text-muted-foreground hover:text-foreground",children:[e.jsx(ae,{className:"h-4 w-4 mr-1"}),"Clear All"]})]}),(d!=="all"||u||m)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[d!=="all"&&e.jsxs(O,{variant:"secondary",className:"gap-1",children:["Status: ",d,e.jsx("button",{onClick:()=>P("all"),className:"ml-1 hover:bg-secondary-foreground/20 rounded-full p-0.5",children:e.jsx(ae,{className:"h-3 w-3"})})]}),(u||m)&&e.jsxs(O,{variant:"secondary",className:"gap-1",children:["Date: ",u||"..."," to ",m||"...",e.jsx("button",{onClick:De,className:"ml-1 hover:bg-secondary-foreground/20 rounded-full p-0.5",children:e.jsx(ae,{className:"h-3 w-3"})})]})]})]}),Q&&F&&e.jsx(Hs,{selectionCount:Ne,onClearSelection:j,isLoading:ye||rs,actions:[{id:"delete",label:"Delete",icon:e.jsx(Me,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>se(!0)}],actionGroups:[{id:"status-update",label:"Update Status",icon:e.jsx(As,{className:"h-4 w-4 mr-1"}),options:[{value:"Pending",label:"Pending"},{value:"Processing",label:"Processing"},{value:"Shipped",label:"Shipped"},{value:"Delivered",label:"Delivered"}],onSelect:s=>us(s)}],className:"mb-4"}),e.jsx(qs,{open:as,onOpenChange:se,itemCount:Ne,itemType:"order",itemNames:ms,onConfirm:cs,isLoading:ye}),ze?e.jsx(zs,{rows:8}):Z.length===0?e.jsx(Gs,{icon:Ae,title:"No orders found",description:T||u||m?"Try adjusting your search or date filters":"Get started by creating your first order",actionLabel:T||u||m?void 0:"Create Order",onAction:T||u||m?void 0:()=>K(!0)}):e.jsxs("div",{className:"rounded-md border",children:[e.jsxs(Ls,{children:[e.jsx($s,{children:e.jsxs(Ue,{children:[e.jsx(He,{className:"w-12",children:e.jsx(Re,{checked:Qe,ref:s=>{s&&(s.indeterminate=es)},onCheckedChange:ee,"aria-label":"Select all orders"})}),e.jsx(L,{sortKey:"id",currentSortKey:I.key,sortDirection:E("id"),onSort:s=>B(s),children:"Order ID"}),e.jsx(L,{sortKey:"customer",currentSortKey:I.key,sortDirection:E("customer"),onSort:s=>B(s),children:"Customer"}),e.jsx(L,{sortKey:"items",currentSortKey:I.key,sortDirection:E("items"),onSort:s=>B(s),children:"Items"}),e.jsx(L,{sortKey:"total",currentSortKey:I.key,sortDirection:E("total"),onSort:s=>B(s),children:"Total"}),e.jsx(L,{sortKey:"status",currentSortKey:I.key,sortDirection:E("status"),onSort:s=>B(s),children:"Status"}),e.jsx(L,{sortKey:"date",currentSortKey:I.key,sortDirection:E("date"),onSort:s=>B(s),children:"Date"}),e.jsx(He,{children:"Actions"})]})}),e.jsx(Ks,{children:je.map(s=>{const r=ts(s.id);return e.jsxs(Ue,{className:A("transition-colors hover:bg-muted/50",r&&"bg-primary/5 hover:bg-primary/10"),children:[e.jsx(k,{children:e.jsx(Re,{checked:r,onCheckedChange:()=>ss(s.id),"aria-label":`Select order ${s.id}`})}),e.jsx(k,{children:e.jsx("span",{className:"font-mono text-sm font-medium",children:s.id})}),e.jsx(k,{children:e.jsx(qe,{value:s.customer,type:"text",onSave:t=>Oe(s.id,"customer",t),disabled:!F})}),e.jsx(k,{children:e.jsx(qe,{value:s.items,type:"number",min:0,step:1,onSave:t=>Oe(s.id,"items",t),disabled:!F})}),e.jsx(k,{children:e.jsx("span",{className:"font-medium text-emerald-600",children:s.total})}),e.jsx(k,{children:e.jsxs(O,{variant:"outline",className:A("font-medium border transition-colors",V(s.status)),children:[e.jsx("span",{className:"mr-1",children:w(s.status)}),s.status]})}),e.jsx(k,{children:e.jsx("span",{className:"text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-PH",{year:"numeric",month:"short",day:"numeric"})})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_s,{entityType:"orders",entityId:s.id,entityName:`${s.id} - ${s.customer}`}),e.jsxs(Ie,{open:_===s.id,onOpenChange:t=>{z(t?s.id:null),t&&g({...s})},children:[e.jsx(Be,{asChild:!0,children:e.jsx(y,{variant:"ghost",size:"sm",disabled:!F,title:F?void 0:"You don't have permission to edit orders",children:e.jsx(Is,{className:"h-4 w-4"})})}),e.jsxs(Ee,{className:"sm:max-w-[500px]",children:[e.jsxs(Le,{children:[e.jsx($e,{children:"Edit Order"}),e.jsxs(Ke,{children:["Order ID: ",e.jsx("span",{className:"font-mono font-medium",children:s.id})]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"edit-customer",children:"Customer Name"}),e.jsx(b,{id:"edit-customer",value:a.customer,onChange:t=>g({...a,customer:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"edit-items",children:"Number of Items"}),e.jsx(b,{id:"edit-items",type:"number",min:"0",value:a.items,onChange:t=>g({...a,items:t.target.value===""?"":t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"edit-total",children:"Order Total (â‚±)"}),e.jsx(b,{id:"edit-total",type:"number",min:"0",step:"0.01",value:typeof a.total=="string"?a.total.replace(/[â‚±,\s]/g,""):a.total,onChange:t=>g({...a,total:t.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"edit-status",children:"Order Status"}),e.jsxs(le,{value:a.status,onValueChange:t=>g({...a,status:t}),children:[e.jsx(ne,{children:e.jsx(ie,{placeholder:"Select status"})}),e.jsx(de,{children:oe.map(t=>e.jsx(Y,{value:t,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:w(t)}),t]})},t))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(p,{htmlFor:"edit-date",children:"Order Date"}),e.jsx(b,{id:"edit-date",type:"date",value:a.date,onChange:t=>g({...a,date:t.target.value})})]})]})]}),e.jsxs(Ve,{className:"flex-col sm:flex-row gap-2",children:[e.jsxs(y,{variant:"destructive",onClick:()=>os(s.id),className:"sm:mr-auto",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Delete Order"]}),e.jsx(y,{variant:"outline",onClick:()=>z(null),children:"Cancel"}),e.jsx(y,{onClick:ds,children:"Save Changes"})]})]})]})]})})]},s.id)})})]}),Z.length>0&&e.jsx(Ys,{currentPage:pe,totalPages:Xe,onPageChange:_e,itemsPerPage:Ze,totalItems:Je})]})]})]})]})}export{gt as OrdersView};
