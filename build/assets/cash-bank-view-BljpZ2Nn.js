import{i as xs,r as i,V as js,j as e,B as l,D as ne,a3 as ge,E as re,F as ce,G as oe,H as ie,K as Ce,C as B,q as F,s as O,t as L,L as be,a5 as vs,J as C,d as De,n as ys,m as ps,aE as Ns,A as o,I as y,bj as fs,bk as gs,bl as Cs,z as bs,bm as Ds,bn as Ss,bo as ws,bp as Ts,bq as ks}from"./index-xwWdscAO.js";import{g as Is,h as le}from"./permissions-DeuZZz56.js";import{u as As,a as Ps,P as Rs,F as Ms,B as Bs,T as Fs,E as Os,S as Ls,b as Es}from"./select-all-banner-CHI-SY1G.js";import{S as q,a as _,b as W,c as G,d as E,T as J,e as Ks,f as Vs,g as Se,h as we,i as p,j as $s,k as h}from"./sortable-table-head-DzJRvkfG.js";import{u as zs,D as Hs,P as Us}from"./printable-receipt-D7YqAPxX.js";import{D as qs}from"./dollar-sign-DvGksN1a.js";import{B as _s,C as Ws}from"./credit-card-nCmh96zF.js";import{a as de,A as Y}from"./archive-CTUkrPI_.js";import{C as Gs}from"./circle-alert-B2xUnS4e.js";import"./skeleton-DhpkY8tQ.js";const Te=["Cash","Bank Transfer","Credit Card","Check","Online Payment"],K=I=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(I);function rt(){const{user:I}=xs(),A=I?Is(I.id):"Viewer",Q=le(A,"purchase_orders:create"),ke=le(A,"purchase_orders:update"),Ie=le(A,"purchase_orders:delete"),X=A==="Owner"||A==="Admin",{printReceipt:Ae}=zs(),[Pe,N]=i.useState(null),[me,Re]=i.useState([]),[Z,Me]=i.useState([]),[Be,Fe]=i.useState(!0),[ue,Oe]=i.useState(""),D=js(ue,300),[V,Le]=i.useState("all"),[m,Ee]=i.useState(!1),[Ke,$]=i.useState(!1),[Ve,z]=i.useState(null),[$e,P]=i.useState(!1),[d,he]=i.useState(null),[R,ee]=i.useState("asc"),[a,f]=i.useState({trxDate:new Date().toISOString().split("T")[0],customerId:"",customerName:"",country:"",city:"",soId:"",invoiceNumber:"",paymentMode:"Cash",amountReceived:0,notes:""});i.useEffect(()=>{(async()=>{try{const[t,n,r]=await Promise.all([ys(),ps(),Ns()]);N(t),Re(n),Me(r)}catch{o.error("Failed to load data")}finally{Fe(!1)}})()},[]);const H=Pe??[],M=i.useMemo(()=>H.filter(s=>{const t=s.archived===!0;if(m!==t)return!1;const n=!D||s.id.toLowerCase().includes(D.toLowerCase())||s.customerName.toLowerCase().includes(D.toLowerCase())||s.soId.toLowerCase().includes(D.toLowerCase())||s.invoiceNumber.toLowerCase().includes(D.toLowerCase()),r=V==="all"||s.paymentMode===V;return n&&r}),[H,D,V,m]),xe=i.useMemo(()=>d?[...M].sort((s,t)=>{const n=s[d],r=t[d];if(n==null&&r==null)return 0;if(n==null)return 1;if(r==null)return-1;if(typeof n=="number"&&typeof r=="number")return R==="asc"?n-r:r-n;const b=String(n).toLowerCase(),g=String(r).toLowerCase();return R==="asc"?b.localeCompare(g):g.localeCompare(b)}):M,[M,d,R]),{currentPage:ze,totalPages:He,paginatedData:se,goToPage:Ue,itemsPerPage:qe,totalItems:_e}=As(xe,10),{selectedIds:S,isSelected:je,toggleItem:We,toggleAll:Ge,selectAllPages:Je,deselectAll:w,isAllSelected:Ye,isAllPageSelected:Qe,isAllPagesSelected:Xe,isPartiallySelected:Ze,selectionCount:T,hasSelection:es,totalItemCount:ve,pageItemCount:ye}=Ps(se,xe),k=i.useMemo(()=>{const s=H.filter(c=>!c.archived),t=s.length,n=s.reduce((c,x)=>c+x.amountReceived,0),r=s.filter(c=>c.paymentMode==="Cash").reduce((c,x)=>c+x.amountReceived,0),b=s.filter(c=>c.paymentMode==="Bank Transfer").reduce((c,x)=>c+x.amountReceived,0),g=s.filter(c=>c.paymentMode==="Credit Card").reduce((c,x)=>c+x.amountReceived,0),u=s.filter(c=>c.paymentMode==="Check").reduce((c,x)=>c+x.amountReceived,0),te=s.filter(c=>c.paymentMode==="Online Payment").reduce((c,x)=>c+x.amountReceived,0),ae=new Date;ae.setDate(ae.getDate()-7);const hs=s.filter(c=>new Date(c.createdAt)>=ae).length;return{totalTransactions:t,totalAmount:n,cashTotal:r,bankTotal:b,cardTotal:g,checkTotal:u,onlineTotal:te,newThisWeek:hs,avgTransactionAmount:t>0?n/t:0}},[H]),j=s=>{const t=s;d===t?R==="asc"?ee("desc"):(he(null),ee("asc")):(he(t),ee("asc"))},v=s=>d===s?R:null,ss=s=>{const t={Cash:{variant:"default",className:"bg-green-500"},"Bank Transfer":{variant:"outline",className:"border-blue-500 text-blue-600"},"Credit Card":{variant:"outline",className:"border-purple-500 text-purple-600"},Check:{variant:"outline",className:"border-orange-500 text-orange-600"},"Online Payment":{variant:"outline",className:"border-cyan-500 text-cyan-600"}},{variant:n,className:r}=t[s];return e.jsx(bs,{variant:n,className:De("gap-1",r),children:s})},U=()=>{f({trxDate:new Date().toISOString().split("T")[0],customerId:"",customerName:"",country:"",city:"",soId:"",invoiceNumber:"",paymentMode:"Cash",amountReceived:0,notes:""})},ts=s=>{const t=Z.find(n=>n.id===s);f(n=>({...n,customerId:s,customerName:t?.name??"",country:t?.country??"",city:t?.city??""}))},as=s=>{const t=me.find(n=>n.id===s);if(t){const n=Z.find(r=>r.id===t.customerId);f(r=>({...r,soId:s,customerId:t.customerId,customerName:t.customerName,country:n?.country??t.customerCountry??"",city:n?.city??t.customerCity??"",invoiceNumber:t.invoiceNumber??""}))}},ns=async()=>{if(!a.customerId||!a.soId||a.amountReceived<=0){o.error("Please fill in all required fields");return}try{const s=await fs({trxDate:a.trxDate,customerId:a.customerId,customerName:a.customerName,country:a.country,city:a.city,soId:a.soId,invoiceNumber:a.invoiceNumber,paymentMode:a.paymentMode,amountReceived:a.amountReceived,notes:a.notes,createdBy:I?.id??"1"});N(t=>[s,...t??[]]),o.success(`Transaction ${s.id} created successfully`),$(!1),U()}catch(s){o.error(s instanceof Error?s.message:"Failed to create transaction")}},rs=async s=>{if(!a.customerId||!a.soId||a.amountReceived<=0){o.error("Please fill in all required fields");return}try{const t=await ws({id:s,trxDate:a.trxDate,customerId:a.customerId,customerName:a.customerName,country:a.country,city:a.city,soId:a.soId,invoiceNumber:a.invoiceNumber,paymentMode:a.paymentMode,amountReceived:a.amountReceived,notes:a.notes});N(n=>n?.map(r=>r.id===s?t:r)??[]),o.success(`Transaction ${s} updated successfully`),z(null),U()}catch(t){o.error(t instanceof Error?t.message:"Failed to update transaction")}},cs=async s=>{try{const t=await Ts(s);N(n=>n?.map(r=>r.id===s?t:r)??[]),o.success(`Transaction ${s} archived`)}catch(t){o.error(t instanceof Error?t.message:"Failed to archive transaction")}},os=async s=>{try{const t=await Ds(s);N(n=>n?.map(r=>r.id===s?t:r)??[]),o.success(`Transaction ${s} restored`)}catch(t){o.error(t instanceof Error?t.message:"Failed to restore transaction")}},is=async s=>{try{await Ss(s),N(t=>t?.filter(n=>n.id!==s)??[]),o.success(`Transaction ${s} permanently deleted`)}catch(t){o.error(t instanceof Error?t.message:"Failed to delete transaction")}},pe=async()=>{try{await Cs(Array.from(S)),N(s=>s?.map(t=>S.has(t.id)?{...t,archived:!0,archivedAt:new Date().toISOString()}:t)??[]),o.success(`${T} transactions archived`),w()}catch{o.error("Failed to archive transactions")}},ls=async()=>{try{await gs(Array.from(S)),N(s=>s?.map(t=>S.has(t.id)?{...t,archived:!1,archivedAt:void 0}:t)??[]),o.success(`${T} transactions restored`),w()}catch{o.error("Failed to restore transactions")}},Ne=async()=>{try{await ks(Array.from(S)),N(s=>s?.filter(t=>!S.has(t.id))??[]),o.success(`${T} transactions permanently deleted`),w(),P(!1)}catch{o.error("Failed to delete transactions")}},ds=s=>{f({trxDate:s.trxDate.split("T")[0],customerId:s.customerId,customerName:s.customerName,country:s.country,city:s.city,soId:s.soId,invoiceNumber:s.invoiceNumber,paymentMode:s.paymentMode,amountReceived:s.amountReceived,notes:s.notes??""}),z(s.id)},ms=()=>{const s=["Trx ID","Trx Date","Customer ID","Customer Name","Country","City","SO ID","Invoice Num","PMT Mode","Amount Received"],t=M.map(u=>[u.id,u.trxDate.split("T")[0],u.customerId,u.customerName,u.country,u.city,u.soId,u.invoiceNumber,u.paymentMode,u.amountReceived.toFixed(2)]),n=[s.join(","),...t.map(u=>u.map(te=>`"${te}"`).join(","))].join(`
`),r=new Blob([n],{type:"text/csv"}),b=URL.createObjectURL(r),g=document.createElement("a");g.href=b,g.download=`cash-bank-transactions-${new Date().toISOString().split("T")[0]}.csv`,g.click(),URL.revokeObjectURL(b),o.success("Transactions exported to CSV")},us=s=>{const t={type:"cash-receipt",documentNumber:s.id,documentDate:s.trxDate,partyType:"Customer",partyName:s.customerName,partyCity:s.city,partyCountry:s.country,referenceNumber:s.soId,referenceLabel:"Sales Order",items:[{description:`Payment for Invoice ${s.invoiceNumber}`,quantity:1,unitPrice:s.amountReceived,total:s.amountReceived}],totalAmount:s.amountReceived,paymentMode:s.paymentMode,notes:s.notes,createdBy:s.createdBy};Ae(t)},fe=()=>e.jsxs("div",{className:"grid gap-4 py-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"trxDate",children:"Transaction Date *"}),e.jsx(C,{id:"trxDate",type:"date",value:a.trxDate,onChange:s=>f(t=>({...t,trxDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"soId",children:"Sales Order *"}),e.jsxs(q,{value:a.soId,onValueChange:as,children:[e.jsx(_,{children:e.jsx(W,{placeholder:"Select Sales Order"})}),e.jsx(G,{children:me.filter(s=>!s.archived).map(s=>e.jsxs(E,{value:s.id,children:[s.id," - ",s.customerName]},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"customerId",children:"Customer *"}),e.jsxs(q,{value:a.customerId,onValueChange:ts,children:[e.jsx(_,{children:e.jsx(W,{placeholder:"Select Customer"})}),e.jsx(G,{children:Z.map(s=>e.jsxs(E,{value:s.id,children:[s.id," - ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"customerName",children:"Customer Name"}),e.jsx(C,{id:"customerName",value:a.customerName,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"country",children:"Country"}),e.jsx(C,{id:"country",value:a.country,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"city",children:"City"}),e.jsx(C,{id:"city",value:a.city,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"invoiceNumber",children:"Invoice Number"}),e.jsx(C,{id:"invoiceNumber",value:a.invoiceNumber,onChange:s=>f(t=>({...t,invoiceNumber:s.target.value})),placeholder:"INV-001"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"paymentMode",children:"Payment Mode *"}),e.jsxs(q,{value:a.paymentMode,onValueChange:s=>f(t=>({...t,paymentMode:s})),children:[e.jsx(_,{children:e.jsx(W,{})}),e.jsx(G,{children:Te.map(s=>e.jsx(E,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"amountReceived",children:"Amount Received (â‚±) *"}),e.jsx(C,{id:"amountReceived",type:"number",min:"0",step:"0.01",value:a.amountReceived,onChange:s=>f(t=>({...t,amountReceived:parseFloat(s.target.value)||0})),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"notes",children:"Notes"}),e.jsx(C,{id:"notes",value:a.notes,onChange:s=>f(t=>({...t,notes:s.target.value})),placeholder:"Optional notes..."})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Cash and Bank"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage payment transactions and receipts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:ms,disabled:M.length===0,children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),Q&&e.jsxs(ne,{open:Ke,onOpenChange:s=>{$(s),s||U()},children:[e.jsx(ge,{asChild:!0,children:e.jsxs(l,{children:[e.jsx(Rs,{className:"h-4 w-4 mr-2"}),"New Transaction"]})}),e.jsxs(re,{className:"max-w-2xl",children:[e.jsxs(ce,{children:[e.jsx(oe,{children:"Create New Transaction"}),e.jsx(ie,{children:"Add a new cash or bank transaction"})]}),fe(),e.jsxs(Ce,{children:[e.jsx(l,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(l,{onClick:ns,children:"Create Transaction"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(B,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Total Received"}),e.jsx(qs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:K(k.totalAmount)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[k.totalTransactions," transactions"]})]})]}),e.jsxs(B,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Cash Payments"}),e.jsx(_s,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:K(k.cashTotal)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Direct cash received"})]})]}),e.jsxs(B,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Bank Transfers"}),e.jsx(be,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:K(k.bankTotal)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bank deposits received"})]})]}),e.jsxs(B,{children:[e.jsxs(F,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(O,{className:"text-sm font-medium",children:"Card & Online"}),e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:K(k.cardTotal+k.onlineTotal)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Digital payments"})]})]})]}),e.jsxs(B,{children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{className:"text-base font-medium",children:"Transactions"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(l,{variant:m?"secondary":"outline",size:"sm",onClick:()=>{Ee(!m),w()},children:[m?e.jsx(de,{className:"h-4 w-4 mr-2"}):e.jsx(Y,{className:"h-4 w-4 mr-2"}),m?"View Active":"View Archived"]})})]})}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(vs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(C,{placeholder:"Search by ID, customer, SO, or invoice...",className:"pl-9",value:ue,onChange:s=>Oe(s.target.value)})]}),e.jsxs(q,{value:V,onValueChange:Le,children:[e.jsxs(_,{className:"w-[180px]",children:[e.jsx(Ms,{className:"h-4 w-4 mr-2"}),e.jsx(W,{placeholder:"Payment Mode"})]}),e.jsxs(G,{children:[e.jsx(E,{value:"all",children:"All Payment Modes"}),Te.map(s=>e.jsx(E,{value:s,children:s},s))]})]})]}),es&&e.jsx(Bs,{selectionCount:T,onClearSelection:w,actions:m?[{label:"Restore",onClick:ls,icon:e.jsx(de,{className:"h-4 w-4"})},...X?[{label:"Delete Permanently",onClick:()=>P(!0),icon:e.jsx(J,{className:"h-4 w-4"}),variant:"destructive"}]:[]]:[{label:"Archive",onClick:pe,icon:e.jsx(Y,{className:"h-4 w-4"})}]}),Be?e.jsx(Fs,{columns:10,rows:5}):se.length===0?e.jsx(Os,{icon:be,title:m?"No Archived Transactions":"No Transactions Found",description:m?"Archived transactions will appear here":"Create your first transaction to get started",actionLabel:!m&&Q?"New Transaction":void 0,onAction:!m&&Q?()=>$(!0):void 0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-md border overflow-hidden",children:[e.jsx(Ls,{pageItemCount:ye,totalItemCount:ve,isAllPagesSelected:Xe,show:Qe&&ve>ye,onSelectAllPages:Je,onClearSelection:w,itemLabel:"transactions"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ks,{children:[e.jsx(Vs,{children:e.jsxs(Se,{children:[e.jsx(we,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:Ye,ref:s=>{s&&(s.indeterminate=Ze)},onChange:()=>Ge(),className:"h-4 w-4 rounded border-gray-300"})}),e.jsx(p,{sortKey:"trxDate",currentSortKey:d,sortDirection:v("trxDate"),onSort:j,children:"Trx Date"}),e.jsx(p,{sortKey:"id",currentSortKey:d,sortDirection:v("id"),onSort:j,children:"Trx ID"}),e.jsx(p,{sortKey:"customerId",currentSortKey:d,sortDirection:v("customerId"),onSort:j,children:"Customer ID"}),e.jsx(p,{sortKey:"customerName",currentSortKey:d,sortDirection:v("customerName"),onSort:j,children:"Customer Name"}),e.jsx(p,{sortKey:"country",currentSortKey:d,sortDirection:v("country"),onSort:j,children:"Country"}),e.jsx(p,{sortKey:"city",currentSortKey:d,sortDirection:v("city"),onSort:j,children:"City"}),e.jsx(p,{sortKey:"soId",currentSortKey:d,sortDirection:v("soId"),onSort:j,children:"SO ID"}),e.jsx(p,{sortKey:"invoiceNumber",currentSortKey:d,sortDirection:v("invoiceNumber"),onSort:j,children:"Invoice Num"}),e.jsx(p,{sortKey:"paymentMode",currentSortKey:d,sortDirection:v("paymentMode"),onSort:j,children:"PMT Mode"}),e.jsx(p,{sortKey:"amountReceived",currentSortKey:d,sortDirection:v("amountReceived"),onSort:j,children:"Amount Received"}),e.jsx(we,{className:"text-right",children:"Actions"})]})}),e.jsx($s,{children:se.map(s=>e.jsxs(Se,{className:De(je(s.id)&&"bg-muted/50"),children:[e.jsx(h,{children:e.jsx("input",{type:"checkbox",checked:je(s.id),onChange:()=>We(s.id),className:"h-4 w-4 rounded border-gray-300"})}),e.jsx(h,{children:s.trxDate.split("T")[0]}),e.jsx(h,{className:"font-medium",children:s.id}),e.jsx(h,{children:s.customerId}),e.jsx(h,{children:s.customerName}),e.jsx(h,{children:s.country||"-"}),e.jsx(h,{children:s.city||"-"}),e.jsx(h,{children:s.soId}),e.jsx(h,{children:s.invoiceNumber||"-"}),e.jsx(h,{children:ss(s.paymentMode)}),e.jsx(h,{className:"font-medium text-green-600",children:K(s.amountReceived)}),e.jsx(h,{className:"text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-1",children:m?e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"sm",variant:"outline",onClick:()=>os(s.id),title:"Restore",children:e.jsx(de,{className:"h-4 w-4"})}),X&&e.jsx(l,{size:"sm",variant:"destructive",onClick:()=>is(s.id),title:"Delete Permanently",children:e.jsx(J,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[ke&&e.jsxs(ne,{open:Ve===s.id,onOpenChange:t=>{t||(z(null),U())},children:[e.jsx(ge,{asChild:!0,children:e.jsx(l,{size:"sm",variant:"outline",onClick:()=>ds(s),children:"Edit"})}),e.jsxs(re,{className:"max-w-2xl",children:[e.jsxs(ce,{children:[e.jsxs(oe,{children:["Edit Transaction ",s.id]}),e.jsx(ie,{children:"Update transaction details"})]}),fe(),e.jsxs(Ce,{children:[e.jsx(l,{variant:"outline",onClick:()=>z(null),children:"Cancel"}),e.jsx(l,{onClick:()=>rs(s.id),children:"Save Changes"})]})]})]}),Ie&&e.jsx(l,{size:"sm",variant:"outline",onClick:()=>cs(s.id),title:"Archive",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>us(s),title:"Print Receipt",children:e.jsx(Us,{className:"h-4 w-4"})})]})})})]},s.id))})]})})]}),e.jsx(Es,{currentPage:ze,totalPages:He,onPageChange:Ue,totalItems:_e,itemsPerPage:qe})]})]})]}),e.jsx(ne,{open:$e,onOpenChange:P,children:e.jsxs(re,{className:"max-w-md",children:[e.jsxs(ce,{children:[e.jsxs(oe,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-destructive"}),"Delete ",T," Transaction",T!==1?"s":""]}),e.jsx(ie,{children:m?"These transactions are already archived. This action will permanently remove them from the system.":"Choose how you want to delete the selected transactions:"})]}),m?e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This cannot be undone. All data will be permanently removed."})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(l,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(l,{variant:"destructive",onClick:Ne,children:"Permanently Delete All"})]})]}):e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border rounded-md hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Y,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Archive"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Move to archive. Transactions can be restored later."})]}),e.jsx(l,{variant:"secondary",size:"sm",onClick:pe,children:"Archive"})]})}),X&&e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Delete Permanently"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be undone. Data will be permanently removed."})]}),e.jsx(l,{variant:"destructive",size:"sm",onClick:Ne,children:"Delete"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(l,{variant:"outline",onClick:()=>P(!1),children:"Cancel"})})]})]})})]})}export{rt as CashBankView};
