import{i as Ns,r as m,j as e,C as D,o as P,p as I,v as rs,q as S,aA as T,w as V,aB as is,B as o,a2 as vs,I as g,ab as Ys,P as fs,S as ce,x as v,aC as Xs,M as Zs,aD as et,aE as st,s as ls,_ as ke,D as ze,$ as tt,y as Ve,z as Me,A as Ue,E as Ke,L as w,d as Ae,F as ns,a1 as at,aa as rt,m as He,aF as it,aG as lt,aH as cs,aI as nt,aJ as ct,aK as dt,aL as ot,aM as mt,aN as xt,aO as ut}from"./index-k5ebPzcJ.js";import{g as ht,h as Qe}from"./permissions-DeuZZz56.js";import{u as jt,a as pt,T as gt,E as _e,P as ds,F as Nt,B as vt,S as ft}from"./select-all-banner-C6TOTuo5.js";import{T as ye,e as be,f as z,g as j,i as we,j as d,S as he,a as je,b as pe,c as ge,d as re,h as Y}from"./sortable-table-head-D7oM7G8s.js";import{u as yt,D as bt}from"./printable-receipt-u0hVXPRa.js";import{C as Ge}from"./circle-check-DfR3T10h.js";import{S as wt,A as St}from"./sparkles-4U4Lj1rV.js";import{I as Ct}from"./image-jvKaXKU8.js";import{T as Dt}from"./tag-CT6uUOPu.js";import{M as os}from"./minus-Bl7Wnbi2.js";import{P as ne}from"./plus-DrcO3SHc.js";import{T as le}from"./trash-2-CfOoNwMA.js";import{A as Pt}from"./arrow-left-DOd_x-p1.js";import{P as It}from"./printer-C4JK4c9n.js";import{H as Ot}from"./hash-xdMVDSjs.js";import{C as ms}from"./calendar-B52AXN94.js";import{F as xs}from"./file-text-Cp_j6QiG.js";import{M as kt}from"./map-pin-DyBnH2AT.js";import{B as us}from"./banknote-BZrtYNQg.js";import{T as hs}from"./trending-up-CHN_qjRK.js";import{D as js,A as Se,a as ps}from"./dollar-sign-77fnGld6.js";import{C as gs}from"./circle-alert-CbM34ibh.js";import"./skeleton-BKBQILj9.js";const ie=l=>`₱${l.toLocaleString("en-PH",{minimumFractionDigits:2})}`,At={Books:"Books & Literature",Clothing:"Fashion & Apparel",Electronics:"Electronics & Gadgets",Food:"Food & Beverages",Furniture:"Home & Furniture",Health:"Health & Wellness",Sports:"Sports & Outdoors",Toys:"Toys & Games",Other:"Other Products"};function Tt(l){let M="In Stock";return l.quantity<=0?M="Out of Stock":l.quantity<=(l.reorderLevel??10)&&(M="Low Stock"),{id:l.id,name:l.name,description:l.description||`Quality ${l.brand} ${l.name} in the ${l.category} category.`,category:At[l.category]||l.category,brand:l.brand,price:l.pricePerPiece,availability:M,imageUrl:l.photoUrl,maxQuantity:l.quantity}}function Rt({inventoryData:l,customersData:M,onSubmitOrder:H,onCancel:p}){const{user:U}=Ns(),[y,X]=m.useState([]),[Q,de]=m.useState(""),[k,q]=m.useState("all"),[Ce,Z]=m.useState(""),[De,Te]=m.useState(0),[Pe,ee]=m.useState(!1),[R,se]=m.useState(null),F=m.useMemo(()=>U?.email?M.find(r=>r.email===U.email):null,[U?.email,M]),te=m.useMemo(()=>l.filter(r=>!r.archived).map(Tt),[l]),C=m.useMemo(()=>[...new Set(te.map(x=>x.category))].sort(),[te]),ae=m.useMemo(()=>te.filter(r=>{const x=!Q||r.name.toLowerCase().includes(Q.toLowerCase())||r.brand.toLowerCase().includes(Q.toLowerCase())||r.description.toLowerCase().includes(Q.toLowerCase()),N=k==="all"||r.category===k;return x&&N}),[te,Q,k]),Ne=m.useMemo(()=>y.reduce((r,x)=>r+x.totalPrice,0),[y]),_=m.useMemo(()=>y.reduce((r,x)=>r+x.quantity,0),[y]),G=r=>{const x=y.findIndex(N=>N.inventoryItemId===r.id);if(x>=0){const N=[...y],L=Math.min(N[x].quantity+1,r.maxQuantity);N[x]={...N[x],quantity:L,totalPrice:L*N[x].unitPrice},X(N)}else X([...y,{inventoryItemId:r.id,itemName:r.name,quantity:1,unitPrice:r.price,totalPrice:r.price,availableStock:r.maxQuantity}]);v.success(`Added ${r.name} to cart`)},$=(r,x)=>{const N=[...y],L=N[r].quantity+x;L<=0?N.splice(r,1):L<=N[r].availableStock&&(N[r]={...N[r],quantity:L,totalPrice:L*N[r].unitPrice}),X(N)},Re=r=>{const x=[...y];x.splice(r,1),X(x)},K=async()=>{if(y.length===0){v.error("Please add items to your cart");return}ee(!0);try{const r=await H({items:y.map(({availableStock:x,...N})=>N),notes:Ce,amountPaid:De,customerName:F?.name||U?.displayName||U?.email||"Customer",customerId:F?.id||"",customerCountry:F?.country||"",customerCity:F?.city||""});se(r),v.success("Order placed successfully!")}catch(r){v.error(r instanceof Error?r.message:"Failed to place order")}finally{ee(!1)}};return R?e.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(D,{className:"border-green-200 bg-green-50/50",children:[e.jsxs(P,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ge,{className:"h-10 w-10 text-green-600"})}),e.jsx(I,{className:"text-2xl text-green-800",children:"Order Confirmed!"}),e.jsx(rs,{className:"text-green-700",children:"Thank you for your order"})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Order ID"}),e.jsx("span",{className:"font-mono font-semibold",children:R.id})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date"}),e.jsx("span",{children:new Date(R.soDate).toLocaleDateString()})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Items"}),e.jsxs("span",{children:[R.items.length," item(s)"]})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),e.jsx("span",{className:"font-semibold text-lg",children:ie(R.totalAmount)})]}),R.amountPaid>0&&e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Paid"}),e.jsx("span",{className:"text-green-600",children:ie(R.amountPaid)})]})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(V,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Order Items"}),e.jsx("div",{className:"space-y-2",children:R.items.map((r,x)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[r.itemName," × ",r.quantity]}),e.jsx("span",{children:ie(r.totalPrice)})]},x))})]})]}),e.jsx(is,{children:e.jsx(o,{className:"w-full",onClick:p,children:"Continue Shopping"})})]})})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.jsxs(D,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(wt,{className:"h-5 w-5 text-primary"}),"Shop Products"]}),e.jsxs(rs,{children:[ae.length," product",ae.length!==1?"s":""," available"]})]}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(vs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{placeholder:"Search products, brands...",value:Q,onChange:r=>de(r.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(o,{variant:k==="all"?"default":"outline",size:"sm",className:"text-xs h-7",onClick:()=>q("all"),children:"All Products"}),C.map(r=>e.jsx(o,{variant:k===r?"default":"outline",size:"sm",className:"text-xs h-7",onClick:()=>q(r),children:r},r))]})]})}),e.jsx(S,{children:e.jsx(Ys,{className:"h-[450px]",children:ae.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(fs,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No products found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or category filter"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:ae.map(r=>{const x=y.find(N=>N.inventoryItemId===r.id);return e.jsxs("div",{className:"group border rounded-xl overflow-hidden hover:border-primary/50 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted flex items-center justify-center relative overflow-hidden",children:[r.imageUrl?e.jsx("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(Ct,{className:"h-12 w-12 mb-1"}),e.jsx("span",{className:"text-xs",children:"No image"})]}),e.jsx(V,{variant:r.availability==="Out of Stock"?"destructive":r.availability==="Low Stock"?"secondary":"default",className:`absolute top-2 right-2 text-xs ${r.availability==="In Stock"?"bg-green-500/90":r.availability==="Low Stock"?"bg-amber-500/90 text-white":r.availability==="Out of Stock"?"bg-red-500/90":""}`,children:r.availability})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsx("h4",{className:"font-semibold line-clamp-1",children:r.name})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Dt,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:r.brand})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 min-h-[2.5rem]",children:r.description}),e.jsx(T,{className:"my-3"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xl font-bold ${r.availability==="Out of Stock"?"text-muted-foreground":"text-primary"}`,children:ie(r.price)}),r.availability==="Out of Stock"?e.jsx(o,{size:"sm",variant:"outline",disabled:!0,className:"gap-1 opacity-60",children:"Out of Stock"}):x?e.jsxs("div",{className:"flex items-center gap-1.5 bg-accent rounded-lg p-1",children:[e.jsx(o,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>$(y.indexOf(x),-1),children:e.jsx(os,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center font-semibold text-sm",children:x.quantity}),e.jsx(o,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>$(y.indexOf(x),1),disabled:x.quantity>=r.maxQuantity,children:e.jsx(ne,{className:"h-3 w-3"})})]}):e.jsxs(o,{size:"sm",onClick:()=>G(r),className:"gap-1",children:[e.jsx(ce,{className:"h-4 w-4"}),"Add to Cart"]})]})]})]},r.id)})})})})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs(D,{className:"sticky top-4",children:[e.jsx(P,{className:"pb-3",children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-5 w-5"}),"Your Cart",_>0&&e.jsxs(V,{variant:"secondary",className:"ml-auto",children:[_," item",_!==1?"s":""]})]})}),e.jsx(S,{children:y.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(ce,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Your cart is empty"}),e.jsx("p",{className:"text-sm",children:"Add products to get started"})]}):e.jsx("div",{className:"space-y-3",children:y.map((r,x)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-accent/30",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:r.itemName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[ie(r.unitPrice)," each"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(o,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>$(x,-1),children:e.jsx(os,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center text-sm",children:r.quantity}),e.jsx(o,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>$(x,1),disabled:r.quantity>=r.availableStock,children:e.jsx(ne,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-right w-20",children:e.jsx("p",{className:"font-medium",children:ie(r.totalPrice)})}),e.jsx(o,{size:"icon",variant:"ghost",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>Re(x),children:e.jsx(le,{className:"h-3 w-3"})})]},r.inventoryItemId))})}),y.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(T,{}),e.jsxs(S,{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Special Instructions (optional)"}),e.jsx(g,{placeholder:"Any special requests...",value:Ce,onChange:r=>Z(r.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Amount to Pay Now (optional)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",placeholder:"0.00",value:De||"",onChange:r=>Te(parseFloat(r.target.value)||0)})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-primary",children:ie(Ne)})]})]}),e.jsxs(is,{className:"flex flex-col gap-2",children:[e.jsx(o,{className:"w-full",size:"lg",onClick:K,disabled:Pe,children:Pe?"Placing Order...":e.jsxs(e.Fragment,{children:["Place Order",e.jsx(St,{className:"ml-2 h-4 w-4"})]})}),e.jsx(o,{variant:"ghost",className:"w-full",onClick:p,children:"Cancel"})]})]})]})})]})}const Ft=["Unpaid","Partially Paid","Paid","Overdue"],Lt=["Pending","Processing","Shipped","In Transit","Out for Delivery","Delivered","Failed","Returned"],A=l=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(l);function ia(){const{user:l}=Ns(),{createNotification:M}=Xs(),H=l?ht(l.id):"Viewer",p=H==="Customer",U=p||Qe(H,"purchase_orders:create");!p&&Qe(H,"purchase_orders:update");const y=!p&&Qe(H,"purchase_orders:delete"),X=H==="Owner"||H==="Admin",{printReceipt:Q}=yt(),[de,k]=m.useState(null),[q,Ce]=m.useState([]),[Z,De]=m.useState([]),[Te,Pe]=m.useState(!0),[ee,R]=m.useState(""),se=Zs(ee,300),[F,te]=m.useState("all"),[C,ae]=m.useState(!1),[Ne,_]=m.useState(!1),[G,$]=m.useState(null),[Re,K]=m.useState(!1),[r,x]=m.useState(null),[N,L]=m.useState("asc"),[c,Ie]=m.useState(null),[ys,Fe]=m.useState(!1),[i,b]=m.useState({soDate:new Date().toISOString().split("T")[0],customerId:"",customerName:"",customerCountry:"",customerCity:"",invoiceNumber:"",items:[],expectedDeliveryDate:"",notes:"",totalReceived:0,amountPaid:0,shippingStatus:"Pending"});m.useEffect(()=>{(async()=>{try{const[t,a,n]=await Promise.all([He(),it(),lt()]);k(t),Ce(a),De(n)}catch{v.error("Failed to load data")}finally{Pe(!1)}})()},[]),m.useEffect(()=>{if(Ne&&p&&l?.email&&q.length>0){const s=q.find(t=>t.email===l.email);b(s?t=>({...t,customerId:s.id,customerName:s.name,customerCountry:s.country??"",customerCity:s.city??""}):t=>({...t,customerName:l.displayName||l.email||"Customer"}))}},[Ne,p,l?.email,l?.displayName,q]);const oe=de??[],B=m.useMemo(()=>oe.filter(s=>{if(p&&l?.email&&s.createdBy!==l.email)return!1;const t=s.archived===!0;if(C!==t)return!1;const a=!se||s.id.toLowerCase().includes(se.toLowerCase())||s.customerName.toLowerCase().includes(se.toLowerCase())||s.items.some(h=>h.itemName.toLowerCase().includes(se.toLowerCase())),n=F==="all"||s.receiptStatus===F;return a&&n}),[oe,se,F,C,p,l?.email]),We=m.useMemo(()=>r?[...B].sort((s,t)=>{const a=s[r],n=t[r];if(a==null&&n==null)return 0;if(a==null)return 1;if(n==null)return-1;if(typeof a=="number"&&typeof n=="number")return N==="asc"?a-n:n-a;const h=String(a).toLowerCase(),u=String(n).toLowerCase();return N==="asc"?h.localeCompare(u):u.localeCompare(h)}):B,[B,r,N]),{currentPage:Je,totalPages:bs,paginatedData:Le,goToPage:ws,itemsPerPage:Ss,totalItems:Cs}=jt(We,10),{selectedIds:Oe,isSelected:Ds,toggleItem:Ps,toggleAll:Is,selectAllPages:Os,deselectAll:ve,isAllSelected:ks,isAllPageSelected:As,isAllPagesSelected:Ts,isPartiallySelected:Rs,selectionCount:Be,hasSelection:Fs,totalItemCount:Ye,pageItemCount:Xe}=pt(Le,We),E=m.useMemo(()=>{const s=oe.filter(O=>!O.archived),t=s.length,a=s.reduce((O,Ee)=>O+Ee.totalAmount,0),n=s.reduce((O,Ee)=>O+Ee.totalReceived,0),h=s.filter(O=>O.receiptStatus==="Paid").length,u=s.filter(O=>O.receiptStatus==="Unpaid").length,f=s.filter(O=>O.receiptStatus==="Partially Paid").length,ue=s.filter(O=>O.receiptStatus==="Overdue").length,Ws=s.filter(O=>O.shippingStatus==="Delivered").length,$e=new Date;$e.setDate($e.getDate()-7);const Js=s.filter(O=>new Date(O.createdDate)>=$e).length;return{totalSOs:t,totalValue:a,totalReceived:n,outstandingBalance:a-n,paidCount:h,unpaidCount:u,partiallyPaidCount:f,overdueCount:ue,deliveredCount:Ws,newThisWeek:Js,avgOrderValue:t>0?a/t:0,collectionRate:a>0?Math.round(n/a*100):0}},[oe]),W=s=>{const t=s;r===t?N==="asc"?L("desc"):(x(null),L("asc")):(x(t),L("asc"))},J=s=>r===s?N:null,Ls=s=>{const t=Z.find(a=>a.id===s);return{itemId:t?.id??s,itemType:t?.brand??"-",itemCategory:t?.category??"-",itemSubcategory:t?.subcategory??"-"}},Ze=s=>{Ie(s)},Bs=()=>{Ie(null)};m.useEffect(()=>{if(c&&de){const s=de.find(t=>t.id===c.id);s&&JSON.stringify(s)!==JSON.stringify(c)?Ie(s):s||Ie(null)}},[de,c]);const qe=s=>{const t={Unpaid:{variant:"outline",className:"border-amber-500 text-amber-600 bg-amber-50 dark:bg-amber-950/30"},"Partially Paid":{variant:"outline",className:"border-yellow-500 text-yellow-600 bg-yellow-50 dark:bg-yellow-950/30"},Paid:{variant:"default",className:"bg-green-600"},Overdue:{variant:"destructive"}},{variant:a,className:n}=t[s];return e.jsxs(V,{variant:a,className:Ae("gap-1",n),children:[s==="Paid"&&e.jsx(Ge,{className:"h-3 w-3"}),s==="Unpaid"&&e.jsx(ke,{className:"h-3 w-3"}),s==="Partially Paid"&&e.jsx(js,{className:"h-3 w-3"}),s==="Overdue"&&e.jsx(gs,{className:"h-3 w-3"}),s]})},fe=()=>{const s=p&&l?.displayName?l.displayName:"";b({soDate:new Date().toISOString().split("T")[0],customerId:"",customerName:s,customerCountry:"",customerCity:"",invoiceNumber:"",items:[],expectedDeliveryDate:"",notes:"",totalReceived:0,amountPaid:0,shippingStatus:"Pending"})},es=()=>{b(s=>({...s,items:[...s.items,{inventoryItemId:"",itemName:"",quantity:1,unitPrice:0,totalPrice:0}]}))},ss=s=>{b(t=>({...t,items:t.items.filter((a,n)=>n!==s)}))},me=(s,t,a)=>{b(n=>{const h=[...n.items];if(t==="inventoryItemId"){const u=Z.find(f=>f.id===a);u&&(h[s]={...h[s],inventoryItemId:u.id,itemName:u.name,unitPrice:u.pricePerPiece,totalPrice:h[s].quantity*u.pricePerPiece})}else if(t==="quantity"){const u=Number(a)||0;h[s]={...h[s],quantity:u,totalPrice:u*h[s].unitPrice}}else if(t==="unitPrice"){const u=Number(a)||0;h[s]={...h[s],unitPrice:u,totalPrice:h[s].quantity*u}}return{...n,items:h}})},ts=s=>{const t=q.find(a=>a.id===s);b(a=>({...a,customerId:s,customerName:t?.name??"",customerCountry:t?.country??"",customerCity:t?.city??""}))},qs=async()=>{const s=!p&&!i.expectedDeliveryDate;if(!i.customerId||i.items.length===0||s){v.error("Please fill in all required fields");return}try{const t=await cs({soDate:i.soDate,customerId:i.customerId,customerName:i.customerName,customerCountry:i.customerCountry,customerCity:i.customerCity,invoiceNumber:i.invoiceNumber,items:i.items.map(a=>({...a,quantityShipped:0})),expectedDeliveryDate:i.expectedDeliveryDate||void 0,notes:i.notes,createdBy:l?.email??l?.id??"unknown",totalReceived:p?0:i.totalReceived,amountPaid:i.amountPaid});if(k(a=>[t,...a??[]]),v.success(`Sales Order ${t.id} created successfully`),p&&l?.email){const a=i.items.reduce((n,h)=>n+h.totalPrice,0);await M({type:"new_sales_order",title:"New Sales Order Created",message:`${l.name||l.email} created order ${t.id} for ${i.customerName} - ${A(a)}`,salesOrderId:t.id,customerName:i.customerName,createdBy:l.email,targetRoles:["Owner","Admin"]})}_(!1),fe()}catch(t){v.error(t instanceof Error?t.message:"Failed to create sales order")}},$s=async s=>{const t=await cs({soDate:new Date().toISOString().split("T")[0],customerId:s.customerId,customerName:s.customerName,customerCountry:s.customerCountry,customerCity:s.customerCity,invoiceNumber:"",items:s.items.map(a=>({...a,quantityShipped:0})),expectedDeliveryDate:void 0,notes:s.notes,createdBy:l?.email??l?.id??"unknown",totalReceived:0,amountPaid:s.amountPaid});if(k(a=>[t,...a??[]]),l?.email){const a=s.items.reduce((n,h)=>n+h.totalPrice,0);await M({type:"new_sales_order",title:"New Customer Order",message:`${l.displayName||l.email} placed order ${t.id} - ${A(a)}`,salesOrderId:t.id,customerName:s.customerName,createdBy:l.email,targetRoles:["Owner","Admin"]})}return t},Es=async s=>{const t=!p&&!i.expectedDeliveryDate;if(!i.customerId||i.items.length===0||t){v.error("Please fill in all required fields");return}try{const a=oe.find(u=>u.id===s),n=new Map(a?.items?.map(u=>[u.inventoryItemId,u.quantityShipped??0])??[]),h=await mt({id:s,soDate:i.soDate,customerId:i.customerId,customerName:i.customerName,customerCountry:i.customerCountry,customerCity:i.customerCity,invoiceNumber:i.invoiceNumber,items:i.items.map(u=>({...u,quantityShipped:n.get(u.inventoryItemId)??0})),expectedDeliveryDate:p?a?.expectedDeliveryDate:i.expectedDeliveryDate,notes:i.notes,totalReceived:p?a?.totalReceived:i.totalReceived,amountPaid:i.amountPaid,shippingStatus:p?a?.shippingStatus:i.shippingStatus});k(u=>u?.map(f=>f.id===s?h:f)??[]),v.success(`Sales Order ${s} updated successfully`),$(null),fe()}catch(a){v.error(a instanceof Error?a.message:"Failed to update sales order")}},zs=async s=>{try{await ot(s),k(t=>t?.filter(a=>a.id!==s)??[]),v.success(`Sales Order ${s} deleted`),$(null)}catch(t){v.error(t instanceof Error?t.message:"Failed to delete sales order")}},Vs=async s=>{try{await dt(s),k(t=>t?.map(a=>a.id===s?{...a,archived:!0}:a)??[]),v.success(`Sales Order ${s} archived`)}catch(t){v.error(t instanceof Error?t.message:"Failed to archive sales order")}},Ms=async s=>{try{await ct(s),k(t=>t?.map(a=>a.id===s?{...a,archived:!1}:a)??[]),v.success(`Sales Order ${s} restored`)}catch(t){v.error(t instanceof Error?t.message:"Failed to restore sales order")}},Us=async()=>{try{const s=await ut(Array.from(Oe));s.success?v.success(`${s.successCount} sales orders archived`):v.warning(`${s.successCount} archived, ${s.failedCount} failed`);const t=await He();k(t),ve(),K(!1)}catch{v.error("Failed to archive sales orders")}},Ks=async()=>{try{const s=await nt(Array.from(Oe));s.success?v.success(`${s.successCount} sales orders restored`):v.warning(`${s.successCount} restored, ${s.failedCount} failed`);const t=await He();k(t),ve()}catch{v.error("Failed to restore sales orders")}},as=async()=>{try{const s=await xt(Array.from(Oe));s.success?v.success(`${s.successCount} sales orders permanently deleted`):v.warning(`${s.successCount} deleted, ${s.failedCount} failed`),k(t=>t?.filter(a=>!Oe.has(a.id))??[]),ve(),K(!1)}catch{v.error("Failed to permanently delete sales orders")}},Hs=s=>{b({soDate:s.soDate??s.createdDate,customerId:s.customerId,customerName:s.customerName,customerCountry:s.customerCountry??"",customerCity:s.customerCity??"",invoiceNumber:s.invoiceNumber??"",items:(s.items??[]).map(t=>({inventoryItemId:t.inventoryItemId,itemName:t.itemName,quantity:t.quantity,unitPrice:t.unitPrice,totalPrice:t.totalPrice})),expectedDeliveryDate:s.expectedDeliveryDate??"",notes:s.notes??"",totalReceived:s.totalReceived??0,amountPaid:s.amountPaid??0,shippingStatus:s.shippingStatus??"Pending"}),$(s.id)},Qs=()=>{const s=["Date","SO ID","Customer ID","Customer Name","Invoice #","Country","City","Items","Total Amount","Total Received","SO Balance","Receipt Status","Shipping Status","Expected Delivery","Notes"],t=B.map(f=>[f.soDate??f.createdDate,f.id,f.customerId,f.customerName,f.invoiceNumber??"",f.customerCountry??"",f.customerCity??"",(f.items??[]).map(ue=>`${ue.itemName} (${ue.quantity})`).join("; "),(f.totalAmount??0).toFixed(2),(f.totalReceived??0).toFixed(2),(f.soBalance??f.totalAmount??0).toFixed(2),f.receiptStatus,f.shippingStatus??"Pending",f.expectedDeliveryDate??"",f.notes??""]),a=[s,...t].map(f=>f.map(ue=>`"${ue}"`).join(",")).join(`
`),n=new Blob([a],{type:"text/csv"}),h=URL.createObjectURL(n),u=document.createElement("a");u.href=h,u.download=`sales-orders-${new Date().toISOString().split("T")[0]}.csv`,u.click(),URL.revokeObjectURL(h),v.success("Sales orders exported to CSV")},_s=()=>{R(""),te("all"),ae(!1)},xe=m.useMemo(()=>i.items.reduce((s,t)=>s+t.totalPrice,0),[i.items]),Gs=s=>{const t={type:"sales-order",documentNumber:s.id,documentDate:s.soDate??s.createdDate,partyType:"Customer",partyName:s.customerName,partyCity:s.customerCity,partyCountry:s.customerCountry,referenceNumber:s.invoiceNumber,referenceLabel:"Invoice No.",items:s.items?.map(a=>({description:a.itemName,quantity:a.quantity,unitPrice:a.unitPrice,total:a.totalPrice}))||[],totalAmount:s.totalAmount??0,amountPaid:s.totalReceived??0,balance:s.soBalance??s.totalAmount-s.totalReceived??0,status:`${s.receiptStatus} / ${s.shippingStatus}`,expectedDeliveryDate:s.expectedDeliveryDate,notes:s.notes,createdBy:s.createdBy};Q(t)};if(Te)return e.jsx("div",{className:"p-6",children:e.jsx(gt,{rows:8})});if(c){const s=new Date(c.soDate||c.createdDate||new Date),t=a=>{switch(a){case"Delivered":return"bg-green-600";case"Shipped":case"In Transit":case"Out for Delivery":return"bg-blue-600";case"Failed":case"Returned":return"bg-red-600";default:return"bg-amber-600"}};return e.jsxs("div",{className:"space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:Bs,children:[e.jsx(Pt,{className:"h-4 w-4 mr-1"}),"Back"]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Order Receipt"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.customerName})]})]}),e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>Gs(c),className:"print:hidden",children:[e.jsx(It,{className:"h-4 w-4 mr-2"}),"Print Receipt"]})]}),e.jsxs(D,{className:"print:shadow-none print:border-none",id:"order-receipt",children:[e.jsx(P,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"h-5 w-5 text-primary"}),e.jsx(I,{className:"text-lg",children:"Sales Order Receipt"})]})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Order ID"}),e.jsx("p",{className:"font-mono font-medium text-xs sm:text-sm",children:c.id})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ms,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Date & Time"}),e.jsxs("p",{className:"font-medium text-xs sm:text-sm",children:[s.toLocaleDateString()," ",s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Customer"}),e.jsx("p",{className:"font-medium text-xs sm:text-sm",children:c.customerName})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Invoice #"}),e.jsx("p",{className:"font-medium text-xs sm:text-sm",children:c.invoiceNumber||"N/A"})]})]})]}),(c.customerCity||c.customerCountry)&&e.jsxs("div",{className:"flex items-start gap-2 bg-muted/50 rounded-lg p-3",children:[e.jsx(kt,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Customer Location"}),e.jsx("p",{className:"text-sm",children:[c.customerCity,c.customerCountry].filter(Boolean).join(", ")})]})]}),c.deliveryAddress&&e.jsxs("div",{className:"flex items-start gap-2 bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsx(ls,{className:"h-4 w-4 text-blue-600 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery Address"}),e.jsx("p",{className:"text-sm",children:c.deliveryAddress})]})]}),e.jsx(T,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Items Ordered (",c.items?.length||0,")"]}),!c.items||c.items.length===0?e.jsx(_e,{icon:ce,title:"No line items",description:"This sales order has no line items"}):e.jsx("div",{className:"space-y-2 bg-muted/30 rounded-lg p-3",children:c.items.map((a,n)=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("p",{className:"font-medium line-clamp-1",children:a.itemName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[A(a.unitPrice)," × ",a.quantity]})]}),e.jsx("p",{className:"font-medium shrink-0",children:A(a.totalPrice)})]},n))})]}),e.jsx(T,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsx("span",{children:A(c.totalAmount??0)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("span",{className:"text-green-600",children:"Free"})]}),e.jsx(T,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-primary",children:A(c.totalAmount??0)})]}),(c.amountPaid??0)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Paid"}),e.jsx("span",{className:"text-green-600",children:A(c.amountPaid??0)})]}),e.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[e.jsx("span",{className:"text-muted-foreground",children:"Balance Due"}),e.jsx("span",{className:"text-amber-600",children:A((c.totalAmount??0)-(c.amountPaid??0))})]})]})]}),e.jsx(T,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(us,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"font-medium text-sm",children:"Payment"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(V,{variant:"secondary",className:"gap-1",children:[e.jsx(us,{className:"h-3 w-3"}),"Cash on Delivery"]}),qe(c.receiptStatus)]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ls,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-sm",children:"Shipping"})]}),e.jsxs(V,{className:`gap-1 ${t(c.shippingStatus||"Pending")}`,children:[c.shippingStatus==="Delivered"?e.jsx(Ge,{className:"h-3 w-3"}):e.jsx(ke,{className:"h-3 w-3"}),c.shippingStatus??"Pending"]})]})]}),c.notes&&e.jsxs("div",{className:"text-sm bg-muted/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-muted-foreground mb-1 font-medium",children:"Order Notes:"}),e.jsx("p",{className:"italic",children:c.notes})]}),c.expectedDeliveryDate&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(ms,{className:"h-4 w-4"}),"Expected Delivery: ",new Date(c.expectedDeliveryDate).toLocaleDateString()]})]})]}),e.jsxs(D,{children:[e.jsxs(P,{children:[e.jsx(I,{className:"text-base",children:"Detailed Line Items"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Full breakdown with item IDs and categories"})]}),e.jsx(S,{children:c.items&&c.items.length>0&&e.jsx("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxs(ye,{children:[e.jsx(be,{children:e.jsxs(z,{children:[e.jsx(j,{children:"Item ID"}),e.jsx(j,{children:"Item Name"}),e.jsx(j,{children:"Category"}),e.jsx(j,{className:"text-right",children:"Qty"}),e.jsx(j,{className:"text-right",children:"Unit Price"}),e.jsx(j,{className:"text-right",children:"Total"})]})}),e.jsx(we,{children:c.items.map((a,n)=>{const h=Ls(a.inventoryItemId);return e.jsxs(z,{children:[e.jsx(d,{className:"font-mono text-sm",children:h.itemId}),e.jsx(d,{children:a.itemName}),e.jsx(d,{className:"text-muted-foreground",children:h.itemCategory}),e.jsx(d,{className:"text-right",children:a.quantity}),e.jsx(d,{className:"text-right",children:A(a.unitPrice)}),e.jsx(d,{className:"text-right font-medium",children:A(a.totalPrice)})]},n)})})]})})})]})]})}return p&&ys?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Place New Order"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse products and add them to your cart"})]})}),e.jsx(Rt,{inventoryData:Z,customersData:q,onSubmitOrder:$s,onCancel:()=>Fe(!1)})]}):p?e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"My Orders"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"View and track your orders"})]}),e.jsxs(o,{onClick:()=>Fe(!0),className:"w-full sm:w-auto",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Place New Order"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(D,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx(ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(S,{children:e.jsx("div",{className:"text-2xl font-bold",children:B.length})})]}),e.jsxs(D,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Pending"}),e.jsx(ke,{className:"h-4 w-4 text-amber-600"})]}),e.jsx(S,{children:e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:B.filter(s=>s.shippingStatus==="Pending"||s.shippingStatus==="Processing").length})})]}),e.jsxs(D,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Delivered"}),e.jsx(hs,{className:"h-4 w-4 text-green-600"})]}),e.jsx(S,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:B.filter(s=>s.shippingStatus==="Delivered").length})})]})]}),e.jsxs(D,{children:[e.jsx(P,{children:e.jsx(I,{children:"Order History"})}),e.jsxs(S,{children:[B.length===0?e.jsx(_e,{icon:ce,title:"No orders yet",description:"Place your first order to get started",action:e.jsxs(o,{onClick:()=>Fe(!0),children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Place New Order"]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs(ye,{children:[e.jsx(be,{children:e.jsxs(z,{children:[e.jsx(j,{className:"whitespace-nowrap",children:"Order ID"}),e.jsx(j,{className:"whitespace-nowrap",children:"Date"}),e.jsx(j,{className:"whitespace-nowrap",children:"Items"}),e.jsx(j,{className:"text-right whitespace-nowrap",children:"Total"}),e.jsx(j,{className:"text-right whitespace-nowrap hidden sm:table-cell",children:"Paid"}),e.jsx(j,{className:"whitespace-nowrap",children:"Payment"}),e.jsx(j,{className:"whitespace-nowrap",children:"Shipping"})]})}),e.jsx(we,{children:Le.map(s=>e.jsxs(z,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Ze(s),children:[e.jsx(d,{className:"font-medium font-mono text-xs sm:text-sm whitespace-nowrap",children:s.id}),e.jsx(d,{className:"whitespace-nowrap text-xs sm:text-sm",children:s.soDate??s.createdDate}),e.jsx(d,{className:"whitespace-nowrap",children:e.jsxs("span",{className:"text-muted-foreground text-xs sm:text-sm",children:[s.items.length," item",s.items.length!==1?"s":""]})}),e.jsx(d,{className:"text-right font-medium whitespace-nowrap text-xs sm:text-sm",children:A(s.totalAmount)}),e.jsx(d,{className:"text-right text-green-600 hidden sm:table-cell",children:A(s.amountPaid??0)}),e.jsx(d,{children:e.jsx(V,{variant:s.receiptStatus==="Paid"?"default":s.receiptStatus==="Partially Paid"?"secondary":s.receiptStatus==="Overdue"?"destructive":"outline",className:s.receiptStatus==="Paid"?"bg-green-600":s.receiptStatus==="Partially Paid"?"bg-amber-500":s.receiptStatus==="Overdue"?"bg-red-600":"",children:s.receiptStatus??"Unpaid"})}),e.jsx(d,{children:e.jsx(V,{variant:s.shippingStatus==="Delivered"?"default":s.shippingStatus==="Shipped"||s.shippingStatus==="In Transit"||s.shippingStatus==="Out for Delivery"?"secondary":s.shippingStatus==="Failed"||s.shippingStatus==="Returned"?"destructive":"outline",className:s.shippingStatus==="Delivered"?"bg-green-600":s.shippingStatus==="Out for Delivery"?"bg-blue-600":s.shippingStatus==="In Transit"?"bg-blue-500":s.shippingStatus==="Shipped"?"bg-cyan-600":s.shippingStatus==="Processing"?"bg-amber-500":"",children:s.shippingStatus??"Pending"})})]},s.id))})]})}),B.length>0&&e.jsx("div",{className:"mt-4",children:e.jsx(ds,{totalItems:B.length,pageSize,currentPage:Je,onPageChange:setCurrentPage,onPageSizeChange:setPageSize})})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Sales Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage customer orders, track payments, and monitor delivery status"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(D,{className:"relative overflow-hidden",children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Total SOs"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold",children:E.totalSOs}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[E.newThisWeek," new this week"]})]})]}),e.jsxs(D,{className:"relative overflow-hidden",children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Total Value"}),e.jsx(js,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:A(E.totalValue)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Avg: ",A(E.avgOrderValue)," per SO"]})]})]}),e.jsxs(D,{className:"relative overflow-hidden",children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Outstanding"}),e.jsx(ke,{className:"h-4 w-4 text-amber-600"})]}),e.jsxs(S,{children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:A(E.outstandingBalance)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[E.unpaidCount," unpaid, ",E.overdueCount," overdue"]})]})]}),e.jsxs(D,{className:"relative overflow-hidden",children:[e.jsxs(P,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(I,{className:"text-sm font-medium text-muted-foreground",children:"Collection Rate"}),e.jsx(hs,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(S,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[E.collectionRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[E.paidCount," paid of ",E.totalSOs," total"]})]})]})]}),e.jsxs(D,{children:[e.jsxs(P,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Sales Orders"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage customer sales orders"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:Qs,children:[e.jsx(bt,{className:"h-4 w-4 mr-1"}),"Export CSV"]}),U&&e.jsxs(ze,{open:Ne,onOpenChange:_,children:[e.jsx(tt,{asChild:!0,children:e.jsxs(o,{size:"sm",children:[e.jsx(ne,{className:"h-4 w-4 mr-1"}),"Create SO"]})}),e.jsxs(Ve,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Me,{children:[e.jsx(Ue,{children:"Create Sales Order"}),e.jsx(Ke,{children:"Create a new sales order for a customer"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs(D,{children:[e.jsx(P,{className:"pb-3",children:e.jsx(I,{className:"text-base",children:"Sales Order Information"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"SO Date *"}),e.jsx(g,{type:"date",value:i.soDate,onChange:s=>b(t=>({...t,soDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Customer *"}),p?e.jsx(g,{value:l?.displayName||l?.email||"Customer",disabled:!0,className:"bg-muted"}):e.jsxs(he,{value:i.customerId,onValueChange:ts,children:[e.jsx(je,{children:e.jsx(pe,{placeholder:"Select customer"})}),e.jsx(ge,{children:q.filter(s=>s.status==="Active").map(s=>e.jsx(re,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Customer ID"}),e.jsx(g,{value:i.customerId,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Country"}),e.jsx(g,{value:i.customerCountry,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"City"}),e.jsx(g,{value:i.customerCity,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Invoice #"}),e.jsx(g,{value:i.invoiceNumber,onChange:s=>b(t=>({...t,invoiceNumber:s.target.value})),placeholder:"INV-2025-0001"})]})]}),!p&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Expected Delivery Date *"}),e.jsx(g,{type:"date",value:i.expectedDeliveryDate,onChange:s=>b(t=>({...t,expectedDeliveryDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Total Received (₱)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",value:i.totalReceived,onChange:s=>b(t=>({...t,totalReceived:parseFloat(s.target.value)||0}))})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Amount Paid (₱)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",value:i.amountPaid,onChange:s=>b(t=>({...t,amountPaid:parseFloat(s.target.value)||0})),placeholder:"Enter amount paid"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Notes"}),e.jsx(g,{value:i.notes,onChange:s=>b(t=>({...t,notes:s.target.value})),placeholder:"Additional notes..."})]})]})]}),e.jsxs(D,{children:[e.jsxs(P,{className:"pb-3 flex flex-row items-center justify-between",children:[e.jsx(I,{className:"text-base",children:"Line Items"}),e.jsxs(o,{size:"sm",variant:"outline",onClick:es,children:[e.jsx(ne,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsxs(S,{children:[i.items.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No items added. Click "Add Item" to add line items.'}):e.jsxs(ye,{children:[e.jsx(be,{children:e.jsxs(z,{children:[e.jsx(j,{children:"Item"}),e.jsx(j,{className:"w-24",children:"Qty"}),e.jsx(j,{className:"w-32",children:"Unit Price"}),e.jsx(j,{className:"w-32 text-right",children:"Total"}),e.jsx(j,{className:"w-12"})]})}),e.jsx(we,{children:i.items.map((s,t)=>e.jsxs(z,{children:[e.jsx(d,{children:e.jsxs(he,{value:s.inventoryItemId,onValueChange:a=>me(t,"inventoryItemId",a),children:[e.jsx(je,{children:e.jsx(pe,{placeholder:"Select item"})}),e.jsx(ge,{children:Z.map(a=>e.jsx(re,{value:a.id,children:a.name},a.id))})]})}),e.jsx(d,{children:e.jsx(g,{type:"number",min:"1",value:s.quantity,onChange:a=>me(t,"quantity",a.target.value)})}),e.jsx(d,{children:e.jsx(g,{type:"number",min:"0",step:"0.01",value:s.unitPrice,onChange:a=>me(t,"unitPrice",a.target.value)})}),e.jsxs(d,{className:"text-right font-medium",children:["₱",s.totalPrice.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(d,{children:e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>ss(t),children:e.jsx(le,{className:"h-4 w-4 text-destructive"})})})]},t))})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Grand Total:"}),e.jsxs("span",{className:"ml-2 text-xl font-bold",children:["₱",xe.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"SO Balance:"}),e.jsxs("span",{className:Ae("ml-2 text-xl font-bold",xe-i.totalReceived>0?"text-orange-600":"text-green-600"),children:["₱",(xe-i.totalReceived).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]})]}),e.jsxs(ns,{children:[e.jsx(o,{variant:"outline",onClick:()=>{_(!1),fe()},children:"Cancel"}),e.jsx(o,{onClick:qs,children:"Create Sales Order"})]})]})]})]})]})]}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(vs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{placeholder:"Search SO ID, customer, or items...",value:ee,onChange:s=>R(s.target.value),className:"pl-10"})]}),e.jsxs(he,{value:F,onValueChange:te,children:[e.jsxs(je,{className:"w-48",children:[e.jsx(Nt,{className:"h-4 w-4 mr-2"}),e.jsx(pe,{placeholder:"Filter by status"})]}),e.jsxs(ge,{children:[e.jsx(re,{value:"all",children:"All Statuses"}),Ft.map(s=>e.jsx(re,{value:s,children:s},s))]})]}),e.jsxs(o,{variant:C?"default":"outline",size:"sm",onClick:()=>ae(!C),className:C?"bg-orange-500 hover:bg-orange-600 text-white":"",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),C?"Viewing Archived":"View Archived"]}),(ee||F!=="all"||C)&&e.jsxs(o,{variant:"ghost",size:"sm",onClick:_s,className:"text-muted-foreground",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]}),Fs&&y&&e.jsx(vt,{selectionCount:Be,onClearSelection:ve,actions:C?[{id:"restore",label:"Restore",icon:e.jsx(ps,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:Ks},...X?[{id:"permanent-delete",label:"Permanently Delete",icon:e.jsx(le,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>K(!0)}]:[]]:[{id:"archive",label:"Archive",icon:e.jsx(Se,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:()=>K(!0)}]}),B.length===0?e.jsx(_e,{icon:C?Se:ce,title:C?"No archived sales orders":"No sales orders found",description:C?"Archived sales orders will appear here":ee||F!=="all"?"Try adjusting your search or filters":"Create your first sales order to get started",actionLabel:!C&&U?"Create SO":void 0,onAction:!C&&U?()=>_(!0):void 0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx(ft,{pageItemCount:Xe,totalItemCount:Ye,isAllPagesSelected:Ts,show:As&&Ye>Xe,onSelectAllPages:Os,onClearSelection:ve,itemLabel:"orders"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ye,{children:[e.jsx(be,{children:e.jsxs(z,{children:[y&&e.jsx(j,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:ks,ref:s=>{s&&(s.indeterminate=Rs)},onChange:()=>Is(),className:"h-4 w-4"})}),e.jsx(Y,{sortKey:"soDate",currentSortKey:r,sortDirection:J("soDate"),onSort:W,children:"Date"}),e.jsx(Y,{sortKey:"id",currentSortKey:r,sortDirection:J("id"),onSort:W,children:"SO ID"}),e.jsx(j,{children:"Customer ID"}),e.jsx(Y,{sortKey:"customerName",currentSortKey:r,sortDirection:J("customerName"),onSort:W,children:"Customer Name"}),e.jsx(j,{children:"Invoice #"}),e.jsx(j,{children:"Country"}),e.jsx(j,{children:"City"}),e.jsx(Y,{sortKey:"totalAmount",currentSortKey:r,sortDirection:J("totalAmount"),onSort:W,className:"text-right",children:"Total Amount"}),e.jsx(Y,{sortKey:"totalReceived",currentSortKey:r,sortDirection:J("totalReceived"),onSort:W,className:"text-right",children:"Total Received"}),e.jsx(Y,{sortKey:"soBalance",currentSortKey:r,sortDirection:J("soBalance"),onSort:W,className:"text-right",children:"SO Balance"}),e.jsx(Y,{sortKey:"receiptStatus",currentSortKey:r,sortDirection:J("receiptStatus"),onSort:W,children:"Receipt Status"}),e.jsx(Y,{sortKey:"shippingStatus",currentSortKey:r,sortDirection:J("shippingStatus"),onSort:W,children:"Shipping"}),e.jsx(j,{children:"Actions"})]})}),e.jsx(we,{children:Le.map(s=>e.jsxs(z,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Hs(s),children:[y&&e.jsx(d,{onClick:t=>t.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:Ds(s.id),onChange:()=>Ps(s.id),className:"h-4 w-4"})}),e.jsx(d,{className:"whitespace-nowrap",children:s.soDate??s.createdDate}),e.jsx(d,{className:"font-medium",children:s.id}),e.jsx(d,{className:"text-muted-foreground",children:s.customerId}),e.jsx(d,{children:s.customerName}),e.jsx(d,{className:"text-muted-foreground",children:s.invoiceNumber||"-"}),e.jsx(d,{children:s.customerCountry||"-"}),e.jsx(d,{children:s.customerCity||"-"}),e.jsxs(d,{className:"text-right font-medium",children:["₱",(s.totalAmount??0).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsxs(d,{className:"text-right",children:["₱",(s.totalReceived??0).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(d,{className:"text-right font-medium",children:e.jsxs("span",{className:Ae((s.soBalance??s.totalAmount??0)>0?"text-orange-600":"text-green-600"),children:["₱",(s.soBalance??s.totalAmount??0).toLocaleString(void 0,{minimumFractionDigits:2})]})}),e.jsx(d,{children:qe(s.receiptStatus)}),e.jsx(d,{children:e.jsx(V,{variant:s.shippingStatus==="Delivered"?"default":s.shippingStatus==="In Transit"||s.shippingStatus==="Shipped"?"secondary":s.shippingStatus==="Failed"||s.shippingStatus==="Returned"?"destructive":"outline",children:s.shippingStatus??"Pending"})}),e.jsx(d,{onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(o,{size:"sm",variant:"outline",onClick:()=>Ze(s),title:"View Details",children:e.jsx(rt,{className:"h-4 w-4"})}),C?e.jsx(o,{size:"sm",variant:"outline",onClick:()=>Ms(s.id),title:"Restore",children:e.jsx(ps,{className:"h-4 w-4"})}):e.jsx(o,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>Vs(s.id),title:"Archive",children:e.jsx(Se,{className:"h-4 w-4"})})]})})]},s.id))})]})})]}),e.jsx(ds,{currentPage:Je,totalPages:bs,itemsPerPage:Ss,onPageChange:ws,totalItems:Cs})]}),G&&e.jsx(ze,{open:!!G,onOpenChange:s=>{s||($(null),fe())},children:e.jsxs(Ve,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(Me,{children:[e.jsxs(Ue,{children:["Edit Sales Order - ",G]}),e.jsx(Ke,{children:"Update sales order details"})]}),e.jsx("div",{className:"space-y-6 py-4",children:(()=>{const s=oe.find(t=>t.id===G);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Receipt Status:"}),s&&qe(s.receiptStatus),e.jsx("span",{className:"text-sm text-muted-foreground ml-4",children:"Shipping:"}),e.jsx(V,{variant:s?.shippingStatus==="Delivered"?"default":s?.shippingStatus==="In Transit"||s?.shippingStatus==="Shipped"?"secondary":s?.shippingStatus==="Failed"||s?.shippingStatus==="Returned"?"destructive":"outline",children:s?.shippingStatus??"Pending"})]}),e.jsxs(D,{children:[e.jsx(P,{className:"pb-3",children:e.jsx(I,{className:"text-base",children:"Sales Order Information"})}),e.jsxs(S,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"SO Date"}),e.jsx(g,{type:"date",value:i.soDate,onChange:t=>b(a=>({...a,soDate:t.target.value})),disabled:p,className:p?"bg-muted":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Customer"}),p?e.jsx(g,{value:i.customerName||l?.displayName||l?.email||"Customer",disabled:!0,className:"bg-muted"}):e.jsxs(he,{value:i.customerId,onValueChange:ts,children:[e.jsx(je,{children:e.jsx(pe,{placeholder:"Select customer"})}),e.jsx(ge,{children:q.map(t=>e.jsx(re,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Customer ID"}),e.jsx(g,{value:i.customerId,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Country"}),e.jsx(g,{value:i.customerCountry,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"City"}),e.jsx(g,{value:i.customerCity,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Invoice #"}),e.jsx(g,{value:i.invoiceNumber,onChange:t=>b(a=>({...a,invoiceNumber:t.target.value})),disabled:p,className:p?"bg-muted":""})]})]}),!p&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Expected Delivery Date"}),e.jsx(g,{type:"date",value:i.expectedDeliveryDate,onChange:t=>b(a=>({...a,expectedDeliveryDate:t.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Total Received (₱)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",value:i.totalReceived,onChange:t=>b(a=>({...a,totalReceived:parseFloat(t.target.value)||0}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Shipping Status"}),e.jsxs(he,{value:i.shippingStatus,onValueChange:t=>b(a=>({...a,shippingStatus:t})),children:[e.jsx(je,{children:e.jsx(pe,{})}),e.jsx(ge,{children:Lt.map(t=>e.jsx(re,{value:t,children:t},t))})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Amount Paid (₱)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",value:i.amountPaid,onChange:t=>b(a=>({...a,amountPaid:parseFloat(t.target.value)||0})),placeholder:"Enter amount paid"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(w,{children:"Notes"}),e.jsx(g,{value:i.notes,onChange:t=>b(a=>({...a,notes:t.target.value})),placeholder:"Optional notes..."})]})]})]}),e.jsxs(D,{children:[e.jsxs(P,{className:"pb-3 flex flex-row items-center justify-between",children:[e.jsx(I,{className:"text-base",children:"Line Items"}),e.jsxs(o,{size:"sm",variant:"outline",onClick:es,children:[e.jsx(ne,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsxs(S,{children:[i.items.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No items added."}):e.jsxs(ye,{children:[e.jsx(be,{children:e.jsxs(z,{children:[e.jsx(j,{children:"Item"}),e.jsx(j,{className:"w-24",children:"Qty"}),e.jsx(j,{className:"w-32",children:"Unit Price"}),e.jsx(j,{className:"w-32 text-right",children:"Total"}),e.jsx(j,{className:"w-12"})]})}),e.jsx(we,{children:i.items.map((t,a)=>e.jsxs(z,{children:[e.jsx(d,{children:e.jsxs(he,{value:t.inventoryItemId,onValueChange:n=>me(a,"inventoryItemId",n),children:[e.jsx(je,{children:e.jsx(pe,{placeholder:"Select item"})}),e.jsx(ge,{children:Z.map(n=>e.jsx(re,{value:n.id,children:n.name},n.id))})]})}),e.jsx(d,{children:e.jsx(g,{type:"number",min:"1",value:t.quantity,onChange:n=>me(a,"quantity",n.target.value)})}),e.jsx(d,{children:e.jsx(g,{type:"number",min:"0",step:"0.01",value:t.unitPrice,onChange:n=>me(a,"unitPrice",n.target.value)})}),e.jsxs(d,{className:"text-right font-medium",children:["₱",t.totalPrice.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(d,{children:e.jsx(o,{size:"sm",variant:"ghost",onClick:()=>ss(a),children:e.jsx(le,{className:"h-4 w-4 text-destructive"})})})]},a))})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Grand Total:"}),e.jsxs("span",{className:"ml-2 text-xl font-bold",children:["₱",xe.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"SO Balance:"}),e.jsxs("span",{className:Ae("ml-2 text-xl font-bold",xe-i.totalReceived>0?"text-orange-600":"text-green-600"),children:["₱",(xe-i.totalReceived).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]})]}),e.jsxs(ns,{className:"gap-2",children:[y&&e.jsxs(o,{variant:"destructive",onClick:()=>zs(G),children:[e.jsx(le,{className:"h-4 w-4 mr-1"}),"Delete"]}),e.jsx(o,{variant:"outline",onClick:()=>{$(null),fe()},children:"Cancel"}),e.jsx(o,{onClick:()=>Es(G),children:"Save Changes"})]})]})})()})]})})]})]}),e.jsx(ze,{open:Re,onOpenChange:K,children:e.jsxs(Ve,{className:"max-w-md",children:[e.jsxs(Me,{children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(gs,{className:"h-5 w-5 text-destructive"}),"Delete ",Be," Sales Order",Be!==1?"s":""]}),e.jsx(Ke,{children:C?"These sales orders are already archived. This action will permanently remove them from the system.":"Choose how you want to delete the selected sales orders:"})]}),C?e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(le,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This cannot be undone. All data will be permanently removed."})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(o,{variant:"outline",onClick:()=>K(!1),children:"Cancel"}),e.jsx(o,{variant:"destructive",onClick:as,children:"Permanently Delete All"})]})]}):e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border rounded-md hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Se,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Archive"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Move to archive. Sales orders can be restored later."})]}),e.jsx(o,{variant:"secondary",size:"sm",onClick:Us,children:"Archive"})]})}),X&&e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(le,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Delete Permanently"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be undone. Data will be permanently removed."})]}),e.jsx(o,{variant:"destructive",size:"sm",onClick:as,children:"Delete"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{variant:"outline",onClick:()=>K(!1),children:"Cancel"})})]})]})})]})}export{ia as SalesOrdersView};
