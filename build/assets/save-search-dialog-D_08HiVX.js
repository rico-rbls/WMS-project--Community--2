import{c as k,A as D,j as e,B as c,d as f,r as N,D as z,J as L,s as M,t as O,v as $,w as A,L as B,I as F,as as I,at as _,au as E,av as w,aw as P,G as d}from"./index-qsESEh3j.js";import{T as R}from"./sortable-table-head-B8ujFQKs.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],S=k("bookmark",q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],H=k("star",G);function T({entityType:r,entityId:t,entityName:a,size:h="sm",className:m}){const{isFavorite:x,toggleFavorite:u}=D(),n=x(r,t),i=o=>{o.stopPropagation(),u(r,t,a)};return e.jsx(c,{variant:"ghost",size:h==="sm"?"icon":"default",className:f("h-8 w-8 p-0 hover:bg-transparent",n&&"text-yellow-500 hover:text-yellow-600",!n&&"text-muted-foreground hover:text-yellow-500",m),onClick:i,title:n?"Remove from favorites":"Add to favorites",children:e.jsx(H,{className:f("h-4 w-4 transition-all",n&&"fill-current")})})}function V({entityType:r,currentSearchTerm:t,currentFilters:a,onApplySearch:h}){const{saveSearch:m,getSearchesByType:x,deleteSearch:u}=D(),[n,i]=N.useState(!1),[o,v]=N.useState(""),p=x(r),g=t||a&&Object.keys(a).length>0,j=()=>{if(!o.trim()){d.error("Please enter a name for this search");return}m(o.trim(),r,t,a),d.success(`Search "${o}" saved`),v(""),i(!1)},y=(s,l,b)=>{b.stopPropagation(),u(s),d.success(`Search "${l}" deleted`)},C=s=>{h?.(s),d.success(`Applied search "${s.name}"`)};return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(z,{open:n,onOpenChange:i,children:[e.jsx(L,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",disabled:!g,title:g?"Save current search":"No active filters to save",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),"Save"]})}),e.jsxs(M,{className:"sm:max-w-[400px]",children:[e.jsxs(O,{children:[e.jsx($,{children:"Save Search"}),e.jsx(A,{children:"Save your current search and filter settings for quick access later."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(B,{htmlFor:"search-name",children:"Search Name"}),e.jsx(F,{id:"search-name",placeholder:"e.g., Low stock electronics",value:o,onChange:s=>v(s.target.value),onKeyDown:s=>s.key==="Enter"&&j()})]}),t&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:['Search term: "',t,'"']}),a&&Object.keys(a).length>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Filters: ",Object.entries(a).map(([s,l])=>`${s}=${l}`).join(", ")]}),e.jsx(c,{className:"w-full",onClick:j,children:"Save Search"})]})]})]}),p.length>0&&e.jsxs(I,{children:[e.jsx(_,{asChild:!0,children:e.jsxs(c,{variant:"outline",size:"sm",children:[e.jsx(S,{className:"h-4 w-4 mr-1 fill-current"}),"Saved (",p.length,")"]})}),e.jsxs(E,{align:"end",className:"w-56",children:[p.map(s=>e.jsxs(w,{className:"flex items-center justify-between cursor-pointer",onClick:()=>C(s),children:[e.jsx("span",{className:"truncate flex-1",children:s.name}),e.jsx(c,{variant:"ghost",size:"icon",className:"h-6 w-6 ml-2 hover:bg-destructive hover:text-destructive-foreground",onClick:l=>y(s.id,s.name,l),children:e.jsx(R,{className:"h-3 w-3"})})]},s.id)),e.jsx(P,{}),e.jsx(w,{className:"text-xs text-muted-foreground",disabled:!0,children:"Click to apply, trash to delete"})]})]})]})}export{T as F,H as S,V as a};
