import{i as P,c5 as I,r as c,j as e,C as n,q as o,B as r,S as m,P as q,w as A,aK as B,aP as F,x as L}from"./index-C8eFNz3X.js";import{A as h,S as O}from"./sparkles-Cx7p3Bi7.js";import{T as u}from"./tag-CfWEmZpA.js";import{I as E}from"./image-tiZWv0GT.js";import{M as D}from"./minus-B-BjvGXe.js";import{P as H}from"./plus-B0IcTUzY.js";function j(i){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(i)}const z={Books:"Books & Literature",Clothing:"Fashion & Apparel",Electronics:"Electronics & Gadgets",Food:"Food & Beverages",Furniture:"Home & Furniture",Health:"Health & Wellness",Sports:"Sports & Outdoors",Toys:"Toys & Games",Other:"Other Products"};function Q({navigateToView:i}){const{user:f}=P(),{addToCart:g,isInCart:M,getCartItem:p,updateQuantity:x,itemCount:d,cartTotal:N}=I(),[l,y]=c.useState([]),[v,b]=c.useState(!0);c.useEffect(()=>{async function s(){try{const t=await F();y(t)}catch{L.error("Failed to load products")}finally{b(!1)}}s()},[]);const w=c.useMemo(()=>l.filter(s=>!s.archived&&s.quantity>0).slice(0,8),[l]),C=c.useMemo(()=>{const s={};return l.filter(t=>!t.archived).forEach(t=>{const a=z[t.category]||t.category;s[a]=(s[a]||0)+1}),Object.entries(s).slice(0,6)},[l]),k=s=>s.quantity<=0?"Out of Stock":s.quantity<=(s.reorderLevel??10)?"Low Stock":"In Stock";return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading..."})}):e.jsxs("div",{className:"space-y-8",children:[e.jsx(n,{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-background border-primary/20",children:e.jsx(o,{className:"py-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Welcome back, ",f?.displayName||"Customer","! ðŸ‘‹"]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Browse our products and place your orders with ease."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(r,{variant:"outline",onClick:()=>i("customer-cart"),children:[e.jsx(m,{className:"h-4 w-4 mr-2"}),"Cart (",d,")"]}),e.jsxs(r,{onClick:()=>i("products"),children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Browse All Products"]})]})]})})}),d>0&&e.jsx(n,{children:e.jsx(o,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(m,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["You have ",d," item(s) in your cart"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Total: ",j(N)]})]})]}),e.jsxs(r,{onClick:()=>i("customer-cart"),children:["View Cart ",e.jsx(h,{className:"h-4 w-4 ml-2"})]})]})})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5"}),"Shop by Category"]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3",children:C.map(([s,t])=>e.jsx(n,{className:"cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>i("products"),children:e.jsxs(o,{className:"p-4 text-center",children:[e.jsx("p",{className:"font-medium text-sm",children:s}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t," products"]})]})},s))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center gap-2",children:[e.jsx(O,{className:"h-5 w-5 text-primary"}),"Featured Products"]}),e.jsxs(r,{variant:"ghost",onClick:()=>i("products"),children:["View All ",e.jsx(h,{className:"h-4 w-4 ml-1"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:w.map(s=>{const t=k(s),a=p(s.id),S=!!a;return e.jsxs(n,{className:"group overflow-hidden hover:shadow-md transition-all",children:[e.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted flex items-center justify-center relative overflow-hidden",children:[s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(E,{className:"h-10 w-10 mb-1"}),e.jsx("span",{className:"text-xs",children:"No image"})]}),e.jsx(A,{className:`absolute top-2 right-2 text-xs ${t==="In Stock"?"bg-green-500/90":t==="Low Stock"?"bg-amber-500/90":"bg-red-500/90"}`,children:t})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold line-clamp-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(u,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.brand})]}),e.jsx(B,{className:"my-3"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-primary",children:j(s.pricePerPiece)}),t==="Out of Stock"?e.jsx(r,{size:"sm",variant:"outline",disabled:!0,className:"opacity-60",children:"Out of Stock"}):S?e.jsxs("div",{className:"flex items-center gap-1.5 bg-accent rounded-lg p-1",children:[e.jsx(r,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>x(s.id,a.quantity-1),children:e.jsx(D,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center font-semibold text-sm",children:a.quantity}),e.jsx(r,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>x(s.id,a.quantity+1),disabled:a.quantity>=s.quantity,children:e.jsx(H,{className:"h-3 w-3"})})]}):e.jsxs(r,{size:"sm",onClick:()=>g(s),className:"gap-1",children:[e.jsx(m,{className:"h-4 w-4"}),"Add"]})]})]})]},s.id)})})]})]})}export{Q as CustomerDashboard};
