import{c as Js,i as Ys,H as Zs,G as et,r as h,M as st,j as e,C as b,o as D,p as w,q as C,_ as tt,d as E,w as B,v as at,B as d,D as ue,$ as rt,y as me,z as he,A as pe,E as xe,L as o,I as m,F as it,a2 as lt,a1 as Pe,aj as nt,P as Ze,l as De,x as n,ak as ct,al as dt,am as es,an as ot,ao as ut,ap as mt,aq as ht,ar as pt,as as xt,at as vt,au as jt,av as gt,aw as yt,ax as Nt}from"./index-CH-aQ2d4.js";import{D as ft,S as K,a as U,b as _,c as H,d as $,T as bt,e as Ct,f as ss,g as Q,h as k,i as Pt,j as f}from"./sortable-table-head-Ca5Jgy16.js";import{u as Dt}from"./printable-receipt-DPS3NDxm.js";import{u as wt,a as St,T as At,F as Ot,B as It,E as kt,S as Rt,P as Tt}from"./select-all-banner-CNwoPjbc.js";import{g as Ft,h as se}from"./permissions-DeuZZz56.js";import{E as Et}from"./editable-cell-D9Dg9xYd.js";import{F as Bt}from"./file-text-CjHVLoK_.js";import{D as $t,A as te,a as ts}from"./dollar-sign-Bo-8RVMy.js";import{T as qt}from"./trending-up-N7MJ7dGb.js";import{P as we}from"./plus-DfrWplDF.js";import{T as G}from"./trash-2-C7F9tESF.js";import{S as as}from"./shopping-bag-BE_tkB_V.js";import{P as rs}from"./printer-CW3Xd--g.js";import{C as Lt}from"./circle-alert-DqNvrMcJ.js";import"./skeleton-q7oRy3TX.js";import"./circle-check-C1Ekt1Y0.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],zt=Js("send",Vt),Mt=["Draft","Pending Approval","Approved","Rejected","Ordered","Partially Received","Received","Cancelled"];function ia({initialOpenDialog:Se,onDialogOpened:Ae,prefilledItem:P}){const{user:W}=Ys(),X=W?Ft(W.id):"user",ae=se(X,"purchase_orders:create"),is=se(X,"purchase_orders:approve"),ls=se(X,"purchase_orders:receive"),re=se(X,"purchase_orders:delete"),ve=se(X,"purchase_orders:permanent_delete"),{printReceipt:ns}=Dt(),{suppliers:Oe,isLoading:cs}=Zs(),{inventory:Ie,isLoading:ds}=et(),S=h.useMemo(()=>(Oe??[]).filter(s=>s.status==="Active"&&!s.archived),[Oe]),je=h.useMemo(()=>(Ie??[]).filter(s=>!s.archived),[Ie]),[j,ke]=h.useState(!1),[ie,Re]=h.useState(""),[g,q]=h.useState("all"),[Te,v]=h.useState(null),[os,us]=h.useState(!0),[ge,L]=h.useState(!1),[A,R]=h.useState(null),[J,le]=h.useState(null),[y,Fe]=h.useState(null),[Y,ye]=h.useState("asc"),[l,x]=h.useState({poDate:new Date().toISOString().split("T")[0],supplierId:"",supplierName:"",supplierCountry:"",supplierCity:"",billNumber:"",items:[],expectedDeliveryDate:"",notes:"",totalPaid:0,shippingStatus:"Pending"}),[Ee,Be]=h.useState({}),[$e,qe]=h.useState(void 0),[ms,T]=h.useState(!1),Ne=st(ie,300),V=h.useMemo(()=>Te??[],[Te]);h.useEffect(()=>{async function s(){try{const t=await De();v(t)}catch{n.error("Failed to load purchase orders")}finally{us(!1)}}s()},[]),h.useEffect(()=>{if(P&&S.length>0){const s=S.find(t=>t.id===P.supplierId);x({poDate:new Date().toISOString().split("T")[0],supplierId:P.supplierId,supplierName:P.supplierName,supplierCountry:s?.country??"",supplierCity:s?.city??"",billNumber:"",items:[{inventoryItemId:P.inventoryItemId,itemName:P.itemName,quantity:P.quantity,unitPrice:P.unitPrice,totalPrice:P.quantity*P.unitPrice}],expectedDeliveryDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],notes:"",totalPaid:0,shippingStatus:"Pending"}),L(!0)}},[P,S]),h.useEffect(()=>{Se&&!ge&&(L(!0),Ae?.())},[Se,Ae,ge]);const ne=h.useMemo(()=>{let s=V;if(s=s.filter(t=>t.archived===!0===j),Ne){const t=Ne.toLowerCase();s=s.filter(r=>r.id.toLowerCase().includes(t)||r.supplierName.toLowerCase().includes(t)||(r.items??[]).some(a=>a.itemName.toLowerCase().includes(t)))}return g!=="all"&&(s=s.filter(t=>t.status===g)),y&&(s=[...s].sort((t,r)=>{const a=t[y],i=r[y];return a==null?1:i==null?-1:typeof a=="string"&&typeof i=="string"?Y==="asc"?a.localeCompare(i):i.localeCompare(a):typeof a=="number"&&typeof i=="number"?Y==="asc"?a-i:i-a:0})),s},[V,Ne,g,y,Y,j]),{paginatedData:Le,currentPage:hs,totalPages:ps,goToPage:xs,itemsPerPage:vs,totalItems:js}=wt(ne,10),{selectedIds:ce,toggleItem:gs,toggleAll:ys,selectAllPages:Ns,isSelected:fs,isAllSelected:bs,isAllPageSelected:Cs,isAllPagesSelected:Ps,isPartiallySelected:Ds,selectionCount:fe,hasSelection:ws,deselectAll:Z,totalItemCount:Ve,pageItemCount:ze}=St(Le,ne),N=h.useMemo(()=>{const s=V.filter(p=>!p.archived),t=new Date,r=new Date(t.getTime()-10080*60*1e3),a=s.length,i=s.reduce((p,Ye)=>p+(Ye.totalAmount??0),0),c=a>0?i/a:0,u=s.filter(p=>p.status==="Draft").length,F=s.filter(p=>p.status==="Pending Approval").length,We=s.filter(p=>p.status==="Approved").length,be=s.filter(p=>p.status==="Ordered").length,Ce=s.filter(p=>p.status==="Partially Received").length,Xe=s.filter(p=>p.status==="Received").length,_s=s.filter(p=>p.status==="Rejected").length,Hs=s.filter(p=>p.status==="Cancelled").length,Qs=u+F+We+be+Ce,Je=Xe,Gs=a>0?Math.round(Je/a*100):0,Ws=s.filter(p=>new Date(p.createdDate)>=r).length,Xs=be+Ce;return{totalPOs:a,totalValue:i,avgOrderValue:c,draftCount:u,pendingApprovalCount:F,approvedCount:We,orderedCount:be,partiallyReceivedCount:Ce,receivedCount:Xe,rejectedCount:_s,cancelledCount:Hs,activePOs:Qs,completionRate:Gs,newThisWeek:Ws,pendingDelivery:Xs,completedPOs:Je}},[V]),Me=s=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),Ss=()=>{Re(""),q("all"),ke(!1)},ee=s=>{switch(s){case"Draft":return"ðŸ“";case"Pending Approval":return"â³";case"Approved":return"âœ“";case"Rejected":return"âœ—";case"Ordered":return"ðŸ“¦";case"Partially Received":return"ðŸ“¥";case"Received":return"âœ“";case"Cancelled":return"â—‹";default:return"â—‹"}},de=s=>{switch(s){case"Draft":return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200";case"Pending Approval":return"bg-amber-500/15 text-amber-700 dark:text-amber-400 border-amber-200";case"Approved":return"bg-blue-500/15 text-blue-700 dark:text-blue-400 border-blue-200";case"Rejected":return"bg-red-500/15 text-red-700 dark:text-red-400 border-red-200";case"Ordered":return"bg-purple-500/15 text-purple-700 dark:text-purple-400 border-purple-200";case"Partially Received":return"bg-orange-500/15 text-orange-700 dark:text-orange-400 border-orange-200";case"Received":return"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-200";case"Cancelled":return"bg-gray-500/15 text-gray-700 dark:text-gray-400 border-gray-200";default:return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200"}},O=s=>{const t=s;y===t?Y==="asc"?ye("desc"):(Fe(null),ye("asc")):(Fe(t),ye("asc"))},I=s=>y===s?Y:null,Ke=s=>{const t={Draft:{variant:"secondary"},"Pending Approval":{variant:"outline",className:"border-yellow-500 text-yellow-600"},Approved:{variant:"outline",className:"border-blue-500 text-blue-600"},Rejected:{variant:"destructive"},Ordered:{variant:"outline",className:"border-purple-500 text-purple-600"},"Partially Received":{variant:"outline",className:"border-orange-500 text-orange-600"},Received:{variant:"default",className:"bg-green-500"},Cancelled:{variant:"secondary",className:"text-gray-500"}},{variant:r,className:a}=t[s];return e.jsxs(B,{variant:r,className:E("gap-1",a),children:[e.jsx("span",{children:ee(s)}),s]})},z=()=>{x({poDate:new Date().toISOString().split("T")[0],supplierId:"",supplierName:"",supplierCountry:"",supplierCity:"",billNumber:"",items:[],expectedDeliveryDate:"",notes:"",totalPaid:0,shippingStatus:"Pending"})},Ue=()=>{x(s=>({...s,items:[...s.items,{inventoryItemId:"",itemName:"",quantity:1,unitPrice:0,totalPrice:0}]}))},_e=s=>{x(t=>({...t,items:t.items.filter((r,a)=>a!==s)}))},M=(s,t,r)=>{x(a=>{const i=[...a.items];if(t==="inventoryItemId"){const c=je.find(u=>u.id===r);c&&(i[s]={...i[s],inventoryItemId:c.id,itemName:c.name,unitPrice:c.pricePerPiece,totalPrice:i[s].quantity*c.pricePerPiece})}else if(t==="quantity"){const c=Number(r)||0;i[s]={...i[s],quantity:c,totalPrice:c*i[s].unitPrice}}else if(t==="unitPrice"){const c=Number(r)||0;i[s]={...i[s],unitPrice:c,totalPrice:i[s].quantity*c}}return{...a,items:i}})},He=s=>{const t=S.find(r=>r.id===s);x(r=>({...r,supplierId:s,supplierName:t?.name??"",supplierCountry:t?.country??"",supplierCity:t?.city??""}))},As=async()=>{if(!l.supplierId||l.items.length===0||!l.expectedDeliveryDate){n.error("Please fill in all required fields");return}try{const s=await ct({poDate:l.poDate,supplierId:l.supplierId,supplierName:l.supplierName,supplierCountry:l.supplierCountry,supplierCity:l.supplierCity,billNumber:l.billNumber,items:l.items,expectedDeliveryDate:l.expectedDeliveryDate,notes:l.notes,createdBy:W?.id??"1",totalPaid:l.totalPaid});v(t=>[s,...t??[]]),n.success(`Purchase Order ${s.id} created successfully`),L(!1),z()}catch(s){n.error(s instanceof Error?s.message:"Failed to create purchase order")}},Os=async s=>{if(!l.supplierId||l.items.length===0||!l.expectedDeliveryDate){n.error("Please fill in all required fields");return}try{const t=await es({id:s,poDate:l.poDate,supplierId:l.supplierId,supplierName:l.supplierName,supplierCountry:l.supplierCountry,supplierCity:l.supplierCity,billNumber:l.billNumber,items:l.items,expectedDeliveryDate:l.expectedDeliveryDate,notes:l.notes,totalPaid:l.totalPaid,shippingStatus:l.shippingStatus});v(r=>r?.map(a=>a.id===s?t:a)??[]),n.success(`Purchase Order ${s} updated successfully`),R(null),z()}catch(t){n.error(t instanceof Error?t.message:"Failed to update purchase order")}},Is=async(s,t,r)=>{try{const a={[t]:r},i=await es({id:s,...a});v(c=>c?.map(u=>u.id===s?i:u)??[]),n.success(`${t.charAt(0).toUpperCase()+t.slice(1)} updated`)}catch(a){throw n.error(a?.message||"Failed to update"),a}},ks=async s=>{try{const t=await ot(s);v(r=>r?.map(a=>a.id===s?t:a)??[]),n.success(`Purchase Order ${s} submitted for approval`)}catch(t){n.error(t instanceof Error?t.message:"Failed to submit for approval")}},Rs=async s=>{try{const t=await ut(s,W?.id??"1");v(r=>r?.map(a=>a.id===s?t:a)??[]),n.success(`Purchase Order ${s} approved`)}catch(t){n.error(t instanceof Error?t.message:"Failed to approve")}},Ts=async s=>{try{const t=await mt(s,W?.id??"1");v(r=>r?.map(a=>a.id===s?t:a)??[]),n.success(`Purchase Order ${s} rejected`)}catch(t){n.error(t instanceof Error?t.message:"Failed to reject")}},Fs=async s=>{try{const t=await ht(s);v(r=>r?.map(a=>a.id===s?t:a)??[]),n.success(`Purchase Order ${s} marked as ordered`)}catch(t){n.error(t instanceof Error?t.message:"Failed to mark as ordered")}},Es=async s=>{try{const t=await pt(s);v(r=>r?.map(a=>a.id===s?t:a)??[]),n.success(`Purchase Order ${s} cancelled`)}catch(t){n.error(t instanceof Error?t.message:"Failed to cancel")}},Bs=s=>{const t={};(s.items??[]).forEach(r=>{const a=r.quantity-(r.quantityReceived??0);t[r.inventoryItemId]=a}),Be(t),qe(s.totalAmount),le(s.id)},$s=async s=>{try{const t=Object.entries(Ee).filter(([a,i])=>i>0).map(([a,i])=>({inventoryItemId:a,quantityReceived:i}));if(t.length===0){n.error("Please enter quantities to receive");return}const r=await gt(s,t,$e);if(v(a=>a?.map(i=>i.id===s?r.purchaseOrder:i)??[]),r.inventoryUpdates.length>0){const a=r.inventoryUpdates.map(i=>`${i.itemName}: ${i.previousQty} â†’ ${i.newQty}`).join(", ");n.success(`Items received. Inventory updated: ${a}`)}else n.success("Items received successfully");le(null)}catch(t){n.error(t instanceof Error?t.message:"Failed to receive items")}},qs=async s=>{try{const t=await jt(s);v(r=>(r??[]).map(a=>a.id===s?t:a)),R(null),n.success("Purchase order archived")}catch(t){n.error(t instanceof Error?t.message:"Failed to archive purchase order")}},Ls=async s=>{try{const t=await xt(s);v(r=>(r??[]).map(a=>a.id===s?t:a)),R(null),n.success("Purchase order restored")}catch(t){n.error(t instanceof Error?t.message:"Failed to restore purchase order")}},Vs=async s=>{try{await vt(s),v(t=>(t??[]).filter(r=>r.id!==s)),R(null),n.success("Purchase order permanently deleted")}catch(t){n.error(t instanceof Error?t.message:"Failed to permanently delete purchase order")}},zs=async()=>{try{const s=await Nt(Array.from(ce));s.success?n.success(`${s.successCount} purchase orders archived`):n.warning(`${s.successCount} archived, ${s.failedCount} failed`);const t=await De();v(t),Z(),T(!1)}catch{n.error("Failed to archive purchase orders")}},Ms=async()=>{try{const s=await dt(Array.from(ce));s.success?n.success(`${s.successCount} purchase orders restored`):n.warning(`${s.successCount} restored, ${s.failedCount} failed`);const t=await De();v(t),Z()}catch{n.error("Failed to restore purchase orders")}},Qe=async()=>{try{const s=await yt(Array.from(ce));s.success?n.success(`${s.successCount} purchase orders permanently deleted`):n.warning(`${s.successCount} deleted, ${s.failedCount} failed`),v(t=>t?.filter(r=>!ce.has(r.id))??[]),Z(),T(!1)}catch{n.error("Failed to permanently delete purchase orders")}},Ks=s=>{x({poDate:s.poDate??s.createdDate,supplierId:s.supplierId,supplierName:s.supplierName,supplierCountry:s.supplierCountry??"",supplierCity:s.supplierCity??"",billNumber:s.billNumber??"",items:(s.items??[]).map(t=>({inventoryItemId:t.inventoryItemId,itemName:t.itemName,quantity:t.quantity,unitPrice:t.unitPrice,totalPrice:t.totalPrice})),expectedDeliveryDate:s.expectedDeliveryDate,notes:s.notes,totalPaid:s.totalPaid??0,shippingStatus:s.shippingStatus??"Pending"}),R(s.id)},Us=()=>{const s=["Date","PO ID","Supplier ID","Supplier Name","Bill #","Country","City","Items","Total Amount","Total Paid","PO Balance","MT Status","Shipping Status","Expected Delivery","Notes"],t=ne.map(u=>[u.poDate??u.createdDate,u.id,u.supplierId,u.supplierName,u.billNumber??"",u.supplierCountry??"",u.supplierCity??"",(u.items??[]).map(F=>`${F.itemName} (${F.quantity})`).join("; "),(u.totalAmount??0).toFixed(2),(u.totalPaid??0).toFixed(2),(u.poBalance??u.totalAmount??0).toFixed(2),u.status,u.shippingStatus??"Pending",u.expectedDeliveryDate,u.notes]),r=[s,...t].map(u=>u.map(F=>`"${F}"`).join(",")).join(`
`),a=new Blob([r],{type:"text/csv"}),i=URL.createObjectURL(a),c=document.createElement("a");c.href=i,c.download=`purchase-orders-${new Date().toISOString().split("T")[0]}.csv`,c.click(),URL.revokeObjectURL(i),n.success("Purchase orders exported to CSV")},oe=h.useMemo(()=>l.items.reduce((s,t)=>s+t.totalPrice,0),[l.items]),Ge=s=>{const t={type:"purchase-order",documentNumber:s.id,documentDate:s.poDate??s.createdDate,partyType:"Supplier",partyName:s.supplierName,partyCity:s.supplierCity,partyCountry:s.supplierCountry,referenceNumber:s.billNumber,referenceLabel:"Bill No.",items:(s.items??[]).map(r=>({description:r.itemName,quantity:r.quantity,unitPrice:r.unitPrice,total:r.totalPrice})),totalAmount:s.totalAmount??0,amountPaid:s.totalPaid??0,balance:s.poBalance??s.totalAmount-(s.totalPaid??0)??0,status:`${s.status} / ${s.shippingStatus??"Pending"}`,expectedDeliveryDate:s.expectedDeliveryDate,notes:s.notes,approvedBy:s.approvedBy,approvedDate:s.approvedDate,createdBy:s.createdBy};ns(t)};return os||cs||ds?e.jsx("div",{className:"p-6",children:e.jsx(At,{rows:8})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Purchase Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage supplier orders, track approvals, and receive inventory"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(b,{className:"relative overflow-hidden",children:[e.jsxs(D,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Total POs"}),e.jsx(Bt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold",children:N.totalPOs}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[N.newThisWeek," new this week"]})]})]}),e.jsxs(b,{className:"relative overflow-hidden",children:[e.jsxs(D,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Total Value"}),e.jsx($t,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:Me(N.totalValue)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Avg: ",Me(N.avgOrderValue)," per PO"]})]})]}),e.jsxs(b,{className:"relative overflow-hidden",children:[e.jsxs(D,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Active POs"}),e.jsx(tt,{className:"h-4 w-4 text-amber-600"})]}),e.jsxs(C,{children:[e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:N.activePOs}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[N.orderedCount," ordered, ",N.pendingApprovalCount," pending approval"]})]})]}),e.jsxs(b,{className:"relative overflow-hidden",children:[e.jsxs(D,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(w,{className:"text-sm font-medium text-muted-foreground",children:"Completion Rate"}),e.jsx(qt,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(C,{children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[N.completionRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[N.completedPOs," received of ",N.totalPOs," total"]})]})]})]}),e.jsxs("div",{className:"grid gap-3 grid-cols-2 md:grid-cols-4",children:[e.jsx(b,{className:E("cursor-pointer transition-all hover:shadow-md border-l-4",g==="Draft"?"ring-2 ring-primary":"","border-l-slate-400"),onClick:()=>q(g==="Draft"?"all":"Draft"),children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Draft"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:N.draftCount})]}),e.jsx(B,{variant:"outline",className:de("Draft"),children:ee("Draft")})]})})}),e.jsx(b,{className:E("cursor-pointer transition-all hover:shadow-md border-l-4",g==="Pending Approval"?"ring-2 ring-primary":"","border-l-amber-400"),onClick:()=>q(g==="Pending Approval"?"all":"Pending Approval"),children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Pending Approval"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:N.pendingApprovalCount})]}),e.jsx(B,{variant:"outline",className:de("Pending Approval"),children:ee("Pending Approval")})]})})}),e.jsx(b,{className:E("cursor-pointer transition-all hover:shadow-md border-l-4",g==="Ordered"?"ring-2 ring-primary":"","border-l-blue-400"),onClick:()=>q(g==="Ordered"?"all":"Ordered"),children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Ordered"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:N.orderedCount})]}),e.jsx(B,{variant:"outline",className:de("Ordered"),children:ee("Ordered")})]})})}),e.jsx(b,{className:E("cursor-pointer transition-all hover:shadow-md border-l-4",g==="Received"?"ring-2 ring-primary":"","border-l-emerald-400"),onClick:()=>q(g==="Received"?"all":"Received"),children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Received"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:N.receivedCount})]}),e.jsx(B,{variant:"outline",className:de("Received"),children:ee("Received")})]})})})]}),e.jsxs(b,{children:[e.jsxs(D,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(w,{children:"Purchase Order Management"}),e.jsx(at,{children:"Create and manage supplier purchase orders"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{variant:"outline",onClick:Us,children:[e.jsx(ft,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),ae&&e.jsxs(ue,{open:ge,onOpenChange:s=>{L(s),s||z()},children:[e.jsx(rt,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Create PO"]})}),e.jsxs(me,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(he,{children:[e.jsx(pe,{children:"Create Purchase Order"}),e.jsx(xe,{children:"Create a new purchase order for supplier items"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs(b,{children:[e.jsx(D,{className:"pb-3",children:e.jsx(w,{className:"text-base",children:"Purchase Order Information"})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"PO Date *"}),e.jsx(m,{type:"date",value:l.poDate,onChange:s=>x(t=>({...t,poDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Supplier *"}),e.jsxs(K,{value:l.supplierId,onValueChange:He,children:[e.jsx(U,{children:e.jsx(_,{placeholder:"Select supplier"})}),e.jsx(H,{children:S.map(s=>e.jsx($,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Supplier ID"}),e.jsx(m,{value:l.supplierId,disabled:!0,placeholder:"Auto-populated"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Country"}),e.jsx(m,{value:l.supplierCountry,disabled:!0,placeholder:"Auto-populated"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"City"}),e.jsx(m,{value:l.supplierCity,disabled:!0,placeholder:"Auto-populated"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Bill Number"}),e.jsx(m,{value:l.billNumber,onChange:s=>x(t=>({...t,billNumber:s.target.value})),placeholder:"Invoice/bill reference"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Expected Delivery Date *"}),e.jsx(m,{type:"date",value:l.expectedDeliveryDate,onChange:s=>x(t=>({...t,expectedDeliveryDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Notes"}),e.jsx(m,{value:l.notes,onChange:s=>x(t=>({...t,notes:s.target.value})),placeholder:"Optional notes..."})]})]})]})]}),e.jsxs(b,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{className:"text-base",children:"Line Items"}),e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:Ue,children:[e.jsx(we,{className:"h-4 w-4 mr-1"})," Add Item"]})]})}),e.jsx(C,{children:l.items.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No items added. Click "Add Item" to add items.'}):e.jsxs("div",{className:"space-y-2",children:[l.items.map((s,t)=>e.jsxs("div",{className:"flex gap-2 items-end p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(o,{className:"text-xs",children:"Item"}),e.jsxs(K,{value:s.inventoryItemId,onValueChange:r=>M(t,"inventoryItemId",r),children:[e.jsx(U,{children:e.jsx(_,{placeholder:"Select item"})}),e.jsx(H,{children:je.map(r=>e.jsxs($,{value:r.id,children:[r.name," (",r.id,")"]},r.id))})]})]}),e.jsxs("div",{className:"w-24 space-y-1",children:[e.jsx(o,{className:"text-xs",children:"Quantity"}),e.jsx(m,{type:"number",min:"1",value:s.quantity,onChange:r=>M(t,"quantity",r.target.value)})]}),e.jsxs("div",{className:"w-28 space-y-1",children:[e.jsx(o,{className:"text-xs",children:"Unit Price"}),e.jsx(m,{type:"number",min:"0",step:"0.01",value:s.unitPrice,onChange:r=>M(t,"unitPrice",r.target.value)})]}),e.jsxs("div",{className:"w-28 space-y-1",children:[e.jsx(o,{className:"text-xs",children:"Total"}),e.jsx(m,{value:`â‚±${s.totalPrice.toFixed(2)}`,disabled:!0})]}),e.jsx(d,{type:"button",variant:"ghost",size:"icon",onClick:()=>_e(t),children:e.jsx(G,{className:"h-4 w-4 text-destructive"})})]},t)),e.jsxs("div",{className:"text-right font-semibold pt-2 border-t",children:["Grand Total: â‚±",oe.toFixed(2)]})]})})]}),e.jsxs(it,{children:[e.jsx(d,{variant:"outline",onClick:()=>{L(!1),z()},children:"Cancel"}),e.jsx(d,{onClick:As,children:"Create Purchase Order"})]})]})]})]})]})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(lt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(m,{placeholder:"Search PO ID, supplier, or items...",value:ie,onChange:s=>Re(s.target.value),className:"pl-10"})]}),e.jsxs(K,{value:g,onValueChange:q,children:[e.jsxs(U,{className:"w-48",children:[e.jsx(Ot,{className:"h-4 w-4 mr-2"}),e.jsx(_,{placeholder:"Filter by status"})]}),e.jsxs(H,{children:[e.jsx($,{value:"all",children:"All Statuses"}),Mt.map(s=>e.jsx($,{value:s,children:s},s))]})]}),e.jsxs(d,{variant:j?"default":"outline",size:"sm",onClick:()=>ke(!j),className:j?"bg-orange-500 hover:bg-orange-600 text-white":"",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),j?"Viewing Archived":"View Archived"]}),(ie||g!=="all"||j)&&e.jsxs(d,{variant:"ghost",size:"sm",onClick:Ss,className:"text-muted-foreground",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),"Clear Filters"]})]}),ws&&re&&e.jsx(It,{selectionCount:fe,onClearSelection:Z,actions:j?[{id:"restore",label:"Restore",icon:e.jsx(ts,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:Ms},...ve?[{id:"permanent-delete",label:"Permanently Delete",icon:e.jsx(G,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>T(!0)}]:[]]:[{id:"archive",label:"Archive",icon:e.jsx(te,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:()=>T(!0)}]}),ne.length===0?e.jsx(kt,{icon:j?te:as,title:j?"No archived purchase orders":"No purchase orders found",description:j?"Archived purchase orders will appear here":ie||g!=="all"?"Try adjusting your search or filters":"Create your first purchase order to get started",actionLabel:!j&&ae?"Create PO":void 0,onAction:!j&&ae?()=>L(!0):void 0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx(Rt,{pageItemCount:ze,totalItemCount:Ve,isAllPagesSelected:Ps,show:Cs&&Ve>ze,onSelectAllPages:Ns,onClearSelection:Z,itemLabel:"orders"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(bt,{children:[e.jsx(Ct,{children:e.jsxs(ss,{children:[re&&e.jsx(Q,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:bs,ref:s=>{s&&(s.indeterminate=Ds)},onChange:()=>ys(),className:"h-4 w-4"})}),e.jsx(k,{sortKey:"poDate",currentSortKey:y,sortDirection:I("poDate"),onSort:O,children:"Date"}),e.jsx(k,{sortKey:"id",currentSortKey:y,sortDirection:I("id"),onSort:O,children:"PO ID"}),e.jsx(Q,{children:"Supplier ID"}),e.jsx(k,{sortKey:"supplierName",currentSortKey:y,sortDirection:I("supplierName"),onSort:O,children:"Supplier Name"}),e.jsx(Q,{children:"Bill #"}),e.jsx(Q,{children:"Country"}),e.jsx(Q,{children:"City"}),e.jsx(k,{sortKey:"totalAmount",currentSortKey:y,sortDirection:I("totalAmount"),onSort:O,className:"text-right",children:"Total Amount"}),e.jsx(k,{sortKey:"totalPaid",currentSortKey:y,sortDirection:I("totalPaid"),onSort:O,className:"text-right",children:"Total Paid"}),e.jsx(k,{sortKey:"poBalance",currentSortKey:y,sortDirection:I("poBalance"),onSort:O,className:"text-right",children:"PO Balance"}),e.jsx(k,{sortKey:"status",currentSortKey:y,sortDirection:I("status"),onSort:O,children:"MT Status"}),e.jsx(k,{sortKey:"shippingStatus",currentSortKey:y,sortDirection:I("shippingStatus"),onSort:O,children:"Shipping"}),e.jsx(Q,{children:"Actions"})]})}),e.jsx(Pt,{children:Le.map(s=>e.jsxs(ss,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Ks(s),children:[re&&e.jsx(f,{onClick:t=>t.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:fs(s.id),onChange:()=>gs(s.id),className:"h-4 w-4"})}),e.jsx(f,{className:"whitespace-nowrap",children:s.poDate??s.createdDate}),e.jsx(f,{className:"font-medium",children:s.id}),e.jsx(f,{className:"text-muted-foreground",children:s.supplierId}),e.jsx(f,{onClick:t=>t.stopPropagation(),children:e.jsx(Et,{value:s.supplierId,displayValue:s.supplierName,type:"select",options:S.filter(t=>t.status==="Active").map(t=>({value:t.id,label:t.name})),onSave:t=>{const r=S.find(a=>a.id===t);return Is(s.id,"supplierName",r?.name??"")},disabled:s.status!=="Draft"||!ae})}),e.jsx(f,{className:"text-muted-foreground",children:s.billNumber||"-"}),e.jsx(f,{children:s.supplierCountry||"-"}),e.jsx(f,{children:s.supplierCity||"-"}),e.jsxs(f,{className:"text-right font-medium",children:["â‚±",(s.totalAmount??0).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsxs(f,{className:"text-right",children:["â‚±",(s.totalPaid??0).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(f,{className:"text-right font-medium",children:e.jsxs("span",{className:E((s.poBalance??s.totalAmount??0)>0?"text-orange-600":"text-green-600"),children:["â‚±",(s.poBalance??s.totalAmount??0).toLocaleString(void 0,{minimumFractionDigits:2})]})}),e.jsx(f,{children:Ke(s.status)}),e.jsx(f,{children:e.jsx(B,{variant:s.shippingStatus==="Delivered"?"default":s.shippingStatus==="In Transit"||s.shippingStatus==="Shipped"?"secondary":s.shippingStatus==="Failed"||s.shippingStatus==="Returned"?"destructive":"outline",children:s.shippingStatus??"Pending"})}),e.jsx(f,{onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"flex gap-1",children:[s.status==="Draft"&&e.jsx(d,{size:"sm",variant:"outline",onClick:()=>ks(s.id),title:"Submit for Approval",children:e.jsx(zt,{className:"h-4 w-4"})}),s.status==="Pending Approval"&&is&&e.jsxs(e.Fragment,{children:[e.jsx(d,{size:"sm",variant:"outline",className:"text-green-600",onClick:()=>Rs(s.id),title:"Approve",children:e.jsx(nt,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",variant:"outline",className:"text-red-600",onClick:()=>Ts(s.id),title:"Reject",children:e.jsx(Pe,{className:"h-4 w-4"})})]}),s.status==="Approved"&&e.jsx(d,{size:"sm",variant:"outline",onClick:()=>Fs(s.id),title:"Mark as Ordered",children:e.jsx(as,{className:"h-4 w-4"})}),(s.status==="Ordered"||s.status==="Partially Received")&&ls&&e.jsx(d,{size:"sm",variant:"outline",onClick:()=>Bs(s),title:"Receive Items",children:e.jsx(Ze,{className:"h-4 w-4"})}),!["Received","Cancelled"].includes(s.status)&&e.jsx(d,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>Es(s.id),title:"Cancel",children:e.jsx(Pe,{className:"h-4 w-4"})}),e.jsx(d,{size:"sm",variant:"outline",onClick:()=>Ge(s),title:"Print PO",children:e.jsx(rs,{className:"h-4 w-4"})})]})})]},s.id))})]})})]}),e.jsx(Tt,{currentPage:hs,totalPages:ps,itemsPerPage:vs,onPageChange:xs,totalItems:js})]}),A&&e.jsx(ue,{open:!!A,onOpenChange:s=>{s||(R(null),z())},children:e.jsxs(me,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(he,{children:[e.jsxs(pe,{children:["Edit Purchase Order - ",A]}),e.jsx(xe,{children:"Update purchase order details"})]}),e.jsx("div",{className:"space-y-6 py-4",children:(()=>{const s=V.find(a=>a.id===A),t=s?.status==="Draft",r=["Pending","Processing","Shipped","In Transit","Out for Delivery","Delivered","Failed","Returned"];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"MT Status:"}),s&&Ke(s.status),e.jsx("span",{className:"text-sm text-muted-foreground ml-4",children:"Shipping:"}),e.jsx(B,{variant:s?.shippingStatus==="Delivered"?"default":s?.shippingStatus==="In Transit"||s?.shippingStatus==="Shipped"?"secondary":s?.shippingStatus==="Failed"||s?.shippingStatus==="Returned"?"destructive":"outline",children:s?.shippingStatus??"Pending"})]}),e.jsxs(b,{children:[e.jsx(D,{className:"pb-3",children:e.jsx(w,{className:"text-base",children:"Purchase Order Information"})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"PO Date"}),e.jsx(m,{type:"date",value:l.poDate,onChange:a=>x(i=>({...i,poDate:a.target.value})),disabled:!t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Supplier"}),e.jsxs(K,{value:l.supplierId,onValueChange:He,disabled:!t,children:[e.jsx(U,{children:e.jsx(_,{placeholder:"Select supplier"})}),e.jsx(H,{children:S.map(a=>e.jsx($,{value:a.id,children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Supplier ID"}),e.jsx(m,{value:l.supplierId,disabled:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Country"}),e.jsx(m,{value:l.supplierCountry,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"City"}),e.jsx(m,{value:l.supplierCity,disabled:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Bill Number"}),e.jsx(m,{value:l.billNumber,onChange:a=>x(i=>({...i,billNumber:a.target.value})),placeholder:"Invoice/bill reference",disabled:!t})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Expected Delivery Date"}),e.jsx(m,{type:"date",value:l.expectedDeliveryDate,onChange:a=>x(i=>({...i,expectedDeliveryDate:a.target.value})),disabled:!t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Total Paid"}),e.jsx(m,{type:"number",min:"0",step:"0.01",value:l.totalPaid,onChange:a=>x(i=>({...i,totalPaid:Number(a.target.value)||0})),disabled:!t})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Shipping Status"}),e.jsxs(K,{value:l.shippingStatus,onValueChange:a=>x(i=>({...i,shippingStatus:a})),disabled:!t,children:[e.jsx(U,{children:e.jsx(_,{placeholder:"Select status"})}),e.jsx(H,{children:r.map(a=>e.jsx($,{value:a,children:a},a))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Notes"}),e.jsx(m,{value:l.notes,onChange:a=>x(i=>({...i,notes:a.target.value})),placeholder:"Optional notes...",disabled:!t})]})]})]}),e.jsxs(b,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(w,{className:"text-base",children:"Line Items"}),t&&e.jsxs(d,{type:"button",variant:"outline",size:"sm",onClick:Ue,children:[e.jsx(we,{className:"h-4 w-4 mr-1"})," Add Item"]})]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-2",children:[l.items.map((a,i)=>e.jsxs("div",{className:"flex gap-2 items-end p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx(o,{className:"text-xs",children:"Item"}),e.jsxs(K,{value:a.inventoryItemId,onValueChange:c=>M(i,"inventoryItemId",c),disabled:!t,children:[e.jsx(U,{children:e.jsx(_,{placeholder:"Select item"})}),e.jsx(H,{children:je.map(c=>e.jsxs($,{value:c.id,children:[c.name," (",c.id,")"]},c.id))})]})]}),e.jsxs("div",{className:"w-24 space-y-1",children:[e.jsx(o,{className:"text-xs",children:"Quantity"}),e.jsx(m,{type:"number",min:"1",value:a.quantity,onChange:c=>M(i,"quantity",c.target.value),disabled:!t})]}),e.jsxs("div",{className:"w-28 space-y-1",children:[e.jsx(o,{className:"text-xs",children:"Unit Price"}),e.jsx(m,{type:"number",min:"0",step:"0.01",value:a.unitPrice,onChange:c=>M(i,"unitPrice",c.target.value),disabled:!t})]}),e.jsxs("div",{className:"w-28 space-y-1",children:[e.jsx(o,{className:"text-xs",children:"Total"}),e.jsx(m,{value:`â‚±${a.totalPrice.toFixed(2)}`,disabled:!0})]}),t&&e.jsx(d,{type:"button",variant:"ghost",size:"icon",onClick:()=>_e(i),children:e.jsx(G,{className:"h-4 w-4 text-destructive"})})]},i)),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["PO Balance: ",e.jsxs("span",{className:E(oe-l.totalPaid>0?"text-orange-600 font-medium":"text-green-600 font-medium"),children:["â‚±",(oe-l.totalPaid).toFixed(2)]})]}),e.jsxs("div",{className:"font-semibold",children:["Grand Total: â‚±",oe.toFixed(2)]})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[s?.archived?e.jsxs(e.Fragment,{children:[e.jsxs(d,{variant:"outline",onClick:()=>Ls(A),children:[e.jsx(ts,{className:"h-4 w-4 mr-2"}),"Restore"]}),ve&&e.jsxs(d,{variant:"destructive",onClick:()=>Vs(A),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Permanently Delete"]})]}):re&&["Draft","Cancelled","Rejected"].includes(s?.status??"")&&e.jsxs(d,{variant:"outline",onClick:()=>qs(A),className:"text-orange-600 border-orange-300 hover:bg-orange-50",children:[e.jsx(te,{className:"h-4 w-4 mr-2"}),"Archive"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[s&&e.jsxs(d,{variant:"outline",onClick:()=>Ge(s),children:[e.jsx(rs,{className:"h-4 w-4 mr-2"}),"Print PO"]}),e.jsx(d,{variant:"outline",onClick:()=>{R(null),z()},children:"Close"}),t&&!s?.archived&&e.jsx(d,{onClick:()=>Os(A),children:"Save Changes"})]})]})]})})()})]})}),J&&e.jsx(ue,{open:!!J,onOpenChange:s=>{s||le(null)},children:e.jsxs(me,{className:"max-w-2xl",children:[e.jsxs(he,{children:[e.jsxs(pe,{children:["Receive Items - ",J]}),e.jsx(xe,{children:"Enter quantities received for each item"})]}),e.jsx("div",{className:"space-y-4 py-4",children:(()=>{const s=V.find(t=>t.id===J);return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2",children:(s.items??[]).map(t=>{const r=t.quantity-(t.quantityReceived??0);return e.jsxs("div",{className:"flex items-center gap-4 p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:t.itemName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ordered: ",t.quantity," | Received: ",t.quantityReceived??0," | Remaining: ",r]})]}),e.jsxs("div",{className:"w-32",children:[e.jsx(o,{className:"text-xs",children:"Receive Qty"}),e.jsx(m,{type:"number",min:"0",max:r,value:Ee[t.inventoryItemId]??0,onChange:a=>Be(i=>({...i,[t.inventoryItemId]:Math.min(Number(a.target.value)||0,r)}))})]})]},t.inventoryItemId)})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"Actual Cost (optional)"}),e.jsx(m,{type:"number",min:"0",step:"0.01",value:$e??"",onChange:t=>qe(t.target.value?Number(t.target.value):void 0),placeholder:`Expected: â‚±${s.totalAmount.toFixed(2)}`})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(d,{variant:"outline",onClick:()=>le(null),children:"Cancel"}),e.jsxs(d,{onClick:()=>$s(J),children:[e.jsx(Ze,{className:"h-4 w-4 mr-2"})," Receive Items"]})]})]}):null})()})]})}),e.jsx(ue,{open:ms,onOpenChange:T,children:e.jsxs(me,{className:"max-w-md",children:[e.jsxs(he,{children:[e.jsxs(pe,{className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-5 w-5 text-destructive"}),"Delete ",fe," Purchase Order",fe!==1?"s":""]}),e.jsx(xe,{children:j?"These purchase orders are already archived. This action will permanently remove them from the system.":"Choose how you want to delete the selected purchase orders:"})]}),j?e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(G,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This cannot be undone. All data will be permanently removed."})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(d,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(d,{variant:"destructive",onClick:Qe,children:"Permanently Delete All"})]})]}):e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border rounded-md hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(te,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Archive"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Move to archive. Purchase orders can be restored later."})]}),e.jsx(d,{variant:"secondary",size:"sm",onClick:zs,children:"Archive"})]})}),ve&&e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(G,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Delete Permanently"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be undone. Data will be permanently removed."})]}),e.jsx(d,{variant:"destructive",size:"sm",onClick:Qe,children:"Delete"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(d,{variant:"outline",onClick:()=>T(!1),children:"Cancel"})})]})]})})]})]})]})}export{ia as PurchaseOrdersView};
