import{i as ps,r as c,M as xs,j as e,B as o,D as re,$ as ge,y as ne,z as le,A as ie,E as ce,F as ve,C as O,o as B,p as L,q as E,bB as Ce,a2 as ys,I as v,d as Pe,bC as js,l as Ns,ak as fs,x as i,L as j,bD as bs,bE as gs,bF as vs,w as Cs,bG as Ps,bH as Ds,bI as Ss,bJ as ws,bK as Ts}from"./index-BCa2F9Oi.js";import{g as Is,h as oe}from"./permissions-DeuZZz56.js";import{u as As,a as ks,F as Fs,B as Ms,T as Os,E as Bs,S as Ls,P as Es}from"./select-all-banner-DBtbbpmu.js";import{D as Ks,S as q,a as _,b as W,c as G,d as K,T as Rs,e as Vs,f as De,g as Se,h as N,i as $s,j as h}from"./sortable-table-head-CYDUrhjV.js";import{u as zs}from"./printable-receipt-Cw_5Oxjq.js";import{P as Hs}from"./plus-CcDiGhlE.js";import{D as Us,a as de,A as J}from"./dollar-sign-keVYl0Vq.js";import{B as qs}from"./banknote-Cr5chi98.js";import{C as _s}from"./credit-card-Du7ScuHf.js";import{T as Y}from"./trash-2-DSfVdyab.js";import{P as Ws}from"./printer-Dg_dubOW.js";import{C as Gs}from"./circle-alert-C0dwRsyT.js";import"./skeleton-D3FuH7fY.js";import"./circle-check-B-3A3Upz.js";const we=["Cash","Bank Transfer","Credit Card","Check","Online Payment"],R=I=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(I);function oa(){const{user:I}=ps(),A=I?Is(I.id):"Viewer",Q=oe(A,"purchase_orders:create"),Te=oe(A,"purchase_orders:update"),Ie=oe(A,"purchase_orders:delete"),X=A==="Owner"||A==="Admin",{printReceipt:Ae}=zs(),[ke,f]=c.useState(null),[me,Fe]=c.useState([]),[Z,Me]=c.useState([]),[Oe,Be]=c.useState(!0),[ue,Le]=c.useState(""),P=xs(ue,300),[V,Ee]=c.useState("all"),[m,Ke]=c.useState(!1),[Re,$]=c.useState(!1),[Ve,z]=c.useState(null),[$e,k]=c.useState(!1),[d,he]=c.useState(null),[F,ee]=c.useState("asc"),[t,b]=c.useState({trxDate:new Date().toISOString().split("T")[0],supplierId:"",supplierName:"",country:"",city:"",poId:"",billNumber:"",paymentMode:"Cash",amountPaid:0,notes:""});c.useEffect(()=>{(async()=>{try{const[a,r,n]=await Promise.all([js(),Ns(),fs()]);f(a),Fe(r),Me(n)}catch{i.error("Failed to load data")}finally{Be(!1)}})()},[]);const H=ke??[],M=c.useMemo(()=>H.filter(s=>{const a=s.archived===!0;if(m!==a)return!1;const r=!P||s.id.toLowerCase().includes(P.toLowerCase())||s.supplierName.toLowerCase().includes(P.toLowerCase())||s.poId.toLowerCase().includes(P.toLowerCase())||s.billNumber.toLowerCase().includes(P.toLowerCase()),n=V==="all"||s.paymentMode===V;return r&&n}),[H,P,V,m]),pe=c.useMemo(()=>d?[...M].sort((s,a)=>{const r=s[d],n=a[d];if(r==null&&n==null)return 0;if(r==null)return 1;if(n==null)return-1;if(typeof r=="number"&&typeof n=="number")return F==="asc"?r-n:n-r;const C=String(r).toLowerCase(),g=String(n).toLowerCase();return F==="asc"?C.localeCompare(g):g.localeCompare(C)}):M,[M,d,F]),{currentPage:ze,totalPages:He,paginatedData:se,goToPage:Ue,itemsPerPage:qe,totalItems:_e}=As(pe,10),{selectedIds:D,isSelected:xe,toggleItem:We,toggleAll:Ge,selectAllPages:Je,deselectAll:S,isAllSelected:Ye,isAllPageSelected:Qe,isAllPagesSelected:Xe,isPartiallySelected:Ze,selectionCount:w,hasSelection:es,totalItemCount:ye,pageItemCount:je}=ks(se,pe),T=c.useMemo(()=>{const s=H.filter(l=>!l.archived),a=s.length,r=s.reduce((l,p)=>l+p.amountPaid,0),n=s.filter(l=>l.paymentMode==="Cash").reduce((l,p)=>l+p.amountPaid,0),C=s.filter(l=>l.paymentMode==="Bank Transfer").reduce((l,p)=>l+p.amountPaid,0),g=s.filter(l=>l.paymentMode==="Credit Card").reduce((l,p)=>l+p.amountPaid,0),u=s.filter(l=>l.paymentMode==="Check").reduce((l,p)=>l+p.amountPaid,0),ae=s.filter(l=>l.paymentMode==="Online Payment").reduce((l,p)=>l+p.amountPaid,0),te=new Date;te.setDate(te.getDate()-7);const hs=s.filter(l=>new Date(l.createdAt)>=te).length;return{totalTransactions:a,totalAmount:r,cashTotal:n,bankTotal:C,cardTotal:g,checkTotal:u,onlineTotal:ae,newThisWeek:hs,avgTransactionAmount:a>0?r/a:0}},[H]),x=s=>{const a=s;d===a?F==="asc"?ee("desc"):(he(null),ee("asc")):(he(a),ee("asc"))},y=s=>d===s?F:null,ss=s=>{const a={Cash:{variant:"default",className:"bg-green-500"},"Bank Transfer":{variant:"outline",className:"border-blue-500 text-blue-600"},"Credit Card":{variant:"outline",className:"border-purple-500 text-purple-600"},Check:{variant:"outline",className:"border-orange-500 text-orange-600"},"Online Payment":{variant:"outline",className:"border-cyan-500 text-cyan-600"}},{variant:r,className:n}=a[s];return e.jsx(Cs,{variant:r,className:Pe("gap-1",n),children:s})},U=()=>{b({trxDate:new Date().toISOString().split("T")[0],supplierId:"",supplierName:"",country:"",city:"",poId:"",billNumber:"",paymentMode:"Cash",amountPaid:0,notes:""})},as=s=>{const a=Z.find(r=>r.id===s);b(r=>({...r,supplierId:s,supplierName:a?.name??"",country:a?.country??"",city:a?.city??""}))},ts=s=>{const a=me.find(r=>r.id===s);if(a){const r=Z.find(n=>n.id===a.supplierId);b(n=>({...n,poId:s,supplierId:a.supplierId,supplierName:a.supplierName,country:r?.country??"",city:r?.city??"",billNumber:a.billNumber??""}))}},rs=async()=>{if(!t.supplierId||!t.poId||t.amountPaid<=0){i.error("Please fill in all required fields");return}try{const s=await bs({trxDate:t.trxDate,supplierId:t.supplierId,supplierName:t.supplierName,country:t.country,city:t.city,poId:t.poId,billNumber:t.billNumber,paymentMode:t.paymentMode,amountPaid:t.amountPaid,notes:t.notes,createdBy:I?.id??"1"});f(a=>[s,...a??[]]),i.success(`Transaction ${s.id} created successfully`),$(!1),U()}catch(s){i.error(s instanceof Error?s.message:"Failed to create transaction")}},ns=async s=>{if(!t.supplierId||!t.poId||t.amountPaid<=0){i.error("Please fill in all required fields");return}try{const a=await Ss({id:s,trxDate:t.trxDate,supplierId:t.supplierId,supplierName:t.supplierName,country:t.country,city:t.city,poId:t.poId,billNumber:t.billNumber,paymentMode:t.paymentMode,amountPaid:t.amountPaid,notes:t.notes});f(r=>r?.map(n=>n.id===s?a:n)??[]),i.success(`Transaction ${s} updated successfully`),z(null),U()}catch(a){i.error(a instanceof Error?a.message:"Failed to update transaction")}},ls=async s=>{try{const a=await ws(s);f(r=>r?.map(n=>n.id===s?a:n)??[]),i.success(`Transaction ${s} archived`)}catch(a){i.error(a instanceof Error?a.message:"Failed to archive transaction")}},is=async s=>{try{const a=await Ps(s);f(r=>r?.map(n=>n.id===s?a:n)??[]),i.success(`Transaction ${s} restored`)}catch(a){i.error(a instanceof Error?a.message:"Failed to restore transaction")}},cs=async s=>{try{await Ds(s),f(a=>a?.filter(r=>r.id!==s)??[]),i.success(`Transaction ${s} permanently deleted`)}catch(a){i.error(a instanceof Error?a.message:"Failed to delete transaction")}},Ne=async()=>{try{await vs(Array.from(D)),f(s=>s?.map(a=>D.has(a.id)?{...a,archived:!0,archivedAt:new Date().toISOString()}:a)??[]),i.success(`${w} transactions archived`),S()}catch{i.error("Failed to archive transactions")}},os=async()=>{try{await gs(Array.from(D)),f(s=>s?.map(a=>D.has(a.id)?{...a,archived:!1,archivedAt:void 0}:a)??[]),i.success(`${w} transactions restored`),S()}catch{i.error("Failed to restore transactions")}},fe=async()=>{try{await Ts(Array.from(D)),f(s=>s?.filter(a=>!D.has(a.id))??[]),i.success(`${w} transactions permanently deleted`),S(),k(!1)}catch{i.error("Failed to delete transactions")}},ds=s=>{b({trxDate:s.trxDate.split("T")[0],supplierId:s.supplierId,supplierName:s.supplierName,country:s.country,city:s.city,poId:s.poId,billNumber:s.billNumber,paymentMode:s.paymentMode,amountPaid:s.amountPaid,notes:s.notes??""}),z(s.id)},ms=()=>{const s=["Trx ID","Trx Date","Supplier ID","Supplier Name","Country","City","PO ID","Bill Num","PMT Mode","Amount Paid"],a=M.map(u=>[u.id,u.trxDate.split("T")[0],u.supplierId,u.supplierName,u.country,u.city,u.poId,u.billNumber,u.paymentMode,u.amountPaid.toFixed(2)]),r=[s.join(","),...a.map(u=>u.map(ae=>`"${ae}"`).join(","))].join(`
`),n=new Blob([r],{type:"text/csv"}),C=URL.createObjectURL(n),g=document.createElement("a");g.href=C,g.download=`payment-transactions-${new Date().toISOString().split("T")[0]}.csv`,g.click(),URL.revokeObjectURL(C),i.success("Transactions exported to CSV")},us=s=>{const a={type:"payment-voucher",documentNumber:s.id,documentDate:s.trxDate,partyType:"Supplier",partyName:s.supplierName,partyCity:s.city,partyCountry:s.country,referenceNumber:s.poId,referenceLabel:"Purchase Order",items:[{description:`Payment for Bill ${s.billNumber}`,quantity:1,unitPrice:s.amountPaid,total:s.amountPaid}],totalAmount:s.amountPaid,paymentMode:s.paymentMode,notes:s.notes,createdBy:s.createdBy};Ae(a)},be=()=>e.jsxs("div",{className:"grid gap-4 py-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"trxDate",children:"Transaction Date *"}),e.jsx(v,{id:"trxDate",type:"date",value:t.trxDate,onChange:s=>b(a=>({...a,trxDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"poId",children:"Purchase Order *"}),e.jsxs(q,{value:t.poId,onValueChange:ts,children:[e.jsx(_,{children:e.jsx(W,{placeholder:"Select Purchase Order"})}),e.jsx(G,{children:me.filter(s=>!s.archived).map(s=>e.jsxs(K,{value:s.id,children:[s.id," - ",s.supplierName]},s.id))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"supplierId",children:"Supplier *"}),e.jsxs(q,{value:t.supplierId,onValueChange:as,children:[e.jsx(_,{children:e.jsx(W,{placeholder:"Select Supplier"})}),e.jsx(G,{children:Z.map(s=>e.jsxs(K,{value:s.id,children:[s.id," - ",s.name]},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"supplierName",children:"Supplier Name"}),e.jsx(v,{id:"supplierName",value:t.supplierName,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"country",children:"Country"}),e.jsx(v,{id:"country",value:t.country,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"city",children:"City"}),e.jsx(v,{id:"city",value:t.city,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"billNumber",children:"Bill Number"}),e.jsx(v,{id:"billNumber",value:t.billNumber,onChange:s=>b(a=>({...a,billNumber:s.target.value})),placeholder:"BILL-001"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"paymentMode",children:"Payment Mode *"}),e.jsxs(q,{value:t.paymentMode,onValueChange:s=>b(a=>({...a,paymentMode:s})),children:[e.jsx(_,{children:e.jsx(W,{})}),e.jsx(G,{children:we.map(s=>e.jsx(K,{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"amountPaid",children:"Amount Paid (â‚±) *"}),e.jsx(v,{id:"amountPaid",type:"number",min:"0",step:"0.01",value:t.amountPaid,onChange:s=>b(a=>({...a,amountPaid:parseFloat(s.target.value)||0})),placeholder:"0.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"notes",children:"Notes"}),e.jsx(v,{id:"notes",value:t.notes,onChange:s=>b(a=>({...a,notes:s.target.value})),placeholder:"Optional notes..."})]})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Payments"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage payments against purchase orders"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:ms,disabled:M.length===0,children:[e.jsx(Ks,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),Q&&e.jsxs(re,{open:Re,onOpenChange:s=>{$(s),s||U()},children:[e.jsx(ge,{asChild:!0,children:e.jsxs(o,{children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"New Payment"]})}),e.jsxs(ne,{className:"max-w-2xl",children:[e.jsxs(le,{children:[e.jsx(ie,{children:"Create New Payment"}),e.jsx(ce,{children:"Add a new payment against a purchase order"})]}),be(),e.jsxs(ve,{children:[e.jsx(o,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(o,{onClick:rs,children:"Create Payment"})]})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(O,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Total Paid"}),e.jsx(Us,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:R(T.totalAmount)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[T.totalTransactions," transactions"]})]})]}),e.jsxs(O,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Cash Payments"}),e.jsx(qs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:R(T.cashTotal)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Direct cash paid"})]})]}),e.jsxs(O,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Bank Transfers"}),e.jsx(Ce,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:R(T.bankTotal)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Bank transfers made"})]})]}),e.jsxs(O,{children:[e.jsxs(B,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(L,{className:"text-sm font-medium",children:"Card & Online"}),e.jsx(_s,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(E,{children:[e.jsx("div",{className:"text-2xl font-bold",children:R(T.cardTotal+T.onlineTotal)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Digital payments"})]})]})]}),e.jsxs(O,{children:[e.jsx(B,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{className:"text-base font-medium",children:"Transactions"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(o,{variant:m?"secondary":"outline",size:"sm",onClick:()=>{Ke(!m),S()},children:[m?e.jsx(de,{className:"h-4 w-4 mr-2"}):e.jsx(J,{className:"h-4 w-4 mr-2"}),m?"View Active":"View Archived"]})})]})}),e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ys,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(v,{placeholder:"Search by ID, supplier, PO, or bill...",className:"pl-9",value:ue,onChange:s=>Le(s.target.value)})]}),e.jsxs(q,{value:V,onValueChange:Ee,children:[e.jsxs(_,{className:"w-[180px]",children:[e.jsx(Fs,{className:"h-4 w-4 mr-2"}),e.jsx(W,{placeholder:"Payment Mode"})]}),e.jsxs(G,{children:[e.jsx(K,{value:"all",children:"All Payment Modes"}),we.map(s=>e.jsx(K,{value:s,children:s},s))]})]})]}),es&&e.jsx(Ms,{selectionCount:w,onClearSelection:S,actions:m?[{label:"Restore",onClick:os,icon:e.jsx(de,{className:"h-4 w-4"})},...X?[{label:"Delete Permanently",onClick:()=>k(!0),icon:e.jsx(Y,{className:"h-4 w-4"}),variant:"destructive"}]:[]]:[{label:"Archive",onClick:Ne,icon:e.jsx(J,{className:"h-4 w-4"})}]}),Oe?e.jsx(Os,{columns:10,rows:5}):se.length===0?e.jsx(Bs,{icon:Ce,title:m?"No Archived Transactions":"No Transactions Found",description:m?"Archived transactions will appear here":"Create your first payment to get started",actionLabel:!m&&Q?"New Payment":void 0,onAction:!m&&Q?()=>$(!0):void 0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"rounded-md border overflow-hidden",children:[e.jsx(Ls,{pageItemCount:je,totalItemCount:ye,isAllPagesSelected:Xe,show:Qe&&ye>je,onSelectAllPages:Je,onClearSelection:S,itemLabel:"payments"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Rs,{children:[e.jsx(Vs,{children:e.jsxs(De,{children:[e.jsx(Se,{className:"w-12",children:e.jsx("input",{type:"checkbox",checked:Ye,ref:s=>{s&&(s.indeterminate=Ze)},onChange:()=>Ge(),className:"h-4 w-4 rounded border-gray-300"})}),e.jsx(N,{sortKey:"trxDate",currentSortKey:d,sortDirection:y("trxDate"),onSort:x,children:"Trx Date"}),e.jsx(N,{sortKey:"id",currentSortKey:d,sortDirection:y("id"),onSort:x,children:"Trx ID"}),e.jsx(N,{sortKey:"supplierId",currentSortKey:d,sortDirection:y("supplierId"),onSort:x,children:"Supplier ID"}),e.jsx(N,{sortKey:"supplierName",currentSortKey:d,sortDirection:y("supplierName"),onSort:x,children:"Supplier Name"}),e.jsx(N,{sortKey:"country",currentSortKey:d,sortDirection:y("country"),onSort:x,children:"Country"}),e.jsx(N,{sortKey:"city",currentSortKey:d,sortDirection:y("city"),onSort:x,children:"City"}),e.jsx(N,{sortKey:"poId",currentSortKey:d,sortDirection:y("poId"),onSort:x,children:"PO ID"}),e.jsx(N,{sortKey:"billNumber",currentSortKey:d,sortDirection:y("billNumber"),onSort:x,children:"Bill Num"}),e.jsx(N,{sortKey:"paymentMode",currentSortKey:d,sortDirection:y("paymentMode"),onSort:x,children:"PMT Mode"}),e.jsx(N,{sortKey:"amountPaid",currentSortKey:d,sortDirection:y("amountPaid"),onSort:x,children:"Amount Paid"}),e.jsx(Se,{className:"text-right",children:"Actions"})]})}),e.jsx($s,{children:se.map(s=>e.jsxs(De,{className:Pe(xe(s.id)&&"bg-muted/50"),children:[e.jsx(h,{children:e.jsx("input",{type:"checkbox",checked:xe(s.id),onChange:()=>We(s.id),className:"h-4 w-4 rounded border-gray-300"})}),e.jsx(h,{children:s.trxDate.split("T")[0]}),e.jsx(h,{className:"font-medium",children:s.id}),e.jsx(h,{children:s.supplierId}),e.jsx(h,{children:s.supplierName}),e.jsx(h,{children:s.country||"-"}),e.jsx(h,{children:s.city||"-"}),e.jsx(h,{children:s.poId}),e.jsx(h,{children:s.billNumber||"-"}),e.jsx(h,{children:ss(s.paymentMode)}),e.jsx(h,{className:"font-medium text-red-600",children:R(s.amountPaid)}),e.jsx(h,{className:"text-right",children:e.jsx("div",{className:"flex items-center justify-end gap-1",children:m?e.jsxs(e.Fragment,{children:[e.jsx(o,{size:"sm",variant:"outline",onClick:()=>is(s.id),title:"Restore",children:e.jsx(de,{className:"h-4 w-4"})}),X&&e.jsx(o,{size:"sm",variant:"destructive",onClick:()=>cs(s.id),title:"Delete Permanently",children:e.jsx(Y,{className:"h-4 w-4"})})]}):e.jsxs(e.Fragment,{children:[Te&&e.jsxs(re,{open:Ve===s.id,onOpenChange:a=>{a||(z(null),U())},children:[e.jsx(ge,{asChild:!0,children:e.jsx(o,{size:"sm",variant:"outline",onClick:()=>ds(s),children:"Edit"})}),e.jsxs(ne,{className:"max-w-2xl",children:[e.jsxs(le,{children:[e.jsxs(ie,{children:["Edit Payment ",s.id]}),e.jsx(ce,{children:"Update payment details"})]}),be(),e.jsxs(ve,{children:[e.jsx(o,{variant:"outline",onClick:()=>z(null),children:"Cancel"}),e.jsx(o,{onClick:()=>ns(s.id),children:"Save Changes"})]})]})]}),Ie&&e.jsx(o,{size:"sm",variant:"outline",onClick:()=>ls(s.id),title:"Archive",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx(o,{size:"sm",variant:"outline",onClick:()=>us(s),title:"Print Voucher",children:e.jsx(Ws,{className:"h-4 w-4"})})]})})})]},s.id))})]})})]}),e.jsx(Es,{currentPage:ze,totalPages:He,onPageChange:Ue,totalItems:_e,itemsPerPage:qe})]})]})]}),e.jsx(re,{open:$e,onOpenChange:k,children:e.jsxs(ne,{className:"max-w-md",children:[e.jsxs(le,{children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-destructive"}),"Delete ",w," Payment",w!==1?"s":""]}),e.jsx(ce,{children:m?"These payments are already archived. This action will permanently remove them from the system.":"Choose how you want to delete the selected payments:"})]}),m?e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Y,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This cannot be undone. All data will be permanently removed."})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(o,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(o,{variant:"destructive",onClick:fe,children:"Permanently Delete All"})]})]}):e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border rounded-md hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Archive"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Move to archive. Payments can be restored later."})]}),e.jsx(o,{variant:"secondary",size:"sm",onClick:Ne,children:"Archive"})]})}),X&&e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Y,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Delete Permanently"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be undone. Data will be permanently removed."})]}),e.jsx(o,{variant:"destructive",size:"sm",onClick:fe,children:"Delete"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(o,{variant:"outline",onClick:()=>k(!1),children:"Cancel"})})]})]})})]})}export{oa as PaymentsView};
