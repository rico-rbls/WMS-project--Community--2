import{c as E,r as a,j as e,aj as y,a1 as I,I as D,w as R,d as b}from"./index-C13KiIkd.js";import{S as V,a as z,b as B,c as K,d as L}from"./sortable-table-head-Cg7gUyo0.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],M=E("pencil",_);function X({value:s,displayValue:d,type:n="text",options:j=[],onSave:x,disabled:S=!1,className:f,min:k,step:C,placeholder:m,badgeClassName:N}){const[u,l]=a.useState(!1),[r,c]=a.useState(String(s)),[h,p]=a.useState(!1),i=a.useRef(null);a.useEffect(()=>{u&&i.current&&(i.current.focus(),i.current.select())},[u]),a.useEffect(()=>{c(String(s))},[s]);const o=a.useCallback(async()=>{if(r===String(s)){l(!1);return}p(!0);try{const t=n==="number"?Number(r):r;await x(t),l(!1)}catch{c(String(s))}finally{p(!1)}},[r,s,n,x]),g=a.useCallback(()=>{c(String(s)),l(!1)},[s]),v=a.useCallback(t=>{t.key==="Enter"?(t.preventDefault(),o()):t.key==="Escape"&&g()},[o,g]);if(S)return e.jsx("span",{className:f,children:d??s});if(u)return n==="select"||n==="badge"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(V,{value:r,onValueChange:t=>{c(t)},children:[e.jsx(z,{className:"h-8 min-w-[100px]",children:e.jsx(B,{placeholder:m||"Select..."})}),e.jsx(K,{children:j.map(t=>e.jsx(L,{value:t.value,children:t.label},t.value))})]}),e.jsx("button",{onClick:o,disabled:h,className:"p-1 hover:bg-green-100 dark:hover:bg-green-900 rounded",title:"Save",children:e.jsx(y,{className:"h-4 w-4 text-green-600"})}),e.jsx("button",{onClick:g,disabled:h,className:"p-1 hover:bg-red-100 dark:hover:bg-red-900 rounded",title:"Cancel",children:e.jsx(I,{className:"h-4 w-4 text-red-600"})})]}):e.jsx("div",{className:"flex items-center gap-1",children:e.jsx(D,{ref:i,type:n,value:r,onChange:t=>c(t.target.value),onKeyDown:v,onBlur:o,min:k,step:C,placeholder:m,className:"h-8 w-auto min-w-[80px]",disabled:h})});const w=n==="badge"?e.jsx(R,{variant:"secondary",className:b("cursor-pointer hover:ring-2 hover:ring-primary/50",N),children:d??s}):e.jsx("span",{children:d??s});return e.jsxs("button",{type:"button",onClick:()=>l(!0),className:b("group flex items-center gap-1 text-left hover:bg-muted/50 px-1 py-0.5 rounded -mx-1 transition-colors",f),title:"Click to edit",children:[w,e.jsx(M,{className:"h-3 w-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})}export{X as E};
