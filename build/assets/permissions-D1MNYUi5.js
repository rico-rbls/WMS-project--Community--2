import{c as j,j as e,B as x,r as d,X as N,T as b}from"./index-lhrDUndO.js";import{S as y,e as w,f as k,C as S,g as C,h as _,D as z,a as D,b as M,c as I,d as T,i as $}from"./sortable-table-head-gC_c0jfP.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],E=j("chevron-left",A);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],R=j("chevron-right",B);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],G=j("chevrons-left",V);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],U=j("chevrons-right",O);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],K=j("plus",q);function W({rows:s=5}){return e.jsx("div",{className:"space-y-3",children:Array.from({length:s}).map((t,a)=>e.jsx("div",{className:"flex items-center space-x-4 animate-pulse",children:e.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded w-full"})},a))})}function X({icon:s,title:t,description:a,actionLabel:n,onAction:l}){return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center",children:[e.jsx("div",{className:"rounded-full bg-gray-100 dark:bg-gray-800 p-6 mb-4",children:e.jsx(s,{className:"h-12 w-12 text-gray-400 dark:text-gray-500"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:t}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6 max-w-sm",children:a}),n&&l&&e.jsx(x,{onClick:l,children:n})]})}function Y(s,t=25){const[a,n]=d.useState(1),l=d.useMemo(()=>Math.max(1,Math.ceil(s.length/t)),[s.length,t]);d.useEffect(()=>{a>l&&n(l)},[a,l]);const{startIndex:u,endIndex:r,paginatedData:o}=d.useMemo(()=>{const i=(a-1)*t,h=Math.min(i+t,s.length);return{startIndex:i,endIndex:h,paginatedData:s.slice(i,h)}},[s,a,t]);return{currentPage:a,totalPages:l,startIndex:u,endIndex:r,paginatedData:o,goToPage:i=>{const h=Math.max(1,Math.min(i,l));n(h)},nextPage:()=>{a<l&&n(a+1)},previousPage:()=>{a>1&&n(a-1)},firstPage:()=>{n(1)},lastPage:()=>{n(l)},canGoNext:a<l,canGoPrevious:a>1,totalItems:s.length,itemsPerPage:t}}function L(s){const[t,a]=d.useState(new Set),n=d.useCallback(i=>{a(h=>{const v=new Set(h);return v.has(i)?v.delete(i):v.add(i),v})},[]),l=d.useCallback(()=>{a(i=>i.size===s.length&&s.length>0?new Set:new Set(s.map(h=>h.id)))},[s]),u=d.useCallback(()=>{a(new Set(s.map(i=>i.id)))},[s]),r=d.useCallback(()=>{a(new Set)},[]),o=d.useCallback(i=>t.has(i),[t]),m=d.useMemo(()=>s.length>0&&t.size===s.length,[s.length,t.size]),f=d.useMemo(()=>t.size>0&&t.size<s.length,[s.length,t.size]),c=t.size,g=t.size>0,p=d.useMemo(()=>s.filter(i=>t.has(i.id)),[s,t]);return{selectedIds:t,toggleItem:n,toggleAll:l,selectAll:u,deselectAll:r,isSelected:o,isAllSelected:m,isPartiallySelected:f,selectionCount:c,hasSelection:g,selectedItems:p}}function Q({currentPage:s,totalPages:t,onPageChange:a,itemsPerPage:n,totalItems:l,className:u=""}){const o=(()=>{const c=[];if(t<=7)for(let p=1;p<=t;p++)c.push(p);else{c.push(1),s>3&&c.push("...");const p=Math.max(2,s-1),i=Math.min(t-1,s+1);for(let h=p;h<=i;h++)c.push(h);s<t-2&&c.push("..."),c.push(t)}return c})(),m=(s-1)*n+1,f=Math.min(s*n,l);return t<=1?null:e.jsxs("div",{className:`flex flex-col sm:flex-row items-center justify-between gap-4 pt-4 border-t ${u}`,children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",e.jsx("span",{className:"font-medium",children:m})," to"," ",e.jsx("span",{className:"font-medium",children:f})," of"," ",e.jsx("span",{className:"font-medium",children:l})," items"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{variant:"outline",size:"icon",onClick:()=>a(1),disabled:s===1,className:"h-8 w-8",title:"First page",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"icon",onClick:()=>a(s-1),disabled:s===1,className:"h-8 w-8",title:"Previous page",children:e.jsx(E,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center gap-1",children:o.map((c,g)=>c==="..."?e.jsx("span",{className:"px-2 text-muted-foreground",children:"..."},`ellipsis-${g}`):e.jsx(x,{variant:s===c?"default":"outline",size:"sm",onClick:()=>a(c),className:"h-8 min-w-[2rem]",children:c},c))}),e.jsx(x,{variant:"outline",size:"icon",onClick:()=>a(s+1),disabled:s===t,className:"h-8 w-8",title:"Next page",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(x,{variant:"outline",size:"icon",onClick:()=>a(t),disabled:s===t,className:"h-8 w-8",title:"Last page",children:e.jsx(U,{className:"h-4 w-4"})})]})]})}function Z({selectionCount:s,onClearSelection:t,actions:a=[],actionGroups:n=[],isLoading:l=!1,className:u}){return s===0?null:e.jsxs("div",{className:`fixed bottom-6 left-1/2 -translate-x-1/2 z-50 bg-background border rounded-lg shadow-lg p-3 flex items-center gap-3 ${u||""}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[s," item",s!==1?"s":""," selected"]}),e.jsx(x,{variant:"ghost",size:"sm",onClick:t,disabled:l,children:e.jsx(N,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"h-6 w-px bg-border"}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.map((r,o)=>e.jsxs(x,{variant:r.variant||"outline",size:"sm",onClick:r.onClick,disabled:r.disabled||l,children:[r.icon,r.label]},o)),n.map((r,o)=>e.jsxs(y,{onValueChange:r.onSelect,disabled:r.disabled||l,children:[e.jsxs(w,{className:"h-8 w-auto gap-1",children:[r.icon,e.jsx(k,{placeholder:r.label}),e.jsx(S,{className:"h-3 w-3 opacity-50"})]}),e.jsx(C,{children:r.options.map(m=>e.jsx(_,{value:m.value,children:m.label},m.value))})]},o))]})]})}function P({open:s,onOpenChange:t,itemCount:a,itemNames:n=[],itemType:l="item",onConfirm:u,isLoading:r=!1}){const o=a===1?l:`${l}s`;return e.jsx(z,{open:s,onOpenChange:t,children:e.jsxs(D,{children:[e.jsxs(M,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-destructive"}),"Delete ",a," ",o,"?"]}),e.jsxs(T,{children:["This action cannot be undone. The following ",o," will be permanently deleted:"]})]}),n.length>0&&e.jsx("div",{className:"max-h-40 overflow-y-auto rounded-md border p-3",children:e.jsxs("ul",{className:"space-y-1 text-sm",children:[n.slice(0,10).map((m,f)=>e.jsxs("li",{className:"text-muted-foreground",children:["â€¢ ",m]},f)),n.length>10&&e.jsxs("li",{className:"text-muted-foreground italic",children:["...and ",n.length-10," more"]})]})}),e.jsxs($,{children:[e.jsx(x,{variant:"outline",onClick:()=>t(!1),disabled:r,children:"Cancel"}),e.jsx(x,{variant:"destructive",onClick:u,disabled:r,children:r?"Deleting...":`Delete ${a} ${o}`})]})]})})}const F={Admin:["inventory:read","inventory:create","inventory:update","inventory:delete","orders:read","orders:create","orders:update","orders:delete","shipments:read","shipments:create","shipments:update","shipments:delete","suppliers:read","suppliers:create","suppliers:update","suppliers:delete","purchase_orders:read","purchase_orders:create","purchase_orders:update","purchase_orders:delete","purchase_orders:approve","purchase_orders:receive","users:read","users:create","users:update","users:delete","users:approve"],Operator:["inventory:read","orders:read","shipments:read","suppliers:read","purchase_orders:read"]};function ee(s,t){return F[s]?.includes(t)??!1}function se(s){return s==="Admin"}function te(s){const t="wms_users";try{const a=localStorage.getItem(t);if(a){const l=JSON.parse(a).find(u=>u.id===s);if(l&&l.role)return l.role}}catch(a){console.error("Error getting user role:",a)}return"Operator"}export{Z as B,R as C,X as E,K as P,W as T,L as a,P as b,se as c,Q as d,te as g,ee as h,Y as u};
