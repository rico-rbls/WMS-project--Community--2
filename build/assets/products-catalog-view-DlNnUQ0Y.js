import{c as V,ch as _,r,j as e,B as c,S as v,C as b,q as w,a2 as G,I as M,P as K,w as h,aa as R,aI as S,D as W,y as Y,z as J,A as X,x as q,aN as Z,K as ee}from"./index-CXcmQwDa.js";import{I as A}from"./image-CTUuVZYV.js";import{T as $}from"./tag-s9S5P8JH.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],te=V("layers",se);function f(g){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(g)}function le({navigateToView:g}){const{addToCart:C,getCartItem:k,itemCount:I,cartTotal:z}=_(),[P,T]=r.useState([]),[L,Q]=r.useState([]),[B,E]=r.useState(!0),[i,U]=r.useState(""),[m,O]=r.useState("all"),[t,p]=r.useState(null),[j,d]=r.useState("1");r.useEffect(()=>{async function s(){try{const[a,l]=await Promise.all([Z(),ee()]);T(a),Q(l)}catch{q.error("Failed to load products")}finally{E(!1)}}s()},[]);const x=r.useMemo(()=>P.filter(s=>!s.archived),[P]),F=r.useMemo(()=>L.map(s=>({id:s.name,name:s.name})),[L]),N=r.useMemo(()=>x.filter(s=>{const a=!i||s.name.toLowerCase().includes(i.toLowerCase())||s.brand.toLowerCase().includes(i.toLowerCase())||s.description?.toLowerCase().includes(i.toLowerCase()),l=m==="all"||s.category===m;return a&&l}),[x,i,m]),D=s=>s.quantity<=0?"Out of Stock":s.quantity<=(s.reorderLevel??10)?"Low Stock":"In Stock";return B?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading products..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Warehouse Inventory"}),e.jsxs("p",{className:"text-muted-foreground",children:["Browse our complete inventory of ",x.length," items"]})]}),I>0&&e.jsxs(c,{onClick:()=>g("customer-cart"),children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"View Order (",I,") - ",f(z)]})]}),e.jsx(b,{children:e.jsx(w,{className:"py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(M,{placeholder:"Search products, brands...",value:i,onChange:s=>U(s.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(c,{variant:m==="all"?"default":"outline",size:"sm",onClick:()=>O("all"),children:"All"}),F.map(s=>e.jsx(c,{variant:m===s.id?"default":"outline",size:"sm",onClick:()=>O(s.id),children:s.name},s.id))]})]})})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",N.length," of ",x.length," products"]}),N.length===0?e.jsx(b,{children:e.jsx(w,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(K,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"font-medium",children:"No products found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your search or filters"})]})})}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 sm:gap-4",children:N.map(s=>{const a=D(s),n=!!k(s.id);return e.jsxs(b,{className:"group overflow-hidden hover:shadow-md transition-all",children:[e.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted flex items-center justify-center relative overflow-hidden cursor-pointer",onClick:()=>p(s),children:[s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(A,{className:"h-6 w-6 sm:h-10 sm:w-10 mb-1"}),e.jsx("span",{className:"text-[10px] sm:text-xs",children:"No image"})]}),e.jsx(h,{className:`absolute top-1 right-1 sm:top-2 sm:right-2 text-[10px] sm:text-xs ${a==="In Stock"?"bg-green-500/90":a==="Low Stock"?"bg-amber-500/90":"bg-red-500/90"}`,children:a==="Out of Stock"?"Out":a==="Low Stock"?"Low":"In Stock"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs(c,{size:"sm",variant:"secondary",className:"gap-1",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"View Details"})]})})]}),e.jsxs(w,{className:"p-2 sm:p-4",children:[e.jsx("h4",{className:"font-semibold text-xs sm:text-base line-clamp-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mt-0.5 sm:mt-1",children:[e.jsx($,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-muted-foreground"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground line-clamp-1",children:s.brand})]}),e.jsx("p",{className:"text-[10px] sm:text-sm text-muted-foreground line-clamp-2 mt-1 sm:mt-2 min-h-[1.5rem] sm:min-h-[2.5rem] hidden sm:block",children:s.description||`Quality ${s.brand} product.`}),e.jsx(S,{className:"my-1.5 sm:my-3"}),e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsx("span",{className:`text-sm sm:text-lg font-bold ${a==="Out of Stock"?"text-muted-foreground":"text-primary"}`,children:f(s.pricePerPiece)}),a==="Out of Stock"?e.jsx(c,{size:"sm",variant:"outline",disabled:!0,className:"opacity-60 h-7 sm:h-9 text-[10px] sm:text-sm px-2 sm:px-3",children:"Out"}):e.jsxs(c,{size:"sm",onClick:u=>{u.stopPropagation(),C(s)},className:"gap-1 h-7 sm:h-9 text-[10px] sm:text-sm px-2 sm:px-3",variant:n?"secondary":"default",children:[e.jsx(v,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:n?"Add More":"Add"})]})]})]})]},s.id)})}),e.jsx(W,{open:!!t,onOpenChange:s=>{s||(p(null),d("1"))},children:e.jsx(Y,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:t&&(()=>{const s=D(t),a=k(t.id),l=!!a,n=t.quantity-(a?.quantity||0),u=parseInt(j)||0,o=Math.min(Math.max(1,u),n);return e.jsxs(e.Fragment,{children:[e.jsx(J,{children:e.jsx(X,{className:"text-xl",children:t.name})}),e.jsx("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted rounded-lg flex items-center justify-center overflow-hidden",children:t.photoUrl?e.jsx("img",{src:t.photoUrl,alt:t.name,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(A,{className:"h-16 w-16 mb-2"}),e.jsx("span",{className:"text-sm",children:"No image available"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(h,{variant:"secondary",className:"gap-1",children:[e.jsx($,{className:"h-3 w-3"}),t.brand]}),e.jsxs(h,{variant:"outline",className:"gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),t.category]}),e.jsx(h,{className:`${s==="In Stock"?"bg-green-500":s==="Low Stock"?"bg-amber-500":"bg-red-500"}`,children:s})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Description"}),e.jsx("p",{className:"text-sm",children:t.description||`Quality ${t.brand} product. Great value for your money.`})]}),s!=="Out of Stock"&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.quantity," units available"]}),e.jsx(S,{}),s!=="Out of Stock"&&n>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Quantity"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{type:"number",min:1,max:n,value:j,onChange:y=>d(y.target.value),onBlur:()=>{const y=parseInt(j)||1,H=Math.min(Math.max(1,y),n);d(H.toString())},className:"w-24"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["of ",n," available"]})]}),u>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Subtotal: ",f(t.pricePerPiece*o)]})]}),e.jsx(S,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price per unit"}),e.jsx("p",{className:`text-2xl font-bold ${s==="Out of Stock"?"text-muted-foreground":"text-primary"}`,children:f(t.pricePerPiece)})]}),s==="Out of Stock"?e.jsx(c,{disabled:!0,variant:"outline",className:"opacity-60",children:"Out of Stock"}):e.jsxs(c,{onClick:()=>{C(t,o),q.success(`Added ${o} Ã— ${t.name} to order`),p(null),d("1")},disabled:n<=0||o<=0,className:"gap-2",variant:l?"secondary":"default",children:[e.jsx(v,{className:"h-4 w-4"}),l?`Add ${o} More`:`Add ${o} to Order`]})]}),l&&e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["You have ",a.quantity," in your order"]})]})]})})()})})]})}export{le as ProductsCatalogView};
