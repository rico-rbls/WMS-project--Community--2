import{c as H,c6 as V,r as n,j as e,B as l,S as N,C as y,q as v,a2 as K,I as _,P as G,w as u,aa as R,aK as q,D as Y,y as J,z as W,A as X,x as D,aO as Z,K as ee}from"./index-Dd4T-HZH.js";import{I as z}from"./image-CUGLe68K.js";import{T as O}from"./tag-CgyZ14_Z.js";import{M}from"./minus-CQbbzIqP.js";import{P as A}from"./plus-D2NFl2oS.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],te=H("layers",se);function w(g){return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(g)}function ce({navigateToView:g}){const{addToCart:b,getCartItem:C,updateQuantity:x,itemCount:k,cartTotal:T}=V(),[S,$]=n.useState([]),[P,Q]=n.useState([]),[B,E]=n.useState(!0),[o,U]=n.useState(""),[m,L]=n.useState("all"),[t,f]=n.useState(null),[i,j]=n.useState(1);n.useEffect(()=>{async function s(){try{const[a,r]=await Promise.all([Z(),ee()]);$(a),Q(r)}catch{D.error("Failed to load products")}finally{E(!1)}}s()},[]);const h=n.useMemo(()=>S.filter(s=>!s.archived),[S]),F=n.useMemo(()=>P.map(s=>({id:s.name,name:s.name})),[P]),p=n.useMemo(()=>h.filter(s=>{const a=!o||s.name.toLowerCase().includes(o.toLowerCase())||s.brand.toLowerCase().includes(o.toLowerCase())||s.description?.toLowerCase().includes(o.toLowerCase()),r=m==="all"||s.category===m;return a&&r}),[h,o,m]),I=s=>s.quantity<=0?"Out of Stock":s.quantity<=(s.reorderLevel??10)?"Low Stock":"In Stock";return B?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading products..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Products"}),e.jsxs("p",{className:"text-muted-foreground",children:["Browse our complete catalog of ",h.length," products"]})]}),k>0&&e.jsxs(l,{onClick:()=>g("customer-cart"),children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"View Cart (",k,") - ",w(T)]})]}),e.jsx(y,{children:e.jsx(v,{className:"py-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(K,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(_,{placeholder:"Search products, brands...",value:o,onChange:s=>U(s.target.value),className:"pl-9"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(l,{variant:m==="all"?"default":"outline",size:"sm",onClick:()=>L("all"),children:"All"}),F.map(s=>e.jsx(l,{variant:m===s.id?"default":"outline",size:"sm",onClick:()=>L(s.id),children:s.name},s.id))]})]})})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",p.length," of ",h.length," products"]}),p.length===0?e.jsx(y,{children:e.jsx(v,{className:"py-12",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(G,{className:"h-12 w-12 text-muted-foreground/50 mb-4"}),e.jsx("p",{className:"font-medium",children:"No products found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your search or filters"})]})})}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2 sm:gap-4",children:p.map(s=>{const a=I(s),r=C(s.id),d=!!r;return e.jsxs(y,{className:"group overflow-hidden hover:shadow-md transition-all",children:[e.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted flex items-center justify-center relative overflow-hidden cursor-pointer",onClick:()=>{f(s),j(1)},children:[s.photoUrl?e.jsx("img",{src:s.photoUrl,alt:s.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(z,{className:"h-6 w-6 sm:h-10 sm:w-10 mb-1"}),e.jsx("span",{className:"text-[10px] sm:text-xs",children:"No image"})]}),e.jsx(u,{className:`absolute top-1 right-1 sm:top-2 sm:right-2 text-[10px] sm:text-xs ${a==="In Stock"?"bg-green-500/90":a==="Low Stock"?"bg-amber-500/90":"bg-red-500/90"}`,children:a==="Out of Stock"?"Out":a==="Low Stock"?"Low":"In Stock"}),e.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs(l,{size:"sm",variant:"secondary",className:"gap-1",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"View Details"})]})})]}),e.jsxs(v,{className:"p-2 sm:p-4",children:[e.jsx("h4",{className:"font-semibold text-xs sm:text-base line-clamp-1",children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 mt-0.5 sm:mt-1",children:[e.jsx(O,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 text-muted-foreground"}),e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground line-clamp-1",children:s.brand})]}),e.jsx("p",{className:"text-[10px] sm:text-sm text-muted-foreground line-clamp-2 mt-1 sm:mt-2 min-h-[1.5rem] sm:min-h-[2.5rem] hidden sm:block",children:s.description||`Quality ${s.brand} product.`}),e.jsx(q,{className:"my-1.5 sm:my-3"}),e.jsxs("div",{className:"flex items-center justify-between gap-1",children:[e.jsx("span",{className:`text-sm sm:text-lg font-bold ${a==="Out of Stock"?"text-muted-foreground":"text-primary"}`,children:w(s.pricePerPiece)}),a==="Out of Stock"?e.jsx(l,{size:"sm",variant:"outline",disabled:!0,className:"opacity-60 h-7 sm:h-9 text-[10px] sm:text-sm px-2 sm:px-3",children:"Out"}):d?e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1.5 bg-accent rounded-lg p-0.5 sm:p-1",children:[e.jsx(l,{size:"icon",variant:"ghost",className:"h-5 w-5 sm:h-7 sm:w-7",onClick:c=>{c.stopPropagation(),x(s.id,r.quantity-1)},children:e.jsx(M,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3"})}),e.jsx("span",{className:"w-4 sm:w-6 text-center font-semibold text-[10px] sm:text-sm",children:r.quantity}),e.jsx(l,{size:"icon",variant:"ghost",className:"h-5 w-5 sm:h-7 sm:w-7",onClick:c=>{c.stopPropagation(),x(s.id,r.quantity+1)},disabled:r.quantity>=s.quantity,children:e.jsx(A,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3"})})]}):e.jsxs(l,{size:"sm",onClick:c=>{c.stopPropagation(),b(s)},className:"gap-1 h-7 sm:h-9 text-[10px] sm:text-sm px-2 sm:px-3",children:[e.jsx(N,{className:"h-3 w-3 sm:h-4 sm:w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Add"})]})]})]})]},s.id)})}),e.jsx(Y,{open:!!t,onOpenChange:s=>!s&&f(null),children:e.jsx(J,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:t&&(()=>{const s=I(t),a=C(t.id),r=!!a,d=t.quantity-(a?.quantity||0);return e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsx(X,{className:"text-xl",children:t.name})}),e.jsx("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted rounded-lg flex items-center justify-center overflow-hidden",children:t.photoUrl?e.jsx("img",{src:t.photoUrl,alt:t.name,className:"w-full h-full object-cover"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(z,{className:"h-16 w-16 mb-2"}),e.jsx("span",{className:"text-sm",children:"No image available"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(u,{variant:"secondary",className:"gap-1",children:[e.jsx(O,{className:"h-3 w-3"}),t.brand]}),e.jsxs(u,{variant:"outline",className:"gap-1",children:[e.jsx(te,{className:"h-3 w-3"}),t.category]}),e.jsx(u,{className:`${s==="In Stock"?"bg-green-500":s==="Low Stock"?"bg-amber-500":"bg-red-500"}`,children:s})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Description"}),e.jsx("p",{className:"text-sm",children:t.description||`Quality ${t.brand} product. Great value for your money.`})]}),s!=="Out of Stock"&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.quantity," units available"]}),e.jsx(q,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("p",{className:`text-2xl font-bold ${s==="Out of Stock"?"text-muted-foreground":"text-primary"}`,children:w(t.pricePerPiece)})]}),s==="Out of Stock"?e.jsx(l,{disabled:!0,variant:"outline",className:"opacity-60",children:"Out of Stock"}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-accent rounded-lg p-1",children:[e.jsx(l,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>j(Math.max(1,i-1)),disabled:i<=1,children:e.jsx(M,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center font-semibold",children:i}),e.jsx(l,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:()=>j(Math.min(d,i+1)),disabled:i>=d,children:e.jsx(A,{className:"h-4 w-4"})})]}),e.jsxs(l,{onClick:()=>{if(r)x(t.id,a.quantity+i);else{for(let c=0;c<i;c++)b(t);i>1&&setTimeout(()=>x(t.id,i),0)}D.success(`Added ${i} Ã— ${t.name} to cart`),f(null)},disabled:d<=0,className:"gap-2",children:[e.jsx(N,{className:"h-4 w-4"}),r?"Add More":"Add to Cart"]})]})]}),r&&e.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:["You already have ",a.quantity," in your cart"]})]})]})})()})})]})}export{ce as ProductsCatalogView};
