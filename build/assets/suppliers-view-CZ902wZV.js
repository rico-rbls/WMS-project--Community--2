import{c as ns,F as cs,i as os,r,G as ds,a9 as us,l as ms,aa as hs,ar as ke,J as c,as as ps,at as xs,j as e,C as b,m as L,n as K,U as Ie,o as w,S as gs,P as js,d as U,t as Y,s as fs,D as Ae,Q as De,B as f,v as Fe,w as Pe,x as Te,y as Be,L as h,I as v,z as Ee,Z as vs,V as ys,X as Ss,a4 as Ns,W as Oe,au as Cs,av as bs}from"./index-COxwi-w8.js";import{S as $,a as M,b as V,c as q,d as A,T as Le,e as ws,f as ks,g as Ke,h as Ue,i as z,j as Is,k}from"./sortable-table-head-C1W6sOow.js";import{u as As,a as Ds,P as Fs,F as Ps,B as Ts,b as Bs,T as Es,E as Os,d as J,c as Ls}from"./editable-cell-i2fWey5q.js";import{S as Ks,F as Us}from"./save-search-dialog-DoTd-qxN.js";import{u as $s}from"./useTableSort-C8-G4q2u.js";import{c as Ms}from"./permissions-DG7Pzl6t.js";import{C as Vs}from"./circle-check-big-BlwdcHrW.js";import{S as qs}from"./star-nb84tQpT.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Rs=ns("phone",zs),ne=["Active","Inactive"],ce=["Electronics","Furniture","Clothing","Food","Other"];function Zs({initialOpenDialog:oe,onDialogOpened:de}){const{isFavorite:ue,getFavoritesByType:me}=cs(),{user:he}=os(),x=he?Ms(he.role):!1,[N,Q]=r.useState(""),[m,D]=r.useState("all"),[y,X]=r.useState(!1),[pe,S]=r.useState(null),[R,$e]=r.useState([]),[xe,Me]=r.useState([]),[Ve,ge]=r.useState(!0),[F,P]=r.useState(!1),[Z,H]=r.useState(null),[a,o]=r.useState({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active"}),ee=ds(N,300);r.useEffect(()=>{(async()=>{ge(!0);const[s,l,t]=await Promise.all([us(),ms(),hs()]);S(s),$e(l),Me(t),ge(!1)})()},[]),r.useEffect(()=>{oe&&!F&&(P(!0),de?.())},[oe,de,F]);const g=r.useMemo(()=>pe??[],[pe]),u=r.useMemo(()=>{const s=g.length,l=g.filter(i=>i.status==="Active").length,t=g.filter(i=>i.status==="Inactive").length,d=new Set(g.map(i=>i.category)).size,p=R.length,_=R.reduce((i,n)=>(i[n.supplierId]=(i[n.supplierId]||0)+1,i),{});let O=null;if(Object.keys(_).length>0){const i=Object.entries(_).sort((C,ie)=>ie[1]-C[1])[0],n=g.find(C=>C.id===i[0]);n&&(O={id:n.id,name:n.name,count:i[1]})}const be=R.reduce((i,n)=>(i[n.supplierId]=(i[n.supplierId]||0)+n.totalAmount,i),{});let we=null;if(Object.keys(be).length>0){const i=Object.entries(be).sort((C,ie)=>ie[1]-C[1])[0],n=g.find(C=>C.id===i[0]);n&&(we={id:n.id,name:n.name,value:i[1]})}const rs=xe.reduce((i,n)=>(n.supplierId&&(i[n.supplierId]=(i[n.supplierId]||0)+1),i),{}),is=Object.keys(rs).length;return{totalSuppliers:s,activeSuppliers:l,inactiveSuppliers:t,uniqueCategories:d,totalPurchaseOrders:p,topSupplierByPO:O,topSupplierByValue:we,suppliersWithProducts:is}},[g,R,xe]),se=r.useMemo(()=>g.filter(s=>{if(y&&!ue("suppliers",s.id)||m!=="all"&&s.status!==m)return!1;if(ee){const l=ee.toLowerCase();if(!(s.name.toLowerCase().includes(l)||s.id.toLowerCase().includes(l)||s.category.toLowerCase().includes(l)||s.contact.toLowerCase().includes(l)||s.email.toLowerCase().includes(l)))return!1}return!0}),[g,ee,m,y,ue]),qe=r.useCallback(s=>{s.searchTerm&&Q(s.searchTerm),s.filters.status&&D(s.filters.status),s.filters.favoritesOnly==="true"&&X(!0)},[]),ze=r.useMemo(()=>{const s={};return m!=="all"&&(s.status=m),y&&(s.favoritesOnly="true"),s},[m,y]);function Re(){Q(""),D("all"),X(!1)}const I=s=>{switch(s){case"Active":return"✓";case"Inactive":return"○";default:return"○"}},te=s=>{switch(s){case"Active":return"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-200";case"Inactive":return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200";default:return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200"}},{sortedData:He,sortConfig:T,requestSort:B,getSortDirection:E}=$s(se),{currentPage:je,totalPages:Ge,paginatedData:fe,goToPage:We,totalItems:_e,itemsPerPage:Ye}=As(He,25),{selectedIds:G,selectedItems:ve,selectionCount:ye,isAllSelected:Je,isPartiallySelected:Qe,hasSelection:ae,toggleItem:Xe,toggleAll:le,deselectAll:j,isSelected:Ze}=Ds(fe),[Se,Ne]=r.useState(!1),[es,Ce]=r.useState(!1),[ss,re]=r.useState(!1);r.useEffect(()=>{j()},[je,j]),r.useEffect(()=>{const s=l=>{(l.metaKey||l.ctrlKey)&&l.key==="a"&&!F&&!Z&&(l.preventDefault(),le()),l.key==="Escape"&&ae&&j()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[le,j,ae,F,Z]);const W=r.useCallback(async(s,l,t)=>{try{const d={[l]:t},p=await ke({id:s,...d});S(_=>(_??[]).map(O=>O.id===s?p:O)),c.success(`${l.charAt(0).toUpperCase()+l.slice(1)} updated`)}catch(d){throw c.error(d?.message||"Failed to update"),d}},[S]),ts=r.useCallback(async()=>{Ne(!0);try{const s=Array.from(G),l=await ps(s);S(t=>t?.filter(d=>!s.includes(d.id))??[]),l.failedCount>0?c.warning(`Deleted ${l.successCount} suppliers. ${l.failedCount} failed.`):c.success(`Successfully deleted ${l.successCount} supplier${l.successCount!==1?"s":""}`),j()}catch(s){c.error(s?.message||"Failed to delete suppliers")}finally{Ne(!1),re(!1)}},[G,j]),as=r.useCallback(async s=>{Ce(!0);try{const l=Array.from(G),t=await xs(l,s);S(d=>d&&d.map(p=>l.includes(p.id)?{...p,status:s}:p)),t.failedCount>0?c.warning(`Updated ${t.successCount} suppliers. ${t.failedCount} failed.`):c.success(`Successfully updated ${t.successCount} supplier${t.successCount!==1?"s":""}`),j()}catch(l){c.error(l?.message||"Failed to update suppliers")}finally{Ce(!1)}},[G,j]),ls=r.useMemo(()=>ve.map(s=>s.name),[ve]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(b,{className:"relative overflow-hidden",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Total Suppliers"}),e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.totalSuppliers}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.activeSuppliers," active, ",u.inactiveSuppliers," inactive"]})]})]}),e.jsxs(b,{className:"relative overflow-hidden",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Active Suppliers"}),e.jsx(Vs,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:u.activeSuppliers}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u.totalSuppliers>0?`${Math.round(u.activeSuppliers/u.totalSuppliers*100)}% of total`:"No suppliers yet"})]})]}),e.jsxs(b,{className:"relative overflow-hidden",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Total Purchase Orders"}),e.jsx(gs,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.totalPurchaseOrders}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:u.topSupplierByPO?`Top: ${u.topSupplierByPO.name} (${u.topSupplierByPO.count})`:"No orders yet"})]})]}),e.jsxs(b,{className:"relative overflow-hidden",children:[e.jsxs(L,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(K,{className:"text-sm font-medium text-muted-foreground",children:"Categories"}),e.jsx(js,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(w,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u.uniqueCategories}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.suppliersWithProducts," suppliers with products"]})]})]})]}),e.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2",children:[e.jsx(b,{className:U("cursor-pointer transition-all hover:shadow-md border-l-4",m==="Active"?"ring-2 ring-primary":"","border-l-emerald-400"),onClick:()=>D(m==="Active"?"all":"Active"),children:e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Active"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:u.activeSuppliers})]}),e.jsx(Y,{variant:"outline",className:te("Active"),children:I("Active")})]})})}),e.jsx(b,{className:U("cursor-pointer transition-all hover:shadow-md border-l-4",m==="Inactive"?"ring-2 ring-primary":"","border-l-slate-400"),onClick:()=>D(m==="Inactive"?"all":"Inactive"),children:e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Inactive"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:u.inactiveSuppliers})]}),e.jsx(Y,{variant:"outline",className:te("Inactive"),children:I("Inactive")})]})})})]}),e.jsxs(b,{children:[e.jsx(L,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(K,{className:"text-xl",children:"Supplier Management"}),e.jsx(fs,{className:"mt-1",children:"Manage your supplier relationships and contacts"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(Ae,{open:F,onOpenChange:s=>{P(s),s||o({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active"})},children:[e.jsx(De,{asChild:!0,children:e.jsxs(f,{onClick:()=>o({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active"}),disabled:!x,title:x?void 0:"You don't have permission to add suppliers",children:[e.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Add Supplier"]})}),e.jsxs(Fe,{className:"sm:max-w-[500px]",children:[e.jsxs(Pe,{children:[e.jsx(Te,{children:"Create New Supplier"}),e.jsx(Be,{children:"Enter the details for the new supplier."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"supplier-name",children:"Company Name *"}),e.jsx(v,{id:"supplier-name",placeholder:"Enter company name",value:a.name,onChange:s=>o({...a,name:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"supplier-status",children:"Status"}),e.jsxs($,{value:a.status,onValueChange:s=>o({...a,status:s}),children:[e.jsx(M,{children:e.jsx(V,{placeholder:"Select status"})}),e.jsx(q,{children:ne.map(s=>e.jsx(A,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:I(s)}),s]})},s))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"contact-name",children:"Contact Person *"}),e.jsx(v,{id:"contact-name",placeholder:"Enter contact name",value:a.contact,onChange:s=>o({...a,contact:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"email",children:"Email *"}),e.jsx(v,{id:"email",type:"email",placeholder:"email@example.com",value:a.email,onChange:s=>o({...a,email:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"phone",children:"Phone *"}),e.jsx(v,{id:"phone",placeholder:"+1 (555) 000-0000",value:a.phone,onChange:s=>o({...a,phone:s.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"category",children:"Category *"}),e.jsxs($,{value:a.category,onValueChange:s=>o({...a,category:s}),children:[e.jsx(M,{children:e.jsx(V,{placeholder:"Select category"})}),e.jsx(q,{children:ce.map(s=>e.jsx(A,{value:s,children:s},s))})]})]})]}),e.jsxs(Ee,{children:[e.jsx(f,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(f,{onClick:async()=>{if(!a.name.trim()||!a.contact.trim()||!a.email.trim()||!a.phone.trim()||!a.category.trim()){c.error("Please fill all required fields");return}try{const s=await vs({name:a.name,contact:a.contact,email:a.email,phone:a.phone,category:a.category,status:a.status});S(l=>[s,...l??[]]),P(!1),c.success("Supplier added successfully"),o({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active"})}catch(s){c.error(s?.message||"Failed to add supplier")}},children:"Create Supplier"})]})]})]})})]})}),e.jsxs(w,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ys,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(v,{placeholder:"Search suppliers by name, contact, email...",value:N,onChange:s=>Q(s.target.value),className:"pl-9"})]}),e.jsxs($,{value:m,onValueChange:D,children:[e.jsxs(M,{className:"w-full sm:w-[180px]",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2"}),e.jsx(V,{placeholder:"Filter by status"})]}),e.jsxs(q,{children:[e.jsx(A,{value:"all",children:"All Statuses"}),ne.map(s=>e.jsx(A,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:I(s)}),s]})},s))]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs(f,{variant:y?"default":"outline",size:"sm",onClick:()=>X(!y),className:"gap-1",children:[e.jsx(qs,{className:U("h-4 w-4",y&&"fill-current")}),"Favorites",me("suppliers").length>0&&e.jsx(Y,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:me("suppliers").length})]}),e.jsx(Ks,{entityType:"suppliers",currentSearchTerm:N,currentFilters:ze,onApplySearch:qe}),(N||m!=="all"||y)&&e.jsxs(f,{variant:"ghost",size:"sm",onClick:Re,className:"gap-1 text-muted-foreground hover:text-foreground",children:[e.jsx(Ss,{className:"h-4 w-4"}),"Clear All Filters"]})]})]}),ae&&x&&e.jsx(Ts,{selectionCount:ye,onClearSelection:j,isLoading:Se||es,actions:[{id:"delete",label:"Delete",icon:e.jsx(Le,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>re(!0)}],actionGroups:[{id:"status-update",label:"Update Status",icon:e.jsx(Ns,{className:"h-4 w-4 mr-1"}),options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}],onSelect:s=>as(s)}],className:"mb-4"}),e.jsx(Bs,{open:ss,onOpenChange:re,itemCount:ye,itemType:"supplier",itemNames:ls,onConfirm:ts,isLoading:Se}),Ve?e.jsx(Es,{rows:8}):se.length===0?e.jsx(Os,{icon:Ie,title:"No suppliers found",description:N?"Try adjusting your search criteria":"Get started by adding your first supplier",actionLabel:N?void 0:"Add Supplier",onAction:N?void 0:()=>P(!0)}):e.jsxs("div",{className:"rounded-md border",children:[e.jsxs(ws,{children:[e.jsx(ks,{children:e.jsxs(Ke,{children:[e.jsx(Ue,{className:"w-12",children:e.jsx(Oe,{checked:Je,ref:s=>{s&&(s.indeterminate=Qe)},onCheckedChange:le,"aria-label":"Select all suppliers"})}),e.jsx(z,{sortKey:"id",currentSortKey:T.key,sortDirection:E("id"),onSort:s=>B(s),children:"Supplier ID"}),e.jsx(z,{sortKey:"name",currentSortKey:T.key,sortDirection:E("name"),onSort:s=>B(s),children:"Company Name"}),e.jsx(z,{sortKey:"contact",currentSortKey:T.key,sortDirection:E("contact"),onSort:s=>B(s),children:"Contact"}),e.jsx(z,{sortKey:"category",currentSortKey:T.key,sortDirection:E("category"),onSort:s=>B(s),children:"Category"}),e.jsx(z,{sortKey:"status",currentSortKey:T.key,sortDirection:E("status"),onSort:s=>B(s),children:"Status"}),e.jsx(Ue,{children:"Actions"})]})}),e.jsx(Is,{children:fe.map(s=>{const l=Ze(s.id);return e.jsxs(Ke,{className:U("hover:bg-muted/50 transition-colors",l&&"bg-muted/50"),children:[e.jsx(k,{children:e.jsx(Oe,{checked:l,onCheckedChange:()=>Xe(s.id),"aria-label":`Select supplier ${s.name}`})}),e.jsx(k,{className:"font-mono text-sm",children:s.id}),e.jsx(k,{children:e.jsx(J,{value:s.name,type:"text",onSave:t=>W(s.id,"name",t),disabled:!x})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Cs,{className:"h-3 w-3 text-muted-foreground"}),e.jsx(J,{value:s.email,type:"text",onSave:t=>W(s.id,"email",t),disabled:!x,className:"text-xs text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Rs,{className:"h-3 w-3 text-muted-foreground"}),e.jsx(J,{value:s.phone,type:"text",onSave:t=>W(s.id,"phone",t),disabled:!x,className:"text-xs text-muted-foreground"})]})]})}),e.jsx(k,{children:e.jsx(J,{value:s.category,type:"select",options:ce.map(t=>({value:t,label:t})),onSave:t=>W(s.id,"category",t),disabled:!x})}),e.jsx(k,{children:e.jsxs(Y,{variant:"outline",className:U("gap-1",te(s.status)),children:[e.jsx("span",{children:I(s.status)}),s.status]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Us,{entityType:"suppliers",entityId:s.id,entityName:s.name}),e.jsxs(Ae,{open:Z===s.id,onOpenChange:t=>{H(t?s.id:null),t&&o({...s})},children:[e.jsx(De,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",disabled:!x,title:x?void 0:"You don't have permission to edit suppliers",children:"Edit"})}),e.jsxs(Fe,{className:"sm:max-w-[500px]",children:[e.jsxs(Pe,{children:[e.jsx(Te,{children:"Edit Supplier"}),e.jsxs(Be,{children:["Supplier ID: ",s.id]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"edit-name",children:"Company Name *"}),e.jsx(v,{id:"edit-name",value:a.name,onChange:t=>o({...a,name:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"edit-status",children:"Status"}),e.jsxs($,{value:a.status,onValueChange:t=>o({...a,status:t}),children:[e.jsx(M,{children:e.jsx(V,{placeholder:"Select status"})}),e.jsx(q,{children:ne.map(t=>e.jsx(A,{value:t,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:I(t)}),t]})},t))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"edit-contact",children:"Contact Person *"}),e.jsx(v,{id:"edit-contact",value:a.contact,onChange:t=>o({...a,contact:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"edit-email",children:"Email *"}),e.jsx(v,{id:"edit-email",type:"email",value:a.email,onChange:t=>o({...a,email:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"edit-phone",children:"Phone *"}),e.jsx(v,{id:"edit-phone",value:a.phone,onChange:t=>o({...a,phone:t.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(h,{htmlFor:"edit-category",children:"Category *"}),e.jsxs($,{value:a.category,onValueChange:t=>o({...a,category:t}),children:[e.jsx(M,{children:e.jsx(V,{placeholder:"Select category"})}),e.jsx(q,{children:ce.map(t=>e.jsx(A,{value:t,children:t},t))})]})]})]}),e.jsxs(Ee,{className:"flex-col-reverse sm:flex-row sm:justify-between sm:space-x-2",children:[e.jsxs(f,{variant:"destructive",onClick:async()=>{try{await bs(s.id),S(t=>(t??[]).filter(d=>d.id!==s.id)),H(null),c.success("Supplier deleted")}catch(t){c.error(t?.message||"Failed to delete supplier")}},children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"Delete"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"outline",onClick:()=>H(null),children:"Cancel"}),e.jsx(f,{onClick:async()=>{if(!a.id){c.error("Missing supplier id");return}if(!a.name.trim()||!a.contact.trim()||!a.email.trim()||!a.phone.trim()||!a.category.trim()){c.error("Please fill all required fields");return}try{const t=await ke({id:a.id,name:a.name,contact:a.contact,email:a.email,phone:a.phone,category:a.category,status:a.status});S(d=>(d??[]).map(p=>p.id===t.id?t:p)),H(null),c.success("Supplier updated")}catch(t){c.error(t?.message||"Failed to update supplier")}},children:"Save Changes"})]})]})]})]})]})})]},s.id)})})]}),se.length>0&&e.jsx(Ls,{currentPage:je,totalPages:Ge,onPageChange:We,itemsPerPage:Ye,totalItems:_e})]})]})]})]})}export{Zs as SuppliersView};
