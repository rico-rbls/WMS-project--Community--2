import{c as F,f as I,r as l,j as e,C as o,l as m,m as x,q as h,aV as y,n as f,I as u,B as t,s as g,aI as C,ah as z,aH as H,aW as D,L as N,aX as B,N as Y,aY as O,t as n}from"./index-BbQSPos2.js";import{C as R}from"./calendar-BU43nON5.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],_=F("save",U);function W(){const{user:s,updateProfile:b,changePassword:k}=I(),[S,j]=l.useState(!1),[w,v]=l.useState(s?.name||""),[L,p]=l.useState(!1),[a,c]=l.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[i,E]=l.useState(!1),[d,P]=l.useState(!1);if(!s)return e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(o,{className:"max-w-md",children:e.jsxs(m,{children:[e.jsx(x,{className:"text-red-600",children:"Not Authenticated"}),e.jsx(h,{children:"Please log in to view your profile."})]})})});const A=()=>{if(!w.trim()){n.error("Name cannot be empty");return}b(w.trim()),j(!1),n.success("Profile updated successfully")},M=async()=>{if(!a.currentPassword){n.error("Please enter your current password");return}if(!a.newPassword){n.error("Please enter a new password");return}if(a.newPassword.length<6){n.error("New password must be at least 6 characters");return}if(a.newPassword!==a.confirmPassword){n.error("Passwords do not match");return}P(!0);try{await k(a.currentPassword,a.newPassword),n.success("Password changed successfully"),p(!1),c({currentPassword:"",newPassword:"",confirmPassword:""})}catch(r){const V=r instanceof Error?r.message:"Failed to change password";n.error(V)}finally{P(!1)}};return e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account settings and preferences"})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5"}),"Profile Information"]}),e.jsx(h,{children:"Your personal account details"})]}),e.jsxs(f,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(y,{className:"h-10 w-10 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[S?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{value:w,onChange:r=>v(r.target.value),className:"max-w-xs",placeholder:"Enter your name"}),e.jsxs(t,{size:"sm",onClick:A,children:[e.jsx(_,{className:"h-4 w-4 mr-1"})," Save"]}),e.jsx(t,{size:"sm",variant:"outline",onClick:()=>{j(!1),v(s.name)},children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-xl font-semibold",children:s.name}),e.jsx(t,{size:"sm",variant:"ghost",onClick:()=>j(!0),children:"Edit"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs(g,{variant:s.role==="Admin"?"default":"secondary",children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),s.role]}),e.jsx(g,{variant:"outline",className:"text-green-600 border-green-600",children:s.status})]})]})]}),e.jsxs("div",{className:"grid gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Account Created"}),e.jsx("p",{className:"font-medium",children:new Date(s.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Login"}),e.jsx("p",{className:"font-medium",children:s.lastLogin?new Date(s.lastLogin).toLocaleString():"Current session"})]})]})]})]})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Security"]}),e.jsx(h,{children:"Manage your password and security settings"})]}),e.jsx(f,{children:L?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"currentPassword",children:"Current Password"}),e.jsx("div",{className:"relative",children:e.jsx(u,{id:"currentPassword",type:i?"text":"password",value:a.currentPassword,onChange:r=>c({...a,currentPassword:r.target.value}),placeholder:"Enter current password",disabled:d})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"newPassword",children:"New Password"}),e.jsx("div",{className:"relative",children:e.jsx(u,{id:"newPassword",type:i?"text":"password",value:a.newPassword,onChange:r=>c({...a,newPassword:r.target.value}),placeholder:"Enter new password (min 6 characters)",disabled:d})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsx("div",{className:"relative",children:e.jsx(u,{id:"confirmPassword",type:i?"text":"password",value:a.confirmPassword,onChange:r=>c({...a,confirmPassword:r.target.value}),placeholder:"Confirm new password",disabled:d})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(t,{type:"button",variant:"ghost",size:"sm",onClick:()=>E(!i),children:[i?e.jsx(B,{className:"h-4 w-4 mr-1"}):e.jsx(Y,{className:"h-4 w-4 mr-1"}),i?"Hide":"Show"," passwords"]})}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(t,{onClick:M,disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2 animate-spin"}),"Changing..."]}):"Change Password"}),e.jsx(t,{variant:"outline",onClick:()=>{p(!1),c({currentPassword:"",newPassword:"",confirmPassword:""})},disabled:d,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last changed: Unknown"})]}),e.jsx(t,{variant:"outline",onClick:()=>p(!0),children:"Change Password"})]})})]}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsxs(x,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Role & Permissions"]}),e.jsx(h,{children:"Your current role and what you can do"})]}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(g,{variant:s.role==="Admin"?"default":"secondary",className:"text-base px-3 py-1",children:s.role})}),e.jsx("div",{className:"grid gap-2 text-sm",children:s.role==="Admin"?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-muted-foreground",children:"As an Admin, you have full access to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"Create, edit, and delete inventory items"}),e.jsx("li",{children:"Manage orders and shipments"}),e.jsx("li",{children:"Create and approve purchase orders"}),e.jsx("li",{children:"Manage suppliers"}),e.jsx("li",{children:"Manage user accounts and permissions"}),e.jsx("li",{children:"View all reports and analytics"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-muted-foreground",children:"As an Operator, you have read-only access to:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"View inventory items"}),e.jsx("li",{children:"View orders and shipments"}),e.jsx("li",{children:"View purchase orders"}),e.jsx("li",{children:"View suppliers"}),e.jsx("li",{children:"View reports and analytics"})]}),e.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400 mt-2",children:"Contact an administrator if you need additional permissions."})]})})]})})]})]})}export{W as AdminProfileView};
