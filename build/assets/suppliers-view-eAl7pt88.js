import{J as Us,i as Ks,H as Ms,r as n,M as Rs,l as Vs,bi as qs,bj as Xe,x as i,bk as zs,bl as Hs,bm as Ws,j as e,C as K,o as Q,p as Z,U as Pe,q as M,S as Qe,P as Ae,d as T,w as E,v as Gs,B as u,D as de,$ as Ze,y as oe,z as me,A as ue,E as xe,L as x,I as v,F as Fe,O as Ys,a2 as _s,a1 as Js,n as Xs,a9 as es,aT as ss,aU as ts,bn as Qs,bo as Zs,bp as et}from"./index-CrLoFnb9.js";import{D as st,S as ee,a as se,b as te,c as ae,d as z,T as as,e as rs,f as he,g as H,h as B,i as ls,j as y}from"./sortable-table-head-DhgH0glg.js";import{u as tt,a as at,F as rt,B as lt,T as it,E as nt,S as ct,P as dt}from"./select-all-banner-Du3Os0aa.js";import{S as ot,F as mt}from"./favorite-button-CNo8XHy_.js";import{u as ut}from"./useTableSort-Cvw3r7HB.js";import{c as xt}from"./permissions-DeuZZz56.js";import{E as De}from"./editable-cell-oPXiC1qt.js";import{C as is}from"./circle-check-big-7ieXsn4f.js";import{P as ht}from"./plus-D7p57WxJ.js";import{A as W,a as ns,D as cs}from"./dollar-sign-Dz_AToaE.js";import{T as pe}from"./trash-2-DrUnq5I_.js";import{C as pt}from"./circle-alert-DXjwCBhl.js";import{B as Ie}from"./building-2-Dl8Kmy2J.js";import{H as gt}from"./hash-AK3q9pFA.js";import{T as jt}from"./tag-UZsrwVUC.js";import{M as ft}from"./map-pin-DKq9BnM7.js";import{T as ds}from"./trending-up-B3ZQYaSF.js";import{S as vt}from"./square-pen-AE-WbG9A.js";import"./skeleton-C1MU8BYw.js";import"./circle-check-sAOqQZCY.js";const Te=["Active","Inactive"],Be=["Electronics","Furniture","Clothing","Food & Beverages","Other"];function Mt({initialOpenDialog:Oe,onDialogOpened:Le,initialSupplierId:re,onSupplierDialogOpened:Ee}){const{isFavorite:$e,getFavoritesByType:Ue}=Us(),{user:le}=Ks(),w=le?xt(le.role):!1,ge=le?.role==="Admin"||le?.role==="Owner",{suppliers:G,isLoading:os,setSuppliers:b}=Ms(),[R,Ke]=n.useState(""),[k,ie]=n.useState("all"),[V,Me]=n.useState(!1),[p,Re]=n.useState(!1),[Y,ms]=n.useState([]),[je,us]=n.useState([]),[xs,Ve]=n.useState(!0),[_,J]=n.useState(!1),[fe,$]=n.useState(null),[ve,X]=n.useState(null),[r,o]=n.useState({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active",country:"",city:"",address:"",purchases:0,payments:0}),ye=Rs(R,300);n.useEffect(()=>{(async()=>{Ve(!0);const[s,a]=await Promise.all([Vs(),qs()]);ms(s),us(a),Ve(!1)})()},[]),n.useEffect(()=>{Oe&&!_&&(J(!0),Le?.())},[Oe,Le,_]),n.useEffect(()=>{re&&G&&G.find(a=>a.id===re)&&(X(re),Ee?.())},[re,G,Ee]);const S=n.useMemo(()=>G??[],[G]),f=n.useMemo(()=>{const s=S.length,a=S.filter(m=>m.status==="Active").length,t=S.filter(m=>m.status==="Inactive").length,l=new Set(S.map(m=>m.category)).size,j=Y.length,N=Y.reduce((m,h)=>(m[h.supplierId]=(m[h.supplierId]||0)+1,m),{});let d=null;if(Object.keys(N).length>0){const m=Object.entries(N).sort((U,ke)=>ke[1]-U[1])[0],h=S.find(U=>U.id===m[0]);h&&(d={id:h.id,name:h.name,count:m[1]})}const c=Y.reduce((m,h)=>(m[h.supplierId]=(m[h.supplierId]||0)+h.totalAmount,m),{});let L=null;if(Object.keys(c).length>0){const m=Object.entries(c).sort((U,ke)=>ke[1]-U[1])[0],h=S.find(U=>U.id===m[0]);h&&(L={id:h.id,name:h.name,value:m[1]})}const Es=je.reduce((m,h)=>(h.supplierId&&(m[h.supplierId]=(m[h.supplierId]||0)+1),m),{}),$s=Object.keys(Es).length;return{totalSuppliers:s,activeSuppliers:a,inactiveSuppliers:t,uniqueCategories:l,totalPurchaseOrders:j,topSupplierByPO:d,topSupplierByValue:L,suppliersWithProducts:$s}},[S,Y,je]),ne=n.useMemo(()=>S.filter(s=>{if(s.archived===!0!==p||V&&!$e("suppliers",s.id)||k!=="all"&&s.status!==k)return!1;if(ye){const t=ye.toLowerCase();if(!(s.name.toLowerCase().includes(t)||s.id.toLowerCase().includes(t)||s.category.toLowerCase().includes(t)||s.contact.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)))return!1}return!0}),[S,ye,k,V,$e,p]);function hs(){Ke(""),ie("all"),Me(!1),Re(!1)}async function ps(s){try{const a=await et(s);b(t=>(t??[]).map(l=>l.id===s?a:l)),$(null),i.success("Supplier archived successfully")}catch(a){i.error(a?.message||"Failed to archive supplier")}}async function gs(s){try{const a=await Qs(s);b(t=>(t??[]).map(l=>l.id===s?a:l)),$(null),i.success("Supplier restored successfully")}catch(a){i.error(a?.message||"Failed to restore supplier")}}async function js(s){try{await Zs(s),b(a=>(a??[]).filter(t=>t.id!==s)),$(null),i.success("Supplier permanently deleted")}catch(a){i.error(a?.message||"Failed to permanently delete supplier")}}const q=s=>{switch(s){case"Active":return"âœ“";case"Inactive":return"â—‹";default:return"â—‹"}},Ne=s=>{switch(s){case"Active":return"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-200";case"Inactive":return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200";default:return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200"}},{sortedData:qe,sortConfig:P,requestSort:A,getSortDirection:F}=ut(ne),{currentPage:ze,totalPages:fs,paginatedData:He,goToPage:vs,totalItems:ys,itemsPerPage:Ns}=tt(qe,25),{selectedIds:C,selectedItems:We,selectionCount:be,isAllSelected:bs,isAllPageSelected:Ss,isAllPagesSelected:Cs,isPartiallySelected:ws,hasSelection:Se,toggleItem:ks,toggleAll:Ce,selectAllPages:Ps,deselectAll:g,isSelected:As,totalItemCount:Ge,pageItemCount:Ye}=at(He,qe),[D,O]=n.useState(!1),[Fs,_e]=n.useState(!1),[Ds,I]=n.useState(!1),Is=()=>{const s=["Supplier ID","Name","Contact Person","Email","Phone","Category","Status","Country","City","Address","Purchases","Payments","Balance","Created Date"],a=ne.map(d=>[d.id,d.name,d.contact||"",d.email||"",d.phone||"",d.category||"",d.status,d.country||"",d.city||"",d.address||"",(d.purchases||0).toFixed(2),(d.payments||0).toFixed(2),(d.balance||0).toFixed(2),d.createdDate||""]),t=[s,...a].map(d=>d.map(c=>`"${c}"`).join(",")).join(`
`),l=new Blob([t],{type:"text/csv"}),j=URL.createObjectURL(l),N=document.createElement("a");N.href=j,N.download=`suppliers-${new Date().toISOString().split("T")[0]}.csv`,N.click(),URL.revokeObjectURL(j),i.success("Suppliers exported to CSV")};n.useEffect(()=>{g()},[ze,g]),n.useEffect(()=>{const s=a=>{(a.metaKey||a.ctrlKey)&&a.key==="a"&&!_&&!fe&&(a.preventDefault(),Ce()),a.key==="Escape"&&Se&&g()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[Ce,g,Se,_,fe]);const we=n.useCallback(async(s,a,t)=>{try{const l={[a]:t},j=await Xe({id:s,...l});b(N=>(N??[]).map(d=>d.id===s?j:d)),i.success(`${a.charAt(0).toUpperCase()+a.slice(1)} updated`)}catch(l){throw i.error(l?.message||"Failed to update"),l}},[b]);n.useCallback(async()=>{O(!0);try{const s=Array.from(C),a=await bulkDeleteSuppliers(s);b(t=>t?.filter(l=>!s.includes(l.id))??[]),a.failedCount>0?i.warning(`Deleted ${a.successCount} suppliers. ${a.failedCount} failed.`):i.success(`Successfully deleted ${a.successCount} supplier${a.successCount!==1?"s":""}`),g()}catch(s){i.error(s?.message||"Failed to delete suppliers")}finally{O(!1),I(!1)}},[C,g]);const Ts=n.useCallback(async()=>{O(!0);try{const s=Array.from(C),a=await zs(s);b(t=>t&&t.map(l=>s.includes(l.id)?{...l,archived:!0,archivedAt:new Date().toISOString()}:l)),a.failedCount>0?i.warning(`Archived ${a.successCount} suppliers. ${a.failedCount} failed.`):i.success(`Successfully archived ${a.successCount} supplier${a.successCount!==1?"s":""}`),g()}catch(s){i.error(s?.message||"Failed to archive suppliers")}finally{O(!1),I(!1)}},[C,g]),Bs=n.useCallback(async()=>{O(!0);try{const s=Array.from(C),a=await Hs(s);b(t=>t&&t.map(l=>s.includes(l.id)?{...l,archived:!1,archivedAt:void 0}:l)),a.failedCount>0?i.warning(`Restored ${a.successCount} suppliers. ${a.failedCount} failed.`):i.success(`Successfully restored ${a.successCount} supplier${a.successCount!==1?"s":""}`),g()}catch(s){i.error(s?.message||"Failed to restore suppliers")}finally{O(!1),I(!1)}},[C,g]),Je=n.useCallback(async()=>{O(!0);try{const s=Array.from(C),a=await Ws(s);b(t=>t?.filter(l=>!s.includes(l.id))??[]),a.failedCount>0?i.warning(`Permanently deleted ${a.successCount} suppliers. ${a.failedCount} failed.`):i.success(`Permanently deleted ${a.successCount} supplier${a.successCount!==1?"s":""}`),g()}catch(s){i.error(s?.message||"Failed to permanently delete suppliers")}finally{O(!1),I(!1)}},[C,g]),Os=n.useCallback(async s=>{_e(!0);try{const a=Array.from(C),t=await bulkUpdateSupplierStatus(a,s);b(l=>l&&l.map(j=>a.includes(j.id)?{...j,status:s}:j)),t.failedCount>0?i.warning(`Updated ${t.successCount} suppliers. ${t.failedCount} failed.`):i.success(`Successfully updated ${t.successCount} supplier${t.successCount!==1?"s":""}`),g()}catch(a){i.error(a?.message||"Failed to update suppliers")}finally{_e(!1)}},[C,g]),Ls=n.useCallback(s=>{o({id:s.id,name:s.name,contact:s.contact,email:s.email,phone:s.phone,category:s.category,status:s.status,country:s.country||"",city:s.city||"",address:s.address||"",purchases:s.purchases||0,payments:s.payments||0}),$(s.id)},[]),ce=n.useMemo(()=>We.map(s=>s.name),[We]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"WMS Suppliers"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage supplier profiles, contact information, and purchasing relationships"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(K,{className:"relative overflow-hidden",children:[e.jsxs(Q,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Z,{className:"text-sm font-medium text-muted-foreground",children:"Total Suppliers"}),e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold",children:f.totalSuppliers}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[f.activeSuppliers," active, ",f.inactiveSuppliers," inactive"]})]})]}),e.jsxs(K,{className:"relative overflow-hidden",children:[e.jsxs(Q,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Z,{className:"text-sm font-medium text-muted-foreground",children:"Active Suppliers"}),e.jsx(is,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:f.activeSuppliers}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f.totalSuppliers>0?`${Math.round(f.activeSuppliers/f.totalSuppliers*100)}% of total`:"No suppliers yet"})]})]}),e.jsxs(K,{className:"relative overflow-hidden",children:[e.jsxs(Q,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Z,{className:"text-sm font-medium text-muted-foreground",children:"Total Purchase Orders"}),e.jsx(Qe,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:f.totalPurchaseOrders}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f.topSupplierByPO?`Top: ${f.topSupplierByPO.name} (${f.topSupplierByPO.count})`:"No orders yet"})]})]}),e.jsxs(K,{className:"relative overflow-hidden",children:[e.jsxs(Q,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Z,{className:"text-sm font-medium text-muted-foreground",children:"Categories"}),e.jsx(Ae,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(M,{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f.uniqueCategories}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[f.suppliersWithProducts," suppliers with products"]})]})]})]}),e.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-2",children:[e.jsx(K,{className:T("cursor-pointer transition-all hover:shadow-md border-l-4",k==="Active"?"ring-2 ring-primary":"","border-l-emerald-400"),onClick:()=>ie(k==="Active"?"all":"Active"),children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Active"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:f.activeSuppliers})]}),e.jsx(E,{variant:"outline",className:Ne("Active"),children:q("Active")})]})})}),e.jsx(K,{className:T("cursor-pointer transition-all hover:shadow-md border-l-4",k==="Inactive"?"ring-2 ring-primary":"","border-l-slate-400"),onClick:()=>ie(k==="Inactive"?"all":"Inactive"),children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Inactive"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:f.inactiveSuppliers})]}),e.jsx(E,{variant:"outline",className:Ne("Inactive"),children:q("Inactive")})]})})})]}),e.jsxs(K,{children:[e.jsx(Q,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-xl",children:"WMS Supplier Management"}),e.jsx(Gs,{className:"mt-1",children:"Manage your supplier relationships and contacts"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:"outline",onClick:Is,children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),e.jsxs(de,{open:_,onOpenChange:s=>{J(s),s||o({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active",country:"",city:"",address:"",purchases:0,payments:0})},children:[e.jsx(Ze,{asChild:!0,children:e.jsxs(u,{onClick:()=>o({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active",country:"",city:"",address:"",purchases:0,payments:0}),disabled:!w,title:w?void 0:"You don't have permission to add suppliers",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Add Supplier"]})}),e.jsxs(oe,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(me,{children:[e.jsx(ue,{children:"Create New Supplier"}),e.jsx(xe,{children:"Enter the details for the new supplier."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"supplier-name",children:"Company Name *"}),e.jsx(v,{id:"supplier-name",placeholder:"Enter company name",value:r.name,onChange:s=>o({...r,name:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"supplier-status",children:"Status"}),e.jsxs(ee,{value:r.status,onValueChange:s=>o({...r,status:s}),children:[e.jsx(se,{children:e.jsx(te,{placeholder:"Select status"})}),e.jsx(ae,{children:Te.map(s=>e.jsx(z,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:q(s)}),s]})},s))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"contact-name",children:"Contact Person *"}),e.jsx(v,{id:"contact-name",placeholder:"Enter contact name",value:r.contact,onChange:s=>o({...r,contact:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"email",children:"Email *"}),e.jsx(v,{id:"email",type:"email",placeholder:"email@example.com",value:r.email,onChange:s=>o({...r,email:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"phone",children:"Phone *"}),e.jsx(v,{id:"phone",placeholder:"+1 (555) 000-0000",value:r.phone,onChange:s=>o({...r,phone:s.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"category",children:"Category *"}),e.jsxs(ee,{value:r.category,onValueChange:s=>o({...r,category:s}),children:[e.jsx(se,{children:e.jsx(te,{placeholder:"Select category"})}),e.jsx(ae,{children:Be.map(s=>e.jsx(z,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground mb-3 block",children:"Location Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"country",children:"Country"}),e.jsx(v,{id:"country",placeholder:"e.g., United States",value:r.country,onChange:s=>o({...r,country:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"city",children:"City"}),e.jsx(v,{id:"city",placeholder:"e.g., San Francisco",value:r.city,onChange:s=>o({...r,city:s.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2 mt-4",children:[e.jsx(x,{htmlFor:"address",children:"Address"}),e.jsx(v,{id:"address",placeholder:"Full street address",value:r.address,onChange:s=>o({...r,address:s.target.value})})]})]}),e.jsx("div",{className:"border-t pt-4 mt-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"ðŸ’¡ Financial information (Total Purchases, Payments, Balance) is automatically calculated from Purchase Orders."})})]}),e.jsxs(Fe,{children:[e.jsx(u,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsx(u,{onClick:async()=>{if(!r.name.trim()||!r.contact.trim()||!r.email.trim()||!r.phone.trim()||!r.category.trim()){i.error("Please fill all required fields");return}try{const s=await Ys({name:r.name,contact:r.contact,email:r.email,phone:r.phone,category:r.category,status:r.status,country:r.country,city:r.city,address:r.address,purchases:0,payments:0});b(a=>[s,...a??[]]),J(!1),i.success("Supplier added successfully"),o({id:"",name:"",contact:"",email:"",phone:"",category:"",status:"Active",country:"",city:"",address:"",purchases:0,payments:0})}catch(s){i.error(s?.message||"Failed to add supplier")}},children:"Create Supplier"})]})]})]})]})]})}),e.jsxs(M,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(_s,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(v,{placeholder:"Search suppliers by name, contact, email...",value:R,onChange:s=>Ke(s.target.value),className:"pl-9"})]}),e.jsxs(ee,{value:k,onValueChange:ie,children:[e.jsxs(se,{className:"w-full sm:w-[180px]",children:[e.jsx(rt,{className:"h-4 w-4 mr-2"}),e.jsx(te,{placeholder:"Filter by status"})]}),e.jsxs(ae,{children:[e.jsx(z,{value:"all",children:"All Statuses"}),Te.map(s=>e.jsx(z,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:q(s)}),s]})},s))]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs(u,{variant:V?"default":"outline",size:"sm",onClick:()=>Me(!V),className:"gap-1",children:[e.jsx(ot,{className:T("h-4 w-4",V&&"fill-current")}),"Favorites",Ue("suppliers").length>0&&e.jsx(E,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:Ue("suppliers").length})]}),e.jsxs(u,{variant:p?"default":"outline",size:"sm",onClick:()=>Re(!p),className:p?"bg-orange-500 hover:bg-orange-600 text-white":"",children:[e.jsx(W,{className:"h-4 w-4 mr-1"}),p?"Viewing Archived":"View Archived"]}),(R||k!=="all"||V||p)&&e.jsxs(u,{variant:"ghost",size:"sm",onClick:hs,className:"gap-1 text-muted-foreground hover:text-foreground",children:[e.jsx(Js,{className:"h-4 w-4"}),"Clear All Filters"]})]})]}),Se&&w&&e.jsx(lt,{selectionCount:be,onClearSelection:g,isLoading:D||Fs,actions:p?[{id:"restore",label:"Restore",icon:e.jsx(ns,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:Bs},...ge?[{id:"permanent-delete",label:"Permanently Delete",icon:e.jsx(pe,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>I(!0)}]:[]]:[{id:"archive",label:"Archive",icon:e.jsx(W,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:()=>I(!0)}],actionGroups:p?[]:[{id:"status-update",label:"Update Status",icon:e.jsx(Xs,{className:"h-4 w-4 mr-1"}),options:[{value:"Active",label:"Active"},{value:"Inactive",label:"Inactive"}],onSelect:s=>Os(s)}],className:"mb-4"}),e.jsx(de,{open:Ds,onOpenChange:I,children:e.jsxs(oe,{className:"max-w-md",children:[e.jsxs(me,{children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(pt,{className:"h-5 w-5 text-destructive"}),"Delete ",be," Supplier",be!==1?"s":""]}),e.jsx(xe,{children:p?"These suppliers are already archived. This action will permanently remove them from the system.":"Choose how you want to delete the selected suppliers:"})]}),ce.length>0&&e.jsx("div",{className:"max-h-32 overflow-y-auto border rounded-md p-2 bg-muted/50",children:e.jsxs("ul",{className:"text-sm space-y-1",children:[ce.slice(0,10).map((s,a)=>e.jsxs("li",{className:"truncate",children:["â€¢ ",s]},a)),ce.length>10&&e.jsxs("li",{className:"text-muted-foreground",children:["...and ",ce.length-10," more"]})]})}),p?e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(pe,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This cannot be undone. All data will be permanently removed."})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(u,{variant:"outline",onClick:()=>I(!1),disabled:D,children:"Cancel"}),e.jsx(u,{variant:"destructive",onClick:Je,disabled:D,children:D?"Deleting...":"Permanently Delete All"})]})]}):e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border rounded-md hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(W,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Archive"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Move to archive. Suppliers can be restored later."})]}),e.jsx(u,{variant:"secondary",size:"sm",onClick:Ts,disabled:D,children:D?"...":"Archive"})]})}),ge&&e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(pe,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Delete Permanently"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be undone. Data will be permanently removed."})]}),e.jsx(u,{variant:"destructive",size:"sm",onClick:Je,disabled:D,children:D?"...":"Delete"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(u,{variant:"outline",onClick:()=>I(!1),disabled:D,children:"Cancel"})})]})]})}),xs||os?e.jsx(it,{rows:8}):ne.length===0?e.jsx(nt,{icon:p?W:Pe,title:p?"No archived suppliers":"No suppliers found",description:p?"Archived suppliers will appear here":R?"Try adjusting your search criteria":"Get started by adding your first supplier",actionLabel:!p&&!R?"Add Supplier":void 0,onAction:!p&&!R?()=>J(!0):void 0}):e.jsxs("div",{className:"rounded-md border overflow-hidden",children:[e.jsx(ct,{pageItemCount:Ye,totalItemCount:Ge,isAllPagesSelected:Cs,show:Ss&&Ge>Ye,onSelectAllPages:Ps,onClearSelection:g,itemLabel:"suppliers"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(as,{children:[e.jsx(rs,{children:e.jsxs(he,{children:[e.jsx(H,{className:"w-12",children:e.jsx(es,{checked:bs,ref:s=>{s&&(s.indeterminate=ws)},onCheckedChange:Ce,"aria-label":"Select all suppliers"})}),e.jsx(B,{sortKey:"id",currentSortKey:P.key,sortDirection:F("id"),onSort:s=>A(s),children:"Supplier ID"}),e.jsx(B,{sortKey:"name",currentSortKey:P.key,sortDirection:F("name"),onSort:s=>A(s),children:"Company Name"}),e.jsx(B,{sortKey:"contact",currentSortKey:P.key,sortDirection:F("contact"),onSort:s=>A(s),children:"Contact"}),e.jsx(B,{sortKey:"category",currentSortKey:P.key,sortDirection:F("category"),onSort:s=>A(s),children:"Category"}),e.jsx(B,{sortKey:"status",currentSortKey:P.key,sortDirection:F("status"),onSort:s=>A(s),children:"Status"}),e.jsx(B,{sortKey:"country",currentSortKey:P.key,sortDirection:F("country"),onSort:s=>A(s),children:"Location"}),e.jsx(B,{sortKey:"purchases",currentSortKey:P.key,sortDirection:F("purchases"),onSort:s=>A(s),children:"Purchases"}),e.jsx(B,{sortKey:"payments",currentSortKey:P.key,sortDirection:F("payments"),onSort:s=>A(s),children:"Payments"}),e.jsx(B,{sortKey:"balance",currentSortKey:P.key,sortDirection:F("balance"),onSort:s=>A(s),children:"Balance"}),e.jsx(H,{children:"Actions"})]})}),e.jsx(ls,{children:He.map(s=>{const a=As(s.id);return e.jsxs(he,{className:T("hover:bg-muted/50 transition-colors",a&&"bg-muted/50"),children:[e.jsx(y,{children:e.jsx(es,{checked:a,onCheckedChange:()=>ks(s.id),"aria-label":`Select supplier ${s.name}`})}),e.jsx(y,{className:"font-mono text-sm",children:s.id}),e.jsx(y,{children:e.jsx("button",{className:"text-left font-medium text-primary hover:underline cursor-pointer bg-transparent border-none p-0",onClick:()=>X(s.id),children:s.name})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ss,{className:"h-3 w-3 text-muted-foreground"}),e.jsx(De,{value:s.email,type:"text",onSave:t=>we(s.id,"email",t),disabled:!w,className:"text-xs text-muted-foreground"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(ts,{className:"h-3 w-3 text-muted-foreground"}),e.jsx(De,{value:s.phone,type:"text",onSave:t=>we(s.id,"phone",t),disabled:!w,className:"text-xs text-muted-foreground"})]})]})}),e.jsx(y,{children:e.jsx(De,{value:s.category,type:"select",options:Be.map(t=>({value:t,label:t})),onSave:t=>we(s.id,"category",t),disabled:!w})}),e.jsx(y,{children:e.jsxs(E,{variant:"outline",className:T("gap-1",Ne(s.status)),children:[e.jsx("span",{children:q(s.status)}),s.status]})}),e.jsx(y,{children:e.jsx("div",{className:"text-sm",children:s.city&&s.country?e.jsxs("span",{children:[s.city,", ",s.country]}):s.city||s.country?e.jsx("span",{children:s.city||s.country}):e.jsx("span",{className:"text-muted-foreground",children:"â€”"})})}),e.jsxs(y,{className:"text-right font-medium",children:["â‚±",s.purchases.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(y,{className:"text-right font-medium",children:["â‚±",s.payments.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs(y,{className:T("text-right font-medium",s.balance>0?"text-amber-600":s.balance<0?"text-emerald-600":""),children:["â‚±",s.balance.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx(y,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mt,{entityType:"suppliers",entityId:s.id,entityName:s.name}),e.jsxs(de,{open:fe===s.id,onOpenChange:t=>{$(t?s.id:null),t&&o({...s,country:s.country||"",city:s.city||"",address:s.address||"",purchases:s.purchases||0,payments:s.payments||0})},children:[e.jsx(Ze,{asChild:!0,children:e.jsx(u,{variant:"ghost",size:"sm",disabled:!w,title:w?void 0:"You don't have permission to edit suppliers",children:"Edit"})}),e.jsxs(oe,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(me,{children:[e.jsx(ue,{children:"Edit Supplier"}),e.jsxs(xe,{children:["Supplier ID: ",s.id]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"edit-name",children:"Company Name *"}),e.jsx(v,{id:"edit-name",value:r.name,onChange:t=>o({...r,name:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"edit-status",children:"Status"}),e.jsxs(ee,{value:r.status,onValueChange:t=>o({...r,status:t}),children:[e.jsx(se,{children:e.jsx(te,{placeholder:"Select status"})}),e.jsx(ae,{children:Te.map(t=>e.jsx(z,{value:t,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:q(t)}),t]})},t))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"edit-contact",children:"Contact Person *"}),e.jsx(v,{id:"edit-contact",value:r.contact,onChange:t=>o({...r,contact:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"edit-email",children:"Email *"}),e.jsx(v,{id:"edit-email",type:"email",value:r.email,onChange:t=>o({...r,email:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"edit-phone",children:"Phone *"}),e.jsx(v,{id:"edit-phone",value:r.phone,onChange:t=>o({...r,phone:t.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"edit-category",children:"Category *"}),e.jsxs(ee,{value:r.category,onValueChange:t=>o({...r,category:t}),children:[e.jsx(se,{children:e.jsx(te,{placeholder:"Select category"})}),e.jsx(ae,{children:Be.map(t=>e.jsx(z,{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-2",children:[e.jsx(x,{className:"text-sm font-medium text-muted-foreground mb-3 block",children:"Location Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"edit-country",children:"Country"}),e.jsx(v,{id:"edit-country",placeholder:"e.g., United States",value:r.country,onChange:t=>o({...r,country:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(x,{htmlFor:"edit-city",children:"City"}),e.jsx(v,{id:"edit-city",placeholder:"e.g., San Francisco",value:r.city,onChange:t=>o({...r,city:t.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2 mt-4",children:[e.jsx(x,{htmlFor:"edit-address",children:"Address"}),e.jsx(v,{id:"edit-address",placeholder:"Full street address",value:r.address,onChange:t=>o({...r,address:t.target.value})})]})]}),e.jsx("div",{className:"border-t pt-4 mt-2",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"ðŸ’¡ Financial information (Total Purchases, Payments, Balance) is automatically calculated from Purchase Orders."})})]}),e.jsxs(Fe,{className:"flex-col-reverse sm:flex-row sm:justify-between sm:space-x-2",children:[s.archived?e.jsxs(e.Fragment,{children:[e.jsxs(u,{variant:"outline",onClick:()=>gs(s.id),children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Restore"]}),ge&&e.jsxs(u,{variant:"destructive",onClick:()=>js(s.id),children:[e.jsx(pe,{className:"h-4 w-4 mr-2"}),"Permanently Delete"]})]}):e.jsxs(u,{variant:"outline",onClick:()=>ps(s.id),className:"text-orange-600 border-orange-300 hover:bg-orange-50",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"Archive"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>$(null),children:"Cancel"}),!s.archived&&e.jsx(u,{onClick:async()=>{if(!r.id){i.error("Missing supplier id");return}if(!r.name.trim()||!r.contact.trim()||!r.email.trim()||!r.phone.trim()||!r.category.trim()){i.error("Please fill all required fields");return}try{const t=await Xe({id:r.id,name:r.name,contact:r.contact,email:r.email,phone:r.phone,category:r.category,status:r.status,country:r.country,city:r.city,address:r.address});b(l=>(l??[]).map(j=>j.id===t.id?t:j)),$(null),i.success("Supplier updated")}catch(t){i.error(t?.message||"Failed to update supplier")}},children:"Save Changes"})]})]})]})]})]})})]},s.id)})})]})}),ne.length>0&&e.jsx(dt,{currentPage:ze,totalPages:fs,onPageChange:vs,itemsPerPage:Ns,totalItems:ys})]})]})]}),e.jsx(de,{open:ve!==null,onOpenChange:s=>!s&&X(null),children:e.jsx(oe,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:ve&&(()=>{const s=S.find(c=>c.id===ve);if(!s)return null;const a=Y.filter(c=>c.supplierId===s.id),t=a.reduce((c,L)=>c+L.totalAmount,0),l=a.reduce((c,L)=>c+(L.totalAmount??0),0),j=a.reduce((c,L)=>c+(L.totalPaid??0),0),N=l-j,d=je.filter(c=>c.supplierId===s.id);return e.jsxs(e.Fragment,{children:[e.jsxs(me,{children:[e.jsxs(ue,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"h-5 w-5 text-primary"}),"Supplier Details"]}),e.jsx(xe,{children:"View supplier information and statistics"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(gt,{className:"h-3 w-3"}),"Supplier ID"]}),e.jsx("p",{className:"font-mono text-sm",children:s.id})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ie,{className:"h-3 w-3"}),"Name"]}),e.jsx("p",{className:"font-medium",children:s.name})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(jt,{className:"h-3 w-3"}),"Category"]}),e.jsx(E,{variant:"outline",children:s.category})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(is,{className:"h-3 w-3"}),"Status"]}),e.jsx(E,{variant:s.status==="Active"?"default":"secondary",children:s.status})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(Pe,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Contact Person"}),e.jsx("p",{className:"font-medium",children:s.contact})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(ss,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Email"}),e.jsx("p",{className:"font-medium",children:s.email})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(ts,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"font-medium",children:s.phone})]})]})]})]}),(s.country||s.city||s.address)&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[(s.city||s.country)&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(ft,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"City / Country"}),e.jsx("p",{className:"font-medium",children:s.city&&s.country?`${s.city}, ${s.country}`:s.city||s.country})]})]}),s.address&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Address"}),e.jsx("p",{className:"font-medium",children:s.address})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Financial Summary"}),e.jsx("p",{className:"text-xs text-muted-foreground -mt-2",children:"Auto-calculated from Purchase Orders"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-950/30 text-center",children:[e.jsx(ds,{className:"h-4 w-4 mx-auto mb-1 text-blue-600"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600",children:["â‚±",l.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Purchases"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-green-50 dark:bg-green-950/30 text-center",children:[e.jsx(cs,{className:"h-4 w-4 mx-auto mb-1 text-green-600"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["â‚±",j.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Payments"})]}),e.jsxs("div",{className:T("p-3 rounded-lg text-center",N>0?"bg-amber-50 dark:bg-amber-950/30":"bg-emerald-50 dark:bg-emerald-950/30"),children:[e.jsx(cs,{className:T("h-4 w-4 mx-auto mb-1",N>0?"text-amber-600":"text-emerald-600")}),e.jsxs("p",{className:T("text-lg font-bold",N>0?"text-amber-600":"text-emerald-600"),children:["â‚±",N.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Balance"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Statistics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-blue-50 dark:bg-blue-950/30 text-center",children:[e.jsx(Qe,{className:"h-4 w-4 mx-auto mb-1 text-blue-600"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:a.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Purchase Orders"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-green-50 dark:bg-green-950/30 text-center",children:[e.jsx(ds,{className:"h-4 w-4 mx-auto mb-1 text-green-600"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["$",t.toLocaleString()]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Value"})]}),e.jsxs("div",{className:"p-3 rounded-lg bg-purple-50 dark:bg-purple-950/30 text-center",children:[e.jsx(Ae,{className:"h-4 w-4 mx-auto mb-1 text-purple-600"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:d.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Products"})]})]})]}),d.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:["Products from this Supplier (",d.length,")"]}),e.jsx("div",{className:"max-h-[200px] overflow-y-auto border rounded-lg",children:e.jsxs(as,{children:[e.jsx(rs,{children:e.jsxs(he,{children:[e.jsx(H,{className:"text-xs",children:"Product"}),e.jsx(H,{className:"text-xs",children:"Category"}),e.jsx(H,{className:"text-xs text-right",children:"Price"}),e.jsx(H,{className:"text-xs text-right",children:"Stock"})]})}),e.jsx(ls,{children:d.map(c=>e.jsxs(he,{children:[e.jsx(y,{className:"py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[c.photoUrl?e.jsx("img",{src:c.photoUrl,alt:c.name,className:"h-8 w-8 rounded object-cover"}):e.jsx("div",{className:"h-8 w-8 rounded bg-muted flex items-center justify-center",children:e.jsx(Ae,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:c.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.brand})]})]})}),e.jsx(y,{className:"py-2",children:e.jsx(E,{variant:"outline",className:"text-xs",children:c.category})}),e.jsxs(y,{className:"py-2 text-right text-sm",children:["â‚±",c.pricePerPiece.toLocaleString("en-US",{minimumFractionDigits:2})]}),e.jsx(y,{className:"py-2 text-right",children:e.jsx(E,{variant:c.quantity>10?"default":c.quantity>0?"secondary":"destructive",className:"text-xs",children:c.quantity})})]},c.id))})]})})]}),s.archived&&e.jsxs("div",{className:"p-3 rounded-lg bg-orange-50 dark:bg-orange-950/30 border border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-700 dark:text-orange-300",children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:"Archived"})]}),s.archivedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Archived on ",new Date(s.archivedAt).toLocaleDateString()]})]})]}),e.jsxs(Fe,{children:[e.jsx(u,{variant:"outline",onClick:()=>X(null),children:"Close"}),w&&!s.archived&&e.jsxs(u,{onClick:()=>{X(null),Ls(s)},children:[e.jsx(vt,{className:"h-4 w-4 mr-2"}),"Edit Supplier"]})]})]})})()})})]})}export{Mt as SuppliersView};
