import{c as Vt,r as o,ay as zt,az as _t,j as e,aA as Ut,aB as Ht,aC as as,aD as Ys,aE as Kt,aF as Gt,aG as us,aH as Qt,d as Q,i as Xs,C as D,o as T,p as R,v as qs,q as C,aI as G,w as K,aJ as Es,B as x,a2 as Zs,I as y,ab as Wt,P as ts,S as Ne,x as g,aK as Jt,M as Yt,aL as Ye,aM as Xt,aN as Zt,aO as Ms,aP as ea,s as xe,T as sa,aQ as ta,aR as hs,_ as Xe,aS as Vs,aT as aa,aU as ra,D as Ve,y as ze,z as _e,A as Ue,E as He,L as I,F as Ze,$ as ia,a1 as la,aa as na,aV as ca,aW as js,aX as da,aY as oa,aZ as zs,a_ as ma,a$ as xa,b0 as ua,b1 as ha,b2 as ja,b3 as pa}from"./index-CrLoFnb9.js";import{h as _s}from"./permissions-DeuZZz56.js";import{u as ga,a as va,T as Na,E as ps,P as Us,F as fa,B as ya,S as ba}from"./select-all-banner-Du3Os0aa.js";import{T as ke,e as Ie,f as W,g as v,i as Oe,j as u,S as ue,a as he,b as je,c as pe,d as J,D as wa,h as oe}from"./sortable-table-head-DhgH0glg.js";import{u as Ca}from"./printable-receipt-2UXewhw0.js";import{C as ys}from"./circle-check-sAOqQZCY.js";import{S as Sa,A as Da}from"./sparkles-BsvigoDj.js";import{I as Pa}from"./image-gxYST_i1.js";import{T as ka}from"./tag-UZsrwVUC.js";import{M as Hs}from"./minus-C9SxuTBL.js";import{P as ie}from"./plus-D7p57WxJ.js";import{T as ve}from"./trash-2-DrUnq5I_.js";import{A as Ia}from"./arrow-left-B6P4-stR.js";import{D as gs,A as Ke,a as Ks}from"./dollar-sign-Dz_AToaE.js";import{P as Oa}from"./printer-DDO8rILi.js";import{H as Aa}from"./hash-AK3q9pFA.js";import{C as vs}from"./calendar-BdJU6fmE.js";import{M as Ns}from"./map-pin-DKq9BnM7.js";import{B as Gs}from"./banknote-DIWhs2wy.js";import{C as fs}from"./credit-card-wxf35WnO.js";import{B as Qs}from"./building-2-Dl8Kmy2J.js";import{T as Ws}from"./trending-up-B3ZQYaSF.js";import{F as Ta}from"./file-text-DPSGn5OM.js";import{C as Js}from"./circle-alert-DXjwCBhl.js";import"./skeleton-C1MU8BYw.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Fa=Vt("history",Ra);var rs="Tabs",[Ba]=Ut(rs,[Ys]),et=Ys(),[La,bs]=Ba(rs),st=o.forwardRef((l,f)=>{const{__scopeTabs:$,value:m,onValueChange:F,defaultValue:N,orientation:O="horizontal",dir:E,activationMode:_="automatic",...w}=l,S=zt(E),[M,V]=_t({prop:m,onChange:F,defaultProp:N??"",caller:rs});return e.jsx(La,{scope:$,baseId:Ht(),value:M,onValueChange:V,orientation:O,dir:S,activationMode:_,children:e.jsx(as.div,{dir:S,"data-orientation":O,...w,ref:f})})});st.displayName=rs;var tt="TabsList",at=o.forwardRef((l,f)=>{const{__scopeTabs:$,loop:m=!0,...F}=l,N=bs(tt,$),O=et($);return e.jsx(Kt,{asChild:!0,...O,orientation:N.orientation,dir:N.dir,loop:m,children:e.jsx(as.div,{role:"tablist","aria-orientation":N.orientation,...F,ref:f})})});at.displayName=tt;var rt="TabsTrigger",it=o.forwardRef((l,f)=>{const{__scopeTabs:$,value:m,disabled:F=!1,...N}=l,O=bs(rt,$),E=et($),_=ct(O.baseId,m),w=dt(O.baseId,m),S=m===O.value;return e.jsx(Gt,{asChild:!0,...E,focusable:!F,active:S,children:e.jsx(as.button,{type:"button",role:"tab","aria-selected":S,"aria-controls":w,"data-state":S?"active":"inactive","data-disabled":F?"":void 0,disabled:F,id:_,...N,ref:f,onMouseDown:us(l.onMouseDown,M=>{!F&&M.button===0&&M.ctrlKey===!1?O.onValueChange(m):M.preventDefault()}),onKeyDown:us(l.onKeyDown,M=>{[" ","Enter"].includes(M.key)&&O.onValueChange(m)}),onFocus:us(l.onFocus,()=>{const M=O.activationMode!=="manual";!S&&!F&&M&&O.onValueChange(m)})})})});it.displayName=rt;var lt="TabsContent",nt=o.forwardRef((l,f)=>{const{__scopeTabs:$,value:m,forceMount:F,children:N,...O}=l,E=bs(lt,$),_=ct(E.baseId,m),w=dt(E.baseId,m),S=m===E.value,M=o.useRef(S);return o.useEffect(()=>{const V=requestAnimationFrame(()=>M.current=!1);return()=>cancelAnimationFrame(V)},[]),e.jsx(Qt,{present:F||S,children:({present:V})=>e.jsx(as.div,{"data-state":S?"active":"inactive","data-orientation":E.orientation,role:"tabpanel","aria-labelledby":_,hidden:!V,id:w,tabIndex:0,...O,ref:f,style:{...l.style,animationDuration:M.current?"0s":void 0},children:V&&N})})});nt.displayName=lt;function ct(l,f){return`${l}-trigger-${f}`}function dt(l,f){return`${l}-content-${f}`}var $a=st,qa=at,Ea=it,Ma=nt;function Va({className:l,...f}){return e.jsx($a,{"data-slot":"tabs",className:Q("flex flex-col gap-2",l),...f})}function za({className:l,...f}){return e.jsx(qa,{"data-slot":"tabs-list",className:Q("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",l),...f})}function es({className:l,...f}){return e.jsx(Ea,{"data-slot":"tabs-trigger",className:Q("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",l),...f})}function ss({className:l,...f}){return e.jsx(Ma,{"data-slot":"tabs-content",className:Q("flex-1 outline-none",l),...f})}const ge=l=>`₱${l.toLocaleString("en-PH",{minimumFractionDigits:2})}`,_a={Books:"Books & Literature",Clothing:"Fashion & Apparel",Electronics:"Electronics & Gadgets",Food:"Food & Beverages",Furniture:"Home & Furniture",Health:"Health & Wellness",Sports:"Sports & Outdoors",Toys:"Toys & Games",Other:"Other Products"};function Ua(l){let f="In Stock";return l.quantity<=0?f="Out of Stock":l.quantity<=(l.reorderLevel??10)&&(f="Low Stock"),{id:l.id,name:l.name,description:l.description||`Quality ${l.brand} ${l.name} in the ${l.category} category.`,category:_a[l.category]||l.category,brand:l.brand,price:l.pricePerPiece,availability:f,imageUrl:l.photoUrl,maxQuantity:l.quantity}}function Ha({inventoryData:l,customersData:f,onSubmitOrder:$,onCancel:m}){const{user:F}=Xs(),[N,O]=o.useState([]),[E,_]=o.useState(""),[w,S]=o.useState("all"),[M,V]=o.useState(""),[Ge,Ae]=o.useState(0),[Te,Re]=o.useState(!1),[X,is]=o.useState(null),fe=o.useMemo(()=>F?.email?f.find(r=>r.email===F.email):null,[F?.email,f]),re=o.useMemo(()=>l.filter(r=>!r.archived).map(Ua),[l]),Qe=o.useMemo(()=>[...new Set(re.map(h=>h.category))].sort(),[re]),Z=o.useMemo(()=>re.filter(r=>{const h=!E||r.name.toLowerCase().includes(E.toLowerCase())||r.brand.toLowerCase().includes(E.toLowerCase())||r.description.toLowerCase().includes(E.toLowerCase()),P=w==="all"||r.category===w;return h&&P}),[re,E,w]),le=o.useMemo(()=>N.reduce((r,h)=>r+h.totalPrice,0),[N]),ye=o.useMemo(()=>N.reduce((r,h)=>r+h.quantity,0),[N]),B=r=>{const h=N.findIndex(P=>P.inventoryItemId===r.id);if(h>=0){const P=[...N],U=Math.min(P[h].quantity+1,r.maxQuantity);P[h]={...P[h],quantity:U,totalPrice:U*P[h].unitPrice},O(P)}else O([...N,{inventoryItemId:r.id,itemName:r.name,quantity:1,unitPrice:r.price,totalPrice:r.price,availableStock:r.maxQuantity}]);g.success(`Added ${r.name} to cart`)},me=(r,h)=>{const P=[...N],U=P[r].quantity+h;U<=0?P.splice(r,1):U<=P[r].availableStock&&(P[r]={...P[r],quantity:U,totalPrice:U*P[r].unitPrice}),O(P)},Fe=r=>{const h=[...N];h.splice(r,1),O(h)},be=async()=>{if(N.length===0){g.error("Please add items to your cart");return}Re(!0);try{const r=await $({items:N.map(({availableStock:h,...P})=>P),notes:M,amountPaid:Ge,customerName:fe?.name||F?.displayName||F?.email||"Customer",customerId:fe?.id||"",customerCountry:fe?.country||"",customerCity:fe?.city||""});is(r),g.success("Order placed successfully!")}catch(r){g.error(r instanceof Error?r.message:"Failed to place order")}finally{Re(!1)}};return X?e.jsx("div",{className:"flex flex-col items-center justify-center py-12 px-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(D,{className:"border-green-200 bg-green-50/50",children:[e.jsxs(T,{className:"text-center pb-2",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ys,{className:"h-10 w-10 text-green-600"})}),e.jsx(R,{className:"text-2xl text-green-800",children:"Order Confirmed!"}),e.jsx(qs,{className:"text-green-700",children:"Thank you for your order"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Order ID"}),e.jsx("span",{className:"font-mono font-semibold",children:X.id})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Date"}),e.jsx("span",{children:new Date(X.soDate).toLocaleDateString()})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Items"}),e.jsxs("span",{children:[X.items.length," item(s)"]})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Amount"}),e.jsx("span",{className:"font-semibold text-lg",children:ge(X.totalAmount)})]}),X.amountPaid>0&&e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Amount Paid"}),e.jsx("span",{className:"text-green-600",children:ge(X.amountPaid)})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-muted-foreground",children:"Status"}),e.jsx(K,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Order Items"}),e.jsx("div",{className:"space-y-2",children:X.items.map((r,h)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:[r.itemName," × ",r.quantity]}),e.jsx("span",{children:ge(r.totalPrice)})]},h))})]})]}),e.jsx(Es,{children:e.jsx(x,{className:"w-full",onClick:m,children:"Continue Shopping"})})]})})}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:e.jsxs(D,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Sa,{className:"h-5 w-5 text-primary"}),"Shop Products"]}),e.jsxs(qs,{children:[Z.length," product",Z.length!==1?"s":""," available"]})]}),e.jsxs("div",{className:"relative w-64",children:[e.jsx(Zs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search products, brands...",value:E,onChange:r=>_(r.target.value),className:"pl-9"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(x,{variant:w==="all"?"default":"outline",size:"sm",className:"text-xs h-7",onClick:()=>S("all"),children:"All Products"}),Qe.map(r=>e.jsx(x,{variant:w===r?"default":"outline",size:"sm",className:"text-xs h-7",onClick:()=>S(r),children:r},r))]})]})}),e.jsx(C,{children:e.jsx(Wt,{className:"h-[450px]",children:Z.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-muted-foreground",children:[e.jsx(ts,{className:"h-12 w-12 mb-4 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No products found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your search or category filter"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:Z.map(r=>{const h=N.find(P=>P.inventoryItemId===r.id);return e.jsxs("div",{className:"group border rounded-xl overflow-hidden hover:border-primary/50 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"aspect-[4/3] bg-gradient-to-br from-muted/50 to-muted flex items-center justify-center relative overflow-hidden",children:[r.imageUrl?e.jsx("img",{src:r.imageUrl,alt:r.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsxs("div",{className:"flex flex-col items-center text-muted-foreground/50",children:[e.jsx(Pa,{className:"h-12 w-12 mb-1"}),e.jsx("span",{className:"text-xs",children:"No image"})]}),e.jsx(K,{variant:r.availability==="Out of Stock"?"destructive":r.availability==="Low Stock"?"secondary":"default",className:`absolute top-2 right-2 text-xs ${r.availability==="In Stock"?"bg-green-500/90":r.availability==="Low Stock"?"bg-amber-500/90 text-white":r.availability==="Out of Stock"?"bg-red-500/90":""}`,children:r.availability})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"flex items-start justify-between gap-2",children:e.jsx("h4",{className:"font-semibold line-clamp-1",children:r.name})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ka,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:r.brand})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3 min-h-[2.5rem]",children:r.description}),e.jsx(G,{className:"my-3"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`text-xl font-bold ${r.availability==="Out of Stock"?"text-muted-foreground":"text-primary"}`,children:ge(r.price)}),r.availability==="Out of Stock"?e.jsx(x,{size:"sm",variant:"outline",disabled:!0,className:"gap-1 opacity-60",children:"Out of Stock"}):h?e.jsxs("div",{className:"flex items-center gap-1.5 bg-accent rounded-lg p-1",children:[e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>me(N.indexOf(h),-1),children:e.jsx(Hs,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center font-semibold text-sm",children:h.quantity}),e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>me(N.indexOf(h),1),disabled:h.quantity>=r.maxQuantity,children:e.jsx(ie,{className:"h-3 w-3"})})]}):e.jsxs(x,{size:"sm",onClick:()=>B(r),className:"gap-1",children:[e.jsx(Ne,{className:"h-4 w-4"}),"Add to Cart"]})]})]})]},r.id)})})})})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs(D,{className:"sticky top-4",children:[e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"h-5 w-5"}),"Your Cart",ye>0&&e.jsxs(K,{variant:"secondary",className:"ml-auto",children:[ye," item",ye!==1?"s":""]})]})}),e.jsx(C,{children:N.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ne,{className:"h-12 w-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"Your cart is empty"}),e.jsx("p",{className:"text-sm",children:"Add products to get started"})]}):e.jsx("div",{className:"space-y-3",children:N.map((r,h)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg bg-accent/30",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:r.itemName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[ge(r.unitPrice)," each"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>me(h,-1),children:e.jsx(Hs,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-6 text-center text-sm",children:r.quantity}),e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7",onClick:()=>me(h,1),disabled:r.quantity>=r.availableStock,children:e.jsx(ie,{className:"h-3 w-3"})})]}),e.jsx("div",{className:"text-right w-20",children:e.jsx("p",{className:"font-medium",children:ge(r.totalPrice)})}),e.jsx(x,{size:"icon",variant:"ghost",className:"h-7 w-7 text-destructive hover:text-destructive",onClick:()=>Fe(h),children:e.jsx(ve,{className:"h-3 w-3"})})]},r.inventoryItemId))})}),N.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(G,{}),e.jsxs(C,{className:"pt-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Special Instructions (optional)"}),e.jsx(y,{placeholder:"Any special requests...",value:M,onChange:r=>V(r.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Amount to Pay Now (optional)"}),e.jsx(y,{type:"number",min:"0",step:"0.01",placeholder:"0.00",value:Ge||"",onChange:r=>Ae(parseFloat(r.target.value)||0)})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-primary",children:ge(le)})]})]}),e.jsxs(Es,{className:"flex flex-col gap-2",children:[e.jsx(x,{className:"w-full",size:"lg",onClick:be,disabled:Te,children:Te?"Placing Order...":e.jsxs(e.Fragment,{children:["Place Order",e.jsx(Da,{className:"ml-2 h-4 w-4"})]})}),e.jsx(x,{variant:"ghost",className:"w-full",onClick:m,children:"Cancel"})]})]})]})})]})}const Ka=["Unpaid","Partially Paid","Paid","Overdue"],Ga=["Pending","In Transit","Delivered"],A=l=>new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(l);function Nr(){const{user:l}=Xs(),{createNotification:f}=Jt(),$=l?.role||"Viewer",m=$==="Customer",F=m;!m&&_s($,"purchase_orders:update");const N=!m&&_s($,"purchase_orders:delete"),O=$==="Owner"||$==="Admin",{printReceipt:E}=Ca(),[_,w]=o.useState(null),[S,M]=o.useState([]),[V,Ge]=o.useState([]),[Ae,Te]=o.useState([]),[Re,X]=o.useState([]),[is,fe]=o.useState(!0),[re,Qe]=o.useState(""),Z=Yt(re,300),[le,ye]=o.useState("all"),[B,me]=o.useState(!1),[Fe,be]=o.useState(!1),[r,h]=o.useState(null),[P,U]=o.useState(!1),[H,ws]=o.useState(null),[Be,ls]=o.useState("asc"),[i,Le]=o.useState(null),[ot,ns]=o.useState(!1),[mt,we]=o.useState(!1),[cs,Ce]=o.useState(!1),[Y,$e]=o.useState({paymentMode:"Cash",amountReceived:0,notes:""}),[ee,qe]=o.useState({carrier:"",eta:"",destination:""});o.useEffect(()=>{if(cs&&i){const s=i.deliveryAddress||`${i.customerCity}, ${i.customerCountry}`;qe(t=>({...t,destination:s}))}},[cs,i]);const[n,q]=o.useState({soDate:new Date().toISOString().split("T")[0],customerId:"",customerName:"",customerCountry:"",customerCity:"",invoiceNumber:"",items:[],expectedDeliveryDate:"",notes:"",totalReceived:0,amountPaid:0,shippingStatus:"Pending"}),ds=o.useCallback(async()=>{try{const[s,t,a,d,p]=await Promise.allSettled([Ye(),Xt(),Zt(),Ms(),ea()]);s.status==="fulfilled"?w(s.value):(console.error("Failed to load sales orders:",s.reason),w([])),t.status==="fulfilled"?M(t.value):console.error("Failed to load customers:",t.reason),a.status==="fulfilled"?Ge(a.value):console.error("Failed to load inventory:",a.reason),d.status==="fulfilled"?Te(d.value):console.error("Failed to load shipments:",d.reason),p.status==="fulfilled"?X(p.value):console.error("Failed to load payments:",p.reason),s.status==="rejected"&&g.error("Failed to load orders. Please check your connection.")}catch(s){console.error("Data loading error:",s),g.error("Failed to load data"),w([])}finally{fe(!1)}},[]);o.useEffect(()=>{ds()},[ds]),o.useEffect(()=>{if(Fe&&m&&l?.email&&S.length>0){const s=S.find(t=>t.email===l.email);q(s?t=>({...t,customerId:s.id,customerName:s.name,customerCountry:s.country??"",customerCity:s.city??""}):t=>({...t,customerName:l.displayName||l.email||"Customer"}))}},[Fe,m,l?.email,l?.displayName,S]);const se=_??[];o.useEffect(()=>{m&&console.log("[My Orders Debug]",{isCustomer:m,userEmail:l?.email,userRole:$,totalOrders:se.length,ordersCreatedByMe:se.filter(s=>s.createdBy===l?.email).length,allCreatedByValues:se.map(s=>s.createdBy),showArchived:B})},[m,l?.email,$,se,B]);const te=o.useMemo(()=>se.filter(s=>{if(m&&l?.email&&s.createdBy!==l.email)return!1;const t=s.archived===!0;if(B!==t)return!1;const a=!Z||s.id.toLowerCase().includes(Z.toLowerCase())||s.customerName.toLowerCase().includes(Z.toLowerCase())||s.items.some(p=>p.itemName.toLowerCase().includes(Z.toLowerCase())),d=le==="all"||s.receiptStatus===le;return a&&d}),[se,Z,le,B,m,l?.email]),Cs=o.useMemo(()=>H?[...te].sort((s,t)=>{const a=s[H],d=t[H];if(a==null&&d==null)return 0;if(a==null)return 1;if(d==null)return-1;if(typeof a=="number"&&typeof d=="number")return Be==="asc"?a-d:d-a;const p=String(a).toLowerCase(),j=String(d).toLowerCase();return Be==="asc"?p.localeCompare(j):j.localeCompare(p)}):te,[te,H,Be]),{currentPage:Ss,totalPages:Ds,paginatedData:os,goToPage:Ps,itemsPerPage:ks,totalItems:Is}=ga(Cs,10),{selectedIds:We,isSelected:xt,toggleItem:ut,toggleAll:ht,selectAllPages:jt,deselectAll:Ee,isAllSelected:pt,isAllPageSelected:gt,isAllPagesSelected:vt,isPartiallySelected:Nt,selectionCount:ms,hasSelection:ft,totalItemCount:Os,pageItemCount:As}=va(os,Cs),ae=o.useMemo(()=>{const s=se.filter(L=>!L.archived),t=s.length,a=s.reduce((L,de)=>L+de.totalAmount,0),d=s.reduce((L,de)=>L+de.totalReceived,0),p=s.filter(L=>L.receiptStatus==="Paid").length,j=s.filter(L=>L.receiptStatus==="Unpaid").length,b=s.filter(L=>L.receiptStatus==="Partially Paid").length,z=s.filter(L=>L.receiptStatus==="Overdue").length,c=s.filter(L=>L.shippingStatus==="Delivered").length,k=new Date;k.setDate(k.getDate()-7);const Pe=s.filter(L=>new Date(L.createdDate)>=k).length;return{totalSOs:t,totalValue:a,totalReceived:d,outstandingBalance:a-d,paidCount:p,unpaidCount:j,partiallyPaidCount:b,overdueCount:z,deliveredCount:c,newThisWeek:Pe,avgOrderValue:t>0?a/t:0,collectionRate:a>0?Math.round(d/a*100):0}},[se]),ne=s=>{const t=s;H===t?Be==="asc"?ls("desc"):(ws(null),ls("asc")):(ws(t),ls("asc"))},ce=s=>H===s?Be:null,yt=s=>{const t=V.find(a=>a.id===s);return{itemId:t?.id??s,itemType:t?.brand??"-",itemCategory:t?.category??"-",itemSubcategory:t?.subcategory??"-"}},Ts=s=>{Le(s)},bt=()=>{Le(null)};o.useEffect(()=>{if(i&&_){const s=_.find(t=>t.id===i.id);s&&JSON.stringify(s)!==JSON.stringify(i)?Le(s):s||Le(null)}},[_,i]);const Je=s=>{const t={Unpaid:{variant:"outline",className:"border-amber-500 text-amber-600 bg-amber-50 dark:bg-amber-950/30"},"Partially Paid":{variant:"outline",className:"border-yellow-500 text-yellow-600 bg-yellow-50 dark:bg-yellow-950/30"},Paid:{variant:"default",className:"bg-green-600"},Overdue:{variant:"destructive"}},{variant:a,className:d}=t[s];return e.jsxs(K,{variant:a,className:Q("gap-1",d),children:[s==="Paid"&&e.jsx(ys,{className:"h-3 w-3"}),s==="Unpaid"&&e.jsx(Xe,{className:"h-3 w-3"}),s==="Partially Paid"&&e.jsx(gs,{className:"h-3 w-3"}),s==="Overdue"&&e.jsx(Js,{className:"h-3 w-3"}),s]})},Rs=o.useCallback(s=>S.find(t=>t.id===s),[S]),wt=o.useCallback(s=>_?_.filter(t=>t.customerId===s&&!t.archived):[],[_]),Ct=o.useCallback(s=>Re.filter(t=>t.soId===s&&!t.archived),[Re]),St=o.useCallback(s=>Ae.filter(t=>t.salesOrderId===s&&!t.archived),[Ae]),xs=o.useCallback(s=>V.find(t=>t.id===s),[V]),Dt=o.useCallback(s=>{const t=[];return s.forEach(a=>{const d=xs(a.inventoryItemId);d&&d.quantity<a.quantity&&t.push({itemName:a.itemName,requested:a.quantity,available:d.quantity})}),t},[xs]),Pt=async()=>{if(!i||Y.amountReceived<=0){g.error("Please enter a valid payment amount");return}const s=Rs(i.customerId);try{await ca({trxDate:new Date().toISOString().split("T")[0],customerId:i.customerId,customerName:i.customerName,country:i.customerCountry,city:i.customerCity,soId:i.id,invoiceNumber:i.invoiceNumber,paymentMode:Y.paymentMode,amountReceived:Y.amountReceived,notes:Y.notes,createdBy:l?.displayName||l?.email||"Unknown"});const t=(i.totalReceived||0)+Y.amountReceived,a=i.totalAmount-t,d=a<=0?"Paid":a<i.totalAmount?"Partially Paid":"Unpaid";await js({id:i.id,totalReceived:t,receiptStatus:d}),s&&await da({id:s.id,payments:(s.payments||0)+Y.amountReceived}),g.success(`Payment of ${A(Y.amountReceived)} recorded successfully`),we(!1),$e({paymentMode:"Cash",amountReceived:0,notes:""}),ds()}catch{g.error("Failed to record payment")}},kt=async()=>{if(!i||!ee.carrier){g.error("Please fill in shipment details");return}const s=ee.destination||i.deliveryAddress||`${i.customerCity}, ${i.customerCountry}`;console.log("[Shipment] Creating shipment:",{salesOrderId:i.id,destination:s,carrier:ee.carrier,eta:ee.eta});try{const t=await oa({salesOrderId:i.id,destination:s,carrier:ee.carrier,status:"Pending",eta:ee.eta});console.log("[Shipment] Shipment created successfully:",t),await js({id:i.id,shippingStatus:"In Transit"}),console.log("[Shipment] Sales order shipping status updated to In Transit"),g.success("Shipment created successfully"),Ce(!1),qe({carrier:"",eta:"",destination:""});const a=await Ms();Te(a);const d=await Ye();w(d)}catch(t){console.error("[Shipment] Failed to create shipment:",t),g.error(t instanceof Error?t.message:"Failed to create shipment")}},Me=()=>{const s=m&&l?.displayName?l.displayName:"";q({soDate:new Date().toISOString().split("T")[0],customerId:"",customerName:s,customerCountry:"",customerCity:"",invoiceNumber:"",items:[],expectedDeliveryDate:"",notes:"",totalReceived:0,amountPaid:0,shippingStatus:"Pending"})},Fs=()=>{q(s=>({...s,items:[...s.items,{inventoryItemId:"",itemName:"",quantity:1,unitPrice:0,totalPrice:0}]}))},Bs=s=>{q(t=>({...t,items:t.items.filter((a,d)=>d!==s)}))},Se=(s,t,a)=>{q(d=>{const p=[...d.items];if(t==="inventoryItemId"){const j=V.find(b=>b.id===a);j&&(p[s]={...p[s],inventoryItemId:j.id,itemName:j.name,unitPrice:j.pricePerPiece,totalPrice:p[s].quantity*j.pricePerPiece})}else if(t==="quantity"){const j=Number(a)||0;p[s]={...p[s],quantity:j,totalPrice:j*p[s].unitPrice}}else if(t==="unitPrice"){const j=Number(a)||0;p[s]={...p[s],unitPrice:j,totalPrice:p[s].quantity*j}}return{...d,items:p}})},Ls=s=>{const t=S.find(a=>a.id===s);q(a=>({...a,customerId:s,customerName:t?.name??"",customerCountry:t?.country??"",customerCity:t?.city??""}))},It=async()=>{const s=!m&&!n.expectedDeliveryDate;if(!n.customerId||n.items.length===0||s){g.error("Please fill in all required fields");return}try{const t=await zs({soDate:n.soDate,customerId:n.customerId,customerName:n.customerName,customerCountry:n.customerCountry,customerCity:n.customerCity,invoiceNumber:n.invoiceNumber,items:n.items.map(a=>({...a,quantityShipped:0})),expectedDeliveryDate:n.expectedDeliveryDate||void 0,notes:n.notes,createdBy:l?.email??l?.id??"unknown",totalReceived:m?0:n.totalReceived,amountPaid:n.amountPaid});if(w(a=>[t,...a??[]]),g.success(`Sales Order ${t.id} created successfully`),m&&l?.email){const a=n.items.reduce((d,p)=>d+p.totalPrice,0);await f({type:"new_sales_order",title:"New Sales Order Created",message:`${l.name||l.email} created order ${t.id} for ${n.customerName} - ${A(a)}`,salesOrderId:t.id,customerName:n.customerName,createdBy:l.email,targetRoles:["Owner","Admin"]})}be(!1),Me()}catch(t){g.error(t instanceof Error?t.message:"Failed to create sales order")}},Ot=async s=>{const t=await zs({soDate:new Date().toISOString().split("T")[0],customerId:s.customerId,customerName:s.customerName,customerCountry:s.customerCountry,customerCity:s.customerCity,invoiceNumber:"",items:s.items.map(a=>({...a,quantityShipped:0})),expectedDeliveryDate:void 0,notes:s.notes,createdBy:l?.email??l?.id??"unknown",totalReceived:0,amountPaid:s.amountPaid});if(w(a=>[t,...a??[]]),l?.email){const a=s.items.reduce((d,p)=>d+p.totalPrice,0);await f({type:"new_sales_order",title:"New Customer Order",message:`${l.displayName||l.email} placed order ${t.id} - ${A(a)}`,salesOrderId:t.id,customerName:s.customerName,createdBy:l.email,targetRoles:["Owner","Admin"]})}return t},At=async s=>{const t=!m&&!n.expectedDeliveryDate;if(!n.customerId||n.items.length===0||t){g.error("Please fill in all required fields");return}try{const a=se.find(j=>j.id===s),d=new Map(a?.items?.map(j=>[j.inventoryItemId,j.quantityShipped??0])??[]),p=await js({id:s,soDate:n.soDate,customerId:n.customerId,customerName:n.customerName,customerCountry:n.customerCountry,customerCity:n.customerCity,invoiceNumber:n.invoiceNumber,items:n.items.map(j=>({...j,quantityShipped:d.get(j.inventoryItemId)??0})),expectedDeliveryDate:m?a?.expectedDeliveryDate:n.expectedDeliveryDate,notes:n.notes,totalReceived:m?a?.totalReceived:n.totalReceived,amountPaid:n.amountPaid,shippingStatus:m?a?.shippingStatus:n.shippingStatus});w(j=>j?.map(b=>b.id===s?p:b)??[]),g.success(`Sales Order ${s} updated successfully`),h(null),Me()}catch(a){g.error(a instanceof Error?a.message:"Failed to update sales order")}},Tt=async s=>{try{await ha(s),w(t=>t?.filter(a=>a.id!==s)??[]),g.success(`Sales Order ${s} deleted`),h(null)}catch(t){g.error(t instanceof Error?t.message:"Failed to delete sales order")}},Rt=async s=>{try{await ua(s),w(t=>t?.map(a=>a.id===s?{...a,archived:!0}:a)??[]),g.success(`Sales Order ${s} archived`)}catch(t){g.error(t instanceof Error?t.message:"Failed to archive sales order")}},Ft=async s=>{try{await xa(s),w(t=>t?.map(a=>a.id===s?{...a,archived:!1}:a)??[]),g.success(`Sales Order ${s} restored`)}catch(t){g.error(t instanceof Error?t.message:"Failed to restore sales order")}},Bt=async()=>{try{const s=await pa(Array.from(We));s.success?g.success(`${s.successCount} sales orders archived`):g.warning(`${s.successCount} archived, ${s.failedCount} failed`);const t=await Ye();w(t),Ee(),U(!1)}catch{g.error("Failed to archive sales orders")}},Lt=async()=>{try{const s=await ma(Array.from(We));s.success?g.success(`${s.successCount} sales orders restored`):g.warning(`${s.successCount} restored, ${s.failedCount} failed`);const t=await Ye();w(t),Ee()}catch{g.error("Failed to restore sales orders")}},$s=async()=>{try{const s=await ja(Array.from(We));s.success?g.success(`${s.successCount} sales orders permanently deleted`):g.warning(`${s.successCount} deleted, ${s.failedCount} failed`),w(t=>t?.filter(a=>!We.has(a.id))??[]),Ee(),U(!1)}catch{g.error("Failed to permanently delete sales orders")}},$t=s=>{q({soDate:s.soDate??s.createdDate,customerId:s.customerId,customerName:s.customerName,customerCountry:s.customerCountry??"",customerCity:s.customerCity??"",invoiceNumber:s.invoiceNumber??"",items:(s.items??[]).map(t=>({inventoryItemId:t.inventoryItemId,itemName:t.itemName,quantity:t.quantity,unitPrice:t.unitPrice,totalPrice:t.totalPrice})),expectedDeliveryDate:s.expectedDeliveryDate??"",notes:s.notes??"",totalReceived:s.totalReceived??0,amountPaid:s.amountPaid??0,shippingStatus:s.shippingStatus??"Pending"}),h(s.id)},qt=()=>{const s=["Date","SO ID","Customer ID","Customer Name","Country","City","Items","Total Amount","Total Received","SO Balance","Receipt Status","Shipping Status","Expected Delivery","Notes"],t=te.map(b=>[b.soDate??b.createdDate,b.id,b.customerId,b.customerName,b.customerCountry??"",b.customerCity??"",(b.items??[]).map(z=>`${z.itemName} (${z.quantity})`).join("; "),(b.totalAmount??0).toFixed(2),(b.totalReceived??0).toFixed(2),(b.soBalance??b.totalAmount??0).toFixed(2),b.receiptStatus,b.shippingStatus??"Pending",b.expectedDeliveryDate??"",b.notes??""]),a=[s,...t].map(b=>b.map(z=>`"${z}"`).join(",")).join(`
`),d=new Blob([a],{type:"text/csv"}),p=URL.createObjectURL(d),j=document.createElement("a");j.href=p,j.download=`sales-orders-${new Date().toISOString().split("T")[0]}.csv`,j.click(),URL.revokeObjectURL(p),g.success("Sales orders exported to CSV")},Et=()=>{Qe(""),ye("all"),me(!1)},De=o.useMemo(()=>n.items.reduce((s,t)=>s+t.totalPrice,0),[n.items]),Mt=s=>{const t={type:"sales-order",documentNumber:s.id,documentDate:s.soDate??s.createdDate,partyType:"Customer",partyName:s.customerName,partyCity:s.customerCity,partyCountry:s.customerCountry,items:s.items?.map(a=>({description:a.itemName,quantity:a.quantity,unitPrice:a.unitPrice,total:a.totalPrice}))||[],totalAmount:s.totalAmount??0,amountPaid:s.totalReceived??0,balance:s.soBalance??s.totalAmount-s.totalReceived??0,status:`${s.receiptStatus} / ${s.shippingStatus}`,expectedDeliveryDate:s.expectedDeliveryDate,notes:s.notes,createdBy:s.createdBy};E(t)};if(is)return e.jsx("div",{className:"p-6",children:e.jsx(Na,{rows:8})});if(i){const s=new Date(i.soDate||i.createdDate||new Date),t=c=>{switch(c){case"Delivered":return"bg-green-600";case"In Transit":return"bg-blue-600";case"Pending":default:return"bg-amber-600"}},a=Rs(i.customerId),d=wt(i.customerId),p=Ct(i.id),j=St(i.id),b=Dt(i.items);p.reduce((c,k)=>c+k.amountReceived,0);const z=i.totalAmount-(i.totalReceived||0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:bt,children:[e.jsx(Ia,{className:"h-4 w-4 mr-1"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Order Details - ",i.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.customerName," • Created by ",i.createdBy]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap print:hidden",children:[!m&&z>0&&e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>we(!0),children:[e.jsx(gs,{className:"h-4 w-4 mr-1"}),"Record Payment"]}),!m&&i.shippingStatus==="Pending"&&j.length===0&&e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>Ce(!0),children:[e.jsx(xe,{className:"h-4 w-4 mr-1"}),"Create Shipment"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>Mt(i),children:[e.jsx(Oa,{className:"h-4 w-4 mr-2"}),"Print"]})]})]}),b.length>0&&!m&&e.jsx(D,{className:"border-amber-300 bg-amber-50 dark:bg-amber-950/30",children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(sa,{className:"h-5 w-5 text-amber-600 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-800 dark:text-amber-200",children:"Low Stock Warning"}),e.jsx("ul",{className:"text-sm text-amber-700 dark:text-amber-300 mt-1 space-y-1",children:b.map((c,k)=>e.jsxs("li",{children:[c.itemName,": Requested ",c.requested,", Available ",c.available]},k))})]})]})})}),e.jsxs(D,{className:"print:shadow-none print:border-none",id:"order-receipt",children:[e.jsx(T,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ta,{className:"h-5 w-5 text-primary"}),e.jsx(R,{className:"text-lg",children:"Sales Order Receipt"})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg",children:[e.jsx(Aa,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Order ID"}),e.jsx("p",{className:"font-mono font-medium",children:i.id})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg",children:[e.jsx(vs,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Date & Time"}),e.jsxs("p",{className:"font-medium",children:[s.toLocaleDateString()," ",s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-muted/30 rounded-lg",children:[e.jsx(hs,{className:"h-5 w-5 text-muted-foreground shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Customer"}),e.jsx("p",{className:"font-medium",children:i.customerName})]})]})]}),(i.customerCity||i.customerCountry)&&e.jsxs("div",{className:"flex items-start gap-2 bg-muted/50 rounded-lg p-3",children:[e.jsx(Ns,{className:"h-4 w-4 text-muted-foreground mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Customer Location"}),e.jsx("p",{className:"text-sm",children:[i.customerCity,i.customerCountry].filter(Boolean).join(", ")})]})]}),i.deliveryAddress&&e.jsxs("div",{className:"flex items-start gap-2 bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsx(xe,{className:"h-4 w-4 text-blue-600 mt-0.5 shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery Address"}),e.jsx("p",{className:"text-sm",children:i.deliveryAddress})]})]}),e.jsx(G,{}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Items Ordered (",i.items?.length||0,")"]}),!i.items||i.items.length===0?e.jsx(ps,{icon:Ne,title:"No line items",description:"This sales order has no line items"}):e.jsx("div",{className:"space-y-2 bg-muted/30 rounded-lg p-3",children:i.items.map((c,k)=>e.jsxs("div",{className:"flex justify-between items-start text-sm",children:[e.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[e.jsx("p",{className:"font-medium line-clamp-1",children:c.itemName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[A(c.unitPrice)," × ",c.quantity]})]}),e.jsx("p",{className:"font-medium shrink-0",children:A(c.totalPrice)})]},k))})]}),e.jsx(G,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),e.jsx("span",{children:A(i.totalAmount??0)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Shipping"}),e.jsx("span",{className:"text-green-600",children:"Free"})]}),e.jsx(G,{}),e.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{className:"text-primary",children:A(i.totalAmount??0)})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-950/30 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Gs,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{className:"font-medium",children:"Payment"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(K,{variant:"secondary",className:"gap-1",children:[e.jsx(Gs,{className:"h-3 w-3"}),"Cash on Delivery"]}),Je(i.receiptStatus)]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(xe,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-medium",children:"Shipping"})]}),e.jsxs(K,{className:`gap-1 ${t(i.shippingStatus||"Pending")}`,children:[i.shippingStatus==="Delivered"?e.jsx(ys,{className:"h-3 w-3"}):e.jsx(Xe,{className:"h-3 w-3"}),i.shippingStatus??"Pending"]})]})]}),i.notes&&e.jsxs("div",{className:"text-sm bg-muted/50 rounded-lg p-3",children:[e.jsx("p",{className:"text-muted-foreground mb-1 font-medium",children:"Order Notes:"}),e.jsx("p",{className:"italic",children:i.notes})]}),i.expectedDeliveryDate&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(vs,{className:"h-4 w-4"}),"Expected Delivery: ",new Date(i.expectedDeliveryDate).toLocaleDateString()]})]})]}),!m&&e.jsxs(Va,{defaultValue:"items",className:"print:hidden",children:[e.jsxs(za,{className:"grid w-full grid-cols-4 h-auto",children:[e.jsxs(es,{value:"items",className:"text-xs sm:text-sm py-2",children:[e.jsx(ts,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"Items"]}),e.jsxs(es,{value:"customer",className:"text-xs sm:text-sm py-2",children:[e.jsx(hs,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"Customer"]}),e.jsxs(es,{value:"payments",className:"text-xs sm:text-sm py-2",children:[e.jsx(fs,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"Payments"]}),e.jsxs(es,{value:"shipments",className:"text-xs sm:text-sm py-2",children:[e.jsx(xe,{className:"h-4 w-4 mr-1 hidden sm:inline"}),"Shipments"]})]}),e.jsx(ss,{value:"items",className:"mt-4",children:e.jsxs(D,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(ts,{className:"h-4 w-4"}),"Line Items & Inventory"]})}),e.jsx(C,{children:i.items&&i.items.length>0&&e.jsx("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxs(ke,{children:[e.jsx(Ie,{children:e.jsxs(W,{children:[e.jsx(v,{children:"Item"}),e.jsx(v,{children:"Category"}),e.jsx(v,{className:"text-right",children:"Qty"}),e.jsx(v,{className:"text-right",children:"Stock"}),e.jsx(v,{className:"text-right",children:"Unit Price"}),e.jsx(v,{className:"text-right",children:"Total"})]})}),e.jsx(Oe,{children:i.items.map((c,k)=>{const Pe=xs(c.inventoryItemId),L=yt(c.inventoryItemId),de=Pe?Pe.quantity>=c.quantity?"ok":Pe.quantity>0?"low":"out":"unknown";return e.jsxs(W,{children:[e.jsx(u,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.itemName}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:L.itemId})]})}),e.jsx(u,{className:"text-muted-foreground",children:L.itemCategory}),e.jsx(u,{className:"text-right",children:c.quantity}),e.jsx(u,{className:"text-right",children:e.jsx(K,{variant:de==="ok"?"default":de==="low"?"secondary":"destructive",className:de==="ok"?"bg-green-600":de==="low"?"bg-amber-500":"",children:Pe?.quantity??"N/A"})}),e.jsx(u,{className:"text-right",children:A(c.unitPrice)}),e.jsx(u,{className:"text-right font-medium",children:A(c.totalPrice)})]},k)})})]})})})]})}),e.jsx(ss,{value:"customer",className:"mt-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(D,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4"}),"Customer Profile"]})}),e.jsx(C,{className:"space-y-3",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(hs,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.name}),e.jsx(K,{variant:a.status==="Active"?"default":"secondary",className:a.status==="Active"?"bg-green-600":"",children:a.status})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"grid gap-2 text-sm",children:[a.contact&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Vs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:a.contact})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(aa,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:a.email})]}),a.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ra,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:a.phone})]}),(a.city||a.country)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ns,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:[a.city,a.country].filter(Boolean).join(", ")})]}),a.address&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),e.jsx("span",{children:a.address})]})]}),e.jsx(G,{}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Purchases"}),e.jsx("p",{className:"font-semibold text-sm",children:A(a.purchases||0)})]}),e.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Payments"}),e.jsx("p",{className:"font-semibold text-sm text-green-600",children:A(a.payments||0)})]}),e.jsxs("div",{className:"p-2 bg-muted/50 rounded",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Balance"}),e.jsx("p",{className:Q("font-semibold text-sm",(a.balance||0)>0?"text-amber-600":"text-green-600"),children:A(a.balance||0)})]})]})]}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"Customer not found"})})]}),e.jsxs(D,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(Fa,{className:"h-4 w-4"}),"Order History (",d.length,")"]})}),e.jsx(C,{children:d.length>0?e.jsxs("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:[d.slice(0,10).map(c=>e.jsx("div",{className:Q("p-2 rounded border text-sm cursor-pointer hover:bg-muted/50",c.id===i.id&&"bg-primary/10 border-primary"),onClick:()=>c.id!==i.id&&Le(c),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.id}),e.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(c.soDate||c.createdDate).toLocaleDateString()})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:A(c.totalAmount)}),Je(c.receiptStatus)]})]})},c.id)),d.length>10&&e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["+",d.length-10," more orders"]})]}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"No order history"})})]})]})}),e.jsx(ss,{value:"payments",className:"mt-4",children:e.jsxs(D,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(fs,{className:"h-4 w-4"}),"Payment History"]}),z>0&&e.jsxs(x,{size:"sm",onClick:()=>we(!0),children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"Record Payment"]})]})}),e.jsxs(C,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Order Total"}),e.jsx("p",{className:"font-bold text-lg",children:A(i.totalAmount)})]}),e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950/30 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Paid"}),e.jsx("p",{className:"font-bold text-lg text-green-600",children:A(i.totalReceived||0)})]}),e.jsxs("div",{className:Q("p-3 rounded-lg text-center",z>0?"bg-amber-50 dark:bg-amber-950/30":"bg-green-50 dark:bg-green-950/30"),children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Balance Due"}),e.jsx("p",{className:Q("font-bold text-lg",z>0?"text-amber-600":"text-green-600"),children:A(z)})]})]}),p.length>0?e.jsx("div",{className:"border rounded-lg overflow-x-auto",children:e.jsxs(ke,{children:[e.jsx(Ie,{children:e.jsxs(W,{children:[e.jsx(v,{children:"Date"}),e.jsx(v,{children:"Transaction ID"}),e.jsx(v,{children:"Method"}),e.jsx(v,{className:"text-right",children:"Amount"})]})}),e.jsx(Oe,{children:p.map(c=>e.jsxs(W,{children:[e.jsx(u,{children:new Date(c.trxDate).toLocaleDateString()}),e.jsx(u,{className:"font-mono text-sm",children:c.id}),e.jsx(u,{children:e.jsx(K,{variant:"outline",children:c.paymentMode})}),e.jsx(u,{className:"text-right font-medium text-green-600",children:A(c.amountReceived)})]},c.id))})]})}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(fs,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No payments recorded yet"}),z>0&&e.jsx(x,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>we(!0),children:"Record First Payment"})]})]})]})}),e.jsx(ss,{value:"shipments",className:"mt-4",children:e.jsxs(D,{children:[e.jsx(T,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{className:"text-base flex items-center gap-2",children:[e.jsx(xe,{className:"h-4 w-4"}),"Shipment Tracking"]}),j.length===0&&e.jsxs(x,{size:"sm",onClick:()=>Ce(!0),children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"Create Shipment"]})]})}),e.jsxs(C,{children:[(i.deliveryAddress||i.customerCity)&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-950/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ns,{className:"h-4 w-4 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery Address"}),e.jsx("p",{className:"text-sm",children:i.deliveryAddress||`${i.customerCity}, ${i.customerCountry}`})]})]})}),j.length>0?e.jsx("div",{className:"space-y-3",children:j.map(c=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.id}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Carrier: ",c.carrier]})]}),e.jsx(K,{className:t(c.status),children:c.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Destination"}),e.jsx("p",{children:c.destination})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"ETA"}),e.jsx("p",{children:c.eta?new Date(c.eta).toLocaleDateString():"TBD"})]})]})]},c.id))}):e.jsxs("div",{className:"text-center py-6 text-muted-foreground",children:[e.jsx(xe,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No shipments created yet"}),e.jsx(x,{variant:"outline",size:"sm",className:"mt-2",onClick:()=>Ce(!0),children:"Create Shipment"})]})]})]})})]}),!m&&e.jsx(D,{className:"print:hidden",children:e.jsx(C,{className:"py-3",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Vs,{className:"h-3 w-3"}),"Created by: ",i.createdBy]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(vs,{className:"h-3 w-3"}),"Created: ",new Date(i.createdDate).toLocaleString()]})]})})}),e.jsx(Ve,{open:mt,onOpenChange:we,children:e.jsxs(ze,{className:"sm:max-w-md",children:[e.jsxs(_e,{children:[e.jsx(Ue,{children:"Record Payment"}),e.jsxs(He,{children:["Record a payment for order ",i.id,". Balance due: ",A(z)]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Payment Method"}),e.jsxs(ue,{value:Y.paymentMode,onValueChange:c=>$e(k=>({...k,paymentMode:c})),children:[e.jsx(he,{children:e.jsx(je,{})}),e.jsxs(pe,{children:[e.jsx(J,{value:"Cash",children:"Cash"}),e.jsx(J,{value:"Bank Transfer",children:"Bank Transfer"}),e.jsx(J,{value:"Credit Card",children:"Credit Card"}),e.jsx(J,{value:"Check",children:"Check"}),e.jsx(J,{value:"Online Payment",children:"Online Payment"})]})]})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Amount Received"}),e.jsx(y,{type:"number",min:"0",step:"0.01",max:z,value:Y.amountReceived||"",onChange:c=>$e(k=>({...k,amountReceived:parseFloat(c.target.value)||0})),placeholder:"0.00"}),e.jsx("div",{className:"flex gap-2 mt-2",children:e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:()=>$e(c=>({...c,amountReceived:z})),children:"Full Amount"})})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Notes (Optional)"}),e.jsx(y,{value:Y.notes,onChange:c=>$e(k=>({...k,notes:c.target.value})),placeholder:"Payment notes..."})]})]}),e.jsxs(Ze,{children:[e.jsx(x,{variant:"outline",onClick:()=>we(!1),children:"Cancel"}),e.jsx(x,{onClick:Pt,disabled:Y.amountReceived<=0,children:"Record Payment"})]})]})}),e.jsx(Ve,{open:cs,onOpenChange:Ce,children:e.jsxs(ze,{className:"sm:max-w-md",children:[e.jsxs(_e,{children:[e.jsx(Ue,{children:"Create Shipment"}),e.jsxs(He,{children:["Create a shipment for order ",i.id]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(I,{children:"Carrier"}),e.jsx(y,{value:ee.carrier,onChange:c=>qe(k=>({...k,carrier:c.target.value})),placeholder:"e.g., FedEx, UPS, LBC"})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Destination"}),e.jsx(y,{value:ee.destination,onChange:c=>qe(k=>({...k,destination:c.target.value})),placeholder:i.deliveryAddress||`${i.customerCity}, ${i.customerCountry}`})]}),e.jsxs("div",{children:[e.jsx(I,{children:"Estimated Arrival (Optional)"}),e.jsx(y,{type:"date",value:ee.eta,onChange:c=>qe(k=>({...k,eta:c.target.value}))})]})]}),e.jsxs(Ze,{children:[e.jsx(x,{variant:"outline",onClick:()=>Ce(!1),children:"Cancel"}),e.jsx(x,{onClick:kt,disabled:!ee.carrier,children:"Create Shipment"})]})]})})]})}return m&&ot?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Place New Order"}),e.jsx("p",{className:"text-muted-foreground",children:"Browse products and add them to your cart"})]})}),e.jsx(Ha,{inventoryData:V,customersData:S,onSubmitOrder:Ot,onCancel:()=>ns(!1)})]}):m?e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight",children:"My Orders"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"View and track your orders"})]}),e.jsxs(x,{onClick:()=>ns(!0),className:"w-full sm:w-auto",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Place New Order"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(D,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Total Orders"}),e.jsx(Ne,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold",children:te.length})})]}),e.jsxs(D,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Pending"}),e.jsx(Xe,{className:"h-4 w-4 text-amber-600"})]}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold text-amber-600",children:te.filter(s=>s.shippingStatus==="Pending").length})})]}),e.jsxs(D,{children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Delivered"}),e.jsx(Ws,{className:"h-4 w-4 text-green-600"})]}),e.jsx(C,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:te.filter(s=>s.shippingStatus==="Delivered").length})})]})]}),e.jsxs(D,{children:[e.jsx(T,{children:e.jsx(R,{children:"Order History"})}),e.jsxs(C,{children:[te.length===0?e.jsx(ps,{icon:Ne,title:"No orders yet",description:"Place your first order to get started",action:e.jsxs(x,{onClick:()=>ns(!0),children:[e.jsx(ie,{className:"h-4 w-4 mr-2"}),"Place New Order"]})}):e.jsx("div",{className:"border rounded-lg overflow-hidden overflow-x-auto",children:e.jsxs(ke,{children:[e.jsx(Ie,{children:e.jsxs(W,{children:[e.jsx(v,{className:"whitespace-nowrap",children:"Order ID"}),e.jsx(v,{className:"whitespace-nowrap",children:"Date"}),e.jsx(v,{className:"whitespace-nowrap",children:"Items"}),e.jsx(v,{className:"text-right whitespace-nowrap",children:"Total"}),e.jsx(v,{className:"text-right whitespace-nowrap hidden sm:table-cell",children:"Paid"}),e.jsx(v,{className:"whitespace-nowrap",children:"Payment"}),e.jsx(v,{className:"whitespace-nowrap",children:"Carrier"}),e.jsx(v,{className:"whitespace-nowrap",children:"Shipping"})]})}),e.jsx(Oe,{children:os.map(s=>{const t=Ae.find(a=>a.salesOrderId===s.id&&!a.archived);return e.jsxs(W,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Ts(s),children:[e.jsx(u,{className:"font-medium font-mono text-xs sm:text-sm whitespace-nowrap",children:s.id}),e.jsx(u,{className:"whitespace-nowrap text-xs sm:text-sm",children:s.soDate??s.createdDate}),e.jsx(u,{className:"whitespace-nowrap",children:e.jsxs("span",{className:"text-muted-foreground text-xs sm:text-sm",children:[s.items.length," item",s.items.length!==1?"s":""]})}),e.jsx(u,{className:"text-right font-medium whitespace-nowrap text-xs sm:text-sm",children:A(s.totalAmount)}),e.jsx(u,{children:e.jsx(K,{variant:s.receiptStatus==="Paid"?"default":s.receiptStatus==="Partially Paid"?"secondary":s.receiptStatus==="Overdue"?"destructive":"outline",className:s.receiptStatus==="Paid"?"bg-green-600":s.receiptStatus==="Partially Paid"?"bg-amber-500":s.receiptStatus==="Overdue"?"bg-red-600":"",children:s.receiptStatus??"Unpaid"})}),e.jsx(u,{className:"whitespace-nowrap",children:t?e.jsxs("div",{className:"flex items-center gap-1 text-xs sm:text-sm",children:[e.jsx(xe,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{children:t.carrier})]}):e.jsx("span",{className:"text-muted-foreground text-xs",children:"—"})}),e.jsx(u,{children:e.jsx(K,{variant:s.shippingStatus==="Delivered"?"default":s.shippingStatus==="In Transit"?"secondary":"outline",className:s.shippingStatus==="Delivered"?"bg-green-600":s.shippingStatus==="In Transit"?"bg-blue-600":"",children:s.shippingStatus??"Pending"})})]},s.id)})})]})}),te.length>0&&e.jsx("div",{className:"mt-4",children:e.jsx(Us,{totalItems:Is,itemsPerPage:ks,currentPage:Ss,totalPages:Ds,onPageChange:Ps})})]})]})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Sales Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage customer orders, track payments, and monitor delivery status"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(D,{className:"relative overflow-hidden border-l-4 border-l-slate-400 hover:shadow-md transition-shadow",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Total SOs"}),e.jsx("div",{className:"h-8 w-8 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center",children:e.jsx(Ta,{className:"h-4 w-4 text-slate-600 dark:text-slate-400"})})]}),e.jsxs(C,{className:"pt-0",children:[e.jsx("div",{className:"text-3xl font-bold",children:ae.totalSOs}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[ae.newThisWeek," new this week"]})]})]}),e.jsxs(D,{className:"relative overflow-hidden border-l-4 border-l-emerald-500 hover:shadow-md transition-shadow",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Total Value"}),e.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center",children:e.jsx(gs,{className:"h-4 w-4 text-emerald-600"})})]}),e.jsxs(C,{className:"pt-0",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-600",children:A(ae.totalValue)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Avg: ",A(ae.avgOrderValue)," per SO"]})]})]}),e.jsxs(D,{className:"relative overflow-hidden border-l-4 border-l-amber-500 hover:shadow-md transition-shadow",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Outstanding"}),e.jsx("div",{className:"h-8 w-8 rounded-full bg-amber-100 dark:bg-amber-900/30 flex items-center justify-center",children:e.jsx(Xe,{className:"h-4 w-4 text-amber-600"})})]}),e.jsxs(C,{className:"pt-0",children:[e.jsx("div",{className:"text-3xl font-bold text-amber-600",children:A(ae.outstandingBalance)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[ae.unpaidCount," unpaid, ",ae.overdueCount," overdue"]})]})]}),e.jsxs(D,{className:"relative overflow-hidden border-l-4 border-l-blue-500 hover:shadow-md transition-shadow",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(R,{className:"text-sm font-medium text-muted-foreground",children:"Collection Rate"}),e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(Ws,{className:"h-4 w-4 text-blue-600"})})]}),e.jsxs(C,{className:"pt-0",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[ae.collectionRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[ae.paidCount," paid of ",ae.totalSOs," total"]})]})]})]}),e.jsxs(D,{className:"shadow-sm",children:[e.jsxs(T,{className:"flex flex-row items-center justify-between pb-4 border-b",children:[e.jsxs("div",{children:[e.jsx(R,{children:"Sales Orders"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage customer sales orders"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:qt,children:[e.jsx(wa,{className:"h-4 w-4 mr-1"}),"Export CSV"]}),F&&e.jsxs(Ve,{open:Fe,onOpenChange:be,children:[e.jsx(ia,{asChild:!0,children:e.jsxs(x,{size:"sm",children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"Create SO"]})}),e.jsxs(ze,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(_e,{children:[e.jsx(Ue,{children:"Create Sales Order"}),e.jsx(He,{children:"Create a new sales order for a customer"})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs(D,{children:[e.jsx(T,{className:"pb-3",children:e.jsx(R,{className:"text-base",children:"Sales Order Information"})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"SO Date *"}),e.jsx(y,{type:"date",value:n.soDate,onChange:s=>q(t=>({...t,soDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Customer *"}),m?e.jsx(y,{value:l?.displayName||l?.email||"Customer",disabled:!0,className:"bg-muted"}):e.jsxs(ue,{value:n.customerId,onValueChange:Ls,children:[e.jsx(he,{children:e.jsx(je,{placeholder:"Select customer"})}),e.jsx(pe,{children:S.filter(s=>s.status==="Active").map(s=>e.jsx(J,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Customer ID"}),e.jsx(y,{value:n.customerId,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Country"}),e.jsx(y,{value:n.customerCountry,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"City"}),e.jsx(y,{value:n.customerCity,disabled:!0,className:"bg-muted"})]})]}),!m&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Expected Delivery Date *"}),e.jsx(y,{type:"date",value:n.expectedDeliveryDate,onChange:s=>q(t=>({...t,expectedDeliveryDate:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Total Received (₱)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{type:"number",min:"0",step:"0.01",value:n.totalReceived,onChange:s=>q(t=>({...t,totalReceived:parseFloat(s.target.value)||0})),className:"flex-1"}),e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:()=>{const s=n.items.reduce((t,a)=>t+a.totalPrice,0);q(t=>({...t,totalReceived:s}))},children:"Full Payment"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Notes"}),e.jsx(y,{value:n.notes,onChange:s=>q(t=>({...t,notes:s.target.value})),placeholder:"Additional notes..."})]})]})]}),e.jsxs(D,{children:[e.jsxs(T,{className:"pb-3 flex flex-row items-center justify-between",children:[e.jsx(R,{className:"text-base",children:"Line Items"}),e.jsxs(x,{size:"sm",variant:"outline",onClick:Fs,children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsxs(C,{children:[n.items.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No items added. Click "Add Item" to add line items.'}):e.jsxs(ke,{children:[e.jsx(Ie,{children:e.jsxs(W,{children:[e.jsx(v,{children:"Item"}),e.jsx(v,{className:"w-24",children:"Qty"}),e.jsx(v,{className:"w-32",children:"Unit Price"}),e.jsx(v,{className:"w-32 text-right",children:"Total"}),e.jsx(v,{className:"w-12"})]})}),e.jsx(Oe,{children:n.items.map((s,t)=>e.jsxs(W,{children:[e.jsx(u,{children:e.jsxs(ue,{value:s.inventoryItemId,onValueChange:a=>Se(t,"inventoryItemId",a),children:[e.jsx(he,{children:e.jsx(je,{placeholder:"Select item"})}),e.jsx(pe,{children:V.map(a=>e.jsx(J,{value:a.id,children:a.name},a.id))})]})}),e.jsx(u,{children:e.jsx(y,{type:"number",min:"1",value:s.quantity,onChange:a=>Se(t,"quantity",a.target.value)})}),e.jsx(u,{children:e.jsx(y,{type:"number",min:"0",step:"0.01",value:s.unitPrice,onChange:a=>Se(t,"unitPrice",a.target.value)})}),e.jsxs(u,{className:"text-right font-medium",children:["₱",s.totalPrice.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(u,{children:e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>Bs(t),children:e.jsx(ve,{className:"h-4 w-4 text-destructive"})})})]},t))})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Grand Total:"}),e.jsxs("span",{className:"ml-2 text-xl font-bold",children:["₱",De.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"SO Balance:"}),e.jsxs("span",{className:Q("ml-2 text-xl font-bold",De-n.totalReceived>0?"text-orange-600":"text-green-600"),children:["₱",(De-n.totalReceived).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]})]}),e.jsxs(Ze,{children:[e.jsx(x,{variant:"outline",onClick:()=>{be(!1),Me()},children:"Cancel"}),e.jsx(x,{onClick:It,children:"Create Sales Order"})]})]})]})]})]})]}),e.jsxs(C,{className:"space-y-6 pt-6",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxs("div",{className:"relative flex-1 min-w-[250px] max-w-md",children:[e.jsx(Zs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(y,{placeholder:"Search SO ID, customer, or items...",value:re,onChange:s=>Qe(s.target.value),className:"pl-10 h-10"})]}),e.jsxs(ue,{value:le,onValueChange:ye,children:[e.jsxs(he,{className:"w-52 h-10",children:[e.jsx(fa,{className:"h-4 w-4 mr-2"}),e.jsx(je,{placeholder:"Filter by status"})]}),e.jsxs(pe,{children:[e.jsx(J,{value:"all",children:"All Statuses"}),Ka.map(s=>e.jsx(J,{value:s,children:s},s))]})]}),e.jsxs(x,{variant:B?"default":"outline",onClick:()=>me(!B),className:Q("h-10",B?"bg-orange-500 hover:bg-orange-600 text-white":""),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),B?"Viewing Archived":"View Archived"]}),(re||le!=="all"||B)&&e.jsxs(x,{variant:"ghost",onClick:Et,className:"text-muted-foreground h-10",children:[e.jsx(la,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]}),ft&&N&&e.jsx(ya,{selectionCount:ms,onClearSelection:Ee,actions:B?[{id:"restore",label:"Restore",icon:e.jsx(Ks,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:Lt},...O?[{id:"permanent-delete",label:"Permanently Delete",icon:e.jsx(ve,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>U(!0)}]:[]]:[{id:"archive",label:"Archive",icon:e.jsx(Ke,{className:"h-4 w-4 mr-1"}),variant:"outline",onClick:()=>U(!0)}]}),te.length===0?e.jsx(ps,{icon:B?Ke:Ne,title:B?"No archived sales orders":"No sales orders found",description:B?"Archived sales orders will appear here":re||le!=="all"?"Try adjusting your search or filters":m?"Create your first order to get started":"Sales orders will appear here when customers place orders",actionLabel:!B&&F?"Create SO":void 0,onAction:!B&&F?()=>be(!0):void 0}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"border rounded-xl overflow-hidden shadow-sm",children:[e.jsx(ba,{pageItemCount:As,totalItemCount:Os,isAllPagesSelected:vt,show:gt&&Os>As,onSelectAllPages:jt,onClearSelection:Ee,itemLabel:"orders"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ke,{children:[e.jsx(Ie,{children:e.jsxs(W,{className:"bg-muted/40 hover:bg-muted/40",children:[N&&e.jsx(v,{className:"w-12 py-3",children:e.jsx("input",{type:"checkbox",checked:pt,ref:s=>{s&&(s.indeterminate=Nt)},onChange:()=>ht(),className:"h-4 w-4 rounded"})}),e.jsx(oe,{sortKey:"soDate",currentSortKey:H,sortDirection:ce("soDate"),onSort:ne,children:"Date"}),e.jsx(oe,{sortKey:"id",currentSortKey:H,sortDirection:ce("id"),onSort:ne,children:"SO ID"}),e.jsx(v,{children:"Customer ID"}),e.jsx(oe,{sortKey:"customerName",currentSortKey:H,sortDirection:ce("customerName"),onSort:ne,children:"Customer Name"}),e.jsx(v,{children:"Country"}),e.jsx(v,{children:"City"}),e.jsx(oe,{sortKey:"totalAmount",currentSortKey:H,sortDirection:ce("totalAmount"),onSort:ne,className:"text-right",children:"Total Amount"}),e.jsx(oe,{sortKey:"totalReceived",currentSortKey:H,sortDirection:ce("totalReceived"),onSort:ne,className:"text-right",children:"Total Received"}),e.jsx(oe,{sortKey:"soBalance",currentSortKey:H,sortDirection:ce("soBalance"),onSort:ne,className:"text-right",children:"SO Balance"}),e.jsx(oe,{sortKey:"receiptStatus",currentSortKey:H,sortDirection:ce("receiptStatus"),onSort:ne,children:"Receipt Status"}),e.jsx(oe,{sortKey:"shippingStatus",currentSortKey:H,sortDirection:ce("shippingStatus"),onSort:ne,children:"Shipping"}),e.jsx(v,{children:"Actions"})]})}),e.jsx(Oe,{children:os.map(s=>e.jsxs(W,{className:"cursor-pointer hover:bg-muted/30 transition-colors",onClick:()=>$t(s),children:[N&&e.jsx(u,{className:"py-3",onClick:t=>t.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:xt(s.id),onChange:()=>ut(s.id),className:"h-4 w-4 rounded"})}),e.jsx(u,{className:"whitespace-nowrap py-3",children:s.soDate??s.createdDate}),e.jsx(u,{className:"font-medium py-3 text-primary",children:s.id}),e.jsx(u,{className:"text-muted-foreground py-3 text-sm",children:s.customerId}),e.jsx(u,{className:"py-3 font-medium",children:s.customerName}),e.jsx(u,{className:"py-3",children:s.customerCountry||"-"}),e.jsx(u,{className:"py-3",children:s.customerCity||"-"}),e.jsxs(u,{className:"text-right font-semibold py-3",children:["₱",(s.totalAmount??0).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsxs(u,{className:"text-right py-3 text-muted-foreground",children:["₱",(s.totalReceived??0).toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(u,{className:"text-right font-semibold py-3",children:e.jsxs("span",{className:Q((s.soBalance??s.totalAmount??0)>0?"text-orange-600":"text-green-600"),children:["₱",(s.soBalance??s.totalAmount??0).toLocaleString(void 0,{minimumFractionDigits:2})]})}),e.jsx(u,{children:Je(s.receiptStatus)}),e.jsx(u,{children:e.jsx(K,{variant:s.shippingStatus==="Delivered"?"default":s.shippingStatus==="In Transit"?"secondary":"outline",children:s.shippingStatus??"Pending"})}),e.jsx(u,{onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(x,{size:"sm",variant:"outline",onClick:()=>Ts(s),title:"View Details",children:e.jsx(na,{className:"h-4 w-4"})}),B?e.jsx(x,{size:"sm",variant:"outline",onClick:()=>Ft(s.id),title:"Restore",children:e.jsx(Ks,{className:"h-4 w-4"})}):e.jsx(x,{size:"sm",variant:"ghost",className:"text-destructive",onClick:()=>Rt(s.id),title:"Archive",children:e.jsx(Ke,{className:"h-4 w-4"})})]})})]},s.id))})]})})]}),e.jsx(Us,{currentPage:Ss,totalPages:Ds,itemsPerPage:ks,onPageChange:Ps,totalItems:Is})]}),e.jsx(Ve,{open:!!r,onOpenChange:s=>{s||(h(null),Me())},children:e.jsxs(ze,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(_e,{children:[e.jsxs(Ue,{children:["Edit Sales Order - ",r]}),e.jsx(He,{children:"Update sales order details"})]}),e.jsx("div",{className:"space-y-6 py-4",children:(()=>{const s=se.find(t=>t.id===r);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Receipt Status:"}),s&&Je(s.receiptStatus),e.jsx("span",{className:"text-sm text-muted-foreground ml-4",children:"Shipping:"}),e.jsx(K,{variant:s?.shippingStatus==="Delivered"?"default":s?.shippingStatus==="In Transit"?"secondary":"outline",children:s?.shippingStatus??"Pending"})]}),e.jsxs(D,{children:[e.jsx(T,{className:"pb-3",children:e.jsx(R,{className:"text-base",children:"Sales Order Information"})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"SO Date"}),e.jsx(y,{type:"date",value:n.soDate,onChange:t=>q(a=>({...a,soDate:t.target.value})),disabled:m,className:m?"bg-muted":""})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Customer"}),m?e.jsx(y,{value:n.customerName||l?.displayName||l?.email||"Customer",disabled:!0,className:"bg-muted"}):e.jsxs(ue,{value:n.customerId,onValueChange:Ls,children:[e.jsx(he,{children:e.jsx(je,{placeholder:"Select customer"})}),e.jsx(pe,{children:S.map(t=>e.jsx(J,{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Customer ID"}),e.jsx(y,{value:n.customerId,disabled:!0,className:"bg-muted"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Country"}),e.jsx(y,{value:n.customerCountry,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"City"}),e.jsx(y,{value:n.customerCity,disabled:!0,className:"bg-muted"})]})]}),!m&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Expected Delivery Date"}),e.jsx(y,{type:"date",value:n.expectedDeliveryDate,onChange:t=>q(a=>({...a,expectedDeliveryDate:t.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Total Received (₱)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{type:"number",min:"0",step:"0.01",value:n.totalReceived,onChange:t=>q(a=>({...a,totalReceived:parseFloat(t.target.value)||0})),className:"flex-1"}),e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:()=>{const t=n.items.reduce((a,d)=>a+d.totalPrice,0);q(a=>({...a,totalReceived:t}))},children:"Full Payment"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Shipping Status"}),e.jsxs(ue,{value:n.shippingStatus,onValueChange:t=>q(a=>({...a,shippingStatus:t})),children:[e.jsx(he,{children:e.jsx(je,{})}),e.jsx(pe,{children:Ga.map(t=>e.jsx(J,{value:t,children:t},t))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{children:"Notes"}),e.jsx(y,{value:n.notes,onChange:t=>q(a=>({...a,notes:t.target.value})),placeholder:"Optional notes..."})]})]})]}),e.jsxs(D,{children:[e.jsxs(T,{className:"pb-3 flex flex-row items-center justify-between",children:[e.jsx(R,{className:"text-base",children:"Line Items"}),e.jsxs(x,{size:"sm",variant:"outline",onClick:Fs,children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"Add Item"]})]}),e.jsxs(C,{children:[n.items.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No items added."}):e.jsxs(ke,{children:[e.jsx(Ie,{children:e.jsxs(W,{children:[e.jsx(v,{children:"Item"}),e.jsx(v,{className:"w-24",children:"Qty"}),e.jsx(v,{className:"w-32",children:"Unit Price"}),e.jsx(v,{className:"w-32 text-right",children:"Total"}),e.jsx(v,{className:"w-12"})]})}),e.jsx(Oe,{children:n.items.map((t,a)=>e.jsxs(W,{children:[e.jsx(u,{children:e.jsxs(ue,{value:t.inventoryItemId,onValueChange:d=>Se(a,"inventoryItemId",d),children:[e.jsx(he,{children:e.jsx(je,{placeholder:"Select item"})}),e.jsx(pe,{children:V.map(d=>e.jsx(J,{value:d.id,children:d.name},d.id))})]})}),e.jsx(u,{children:e.jsx(y,{type:"number",min:"1",value:t.quantity,onChange:d=>Se(a,"quantity",d.target.value)})}),e.jsx(u,{children:e.jsx(y,{type:"number",min:"0",step:"0.01",value:t.unitPrice,onChange:d=>Se(a,"unitPrice",d.target.value)})}),e.jsxs(u,{className:"text-right font-medium",children:["₱",t.totalPrice.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(u,{children:e.jsx(x,{size:"sm",variant:"ghost",onClick:()=>Bs(a),children:e.jsx(ve,{className:"h-4 w-4 text-destructive"})})})]},a))})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Grand Total:"}),e.jsxs("span",{className:"ml-2 text-xl font-bold",children:["₱",De.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"SO Balance:"}),e.jsxs("span",{className:Q("ml-2 text-xl font-bold",De-n.totalReceived>0?"text-orange-600":"text-green-600"),children:["₱",(De-n.totalReceived).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]})]}),e.jsxs(Ze,{className:"gap-2",children:[N&&e.jsxs(x,{variant:"destructive",onClick:()=>Tt(r),children:[e.jsx(ve,{className:"h-4 w-4 mr-1"}),"Delete"]}),e.jsx(x,{variant:"outline",onClick:()=>{h(null),Me()},children:"Cancel"}),e.jsx(x,{onClick:()=>At(r),children:"Save Changes"})]})]})})()})]})})]})]}),e.jsx(Ve,{open:P,onOpenChange:U,children:e.jsxs(ze,{className:"max-w-md",children:[e.jsxs(_e,{children:[e.jsxs(Ue,{className:"flex items-center gap-2",children:[e.jsx(Js,{className:"h-5 w-5 text-destructive"}),"Delete ",ms," Sales Order",ms!==1?"s":""]}),e.jsx(He,{children:B?"These sales orders are already archived. This action will permanently remove them from the system.":"Choose how you want to delete the selected sales orders:"})]}),B?e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ve,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Permanent Deletion"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"This cannot be undone. All data will be permanently removed."})]})]})}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(x,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),e.jsx(x,{variant:"destructive",onClick:$s,children:"Permanently Delete All"})]})]}):e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsx("div",{className:"p-3 border rounded-md hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ke,{className:"h-4 w-4 mt-0.5 text-muted-foreground"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Archive"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Move to archive. Sales orders can be restored later."})]}),e.jsx(x,{variant:"secondary",size:"sm",onClick:Bt,children:"Archive"})]})}),O&&e.jsx("div",{className:"p-3 border border-destructive/50 rounded-md bg-destructive/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ve,{className:"h-4 w-4 mt-0.5 text-destructive"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-destructive",children:"Delete Permanently"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Cannot be undone. Data will be permanently removed."})]}),e.jsx(x,{variant:"destructive",size:"sm",onClick:$s,children:"Delete"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(x,{variant:"outline",onClick:()=>U(!1),children:"Cancel"})})]})]})})]})}export{Nr as SalesOrdersView};
