import{c as ge,F as Pe,j as r,B as Y,d as N,as as xe,r as a,at as fe,au as E,av as g,aw as K,ax as je,ay as Te,az as we,aA as Ae,aB as Gt,aC as Kt,aD as ae,aE as $t,aF as Ut,aG as Bt,aH as zt,aI as Vt,aJ as Yt,aK as Ht,aL as Xt,aM as Wt,aN as qt,aO as Oe,a3 as Jt,D as Zt,K as Qt,v as en,w as tn,x as nn,y as on,L as rn,I as an,t as ne}from"./index-DNXTvTWD.js";import{l as ke,T as sn}from"./sortable-table-head-DeQUWW-W.js";import{C as cn}from"./bulk-delete-dialog-BMkAbUZa.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],De=ge("bookmark",un);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ln=ge("circle",dn);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],fn=ge("star",pn);function Yo({entityType:e,entityId:n,entityName:t,size:o="sm",className:s}){const{isFavorite:c,toggleFavorite:l}=Pe(),d=c(e,n),v=p=>{p.stopPropagation(),l(e,n,t)};return r.jsx(Y,{variant:"ghost",size:o==="sm"?"icon":"default",className:N("h-8 w-8 p-0 hover:bg-transparent",d&&"text-yellow-500 hover:text-yellow-600",!d&&"text-muted-foreground hover:text-yellow-500",s),onClick:v,title:d?"Remove from favorites":"Add to favorites",children:r.jsx(fn,{className:N("h-4 w-4 transition-all",d&&"fill-current")})})}var pe="rovingFocusGroup.onEntryFocus",mn={bubbles:!1,cancelable:!0},q="RovingFocusGroup",[me,Fe,vn]=ke(q),[hn,Le]=xe(q,[vn]),[gn,xn]=hn(q),Ge=a.forwardRef((e,n)=>r.jsx(me.Provider,{scope:e.__scopeRovingFocusGroup,children:r.jsx(me.Slot,{scope:e.__scopeRovingFocusGroup,children:r.jsx(wn,{...e,ref:n})})}));Ge.displayName=q;var wn=a.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:t,orientation:o,loop:s=!1,dir:c,currentTabStopId:l,defaultCurrentTabStopId:d,onCurrentTabStopIdChange:v,onEntryFocus:p,preventScrollOnEntryFocus:u=!1,...i}=e,h=a.useRef(null),M=K(n,h),x=je(c),[R,m]=Te({prop:l,defaultProp:d??null,onChange:v,caller:q}),[w,P]=a.useState(!1),b=we(p),S=Fe(t),$=a.useRef(!1),[Q,j]=a.useState(0);return a.useEffect(()=>{const C=h.current;if(C)return C.addEventListener(pe,b),()=>C.removeEventListener(pe,b)},[b]),r.jsx(gn,{scope:t,orientation:o,dir:x,loop:s,currentTabStopId:R,onItemFocus:a.useCallback(C=>m(C),[m]),onItemShiftTab:a.useCallback(()=>P(!0),[]),onFocusableItemAdd:a.useCallback(()=>j(C=>C+1),[]),onFocusableItemRemove:a.useCallback(()=>j(C=>C-1),[]),children:r.jsx(E.div,{tabIndex:w||Q===0?-1:0,"data-orientation":o,...i,ref:M,style:{outline:"none",...e.style},onMouseDown:g(e.onMouseDown,()=>{$.current=!0}),onFocus:g(e.onFocus,C=>{const F=!$.current;if(C.target===C.currentTarget&&F&&!w){const T=new CustomEvent(pe,mn);if(C.currentTarget.dispatchEvent(T),!T.defaultPrevented){const U=S().filter(D=>D.focusable),B=U.find(D=>D.active),ee=U.find(D=>D.id===R),ue=[B,ee,...U].filter(Boolean).map(D=>D.ref.current);Ue(ue,u)}}$.current=!1}),onBlur:g(e.onBlur,()=>P(!1))})})}),Ke="RovingFocusGroupItem",$e=a.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:t,focusable:o=!0,active:s=!1,tabStopId:c,children:l,...d}=e,v=fe(),p=c||v,u=xn(Ke,t),i=u.currentTabStopId===p,h=Fe(t),{onFocusableItemAdd:M,onFocusableItemRemove:x,currentTabStopId:R}=u;return a.useEffect(()=>{if(o)return M(),()=>x()},[o,M,x]),r.jsx(me.ItemSlot,{scope:t,id:p,focusable:o,active:s,children:r.jsx(E.span,{tabIndex:i?0:-1,"data-orientation":u.orientation,...d,ref:n,onMouseDown:g(e.onMouseDown,m=>{o?u.onItemFocus(p):m.preventDefault()}),onFocus:g(e.onFocus,()=>u.onItemFocus(p)),onKeyDown:g(e.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){u.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const w=_n(m,u.orientation,u.dir);if(w!==void 0){if(m.metaKey||m.ctrlKey||m.altKey||m.shiftKey)return;m.preventDefault();let b=h().filter(S=>S.focusable).map(S=>S.ref.current);if(w==="last")b.reverse();else if(w==="prev"||w==="next"){w==="prev"&&b.reverse();const S=b.indexOf(m.currentTarget);b=u.loop?Rn(b,S+1):b.slice(S+1)}setTimeout(()=>Ue(b))}}),children:typeof l=="function"?l({isCurrentTabStop:i,hasTabStop:R!=null}):l})})});$e.displayName=Ke;var Mn={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cn(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function _n(e,n,t){const o=Cn(e.key,t);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Mn[o]}function Ue(e,n=!1){const t=document.activeElement;for(const o of e)if(o===t||(o.focus({preventScroll:n}),document.activeElement!==t))return}function Rn(e,n){return e.map((t,o)=>e[(n+o)%e.length])}var bn=Ge,yn=$e,ve=["Enter"," "],In=["ArrowDown","PageUp","Home"],Be=["ArrowUp","PageDown","End"],Sn=[...In,...Be],Nn={ltr:[...ve,"ArrowRight"],rtl:[...ve,"ArrowLeft"]},Dn={ltr:["ArrowLeft"],rtl:["ArrowRight"]},J="Menu",[X,En,Pn]=ke(J),[O,ze]=xe(J,[Pn,Ae,Le]),se=Ae(),Ve=Le(),[jn,k]=O(J),[Tn,Z]=O(J),Ye=e=>{const{__scopeMenu:n,open:t=!1,children:o,dir:s,onOpenChange:c,modal:l=!0}=e,d=se(n),[v,p]=a.useState(null),u=a.useRef(!1),i=we(c),h=je(s);return a.useEffect(()=>{const M=()=>{u.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>u.current=!1;return document.addEventListener("keydown",M,{capture:!0}),()=>{document.removeEventListener("keydown",M,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),r.jsx(Gt,{...d,children:r.jsx(jn,{scope:n,open:t,onOpenChange:i,content:v,onContentChange:p,children:r.jsx(Tn,{scope:n,onClose:a.useCallback(()=>i(!1),[i]),isUsingKeyboardRef:u,dir:h,modal:l,children:o})})})};Ye.displayName=J;var An="MenuAnchor",Me=a.forwardRef((e,n)=>{const{__scopeMenu:t,...o}=e,s=se(t);return r.jsx(Kt,{...s,...o,ref:n})});Me.displayName=An;var Ce="MenuPortal",[On,He]=O(Ce,{forceMount:void 0}),Xe=e=>{const{__scopeMenu:n,forceMount:t,children:o,container:s}=e,c=k(Ce,n);return r.jsx(On,{scope:n,forceMount:t,children:r.jsx(ae,{present:t||c.open,children:r.jsx($t,{asChild:!0,container:s,children:o})})})};Xe.displayName=Ce;var I="MenuContent",[kn,_e]=O(I),We=a.forwardRef((e,n)=>{const t=He(I,e.__scopeMenu),{forceMount:o=t.forceMount,...s}=e,c=k(I,e.__scopeMenu),l=Z(I,e.__scopeMenu);return r.jsx(X.Provider,{scope:e.__scopeMenu,children:r.jsx(ae,{present:o||c.open,children:r.jsx(X.Slot,{scope:e.__scopeMenu,children:l.modal?r.jsx(Fn,{...s,ref:n}):r.jsx(Ln,{...s,ref:n})})})})}),Fn=a.forwardRef((e,n)=>{const t=k(I,e.__scopeMenu),o=a.useRef(null),s=K(n,o);return a.useEffect(()=>{const c=o.current;if(c)return Ut(c)},[]),r.jsx(Re,{...e,ref:s,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:g(e.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)})}),Ln=a.forwardRef((e,n)=>{const t=k(I,e.__scopeMenu);return r.jsx(Re,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)})}),Gn=Yt("MenuContent.ScrollLock"),Re=a.forwardRef((e,n)=>{const{__scopeMenu:t,loop:o=!1,trapFocus:s,onOpenAutoFocus:c,onCloseAutoFocus:l,disableOutsidePointerEvents:d,onEntryFocus:v,onEscapeKeyDown:p,onPointerDownOutside:u,onFocusOutside:i,onInteractOutside:h,onDismiss:M,disableOutsideScroll:x,...R}=e,m=k(I,t),w=Z(I,t),P=se(t),b=Ve(t),S=En(t),[$,Q]=a.useState(null),j=a.useRef(null),C=K(n,j,m.onContentChange),F=a.useRef(0),T=a.useRef(""),U=a.useRef(0),B=a.useRef(null),ee=a.useRef("right"),te=a.useRef(0),ue=x?Vt:a.Fragment,D=x?{as:Gn,allowPinchZoom:!0}:void 0,Lt=f=>{const G=T.current+f,A=S().filter(y=>!y.disabled),z=document.activeElement,de=A.find(y=>y.ref.current===z)?.textValue,le=A.map(y=>y.textValue),Se=Jn(le,G,de),V=A.find(y=>y.textValue===Se)?.ref.current;(function y(Ne){T.current=Ne,window.clearTimeout(F.current),Ne!==""&&(F.current=window.setTimeout(()=>y(""),1e3))})(G),V&&setTimeout(()=>V.focus())};a.useEffect(()=>()=>window.clearTimeout(F.current),[]),zt();const L=a.useCallback(f=>ee.current===B.current?.side&&Qn(f,B.current?.area),[]);return r.jsx(kn,{scope:t,searchRef:T,onItemEnter:a.useCallback(f=>{L(f)&&f.preventDefault()},[L]),onItemLeave:a.useCallback(f=>{L(f)||(j.current?.focus(),Q(null))},[L]),onTriggerLeave:a.useCallback(f=>{L(f)&&f.preventDefault()},[L]),pointerGraceTimerRef:U,onPointerGraceIntentChange:a.useCallback(f=>{B.current=f},[]),children:r.jsx(ue,{...D,children:r.jsx(Ht,{asChild:!0,trapped:s,onMountAutoFocus:g(c,f=>{f.preventDefault(),j.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:r.jsx(Xt,{asChild:!0,disableOutsidePointerEvents:d,onEscapeKeyDown:p,onPointerDownOutside:u,onFocusOutside:i,onInteractOutside:h,onDismiss:M,children:r.jsx(bn,{asChild:!0,...b,dir:w.dir,orientation:"vertical",loop:o,currentTabStopId:$,onCurrentTabStopIdChange:Q,onEntryFocus:g(v,f=>{w.isUsingKeyboardRef.current||f.preventDefault()}),preventScrollOnEntryFocus:!0,children:r.jsx(Wt,{role:"menu","aria-orientation":"vertical","data-state":lt(m.open),"data-radix-menu-content":"",dir:w.dir,...P,...R,ref:C,style:{outline:"none",...R.style},onKeyDown:g(R.onKeyDown,f=>{const A=f.target.closest("[data-radix-menu-content]")===f.currentTarget,z=f.ctrlKey||f.altKey||f.metaKey,de=f.key.length===1;A&&(f.key==="Tab"&&f.preventDefault(),!z&&de&&Lt(f.key));const le=j.current;if(f.target!==le||!Sn.includes(f.key))return;f.preventDefault();const V=S().filter(y=>!y.disabled).map(y=>y.ref.current);Be.includes(f.key)&&V.reverse(),Wn(V)}),onBlur:g(e.onBlur,f=>{f.currentTarget.contains(f.target)||(window.clearTimeout(F.current),T.current="")}),onPointerMove:g(e.onPointerMove,W(f=>{const G=f.target,A=te.current!==f.clientX;if(f.currentTarget.contains(G)&&A){const z=f.clientX>te.current?"right":"left";ee.current=z,te.current=f.clientX}}))})})})})})})});We.displayName=I;var Kn="MenuGroup",be=a.forwardRef((e,n)=>{const{__scopeMenu:t,...o}=e;return r.jsx(E.div,{role:"group",...o,ref:n})});be.displayName=Kn;var $n="MenuLabel",qe=a.forwardRef((e,n)=>{const{__scopeMenu:t,...o}=e;return r.jsx(E.div,{...o,ref:n})});qe.displayName=$n;var oe="MenuItem",Ee="menu.itemSelect",ce=a.forwardRef((e,n)=>{const{disabled:t=!1,onSelect:o,...s}=e,c=a.useRef(null),l=Z(oe,e.__scopeMenu),d=_e(oe,e.__scopeMenu),v=K(n,c),p=a.useRef(!1),u=()=>{const i=c.current;if(!t&&i){const h=new CustomEvent(Ee,{bubbles:!0,cancelable:!0});i.addEventListener(Ee,M=>o?.(M),{once:!0}),Bt(i,h),h.defaultPrevented?p.current=!1:l.onClose()}};return r.jsx(Je,{...s,ref:v,disabled:t,onClick:g(e.onClick,u),onPointerDown:i=>{e.onPointerDown?.(i),p.current=!0},onPointerUp:g(e.onPointerUp,i=>{p.current||i.currentTarget?.click()}),onKeyDown:g(e.onKeyDown,i=>{const h=d.searchRef.current!=="";t||h&&i.key===" "||ve.includes(i.key)&&(i.currentTarget.click(),i.preventDefault())})})});ce.displayName=oe;var Je=a.forwardRef((e,n)=>{const{__scopeMenu:t,disabled:o=!1,textValue:s,...c}=e,l=_e(oe,t),d=Ve(t),v=a.useRef(null),p=K(n,v),[u,i]=a.useState(!1),[h,M]=a.useState("");return a.useEffect(()=>{const x=v.current;x&&M((x.textContent??"").trim())},[c.children]),r.jsx(X.ItemSlot,{scope:t,disabled:o,textValue:s??h,children:r.jsx(yn,{asChild:!0,...d,focusable:!o,children:r.jsx(E.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...c,ref:p,onPointerMove:g(e.onPointerMove,W(x=>{o?l.onItemLeave(x):(l.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:g(e.onPointerLeave,W(x=>l.onItemLeave(x))),onFocus:g(e.onFocus,()=>i(!0)),onBlur:g(e.onBlur,()=>i(!1))})})})}),Un="MenuCheckboxItem",Ze=a.forwardRef((e,n)=>{const{checked:t=!1,onCheckedChange:o,...s}=e;return r.jsx(ot,{scope:e.__scopeMenu,checked:t,children:r.jsx(ce,{role:"menuitemcheckbox","aria-checked":re(t)?"mixed":t,...s,ref:n,"data-state":Ie(t),onSelect:g(s.onSelect,()=>o?.(re(t)?!0:!t),{checkForDefaultPrevented:!1})})})});Ze.displayName=Un;var Qe="MenuRadioGroup",[Bn,zn]=O(Qe,{value:void 0,onValueChange:()=>{}}),et=a.forwardRef((e,n)=>{const{value:t,onValueChange:o,...s}=e,c=we(o);return r.jsx(Bn,{scope:e.__scopeMenu,value:t,onValueChange:c,children:r.jsx(be,{...s,ref:n})})});et.displayName=Qe;var tt="MenuRadioItem",nt=a.forwardRef((e,n)=>{const{value:t,...o}=e,s=zn(tt,e.__scopeMenu),c=t===s.value;return r.jsx(ot,{scope:e.__scopeMenu,checked:c,children:r.jsx(ce,{role:"menuitemradio","aria-checked":c,...o,ref:n,"data-state":Ie(c),onSelect:g(o.onSelect,()=>s.onValueChange?.(t),{checkForDefaultPrevented:!1})})})});nt.displayName=tt;var ye="MenuItemIndicator",[ot,Vn]=O(ye,{checked:!1}),rt=a.forwardRef((e,n)=>{const{__scopeMenu:t,forceMount:o,...s}=e,c=Vn(ye,t);return r.jsx(ae,{present:o||re(c.checked)||c.checked===!0,children:r.jsx(E.span,{...s,ref:n,"data-state":Ie(c.checked)})})});rt.displayName=ye;var Yn="MenuSeparator",at=a.forwardRef((e,n)=>{const{__scopeMenu:t,...o}=e;return r.jsx(E.div,{role:"separator","aria-orientation":"horizontal",...o,ref:n})});at.displayName=Yn;var Hn="MenuArrow",st=a.forwardRef((e,n)=>{const{__scopeMenu:t,...o}=e,s=se(t);return r.jsx(qt,{...s,...o,ref:n})});st.displayName=Hn;var Xn="MenuSub",[Ho,ct]=O(Xn),H="MenuSubTrigger",it=a.forwardRef((e,n)=>{const t=k(H,e.__scopeMenu),o=Z(H,e.__scopeMenu),s=ct(H,e.__scopeMenu),c=_e(H,e.__scopeMenu),l=a.useRef(null),{pointerGraceTimerRef:d,onPointerGraceIntentChange:v}=c,p={__scopeMenu:e.__scopeMenu},u=a.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return a.useEffect(()=>u,[u]),a.useEffect(()=>{const i=d.current;return()=>{window.clearTimeout(i),v(null)}},[d,v]),r.jsx(Me,{asChild:!0,...p,children:r.jsx(Je,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":s.contentId,"data-state":lt(t.open),...e,ref:Oe(n,s.onTriggerChange),onClick:i=>{e.onClick?.(i),!(e.disabled||i.defaultPrevented)&&(i.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:g(e.onPointerMove,W(i=>{c.onItemEnter(i),!i.defaultPrevented&&!e.disabled&&!t.open&&!l.current&&(c.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:g(e.onPointerLeave,W(i=>{u();const h=t.content?.getBoundingClientRect();if(h){const M=t.content?.dataset.side,x=M==="right",R=x?-5:5,m=h[x?"left":"right"],w=h[x?"right":"left"];c.onPointerGraceIntentChange({area:[{x:i.clientX+R,y:i.clientY},{x:m,y:h.top},{x:w,y:h.top},{x:w,y:h.bottom},{x:m,y:h.bottom}],side:M}),window.clearTimeout(d.current),d.current=window.setTimeout(()=>c.onPointerGraceIntentChange(null),300)}else{if(c.onTriggerLeave(i),i.defaultPrevented)return;c.onPointerGraceIntentChange(null)}})),onKeyDown:g(e.onKeyDown,i=>{const h=c.searchRef.current!=="";e.disabled||h&&i.key===" "||Nn[o.dir].includes(i.key)&&(t.onOpenChange(!0),t.content?.focus(),i.preventDefault())})})})});it.displayName=H;var ut="MenuSubContent",dt=a.forwardRef((e,n)=>{const t=He(I,e.__scopeMenu),{forceMount:o=t.forceMount,...s}=e,c=k(I,e.__scopeMenu),l=Z(I,e.__scopeMenu),d=ct(ut,e.__scopeMenu),v=a.useRef(null),p=K(n,v);return r.jsx(X.Provider,{scope:e.__scopeMenu,children:r.jsx(ae,{present:o||c.open,children:r.jsx(X.Slot,{scope:e.__scopeMenu,children:r.jsx(Re,{id:d.contentId,"aria-labelledby":d.triggerId,...s,ref:p,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{l.isUsingKeyboardRef.current&&v.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:g(e.onFocusOutside,u=>{u.target!==d.trigger&&c.onOpenChange(!1)}),onEscapeKeyDown:g(e.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:g(e.onKeyDown,u=>{const i=u.currentTarget.contains(u.target),h=Dn[l.dir].includes(u.key);i&&h&&(c.onOpenChange(!1),d.trigger?.focus(),u.preventDefault())})})})})})});dt.displayName=ut;function lt(e){return e?"open":"closed"}function re(e){return e==="indeterminate"}function Ie(e){return re(e)?"indeterminate":e?"checked":"unchecked"}function Wn(e){const n=document.activeElement;for(const t of e)if(t===n||(t.focus(),document.activeElement!==n))return}function qn(e,n){return e.map((t,o)=>e[(n+o)%e.length])}function Jn(e,n,t){const s=n.length>1&&Array.from(n).every(p=>p===n[0])?n[0]:n,c=t?e.indexOf(t):-1;let l=qn(e,Math.max(c,0));s.length===1&&(l=l.filter(p=>p!==t));const v=l.find(p=>p.toLowerCase().startsWith(s.toLowerCase()));return v!==t?v:void 0}function Zn(e,n){const{x:t,y:o}=e;let s=!1;for(let c=0,l=n.length-1;c<n.length;l=c++){const d=n[c],v=n[l],p=d.x,u=d.y,i=v.x,h=v.y;u>o!=h>o&&t<(i-p)*(o-u)/(h-u)+p&&(s=!s)}return s}function Qn(e,n){if(!n)return!1;const t={x:e.clientX,y:e.clientY};return Zn(t,n)}function W(e){return n=>n.pointerType==="mouse"?e(n):void 0}var eo=Ye,to=Me,no=Xe,oo=We,ro=be,ao=qe,so=ce,co=Ze,io=et,uo=nt,lo=rt,po=at,fo=st,mo=it,vo=dt,ie="DropdownMenu",[ho]=xe(ie,[ze]),_=ze(),[go,pt]=ho(ie),ft=e=>{const{__scopeDropdownMenu:n,children:t,dir:o,open:s,defaultOpen:c,onOpenChange:l,modal:d=!0}=e,v=_(n),p=a.useRef(null),[u,i]=Te({prop:s,defaultProp:c??!1,onChange:l,caller:ie});return r.jsx(go,{scope:n,triggerId:fe(),triggerRef:p,contentId:fe(),open:u,onOpenChange:i,onOpenToggle:a.useCallback(()=>i(h=>!h),[i]),modal:d,children:r.jsx(eo,{...v,open:u,onOpenChange:i,dir:o,modal:d,children:t})})};ft.displayName=ie;var mt="DropdownMenuTrigger",vt=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,disabled:o=!1,...s}=e,c=pt(mt,t),l=_(t);return r.jsx(to,{asChild:!0,...l,children:r.jsx(E.button,{type:"button",id:c.triggerId,"aria-haspopup":"menu","aria-expanded":c.open,"aria-controls":c.open?c.contentId:void 0,"data-state":c.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...s,ref:Oe(n,c.triggerRef),onPointerDown:g(e.onPointerDown,d=>{!o&&d.button===0&&d.ctrlKey===!1&&(c.onOpenToggle(),c.open||d.preventDefault())}),onKeyDown:g(e.onKeyDown,d=>{o||(["Enter"," "].includes(d.key)&&c.onOpenToggle(),d.key==="ArrowDown"&&c.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(d.key)&&d.preventDefault())})})})});vt.displayName=mt;var xo="DropdownMenuPortal",ht=e=>{const{__scopeDropdownMenu:n,...t}=e,o=_(n);return r.jsx(no,{...o,...t})};ht.displayName=xo;var gt="DropdownMenuContent",xt=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=pt(gt,t),c=_(t),l=a.useRef(!1);return r.jsx(oo,{id:s.contentId,"aria-labelledby":s.triggerId,...c,...o,ref:n,onCloseAutoFocus:g(e.onCloseAutoFocus,d=>{l.current||s.triggerRef.current?.focus(),l.current=!1,d.preventDefault()}),onInteractOutside:g(e.onInteractOutside,d=>{const v=d.detail.originalEvent,p=v.button===0&&v.ctrlKey===!0,u=v.button===2||p;(!s.modal||u)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});xt.displayName=gt;var wo="DropdownMenuGroup",Mo=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(ro,{...s,...o,ref:n})});Mo.displayName=wo;var Co="DropdownMenuLabel",wt=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(ao,{...s,...o,ref:n})});wt.displayName=Co;var _o="DropdownMenuItem",Mt=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(so,{...s,...o,ref:n})});Mt.displayName=_o;var Ro="DropdownMenuCheckboxItem",Ct=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(co,{...s,...o,ref:n})});Ct.displayName=Ro;var bo="DropdownMenuRadioGroup",yo=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(io,{...s,...o,ref:n})});yo.displayName=bo;var Io="DropdownMenuRadioItem",_t=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(uo,{...s,...o,ref:n})});_t.displayName=Io;var So="DropdownMenuItemIndicator",Rt=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(lo,{...s,...o,ref:n})});Rt.displayName=So;var No="DropdownMenuSeparator",bt=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(po,{...s,...o,ref:n})});bt.displayName=No;var Do="DropdownMenuArrow",Eo=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(fo,{...s,...o,ref:n})});Eo.displayName=Do;var Po="DropdownMenuSubTrigger",yt=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(mo,{...s,...o,ref:n})});yt.displayName=Po;var jo="DropdownMenuSubContent",It=a.forwardRef((e,n)=>{const{__scopeDropdownMenu:t,...o}=e,s=_(t);return r.jsx(vo,{...s,...o,ref:n,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});It.displayName=jo;var To=ft,Ao=vt,Oo=ht,St=xt,Nt=wt,Dt=Mt,Et=Ct,Pt=_t,jt=Rt,Tt=bt,At=yt,Ot=It;const ko=To,Fo=Ao,Lo=a.forwardRef(({className:e,inset:n,children:t,...o},s)=>r.jsxs(At,{ref:s,className:N("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",e),...o,children:[t,r.jsx(cn,{className:"ml-auto"})]}));Lo.displayName=At.displayName;const Go=a.forwardRef(({className:e,...n},t)=>r.jsx(Ot,{ref:t,className:N("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n}));Go.displayName=Ot.displayName;const kt=a.forwardRef(({className:e,sideOffset:n=4,...t},o)=>r.jsx(Oo,{children:r.jsx(St,{ref:o,sideOffset:n,className:N("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));kt.displayName=St.displayName;const he=a.forwardRef(({className:e,inset:n,...t},o)=>r.jsx(Dt,{ref:o,className:N("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",e),...t}));he.displayName=Dt.displayName;const Ko=a.forwardRef(({className:e,children:n,checked:t,...o},s)=>r.jsxs(Et,{ref:s,className:N("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...o,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(jt,{children:r.jsx(Jt,{className:"h-4 w-4"})})}),n]}));Ko.displayName=Et.displayName;const $o=a.forwardRef(({className:e,children:n,...t},o)=>r.jsxs(Pt,{ref:o,className:N("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(jt,{children:r.jsx(ln,{className:"h-2 w-2 fill-current"})})}),n]}));$o.displayName=Pt.displayName;const Uo=a.forwardRef(({className:e,inset:n,...t},o)=>r.jsx(Nt,{ref:o,className:N("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",e),...t}));Uo.displayName=Nt.displayName;const Ft=a.forwardRef(({className:e,...n},t)=>r.jsx(Tt,{ref:t,className:N("-mx-1 my-1 h-px bg-muted",e),...n}));Ft.displayName=Tt.displayName;function Xo({entityType:e,currentSearchTerm:n,currentFilters:t,onApplySearch:o}){const{saveSearch:s,getSearchesByType:c,deleteSearch:l}=Pe(),[d,v]=a.useState(!1),[p,u]=a.useState(""),i=c(e),h=n||t&&Object.keys(t).length>0,M=()=>{if(!p.trim()){ne.error("Please enter a name for this search");return}s(p.trim(),e,n,t),ne.success(`Search "${p}" saved`),u(""),v(!1)},x=(m,w,P)=>{P.stopPropagation(),l(m),ne.success(`Search "${w}" deleted`)},R=m=>{o?.(m),ne.success(`Applied search "${m.name}"`)};return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs(Zt,{open:d,onOpenChange:v,children:[r.jsx(Qt,{asChild:!0,children:r.jsxs(Y,{variant:"outline",size:"sm",disabled:!h,title:h?"Save current search":"No active filters to save",children:[r.jsx(De,{className:"h-4 w-4 mr-1"}),"Save"]})}),r.jsxs(en,{className:"sm:max-w-[400px]",children:[r.jsxs(tn,{children:[r.jsx(nn,{children:"Save Search"}),r.jsx(on,{children:"Save your current search and filter settings for quick access later."})]}),r.jsxs("div",{className:"space-y-4 py-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx(rn,{htmlFor:"search-name",children:"Search Name"}),r.jsx(an,{id:"search-name",placeholder:"e.g., Low stock electronics",value:p,onChange:m=>u(m.target.value),onKeyDown:m=>m.key==="Enter"&&M()})]}),n&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:['Search term: "',n,'"']}),t&&Object.keys(t).length>0&&r.jsxs("p",{className:"text-sm text-muted-foreground",children:["Filters: ",Object.entries(t).map(([m,w])=>`${m}=${w}`).join(", ")]}),r.jsx(Y,{className:"w-full",onClick:M,children:"Save Search"})]})]})]}),i.length>0&&r.jsxs(ko,{children:[r.jsx(Fo,{asChild:!0,children:r.jsxs(Y,{variant:"outline",size:"sm",children:[r.jsx(De,{className:"h-4 w-4 mr-1 fill-current"}),"Saved (",i.length,")"]})}),r.jsxs(kt,{align:"end",className:"w-56",children:[i.map(m=>r.jsxs(he,{className:"flex items-center justify-between cursor-pointer",onClick:()=>R(m),children:[r.jsx("span",{className:"truncate flex-1",children:m.name}),r.jsx(Y,{variant:"ghost",size:"icon",className:"h-6 w-6 ml-2 hover:bg-destructive hover:text-destructive-foreground",onClick:w=>x(m.id,m.name,w),children:r.jsx(sn,{className:"h-3 w-3"})})]},m.id)),r.jsx(Ft,{}),r.jsx(he,{className:"text-xs text-muted-foreground",disabled:!0,children:"Click to apply, trash to delete"})]})]})]})}export{Yo as F,fn as S,Xo as a};
