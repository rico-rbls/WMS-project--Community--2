import{F as vs,i as Ss,r as n,G as Ns,av as ys,aw as ke,J as c,ax as Ds,ay as Cs,j as e,C as y,m as R,n as U,P as ws,o as D,p as Ie,d as L,t as I,s as bs,D as Fe,X as Pe,B as p,v as Ee,w as Ae,x as Be,y as Le,L as g,I as F,z as Oe,Z as Ts,Y as ce,ab as ks,_ as Ke,az as Is,aA as Fs}from"./index-D6-UGfWj.js";import{S as V,a as H,b as q,c as z,d as O,T as Me,e as Ps,f as Es,g as $e,h as Re,i as K,j as As,k as C}from"./sortable-table-head-0zTsUw4n.js";import{u as Bs,a as Ls,P as Os,F as Ks,B as Ms,b as $s,T as Rs,E as Us,d as oe,c as Vs}from"./editable-cell-8Q8SXysK.js";import{D as Hs}from"./date-range-filter-CAXzEr4w.js";import{S as qs,F as zs}from"./save-search-dialog-Cnr370Cx.js";import{u as Gs}from"./useTableSort-DgGMFyp-.js";import{c as Ys}from"./permissions-C2JO54S9.js";import{C as _s}from"./circle-check-big-dZo-vBmJ.js";import{T as Js}from"./trending-up-BofJqhVr.js";import{S as Ws}from"./star-D5e8MBY3.js";import{M as Xs}from"./map-pin-Dqygyjry.js";import{C as Zs}from"./calendar-CzpF33a7.js";const ue=["Pending","In Transit","Delivered"],Ue=["FedEx","UPS","DHL","USPS","LBC Express","J&T Express","Ninja Van","Grab Express"];function mt({initialOpenDialog:me,onDialogOpened:he}){const{isFavorite:xe,getFavoritesByType:fe}=vs(),{user:ge}=Ss(),v=ge?Ys(ge.role):!1,[w,Z]=n.useState(""),[l,P]=n.useState("all"),[u,G]=n.useState(""),[m,Y]=n.useState(""),[S,Q]=n.useState(!1),[je,N]=n.useState(null),[Ve,pe]=n.useState(!0),[M,$]=n.useState(!1),[ee,_]=n.useState(null),[r,x]=n.useState({id:"",orderId:"",destination:"",carrier:"",status:"Pending",eta:""}),se=Ns(w,300);n.useEffect(()=>{(async()=>{pe(!0);const s=await ys();N(s),pe(!1)})()},[]),n.useEffect(()=>{me&&!M&&($(!0),he?.())},[me,he,M]);const f=n.useMemo(()=>je??[],[je]),h=n.useMemo(()=>{const s=f.length,a=f.filter(i=>i.status==="Pending").length,t=f.filter(i=>i.status==="In Transit").length,o=f.filter(i=>i.status==="Delivered").length,T=a+t,k=new Date,X=new Date(k.getTime()-10080*60*1e3);new Date(k.getTime()-720*60*60*1e3);const cs=new Date(k.getTime()+10080*60*1e3),os=f.filter(i=>{if(i.status!=="Delivered")return!1;try{const d=new Date(i.eta);return d>=X&&d<=k}catch{return!1}}).length,us=f.filter(i=>{if(i.status==="Delivered")return!1;try{const d=new Date(i.eta);return d>=k&&d<=cs}catch{return!1}}).length,de=f.filter(i=>i.status==="Delivered"),ms=de.length,hs=de.length>0?Math.round(ms/de.length*100):0,xs=s>0?Math.round(o/s*100):0,fs=f.reduce((i,d)=>(i[d.carrier]=(i[d.carrier]||0)+1,i),{}),gs=Object.entries(fs).sort((i,d)=>d[1]-i[1]).slice(0,5).map(([i,d])=>({name:i,count:d})),js=f.reduce((i,d)=>(i[d.destination]=(i[d.destination]||0)+1,i),{}),ps=Object.entries(js).sort((i,d)=>d[1]-i[1]).slice(0,5).map(([i,d])=>({name:i,count:d}));return{totalShipments:s,pendingShipments:a,inTransitShipments:t,deliveredShipments:o,activeShipments:T,recentDeliveries7Days:os,upcomingDeliveries:us,onTimeRate:hs,fulfillmentRate:xs,topCarriers:gs,topDestinations:ps,avgTransitDays:3}},[f]),te=n.useMemo(()=>f.filter(s=>{if(S&&!xe("shipments",s.id)||l!=="all"&&s.status!==l)return!1;if(se){const a=se.toLowerCase();if(!(s.id.toLowerCase().includes(a)||s.orderId.toLowerCase().includes(a)||s.destination.toLowerCase().includes(a)||s.carrier.toLowerCase().includes(a)))return!1}if(u||m)try{const a=new Date(s.eta);if(u){const t=new Date(u);if(a<t)return!1}if(m){const t=new Date(m);if(t.setHours(23,59,59,999),a>t)return!1}}catch{return!1}return!0}),[f,se,l,u,m,S,xe]),He=n.useCallback(s=>{s.searchTerm&&Z(s.searchTerm),s.filters.fromDate&&typeof s.filters.fromDate=="string"&&G(s.filters.fromDate),s.filters.toDate&&typeof s.filters.toDate=="string"&&Y(s.filters.toDate),s.filters.favoritesOnly==="true"&&Q(!0)},[]),qe=n.useMemo(()=>{const s={};return l!=="all"&&(s.status=l),u&&(s.fromDate=u),m&&(s.toDate=m),S&&(s.favoritesOnly="true"),s},[l,u,m,S]),{sortedData:ze,sortConfig:E,requestSort:A,getSortDirection:B}=Gs(te),{currentPage:ve,totalPages:Ge,paginatedData:Se,goToPage:Ye,totalItems:_e,itemsPerPage:Je}=Bs(ze,25),{selectedIds:J,selectedItems:Ne,selectionCount:ye,isAllSelected:We,isPartiallySelected:Xe,hasSelection:ae,toggleItem:Ze,toggleAll:re,deselectAll:j,isSelected:Qe}=Ls(Se),[De,Ce]=n.useState(!1),[es,we]=n.useState(!1),[ss,ie]=n.useState(!1);n.useEffect(()=>{j()},[ve,j]),n.useEffect(()=>{const s=a=>{(a.metaKey||a.ctrlKey)&&a.key==="a"&&!M&&!ee&&(a.preventDefault(),re()),a.key==="Escape"&&ae&&j()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[re,j,ae,M,ee]);function ne(){x({id:"",orderId:"",destination:"",carrier:"",status:"Pending",eta:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0]})}function be(){G(""),Y("")}function ts(){Z(""),P("all"),G(""),Y(""),Q(!1)}function Te(){return r.orderId.trim()?r.destination.trim()?r.carrier.trim()?r.eta.trim()?null:"ETA is required":"Carrier is required":"Destination is required":"Order ID is required"}async function as(){const s=Te();if(s){c.error(s);return}try{const a=await Is({orderId:r.orderId,destination:r.destination,carrier:r.carrier,status:r.status,eta:r.eta});N(t=>[a,...t??[]]),$(!1),ne(),c.success("Shipment created successfully")}catch(a){c.error(a?.message||"Failed to create shipment")}}async function rs(){const s=Te();if(s){c.error(s);return}if(!r.id){c.error("Missing shipment id");return}try{const a=await ke({id:r.id,orderId:r.orderId,destination:r.destination,carrier:r.carrier,status:r.status,eta:r.eta});N(t=>(t??[]).map(o=>o.id===a.id?a:o)),_(null),c.success("Shipment updated successfully")}catch(a){c.error(a?.message||"Failed to update shipment")}}async function is(s){try{await Fs(s),N(a=>(a??[]).filter(t=>t.id!==s)),_(null),c.success("Shipment deleted successfully")}catch(a){c.error(a?.message||"Failed to delete shipment")}}const le=n.useCallback(async(s,a,t)=>{try{const o={[a]:t},T=await ke({id:s,...o});N(k=>(k??[]).map(X=>X.id===s?T:X)),c.success(`${a.charAt(0).toUpperCase()+a.slice(1)} updated`)}catch(o){throw c.error(o?.message||"Failed to update"),o}},[N]),W=s=>{switch(s){case"Delivered":return"bg-emerald-500/15 text-emerald-700 dark:text-emerald-400 border-emerald-200";case"In Transit":return"bg-blue-500/15 text-blue-700 dark:text-blue-400 border-blue-200";case"Pending":return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200";default:return"bg-slate-500/15 text-slate-700 dark:text-slate-400 border-slate-200"}},b=s=>{switch(s){case"Delivered":return"âœ“";case"In Transit":return"ðŸšš";case"Pending":return"â—‹";default:return"â—‹"}},ns=n.useCallback(async()=>{Ce(!0);try{const s=Array.from(J),a=await Ds(s);N(t=>t?.filter(o=>!s.includes(o.id))??[]),a.failedCount>0?c.warning(`Deleted ${a.successCount} shipments. ${a.failedCount} failed.`):c.success(`Successfully deleted ${a.successCount} shipment${a.successCount!==1?"s":""}`),j()}catch(s){c.error(s?.message||"Failed to delete shipments")}finally{Ce(!1),ie(!1)}},[J,j]),ls=n.useCallback(async s=>{we(!0);try{const a=Array.from(J),t=await Cs(a,s);N(o=>o&&o.map(T=>a.includes(T.id)?{...T,status:s}:T)),t.failedCount>0?c.warning(`Updated ${t.successCount} shipments. ${t.failedCount} failed.`):c.success(`Successfully updated ${t.successCount} shipment${t.successCount!==1?"s":""}`),j()}catch(a){c.error(a?.message||"Failed to update shipments")}finally{we(!1)}},[J,j]),ds=n.useMemo(()=>Ne.map(s=>`${s.id} â†’ ${s.destination}`),[Ne]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(y,{className:"relative overflow-hidden",children:[e.jsxs(R,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Total Shipments"}),e.jsx(ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.totalShipments}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h.upcomingDeliveries," arriving this week"]})]})]}),e.jsxs(y,{className:"relative overflow-hidden",children:[e.jsxs(R,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Active Shipments"}),e.jsx(Ie,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:h.activeShipments}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h.pendingShipments," pending, ",h.inTransitShipments," in transit"]})]})]}),e.jsxs(y,{className:"relative overflow-hidden",children:[e.jsxs(R,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Delivered"}),e.jsx(_s,{className:"h-4 w-4 text-emerald-600"})]}),e.jsxs(D,{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:h.deliveredShipments}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h.recentDeliveries7Days," in last 7 days"]})]})]}),e.jsxs(y,{className:"relative overflow-hidden",children:[e.jsxs(R,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Fulfillment Rate"}),e.jsx(Js,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(D,{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[h.fulfillmentRate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h.deliveredShipments," of ",h.totalShipments," fulfilled"]})]})]})]}),e.jsxs("div",{className:"grid gap-3 grid-cols-1 sm:grid-cols-3",children:[e.jsx(y,{className:L("cursor-pointer transition-all hover:shadow-md border-l-4",l==="Pending"?"ring-2 ring-primary":"","border-l-slate-400"),onClick:()=>P(l==="Pending"?"all":"Pending"),children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Pending"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:h.pendingShipments})]}),e.jsx(I,{variant:"outline",className:W("Pending"),children:b("Pending")})]})})}),e.jsx(y,{className:L("cursor-pointer transition-all hover:shadow-md border-l-4",l==="In Transit"?"ring-2 ring-primary":"","border-l-blue-400"),onClick:()=>P(l==="In Transit"?"all":"In Transit"),children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"In Transit"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:h.inTransitShipments})]}),e.jsx(I,{variant:"outline",className:W("In Transit"),children:b("In Transit")})]})})}),e.jsx(y,{className:L("cursor-pointer transition-all hover:shadow-md border-l-4",l==="Delivered"?"ring-2 ring-primary":"","border-l-emerald-400"),onClick:()=>P(l==="Delivered"?"all":"Delivered"),children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Delivered"}),e.jsx("p",{className:"text-xl font-bold mt-1",children:h.deliveredShipments})]}),e.jsx(I,{variant:"outline",className:W("Delivered"),children:b("Delivered")})]})})})]}),e.jsxs(y,{children:[e.jsx(R,{className:"pb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-xl",children:"Shipment Tracking"}),e.jsx(bs,{className:"mt-1",children:"Track and manage all shipments and deliveries"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(Fe,{open:M,onOpenChange:s=>{$(s),s||ne()},children:[e.jsx(Pe,{asChild:!0,children:e.jsxs(p,{onClick:()=>ne(),disabled:!v,title:v?void 0:"You don't have permission to add shipments",children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),"Add Shipment"]})}),e.jsxs(Ee,{className:"sm:max-w-[500px]",children:[e.jsxs(Ae,{children:[e.jsx(Be,{children:"Create New Shipment"}),e.jsx(Le,{children:"Enter the details for the new shipment."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"orderId",children:"Order ID *"}),e.jsx(F,{id:"orderId",placeholder:"ORD-0001",value:r.orderId,onChange:s=>x({...r,orderId:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"status",children:"Status"}),e.jsxs(V,{value:r.status,onValueChange:s=>x({...r,status:s}),children:[e.jsx(H,{children:e.jsx(q,{placeholder:"Select status"})}),e.jsx(z,{children:ue.map(s=>e.jsx(O,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:b(s)}),s]})},s))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"destination",children:"Destination *"}),e.jsx(F,{id:"destination",placeholder:"City, Province/State",value:r.destination,onChange:s=>x({...r,destination:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"carrier",children:"Carrier *"}),e.jsxs(V,{value:r.carrier,onValueChange:s=>x({...r,carrier:s}),children:[e.jsx(H,{children:e.jsx(q,{placeholder:"Select carrier"})}),e.jsx(z,{children:Ue.map(s=>e.jsx(O,{value:s,children:s},s))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"eta",children:"ETA *"}),e.jsx(F,{id:"eta",type:"date",value:r.eta,onChange:s=>x({...r,eta:s.target.value})})]})]})]}),e.jsxs(Oe,{children:[e.jsx(p,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(p,{onClick:as,children:"Create Shipment"})]})]})]})})]})}),e.jsxs(D,{children:[e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ts,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(F,{placeholder:"Search by ID, order ID, destination, or carrier...",value:w,onChange:s=>Z(s.target.value),className:"pl-9"})]}),e.jsxs(V,{value:l,onValueChange:P,children:[e.jsxs(H,{className:"w-full sm:w-[180px]",children:[e.jsx(Ks,{className:"h-4 w-4 mr-2"}),e.jsx(q,{placeholder:"Filter by status"})]}),e.jsxs(z,{children:[e.jsx(O,{value:"all",children:"All Statuses"}),ue.map(s=>e.jsx(O,{value:s,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:b(s)}),s]})},s))]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(Hs,{fromDate:u,toDate:m,onFromDateChange:G,onToDateChange:Y,onClear:be,label:"Filter by ETA Date"}),e.jsxs(p,{variant:S?"default":"outline",size:"sm",onClick:()=>Q(!S),className:"gap-1",children:[e.jsx(Ws,{className:L("h-4 w-4",S&&"fill-current")}),"Favorites",fe("shipments").length>0&&e.jsx(I,{variant:"secondary",className:"ml-1 h-5 px-1.5",children:fe("shipments").length})]}),e.jsx(qs,{entityType:"shipments",currentSearchTerm:w,currentFilters:qe,onApplySearch:He}),(w||l!=="all"||u||m||S)&&e.jsxs(p,{variant:"ghost",size:"sm",onClick:ts,className:"text-muted-foreground hover:text-foreground",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),"Clear All"]})]}),(l!=="all"||u||m)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[l!=="all"&&e.jsxs(I,{variant:"secondary",className:"gap-1",children:["Status: ",l,e.jsx("button",{onClick:()=>P("all"),className:"ml-1 hover:bg-secondary-foreground/20 rounded-full p-0.5",children:e.jsx(ce,{className:"h-3 w-3"})})]}),(u||m)&&e.jsxs(I,{variant:"secondary",className:"gap-1",children:["ETA: ",u||"..."," to ",m||"...",e.jsx("button",{onClick:be,className:"ml-1 hover:bg-secondary-foreground/20 rounded-full p-0.5",children:e.jsx(ce,{className:"h-3 w-3"})})]})]})]}),ae&&v&&e.jsx(Ms,{selectionCount:ye,onClearSelection:j,isLoading:De||es,actions:[{id:"delete",label:"Delete",icon:e.jsx(Me,{className:"h-4 w-4 mr-1"}),variant:"destructive",onClick:()=>ie(!0)}],actionGroups:[{id:"status-update",label:"Update Status",icon:e.jsx(ks,{className:"h-4 w-4 mr-1"}),options:[{value:"Pending",label:"Pending"},{value:"Processing",label:"Processing"},{value:"In Transit",label:"In Transit"},{value:"Delivered",label:"Delivered"}],onSelect:s=>ls(s)}],className:"mb-4"}),e.jsx($s,{open:ss,onOpenChange:ie,itemCount:ye,itemType:"shipment",itemNames:ds,onConfirm:ns,isLoading:De}),Ve?e.jsx(Rs,{rows:8}):te.length===0?e.jsx(Us,{icon:Ie,title:"No shipments found",description:w||l!=="all"||u||m?"Try adjusting your search or filters":"Get started by creating your first shipment",actionLabel:w||l!=="all"||u||m?void 0:"Create Shipment",onAction:w||l!=="all"||u||m?void 0:()=>$(!0)}):e.jsxs("div",{className:"rounded-md border",children:[e.jsxs(Ps,{children:[e.jsx(Es,{children:e.jsxs($e,{children:[e.jsx(Re,{className:"w-12",children:e.jsx(Ke,{checked:We,ref:s=>{s&&(s.indeterminate=Xe)},onCheckedChange:re,"aria-label":"Select all shipments"})}),e.jsx(K,{sortKey:"id",currentSortKey:E.key,sortDirection:B("id"),onSort:s=>A(s),children:"Shipment ID"}),e.jsx(K,{sortKey:"orderId",currentSortKey:E.key,sortDirection:B("orderId"),onSort:s=>A(s),children:"Order ID"}),e.jsx(K,{sortKey:"destination",currentSortKey:E.key,sortDirection:B("destination"),onSort:s=>A(s),children:"Destination"}),e.jsx(K,{sortKey:"carrier",currentSortKey:E.key,sortDirection:B("carrier"),onSort:s=>A(s),children:"Carrier"}),e.jsx(K,{sortKey:"status",currentSortKey:E.key,sortDirection:B("status"),onSort:s=>A(s),children:"Status"}),e.jsx(K,{sortKey:"eta",currentSortKey:E.key,sortDirection:B("eta"),onSort:s=>A(s),children:"ETA"}),e.jsx(Re,{children:"Actions"})]})}),e.jsx(As,{children:Se.map(s=>{const a=Qe(s.id);return e.jsxs($e,{className:L("transition-colors hover:bg-muted/50",a&&"bg-primary/5 hover:bg-primary/10"),children:[e.jsx(C,{children:e.jsx(Ke,{checked:a,onCheckedChange:()=>Ze(s.id),"aria-label":`Select shipment ${s.id}`})}),e.jsx(C,{children:e.jsx("span",{className:"font-mono text-sm font-medium",children:s.id})}),e.jsx(C,{children:e.jsx(oe,{value:s.orderId,type:"text",onSave:t=>le(s.id,"orderId",t),disabled:!v})}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Xs,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsx(oe,{value:s.destination,type:"text",onSave:t=>le(s.id,"destination",t),disabled:!v})]})}),e.jsx(C,{children:e.jsx(oe,{value:s.carrier,type:"text",onSave:t=>le(s.id,"carrier",t),disabled:!v})}),e.jsx(C,{children:e.jsxs(I,{variant:"outline",className:L("font-medium",W(s.status)),children:[e.jsx("span",{className:"mr-1",children:b(s.status)}),s.status]})}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Zs,{className:"h-3.5 w-3.5 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:new Date(s.eta).toLocaleDateString()})]})}),e.jsx(C,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(zs,{entityType:"shipments",entityId:s.id,entityName:`${s.id} - ${s.destination}`}),e.jsxs(Fe,{open:ee===s.id,onOpenChange:t=>{_(t?s.id:null),t&&x({...s})},children:[e.jsx(Pe,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",disabled:!v,title:v?void 0:"You don't have permission to edit shipments",children:"View / Edit"})}),e.jsxs(Ee,{className:"sm:max-w-[500px]",children:[e.jsxs(Ae,{children:[e.jsx(Be,{children:"Edit Shipment"}),e.jsxs(Le,{children:["Shipment ID: ",s.id]})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"edit-orderId",children:"Order ID *"}),e.jsx(F,{id:"edit-orderId",value:r.orderId,onChange:t=>x({...r,orderId:t.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"edit-status",children:"Status"}),e.jsxs(V,{value:r.status,onValueChange:t=>x({...r,status:t}),children:[e.jsx(H,{children:e.jsx(q,{placeholder:"Select status"})}),e.jsx(z,{children:ue.map(t=>e.jsx(O,{value:t,children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:b(t)}),t]})},t))})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"edit-destination",children:"Destination *"}),e.jsx(F,{id:"edit-destination",value:r.destination,onChange:t=>x({...r,destination:t.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"edit-carrier",children:"Carrier *"}),e.jsxs(V,{value:r.carrier,onValueChange:t=>x({...r,carrier:t}),children:[e.jsx(H,{children:e.jsx(q,{placeholder:"Select carrier"})}),e.jsx(z,{children:Ue.map(t=>e.jsx(O,{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(g,{htmlFor:"edit-eta",children:"ETA *"}),e.jsx(F,{id:"edit-eta",type:"date",value:r.eta,onChange:t=>x({...r,eta:t.target.value})})]})]})]}),e.jsxs(Oe,{className:"flex-col sm:flex-row gap-2",children:[e.jsxs(p,{variant:"destructive",onClick:()=>is(s.id),className:"sm:mr-auto",children:[e.jsx(Me,{className:"h-4 w-4 mr-2"}),"Delete"]}),e.jsx(p,{variant:"outline",onClick:()=>_(null),children:"Cancel"}),e.jsx(p,{onClick:rs,children:"Save Changes"})]})]})]})]})})]},s.id)})})]}),te.length>0&&e.jsx(Vs,{currentPage:ve,totalPages:Ge,onPageChange:Ye,itemsPerPage:Je,totalItems:_e})]})]})]})]})}export{mt as ShipmentsView};
